{"version":3,"sources":["anim/SingleAnimation.js","anim/UndoFunctions.js","anim/CustomEvents.js","anim/AnimatedObject.js","anim/AnimatedBTreeNode.js","anim/AnimatedCircle.js","anim/AnimatedCircularlyLinkedListNode.js","anim/AnimatedDoublyLinkedListNode.js","anim/AnimatedHighlightCircle.js","anim/AnimatedLabel.js","anim/AnimatedLine.js","anim/AnimatedLinkedListNode.js","anim/AnimatedRectangle.js","anim/AnimatedSkipListNode.js","anim/ObjectManager.js","anim/AnimationMain.js","components/Footer.js","components/Header.js","algo/Algorithm.js","algo/AVL.js","algo/ArrayList.js","algo/util/GraphValues.js","algo/Graph.js","algo/BFS.js","algo/BST.js","algo/BTree.js","algo/BoyerMoore.js","algo/BruteForce.js","algo/BubbleSort.js","algo/CircularlyLinkedList.js","algo/Hash.js","algo/ClosedHash.js","algo/CocktailSort.js","algo/DFS.js","algo/LCS.js","algo/DequeArray.js","algo/DequeLL.js","algo/util/PriorityQueue.js","algo/Dijkstras.js","algo/DoublyLinkedList.js","algo/Floyd.js","algo/Heap.js","algo/InsertionSort.js","algo/KMP.js","algo/Kruskals.js","algo/LSDRadix.js","algo/LinkedList.js","algo/MergeSort.js","algo/OpenHash.js","algo/Prims.js","algo/QueueArray.js","algo/QueueLL.js","algo/QuickSelect.js","algo/QuickSort.js","algo/RabinKarp.js","algo/SelectionSort.js","algo/SkipList.js","algo/SplayTree.js","AlgoList.js","algo/StackArray.js","algo/StackLL.js","examples/ExampleModals.js","screens/AlgoScreen.js","screens/AboutScreen.js","screens/HomeScreen.js","App.js","index.js"],"names":["SingleAnimation","id","fromX","fromY","toX","toY","this","objectID","UndoBlock","UndoMove","fmX","fmy","tx","ty","animationList","nextAnim","push","UndoCreate","world","removeObject","UndoHighlight","val","color","highlightValue","setHighlight","UndoSetHeight","height","setHeight","UndoSetWidth","width","setWidth","UndoSetNumElements","obj","newNumElems","sizeBeforeChange","getNumElements","sizeAfterChange","labels","Array","colors","i","getText","getTextColor","setNumElements","setText","setTextColor","UndoSetAlpha","alph","alphaVal","setAlpha","UndoSetNull","nv","nullVal","setNull","UndoSetPrevNull","setPrevNull","UndoSetNextNull","setNextNull","UndoSetForegroundColor","setForegroundColor","UndoSetBackgroundColor","setBackgroundColor","UndoSetHighlightIndex","index","setHighlightIndex","UndoSetText","str","newText","labelIndex","UndoSetTextColor","UndoHighlightEdge","from","to","fromID","toID","setEdgeHighlight","UndoSetEdgeThickness","thickness","setEdgeThickness","UndoSetEdgeColor","oldColor","setEdgeColor","UndoSetEdgeAlpha","oldAplha","alpha","setEdgeAlpha","UndoSetPosition","x","y","setNodePosition","UndoSetAlwaysOnTop","onTop","setAlwaysOnTop","UndoSetRectangleEdgeThickness","thicknessArray","setRectangleEdgeThickness","EventListener","events","kind","scope","func","scopeFunctions","length","functions","splice","undefined","event","objects","functs","j","call","AnimatedObject","backgroundColor","foregroundColor","highlighted","label","labelColor","layer","minHeightDiff","range","highlightIndex","highlightIndexDirty","addedToScene","newColor","newAlpha","value","highlightColor","Error","otherObject","right","getWidth","centerY","left","centerX","top","getHeight","bottom","xDelta","yDelta","xPos","yPos","frameNum","frameMod","delta","Math","abs","highlightDiff","hlIndex","AnimatedBTreeNode","widthPerElement","h","numLabels","labelColors","newNumElements","context","startX","isNaN","startY","strokeStyle","fillStyle","beginPath","moveTo","lineTo","closePath","stroke","fill","textAlign","textBaseline","labelX","labelY","fillText","anchor","textIndex","UndoDeleteBTreeNode","addBTreeNode","setLayer","AnimatedCircle","radius","getHeadPointerAttachPos","newWidth","xVec","yVec","len","sqrt","globalAlpha","arc","PI","lineWidth","font","strList","split","leftWidth","measureText","substring","centerWidth","textWidth","startingXForHighlight","leftStr","highlightStr","rightStr","mid","UndoDeleteCircle","addCircleObject","AnimatedCircularlyLinkedListNode","w","linkPercent","nullPointer","labelPosX","labelPosY","np","getClosestCardinalPoint","resetTextPosition","UndoDeleteCircularlyLinkedList","addCircularlyLinkedListObject","AnimatedDoublyLinkedListNode","prevNullPointer","nextNullPointer","closest","UndoDeleteDoublyLinkedList","pnp","nnp","addDoublyLinkedListObject","AnimatedHighlightCircle","UndoDeleteHighlightCircle","addHighlightCircleObject","AnimatedLabel","centered","initialWidth","strokeText","offset","indexOf","UndoDeleteLabel","addLabelObject","AnimatedLine","curve","directed","edgeLabel","anchorPoint","dirty","arrowHeight","arrowWidth","highlightVal","LINE_MAX_HEIGHT_DIFF","n","fromPos","getTailPointerAttachPos","toPos","deltaX","deltaY","midX","midY","controlX","controlY","quadraticCurveTo","midLen","sign","console","log","drawArrow","UndoConnect","createConnection","connectEdge","disconnect","AnimatedLinkedListNode","vertical","linkPosEnd","UndoDeleteLinkedList","addLinkedListObject","AnimatedRectangle","xJustify","yJustify","textColor","UndoDeleteRectangle","addRectangleObject","AnimatedSkipListNode","UndoDeleteSkipList","addSkipListObject","ObjectManager","canvasRef","nodes","edges","backEdges","activeLayers","ctx","current","getContext","framenum","statusReport","clearRect","alwaysOnTop","draw","pulseHighlight","shown","layers","resetLayers","objectColor","String","newNode","oldAlpha","nodeID","getAlpha","nextEdge","getHighlight","getHighlightIndex","objectIDfrom","objectIDto","undo","createUndoConnect","pop","deleted","undoStack","node2ID","identifier","len2","node1ID","oldObject","objectLabel","text","max","getTextWidth","lab","connectionPoint","fromObj","toObj","l","getNull","getLeftNull","getRightNull","setColor","id1","id2","alignTop","alignLeft","alignRight","getAlignRightPos","getAlignLeftPos","alignBottom","oldTop","oldHighlight","oldThickness","setThickness","oldEdgeThickness","getEdgeThickness","centering","newLabel","nodeLabel","linkPer","verticalOrientation","numElems","widthPerElem","newX","newY","getCookie","cookieName","cookies","document","cookie","substr","replace","unescape","setCookie","expireDays","exDate","Date","setDate","getDate","ANIMATION_SPEED_DEFAULT","addControlToAnimationBar","animBarRef","type","name","callback","element","createElement","setAttribute","onclick","onkeydown","tableEntry","appendChild","addDivisorToAnimationBar","divisorLeft","divisorRight","AnimationManager","objectManager","animatedObjects","animationPaused","awaitingStep","currentlyAnimating","animationSteps","currentAnimation","previousAnimationSteps","currFrame","animationBlockLength","currentBlock","doingUndo","undoAnimationStepIndices","undoAnimationStepIndicesStack","paused","canvas","skipBackButton","skipBack","stepBackButton","stepBack","playPauseBackButton","doPlayPause","stepForwardButton","step","skipForwardButton","skipForward","speed","parseInt","slider","Slider","defaultValue","onChange","e","setSpeed","controlBar","getElementById","newTable","midLevel","bottomLevel","ReactDOM","render","align","txtNode","createTextNode","heightEntry","field","changeSize","documentElement","clientWidth","intOnly","maxSize","size","keyASCII","window","keyCode","which","controlKey","sizeButton","addListener","animStarted","animEnded","animWaiting","animUndoUnavailable","percent","pausedValue","uppercase","toUpperCase","clr","charAt","newSpeed","floor","fireEvent","undoBlock","stopTimer","update","foundBreak","anyAnimations","act","params","commands","startNextBlock","startTimer","undoLastBlock","keepUndoing","finishUndoBlock","clearHistory","clearAllObjects","runFast","undoInitialStep","animateNext","addUndoAnimation","setAllLayers","lerp","getNodeX","getNodeY","disabled","timer","setTimeout","timeout","setPaused","clearInterval","move","removedEdges","deleteIncident","concat","getObject","createUndoDelete","connect","connectNext","connectPrev","connectCurve","connectSkipList","undoConnect","createCircle","createHighlightCircle","createRectangle","createLabel","createLinkedListNode","isArray","map","createDoublyLinkedListNode","createCircularlyLinkedListNode","createSkipListNode","createBTreeNode","oldText","oldThicknessArray","oldHeight","oldWidth","oldNull","oldElem","setPosition","oldX","oldY","oldIndex","bringToTop","moveToAlignRight","newXY","Footer","className","href","Header","state","menuVisible","toggleMenu","setState","Fragment","onClick","null","true","false","React","Component","addLabelToAlgorithmBar","labelName","group","addCheckboxToAlgorithmBar","boxLabel","checked","span","addRadioButtonGroupToAlgorithmBar","buttonNames","groupName","buttonList","button","topLevelTableEntry","addControlToAlgorithmBar","addDivisorToAlgorithmBar","addGroupToAlgorithmBar","horizontal","parentGroup","Algorithm","am","animationManager","disableUI","enableUI","canvasWidth","canvasHeight","actionHistory","recordAnimation","code","start_x","start_y","line_height","standard_color","codeID","nextIndex","cmd","reset","args","next","retVal","startNewAnimation","input","maxLen","test","funct","maxsize","newHeight","prototype","returnSubmitFloat","addReturnSubmit","action","returnSubmit","AVL","first_print_pos_y","PRINT_VERTICAL_GAP","print_max","startingX","addControls","EXPLANITORY_TEXT_X","EXPLANITORY_TEXT_Y","controls","insertField","insertCallback","bind","insertButton","deleteField","deleteCallback","deleteButton","findField","findCallback","findButton","printButton","printCallback","clearButton","clearCallback","predSuccButtonList","predButton","succButton","predSucc","treeRoot","insertedValue","normalizeNumber","implementAction","add","deletedValue","remove","findValue","findElement","printTree","clear","highlightID","firstLabel","HIGHLIGHT_COLOR","xPosOfNextLabel","FIRST_PRINT_POS_X","yPosOfNextLabel","printTreeRec","tree","nextLabelID","data","PRINT_COLOR","PRINT_HORIZONTAL_GAP","doFind","graphicID","curr","LINK_COLOR","remakeTree","addH","resizeTree","treeNodeID","heightLabelID","bfLabelID","STARTING_Y","FOREGROUND_COLOR","BACKGROUND_COLOR","HEIGHT_LABEL_COLOR","AVLNode","parent","connectSmart","balance","some","LINK_OPACITY","updateHeightAndBF","bf","HIGHLIGHT_LABEL_COLOR","singleRotateRight","singleRotateLeft","B","A","t2","isLeftChild","removeH","deleteNode","dummy","removeSucc","removePred","startingPoint","resizeWidths","rightWidth","setNewPositions","animateNewPositions","xPosition","yPosition","side","heightLabelX","bfLabelX","heightLabelY","bfLabelY","HEIGHT_DELTA","WIDTH_DELTA","recClear","hid","bfid","initialX","initialY","node","r","HIGHLIGHT_LINK_COLOR","HIGHLIGHT_CIRCLE_COLOR","ArrayList","setup","addVerticalGroup","addTopHorizontalGroup","addBottomHorizontalGroup","addValueField","addIndexCallback","addIndexField","addFrontButton","addFrontCallback","addBackButton","addBackCallback","addIndexButton","removeVerticalGroup","removeTopHorizontalGroup","removeBottomHorizontalGroup","removeField","removeIndexCallback","removeIndexButton","removeFrontButton","removeFrontCallback","removeBackButton","removeBackCallback","arrayID","arrayLabelID","arrayData","xpos","ypos","highlight1ID","addVal","resize","clearAll","elemToAdd","labPushID","labPushValID","arrayMoveID","labPopValID","labPushResizeID","arrayIDNew","arrayLabelIDNew","arrayDataNew","xposinit","yposinit","LARGE_ALLOWED","LARGE_CURVE","LARGE_X_POS_LOGICAL","LARGE_Y_POS_LOGICAL","SMALL_ALLLOWED","SMALL_CURVE","SMALL_X_POS_LOGICAL","SMALL_Y_POS_LOGICAL","BFS_DFS_ADJ_LIST","row","DIJKSTRAS_ADJ_LIST","Number","PRIMS_KRUSKALS_ADJ_LIST","KRUSKALS_DS_COLORS","Graph","defaultEdges","dir","dag","costs","currentLayer","isDAG","showEdgeCosts","setup_small","addDirection","verticalGroup","newGraphButton","newGraphCallback","defaultGraphButton","defaultGraphCallback","radioButtonList","undirectedGraphButton","directedGraphCallback","directedGraphButton","smallGraphButton","smallGraphCallback","largeGraphButton","largeGraphCallback","logicalButton","graphRepChangedCallback","adjacencyListButton","adjacencyMatrixButton","newDirected","resetAll","setup_large","newLayer","adj_matrix","adj_list_edges","adj_matrixID","circleID","highlightCircleL","x_pos_logical","y_pos_logical","highlightCircleAL","adj_list_x_start","adj_list_width","adj_list_y_start","adj_list_height","highlightCircleAM","adj_matrix_x_start","adj_matrix_width","adj_matrix_y_start","adj_matrix_height","clearEdges","buildEdges","adjustCurveForDirectedEdges","allowed","adj_list_elem_width","adj_list_elem_height","adj_list_spacing_after_list","adj_list_spacing_between_nodes","isLarge","bidirectional","toStr","edgePercent","random","buildAdjList","buildAdjMatrix","adj_matrix_index_x","adj_matrix_index_y","adj_list_list","adj_list_index","lastElem","nextXPos","hasEdges","vertex","fromCharCode","control","BFS","startField","startCallback","startButton","adjMatrix","messageID","visited","queueID","listID","visitedID","infoLabelID","VISITED_START_X","VISITED_START_Y","LIST_START_X","LIST_START_Y","QUEUE_START_X","QUEUE_START_Y","lastIndex","startvalue","charCodeAt","doBFS","startVetex","queue","rebuildEdges","shift","visitVertex","neighbor","highlightEdge","leaveVertex","BST","toClear","traversalButtonList","preOrderSelect","inOrderSelect","postOrderSelect","levelOrderSelect","traversal","traverseButton","traverseCallback","traverse","preOrderRec","clearOldObjects","levelOrder","postOrderRec","forEach","BSTNode","MESSAGE_X","MESSAGE_Y","BTree","starting_x","preemptiveSplit","max_keys","min_keys","split_index","max_degree","moveLabel1ID","moveLabel2ID","splitIndexButtonList","splitSecondSelect","splitThirdSelect","ignoreInputs","newMaxDegree","changeDegree","insertElement","deleteElement","clearTree","premptiveSplitBox","changePreemtiveSplit","newValue","isLeaf","numKeys","keys","getLabelX","children","deleteTree","degree","newDegree","maxDegreeRadioButtons","findInTree","BTreeNode","insertNotFull","insert","insertValue","insertIndex","findIndex","newTree","insertRepair","rightNode","currentParent","parentIndex","risingNode","leftNode","doDeleteNotEmpty","doDelete","nextNode","stealFromLeft","mergeRight","stealFromRight","maxNode","minNode","repairAfterDelete","parentNode","rightSib","fromParentIndex","tmpLabel1","tmpLabel2","leftSib","WIDTH_PER_ELEM","leftEdge","priorWidth","widths","treeWidth","BoyerMoore","textField","patternField","blotButton","buildLastOccurrenceTableCallback","textRowID","comparisonMatrixID","patternTableLabelID","patternTableCharacterID","patternTableIndexID","lastTableLabelID","lastTableCharacterID","lastTableValueID","pattern","find","onlyBuildLastOccurrenceTable","maxRows","getMaxRows","cellSize","col","lastTable","buildLastTable","iPointerID","jPointerID","k","textLength","labelsX","PATTERN_START_Y","LAST_TABLE_START_Y","patternTableStartX","lotStartX","lotPointerID","Object","char","BruteForce","lastSwapEnabled","BubbleSort","listField","sortCallback","lastSwapCheckbox","toggleLastSwap","displayData","list","sort","filter","slice","elemCounts","Map","letterMap","count","has","get","set","toString","currChar","ARRAY_START_X","sorted","end","lastSwapped","movePointers","swap","iXPos","jXPos","iLabelID","jLabelID","temp","CircularlyLinkedList","initialIndex","linkedListElemID","leftoverLabelID","resetNodePositions","labCopiedValID","copiedData","firstNodeID","lastX","lastY","LINKED_LIST_ELEM_HEIGHT","nextX","nextY","labPopID","nodePosX","LINKED_LIST_START_X","secondNodeY","LINKED_LIST_START_Y","removedNodeIndex","Hash","hashingIntegers","loadField","changeLoadFactor","loadButton","loadFactorCallBack","hashIntegerButton","changeHashTypeCallback","hashStringButton","newHashingIntegers","changeHashType","newHashingIntegerValue","labelID1","labelID2","table_size","currHash","HASH_LABEL_X","indexXPos","indexYPos","label1","wordToHashID","wordToHash","digits","hashValue","nextByte","nextByteID","resultDigits","floatingDigits","floatingVals","operatorID","barID","nextChar","carry","HASH_NUMBER_START_X","label2","HASH_NUMBER_START_Y","newLF","ELEMS_PER_ROW","ClosedHash","elements_per_row","linearProblingButton","linearProbeCallback","quadraticProbingButton","quadraticProbeCallback","doubleHashingButton","doubleHashingCallback","currentHashingTypeButtonState","newProbingType","skipDist","changeProbeType","elem","load_factor","ExplainLabel","doHash","getEmptyIndex","labID","hashTableVisual","hashTableValues","empty","DelIndexLabel","labelID","skipVal","nextLowestPrime","HashID","resetSkipDist","probes","removedIndex","start","HashIndexID","foundIndex","candidateIndex","getElemIndex","fromCycle","resizeLabel","loadFactorID","oldHashTableVisual","oldHashTableValues","oldskipDist","oldempty","olddeleted","oldIndexXPos","oldIndexYPos","oldindexLabelID","indexLabelID","nextYPos","elementsMoved","oldElement","LF","resetIndex","HASH2_LABEL_X","HASH2_LABEL_Y","CocktailSort","DFS","physicalStack","recursiveStackButton","stackCallback","physicalStackButton","stackID","stackLabelID","physical","doDFSStack","doDFSRecursive","startVertex","stack","stackStartY","stackSpacing","vertexID","recursionSpacingX","recursionSpacingY","currentID","dfsVisit","currVertex","messageX","nextMessage","LCS","S1Field","runCallback","S2Field","tableButton","oldIDs","run","str1","str2","clearOldIDs","buildTable","moveID","tableID","tableVals","S1TableID","S2TableID","tableXPos","tableYPos","buildLCSFromTable","TABLE_START_Y","TABLE_START_X","currX","currY","sequence","header","SEQUENCE_START_Y","topThick","leftThick","nextSequenceID","DequeArray","addField","addFirstButton","addFirstCallBack","addLastButton","addLastCallback","removeFirstButton","removeFirstCallback","removeLastButton","removeLastCallback","frontID","frontLabelID","frontPointerID","sizeID","sizeLabelID","front","ARRAY_START_Y","pushVal","addLast","removeFirst","removeLast","addFirst","elemToAddLast","labAddLastID","labAddLastValID","addIndex","QUEUE_LABEL_X","labelAddID","labelAddIDVal","frontxpos","frontypos","labremoveFirstID","labremoveFirstValID","removeFirstdVal","remLabelID","remLabelValID","remIndex","highlight2ID","removedVal","elemToEnqueue","isFront","labEnqueueID","labEnqueueValID","labEnqueueResizeID","frontOffset","extra","QUEUE_RESIZE_LABEL_X","labEnqueueValIDNew","DequeLL","addFirstCallback","PriorityQueue","backingArray","priority","a","b","Dijkstras","distance","distanceID","pq","tableEntryHeight","comparisonMessageID","doDijkstra","enqueue","includes","dequeue","pqIDs","getIDs","curDist","edgDist","newDist","oldDist","oldDistStr","newPqIDs","DoublyLinkedList","Floyd","costTable","pathTable","alwaysUseINF","cost_table_width","cost_table_height","cost_table_start_x","cost_table_start_y","path_table_width","path_table_height","path_table_start_x","path_table_start_y","node_1_x_pos","node_1_y_pos","node_2_x_pos","node_2_y_pos","node_3_x_pos","node_3_y_pos","message_x","message_y","costTableID","pathTableID","pathIndexXID","pathIndexYID","costIndexXID","costIndexYID","node3ID","costTableHeader","pathTableHeader","getCostLabel","doFloydWarshall","HEAP_X_POSITIONS","HEAP_Y_POSITIONS","Heap","createArray","removeButton","removeCallback","horizontalGroup","buildHeapField","buildHeapCallback","buildHeapButton","minMaxButtonList","minHeapButton","minHeapCallback","maxHeapButton","maxHeapCallback","isMinHeap","arrayLabels","arrayRects","circleObjs","arrayXPositions","currentHeapSize","swapLabel1","swapLabel2","swapLabel3","swapLabel4","descriptLabel1","descriptLabel2","buildHeap","index1","index2","tmp","childIndex","setIndexHighlight","downheapCheckRightChild","downheapCompare","pushDown","unshift","nextElem","ARRAY_SIZE","currentIndex","upheapCompare","InsertionSort","KMP","bftButton","buildFailureTableCallback","failureTableLabelID","failureTableCharacterID","failureTableValueID","onlyBuildFailureTable","failureTable","buildFailureTable","tableStartX","fjPointerID","f0PointerID","f1PointerID","nextAlignment","FAILURE_TABLE_START_Y","Kruskals","setID","setIndexID","setData","edgesListLeftID","edgesListRightID","SET_ARRAY_START_X","messageLabelID","SET_ARRAY_START_Y","edgesListLeft","edgesListRight","doKruskal","recolorGraph","EDGE_LIST_START_X","tmpLeftID","tmpRightID","tmpLeft","tmpRight","edgeCount","findLabelLeft","findLabelRight","highlightCircle1","highlightCircle2","highlightCircle3","edgesAdded","nextListIndex","CURRENT_LABEL_X","CURRENT_LABEL_Y","newPos","leftRoot","rightRoot","minRoot","min","maxRoot","firstMatch","LSDRadix","arrayDisplay","bucketsData","bucketsID","bucketsDisplay","greatest","log10","longData","display","digit","nthDigit","idBucket","dataBucket","displayBucket","BUCKETS_START_Y","pow","LinkedList","MergeSort","kPointerID","ceil","leftHelper","rightHelper","merge","prevOffset","tempArrayID","drawArrayAndCopy","extraOffset","copyData","currOffset","leftOffset","rightOffset","currArrayID","tempArray","tempDisplay","bottomYPos","kXPos","topYPos","movePointer","fromIndex","toIndex","fromOffset","toOffset","fromRow","toRow","cellID","pointerID","fromXPos","fromYPos","toXPos","toYPos","POINTER_ARRAY_ELEM_WIDTH","OpenHash","POINTER_ARRAY_ELEM_Y","LinkedListNode","found","compareIndex","repositionList","tmpPrev","hashTableIndices","nextID","Prims","doPrim","weight","edge","edgeID","edgeStr","QueueArray","enqueueField","enqueueCallback","enqueueButton","dequeueButton","dequeueCallback","labIndexID","labIndexValID","newTail","labDequeueID","labDequeueValID","dequeuedVal","QueueLL","tail_pos_y","tail_label_y","headID","headLabelID","tailID","tailLabelID","elemToPush","resetLinkedListPositions","QuickSelect","kField","pivotButtonList","randomPivotSelect","minPivotSelect","firstPivotSelect","perfectPivotSelect","pivotType","pPointerID","listStr","helper","pivot","midIndex","pXPos","swapPivot","other","moveJ","lLabelID","lXPos","pLabelID","QuickSort","RabinKarp","baseField","baseButton","baseCallback","baseLabelID","characterValuesLabelID","textHashLabelID","textHashCalculationID","patternHashLabelID","patternHashCalculationID","baseValue","toLowerCase","textCalculation","textHash","patternCalculation","patternHash","base","runningBase","calculationsX","SelectionSort","sortButton","minButton","minCallback","maxButton","maxCallback","isMin","circleShift","toSwap","compare","SkipList","topHorizontalGroup","bottomHorizontalGroup","verticalGroupRandom","topHorizontalGroupRandom","bottomHorizontalGroupRandom","addWithHeadsCallback","headsField","addWithHeadsButton","addValueFieldRandom","addRandomlyCallback","addRandomlyButton","getField","getCallback","getButton","NEGATIVE_INFINITY","POSITIVE_INFINITY","SKIP_LIST_START_X","heads","valueLabelId","valueStringId","cfLabelId","cfStringId","headsString","rightPhantomsCol","newCol","foundDuplicate","nextCol","getNextCol","shiftColumns","prevCol","getPrevCol","removedCol","maxHeight","leftPhantomID","rightPhantomID","SplayTree","splay","zigZigRight","doubleRotateRight","zigZigLeft","doubleRotateLeft","treeRot","splayUp","insertElem","treeDelete","valueToDelete","inTree","oldGraphicID","largestLeft","findMax","C","t3","algoMap","algos","StackArray","pushField","pushCallback","pushButton","popButton","popCallback","topID","topLabelID","clearData","popVal","StackLL","Dijkstra","Prim","Kruskal","algoList","AlgoScreen","props","updateDimensions","animManag","body","toggleExamples","examplesEnabled","algoName","location","pathname","createRef","ReactGA","pageview","currentAlg","addEventListener","removeEventListener","modals","ref","AboutScreen","HomeScreen","exact","path","idx","key","App","initialize","basename","component"],"mappings":"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OAAQ9D,IACzClC,KAAK4kB,SAAS1iB,GAAGsb,UAAW,M,GA/jBQ2E,I,QCrDjCuL,GAAgB,CACrB,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IAIIC,GAAc,CACnB,CAAC,EAAG,GAAI,GAAK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAM,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACpD,CAAC,GAAK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACtD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,KACrD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACpD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACpD,CAAC,EAAG,EAAG,EAAG,EAAG,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","file":"static/js/main.585dd4f5.chunk.js","sourcesContent":["export default class SingleAnimation {\n\tconstructor(id, fromX, fromY, toX, toY) {\n\t\tthis.objectID = id;\n\t\tthis.fromX = fromX;\n\t\tthis.fromY = fromY;\n\t\tthis.toX = toX;\n\t\tthis.toY = toY;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Base \"class\": UndoBlock\n\nimport SingleAnimation from './SingleAnimation';\n\nexport class UndoBlock {\n\taddUndoAnimation() {\n\t\treturn false;\n\t}\n\n\tundoInitialStep() {}\n}\n\nexport class UndoMove extends UndoBlock {\n\tconstructor(id, fmX, fmy, tx, ty) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.fromX = fmX;\n\t\tthis.fromY = fmy;\n\t\tthis.toX = tx;\n\t\tthis.toY = ty;\n\t}\n\n\taddUndoAnimation(animationList) {\n\t\tconst nextAnim = new SingleAnimation(\n\t\t\tthis.objectID,\n\t\t\tthis.fromX,\n\t\t\tthis.fromY,\n\t\t\tthis.toX,\n\t\t\tthis.toY,\n\t\t);\n\t\tanimationList.push(nextAnim);\n\t\treturn true;\n\t}\n}\n\nexport class UndoCreate extends UndoBlock {\n\tconstructor(id) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.removeObject(this.objectID);\n\t}\n}\n\nexport class UndoHighlight extends UndoBlock {\n\tconstructor(id, val, color) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.highlightValue = val;\n\t\tthis.color = color;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setHighlight(this.objectID, this.highlightValue, this.color);\n\t}\n}\n\nexport class UndoSetHeight extends UndoBlock {\n\tconstructor(id, val) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.height = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setHeight(this.objectID, this.height);\n\t}\n}\n\nexport class UndoSetWidth extends UndoBlock {\n\tconstructor(id, val) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.width = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setWidth(this.objectID, this.width);\n\t}\n}\n\nexport class UndoSetNumElements extends UndoBlock {\n\tconstructor(obj, newNumElems) {\n\t\tsuper();\n\t\tthis.objectID = obj.objectID;\n\t\tthis.sizeBeforeChange = obj.getNumElements();\n\t\tthis.sizeAfterChange = newNumElems;\n\t\tif (this.sizeBeforeChange > this.sizeAfterChange) {\n\t\t\tthis.labels = new Array(this.sizeBeforeChange - this.sizeAfterChange);\n\t\t\tthis.colors = new Array(this.sizeBeforeChange - this.sizeAfterChange);\n\t\t\tfor (let i = 0; i < this.sizeBeforeChange - this.sizeAfterChange; i++) {\n\t\t\t\tthis.labels[i] = obj.getText(i + this.sizeAfterChange);\n\t\t\t\tthis.colors[i] = obj.getTextColor(i + this.sizeAfterChange);\n\t\t\t}\n\t\t}\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNumElements(this.objectID, this.sizeBeforeChange);\n\t\tif (this.sizeBeforeChange > this.sizeAfterChange) {\n\t\t\tfor (let i = 0; i < this.sizeBeforeChange - this.sizeAfterChange; i++) {\n\t\t\t\tworld.setText(this.objectID, this.labels[i], i + this.sizeAfterChange);\n\t\t\t\tworld.setTextColor(this.objectID, this.colors[i], i + this.sizeAfterChange);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class UndoSetAlpha extends UndoBlock {\n\tconstructor(id, alph) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.alphaVal = alph;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setAlpha(this.objectID, this.alphaVal);\n\t}\n}\n\nexport class UndoSetNull extends UndoBlock {\n\tconstructor(id, nv) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.nullVal = nv;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNull(this.objectID, this.nullVal);\n\t}\n}\n\nexport class UndoSetPrevNull extends UndoBlock {\n\tconstructor(id, nv) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.nullVal = nv;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setPrevNull(this.objectID, this.nullVal);\n\t}\n}\n\nexport class UndoSetNextNull extends UndoBlock {\n\tconstructor(id, nv) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.nullVal = nv;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNextNull(this.objectID, this.nullVal);\n\t}\n}\n\nexport class UndoSetForegroundColor extends UndoBlock {\n\tconstructor(id, color) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.color = color;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setForegroundColor(this.objectID, this.color);\n\t}\n}\n\nexport class UndoSetBackgroundColor extends UndoBlock {\n\tconstructor(id, color) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.color = color;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setBackgroundColor(this.objectID, this.color);\n\t}\n}\n\nexport class UndoSetHighlightIndex extends UndoBlock {\n\tconstructor(id, index) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.index = index;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setHighlightIndex(this.objectID, this.index);\n\t}\n}\n\nexport class UndoSetText extends UndoBlock {\n\tconstructor(id, str, index) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.newText = str;\n\t\tthis.labelIndex = index;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setText(this.objectID, this.newText, this.labelIndex);\n\t}\n}\n\nexport class UndoSetTextColor extends UndoBlock {\n\tconstructor(id, color, index) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.color = color;\n\t\tthis.index = index;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setTextColor(this.objectID, this.color, this.index);\n\t}\n}\n\nexport class UndoHighlightEdge extends UndoBlock {\n\tconstructor(from, to, val) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.highlightValue = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeHighlight(this.fromID, this.toID, this.highlightValue);\n\t}\n}\n\nexport class UndoSetEdgeThickness extends UndoBlock {\n\tconstructor(from, to, val) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.thickness = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeThickness(this.fromID, this.toID, this.thickness);\n\t}\n}\n\nexport class UndoSetEdgeColor extends UndoBlock {\n\tconstructor(from, to, oldColor) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.color = oldColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeColor(this.fromID, this.toID, this.color);\n\t}\n}\n\nexport class UndoSetEdgeAlpha extends UndoBlock {\n\tconstructor(from, to, oldAplha) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.alpha = oldAplha;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeAlpha(this.fromID, this.toID, this.alpha);\n\t}\n}\n\nexport class UndoSetPosition extends UndoBlock {\n\tconstructor(id, x, y) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t}\n}\n\nexport class UndoSetAlwaysOnTop extends UndoBlock {\n\tconstructor(id, onTop) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.onTop = onTop;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setAlwaysOnTop(this.objectID, this.onTop);\n\t}\n}\n\nexport class UndoSetRectangleEdgeThickness extends UndoBlock {\n\tconstructor(id, thicknessArray) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.thicknessArray = thicknessArray;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setRectangleEdgeThickness(this.objectID, this.thicknessArray);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nexport default class EventListener {\n\tconstructor() {\n\t\tthis.events = [];\n\t}\n\n\tremoveListener(kind, scope, func) {\n\t\tif (this.events[kind] == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet scopeFunctions = null;\n\t\tlet i;\n\t\tfor (i = 0; i < this.events[kind].length; i++) {\n\t\t\tif (this.events[kind][i].scope === scope) {\n\t\t\t\tscopeFunctions = this.events[kind][i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (scopeFunctions == null) {\n\t\t\treturn;\n\t\t}\n\t\tfor (i = 0; i < scopeFunctions.functions.length; i++) {\n\t\t\tif (scopeFunctions.functions[i] === func) {\n\t\t\t\tscopeFunctions.functions.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\taddListener(kind, scope, func) {\n\t\tif (this.events[kind] === undefined) {\n\t\t\tthis.events[kind] = [];\n\t\t}\n\t\tlet i;\n\t\tlet scopeFunctions = null;\n\t\tfor (i = 0; i < this.events[kind].length; i++) {\n\t\t\tif (this.events[kind][i].scope === scope) {\n\t\t\t\tscopeFunctions = this.events[kind][i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (scopeFunctions === null) {\n\t\t\tthis.events[kind].push({ scope: scope, functions: [] });\n\t\t\tscopeFunctions = this.events[kind][this.events[kind].length - 1];\n\t\t}\n\t\tfor (i = 0; i < scopeFunctions.functions.length; i++) {\n\t\t\tif (scopeFunctions.functions[i] === func) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tscopeFunctions.functions.push(func);\n\t}\n\n\tfireEvent(kind, event) {\n\t\t// TODO:  Should add a deep clone here ...\n\t\tif (this.events[kind] !== undefined) {\n\t\t\tfor (let i = 0; i < this.events[kind].length; i++) {\n\t\t\t\tconst objects = this.events[kind][i];\n\t\t\t\tconst functs = objects.functions;\n\t\t\t\tconst scope = objects.scope;\n\t\t\t\tfor (let j = 0; j < functs.length; j++) {\n\t\t\t\t\tconst func = functs[j];\n\t\t\t\t\tfunc.call(scope, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nexport default class AnimatedObject {\n\tconstructor() {\n\t\tthis.objectID = -1;\n\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\n\t\tthis.backgroundColor = '#FFFFFF';\n\t\tthis.foregroundColor = '#000000';\n\t\tthis.highlighted = false;\n\n\t\tthis.label = '';\n\t\tthis.labelColor = '#000000';\n\n\t\tthis.layer = 0;\n\t\tthis.alpha = 1.0;\n\t\tthis.minHeightDiff = 3;\n\t\tthis.range = 5;\n\n\t\tthis.highlightIndex = -1;\n\t\tthis.highlightIndexDirty = true;\n\n\t\tthis.addedToScene = true;\n\t}\n\n\tsetBackgroundColor(newColor) {\n\t\tthis.backgroundColor = newColor;\n\t}\n\n\tsetNull() {}\n\n\tgetNull() {\n\t\treturn false;\n\t}\n\n\tsetAlpha(newAlpha) {\n\t\tthis.alpha = newAlpha;\n\t}\n\n\tgetAlpha() {\n\t\treturn this.alpha;\n\t}\n\n\tsetForegroundColor(newColor) {\n\t\tthis.foregroundColor = newColor;\n\t\tthis.labelColor = newColor;\n\t}\n\n\tgetHighlight() {\n\t\treturn this.highlighted;\n\t}\n\n\tgetWidth() {\n\t\t// TODO:  Do we want to throw here?  Should always override this ...\n\t\treturn 0;\n\t}\n\n\tgetHeight() {\n\t\t// TODO:  Do we want to throw here?  Should always override this ...\n\t\treturn 0;\n\t}\n\n\tsetHighlight(value, color) {\n\t\tthis.highlighted = value;\n\t\tthis.highlightColor = color || '#ff0000';\n\t}\n\n\tcenterX() {\n\t\treturn this.x;\n\t}\n\n\tsetWidth() {\n\t\tthrow new Error('setWidth() should be implemented in a base class');\n\t}\n\n\tcenterY() {\n\t\treturn this.y;\n\t}\n\n\tgetAlignLeftPos(otherObject) {\n\t\treturn [otherObject.right() + this.getWidth() / 2, otherObject.centerY()];\n\t}\n\n\tgetAlignRightPos(otherObject) {\n\t\treturn [otherObject.left() - this.getWidth() / 2, otherObject.centerY()];\n\t}\n\n\tgetAlignTopPos(otherObject) {\n\t\treturn [otherObject.centerX(), otherObject.top() - this.getHeight() / 2];\n\t}\n\n\tgetAlignBottomPos(otherObject) {\n\t\treturn [otherObject.centerX(), otherObject.bottom() + this.getHeight() / 2];\n\t}\n\n\talignLeft(otherObject) {\n\t\t// Assuming centering.  Overridden method could modify if not centered\n\t\t//  (See AnimatedLabel, for instance)\n\t\tthis.y = otherObject.centerY();\n\t\tthis.x = otherObject.right() + this.getWidth() / 2;\n\t}\n\n\talignRight(otherObject) {\n\t\t// Assuming centering.  Overridden method could modify if not centered\n\t\t//  (See AnimatedLabel, for instance)\n\t\tthis.y = otherObject.centerY();\n\t\tthis.x = otherObject.left() - this.getWidth() / 2;\n\t}\n\n\talignTop(otherObject) {\n\t\t// Assuming centering.  Overridden method could modify if not centered\n\t\tthis.x = otherObject.centerX();\n\t\tthis.y = otherObject.top() - this.getHeight() / 2;\n\t}\n\n\talignBottom(otherObject) {\n\t\tthis.x = otherObject.centerX();\n\t\tthis.y = otherObject.bottom() + this.getHeight() / 2;\n\t}\n\n\tgetClosestCardinalPoint(fromX, fromY) {\n\t\tlet xDelta;\n\t\tlet yDelta;\n\t\tlet xPos;\n\t\tlet yPos;\n\n\t\tif (fromX < this.left()) {\n\t\t\txDelta = this.left() - fromX;\n\t\t\txPos = this.left();\n\t\t} else if (fromX > this.right()) {\n\t\t\txDelta = fromX - this.right();\n\t\t\txPos = this.right();\n\t\t} else {\n\t\t\txDelta = 0;\n\t\t\txPos = this.centerX();\n\t\t}\n\n\t\tif (fromY < this.top()) {\n\t\t\tyDelta = this.top() - fromY;\n\t\t\tyPos = this.top();\n\t\t} else if (fromY > this.bottom()) {\n\t\t\tyDelta = fromY - this.bottom();\n\t\t\tyPos = this.bottom();\n\t\t} else {\n\t\t\tyDelta = 0;\n\t\t\tyPos = this.centerY();\n\t\t}\n\n\t\tif (yDelta > xDelta) {\n\t\t\txPos = this.centerX();\n\t\t} else {\n\t\t\tyPos = this.centerY();\n\t\t}\n\n\t\treturn [xPos, yPos];\n\t}\n\n\tcentered() {\n\t\treturn false;\n\t}\n\n\tpulseHighlight(frameNum) {\n\t\tif (this.highlighted) {\n\t\t\tconst frameMod = frameNum / 7.0;\n\t\t\tconst delta = Math.abs((frameMod % (2 * this.range - 2)) - this.range + 1);\n\t\t\tthis.highlightDiff = delta + this.minHeightDiff;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos() {\n\t\treturn [this.x, this.y];\n\t}\n\n\tgetHeadPointerAttachPos() {\n\t\treturn [this.x, this.y];\n\t}\n\n\tidentifier() {\n\t\treturn this.objectID;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColor;\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColor = color;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t}\n\n\tsetHighlightIndex(hlIndex) {\n\t\tthis.highlightIndex = hlIndex;\n\t\tthis.highlightIndexDirty = true;\n\t}\n\n\tgetHighlightIndex() {\n\t\treturn this.highlightIndex;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nconst MIN_WIDTH = 10;\nconst EDGE_POINTER_DISPLACEMENT = 5;\n\nexport default class AnimatedBTreeNode extends AnimatedObject {\n\tconstructor(objectID, widthPerElement, h, numLabels, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\n\t\tthis.widthPerElement = widthPerElement;\n\t\tthis.h = h;\n\t\tthis.numLabels = numLabels;\n\t\tthis.labels = [];\n\t\tthis.labelColors = [];\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tthis.labelColors[i] = this.foregroundColor;\n\t\t}\n\t}\n\n\tgetNumElements() {\n\t\treturn this.numLabels;\n\t}\n\n\tgetWidth() {\n\t\tif (this.numLabels > 0) {\n\t\t\treturn this.widthPerElement * this.numLabels;\n\t\t} else {\n\t\t\treturn MIN_WIDTH;\n\t\t}\n\t}\n\n\tsetNumElements(newNumElements) {\n\t\tif (this.numLabels < newNumElements) {\n\t\t\tfor (let i = this.numLabels; i < newNumElements; i++) {\n\t\t\t\tthis.labels[i] = '';\n\t\t\t\tthis.labelColors[i] = this.foregroundColor;\n\t\t\t}\n\t\t\tthis.numLabels = newNumElements;\n\t\t} else if (this.numLabels > newNumElements) {\n\t\t\tfor (let i = newNumElements; i < this.numLabels; i++) {\n\t\t\t\tthis.labels[i] = null;\n\t\t\t}\n\t\t\tthis.numLabels = newNumElements;\n\t\t}\n\t}\n\n\tleft() {\n\t\treturn this.x - this.getWidth() / 2.0;\n\t}\n\n\tright() {\n\t\treturn this.x + this.getWidth() / 2.0;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2.0;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2.0;\n\t}\n\n\tdraw(context) {\n\t\tlet startX;\n\n\t\tstartX = this.left();\n\t\tif (isNaN(startX)) {\n\t\t\tstartX = 0;\n\t\t}\n\t\tconst startY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\tcontext.fillStyle = '#FF0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.getWidth() + this.highlightDiff,\n\t\t\t\tstartY - this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.getWidth() + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.getWidth(), startY);\n\t\tcontext.lineTo(startX + this.getWidth(), startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.textBaseline = 'middle';\n\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tconst labelX =\n\t\t\t\tthis.x -\n\t\t\t\t(this.widthPerElement * this.numLabels) / 2 +\n\t\t\t\tthis.widthPerElement / 2 +\n\t\t\t\ti * this.widthPerElement;\n\t\t\tconst labelY = this.y;\n\n\t\t\tcontext.fillStyle = this.labelColors[i];\n\t\t\tcontext.fillText(this.labels[i], labelX, labelY);\n\t\t}\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tsetForegroundColor(newColor) {\n\t\tthis.foregroundColor = newColor;\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tthis.labelColor[i] = newColor;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tif (anchor === 0) {\n\t\t\treturn [this.left() + EDGE_POINTER_DISPLACEMENT, this.y];\n\t\t} else if (anchor === this.numLabels) {\n\t\t\treturn [this.right() - EDGE_POINTER_DISPLACEMENT, this.y];\n\t\t} else {\n\t\t\treturn [this.left() + anchor * this.widthPerElement, this.y];\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tif (fromY < this.y - this.h / 2) {\n\t\t\treturn [this.x, this.y - this.h / 2];\n\t\t} else if (this.fromY > this.y + this.h / 2) {\n\t\t\treturn [this.x, this.y + this.h / 2];\n\t\t} else if (fromX < this.x - this.getWidth() / 2) {\n\t\t\treturn [this.x - this.getWidth() / 2, this.y];\n\t\t} else {\n\t\t\treturn [this.x + this.getWidth() / 2, this.y];\n\t\t}\n\t}\n\n\tgetTextColor(textIndex) {\n\t\ttextIndex = textIndex || 0;\n\t\treturn this.labelColors[textIndex];\n\t}\n\n\tgetText(index) {\n\t\tindex = index || 0;\n\t\treturn this.labels[index];\n\t}\n\n\tsetTextColor(color, textIndex) {\n\t\ttextIndex = textIndex || 0;\n\t\tthis.labelColors[textIndex] = color;\n\t}\n\n\tsetText(newText, textIndex) {\n\t\ttextIndex = textIndex || 0;\n\t\tthis.labels[textIndex] = newText;\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteBTreeNode(\n\t\t\tthis.objectID,\n\t\t\tthis.numLabels,\n\t\t\tthis.labels,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.widthPerElement,\n\t\t\tthis.h,\n\t\t\tthis.labelColors,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteBTreeNode extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tnumLabels,\n\t\tlabels,\n\t\tx,\n\t\ty,\n\t\twidthPerElement,\n\t\th,\n\t\tlabelColors,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlayer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.numLabels = numLabels;\n\t\tthis.labels = labels;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.widthPerElement = widthPerElement;\n\t\tthis.h = h;\n\t\tthis.labelColors = labelColors;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.layer = layer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addBTreeNode(\n\t\t\tthis.objectID,\n\t\t\tthis.widthPerElement,\n\t\t\tthis.h,\n\t\t\tthis.numLabels,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tworld.setText(this.objectID, this.labels[i], i);\n\t\t\tworld.setTextColor(this.objectID, this.labelColors[i], i);\n\t\t}\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject';\nimport { UndoBlock } from './UndoFunctions';\n\nexport default class AnimatedCircle extends AnimatedObject {\n\tconstructor(objectID, label) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.label = label;\n\n\t\tthis.radius = 20;\n\t\tthis.thickness = 3;\n\t\tthis.highlightIndex = -1;\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY) {\n\t\treturn this.getHeadPointerAttachPos(fromX, fromY);\n\t}\n\n\tgetWidth() {\n\t\treturn this.radius * 2;\n\t}\n\n\tsetWidth(newWidth) {\n\t\tthis.radius = newWidth / 2;\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tconst xVec = fromX - this.x;\n\t\tconst yVec = fromY - this.y;\n\t\tconst len = Math.sqrt(xVec * xVec + yVec * yVec);\n\t\tif (len === 0) return [this.x, this.y];\n\t\treturn [this.x + (xVec / len) * this.radius, this.y + (yVec / len) * this.radius];\n\t}\n\n\tsetHighlightIndex(hlIndex) {\n\t\tthis.highlightIndex = hlIndex;\n\t\tthis.highlightIndexDirty = true;\n\t}\n\n\tdraw(context) {\n\t\tcontext.globalAlpha = this.alpha;\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.fillStyle = this.highlightColor;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.arc(this.x, this.y, this.radius + this.highlightDiff, 0, Math.PI * 2, true);\n\t\t\tcontext.closePath();\n\t\t\tcontext.fill();\n\t\t}\n\n\t\tcontext.fillStyle = this.backgroundColor;\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.lineWidth = 1.2;\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);\n\t\tcontext.closePath();\n\t\tcontext.fill();\n\t\tcontext.stroke();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\t\tcontext.fillStyle = this.foregroundColor;\n\t\tconst strList = this.label.split('\\n');\n\t\tif (strList.length === 1) {\n\t\t\tif (this.highlightIndexDirty && this.highlightIndex !== -1) {\n\t\t\t\tthis.leftWidth = context.measureText(\n\t\t\t\t\tthis.label.substring(0, this.highlightIndex),\n\t\t\t\t).width;\n\t\t\t\tthis.centerWidth = context.measureText(\n\t\t\t\t\tthis.label.substring(this.highlightIndex, this.highlightIndex + 1),\n\t\t\t\t).width;\n\t\t\t\tthis.textWidth = context.measureText(this.label).width;\n\t\t\t\tthis.highlightIndexDirty = false;\n\t\t\t}\n\t\t\tif (this.highlightIndex !== -1 && this.highlightIndex < this.label.length) {\n\t\t\t\tconst startingXForHighlight = this.x - this.textWidth / 2;\n\t\t\t\tcontext.textAlign = 'left';\n\t\t\t\tconst leftStr = this.label.substring(0, this.highlightIndex);\n\t\t\t\tconst highlightStr = this.label.substring(\n\t\t\t\t\tthis.highlightIndex,\n\t\t\t\t\tthis.highlightIndex + 1,\n\t\t\t\t);\n\t\t\t\tconst rightStr = this.label.substring(this.highlightIndex + 1);\n\t\t\t\tcontext.fillText(leftStr, startingXForHighlight, this.y);\n\t\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\t\tcontext.fillStyle = '#FF0000';\n\t\t\t\tcontext.fillText(highlightStr, startingXForHighlight + this.leftWidth, this.y);\n\n\t\t\t\tcontext.strokeStyle = this.labelColor;\n\t\t\t\tcontext.fillStyle = this.labelColor;\n\t\t\t\tcontext.fillText(\n\t\t\t\t\trightStr,\n\t\t\t\t\tstartingXForHighlight + this.leftWidth + this.centerWidth,\n\t\t\t\t\tthis.y,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcontext.fillText(this.label, this.x, this.y);\n\t\t\t}\n\t\t} else if (strList.length % 2 === 0) {\n\t\t\tconst mid = strList.length / 2;\n\t\t\tfor (let i = 0; i < strList.length / 2; i++) {\n\t\t\t\tcontext.fillText(strList[mid - i - 1], this.x, this.y - (i + 0.5) * 12);\n\t\t\t\tcontext.fillText(strList[mid + i], this.x, this.y + (i + 0.5) * 12);\n\t\t\t}\n\t\t} else {\n\t\t\tconst mid = (strList.length - 1) / 2;\n\t\t\tcontext.fillText(strList[mid], this.x, this.y);\n\t\t\tfor (let i = 0; i < mid; i++) {\n\t\t\t\tcontext.fillText(strList[mid - (i + 1)], this.x, this.y - (i + 1) * 12);\n\t\t\t\tcontext.fillText(strList[mid + (i + 1)], this.x, this.y + (i + 1) * 12);\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteCircle(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.radius,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteCircle extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tx,\n\t\ty,\n\t\tforegroundColor,\n\t\tbackgroundColor,\n\t\tlayer,\n\t\tradius,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.layer = layer;\n\t\tthis.radius = radius;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addCircleObject(this.objectID, this.label);\n\t\tworld.setWidth(this.objectID, this.radius * 2);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setForegroundColor(this.objectID, this.foregroundColor);\n\t\tworld.setBackgroundColor(this.objectID, this.backgroundColor);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedCircularlyLinkedListNode extends AnimatedObject {\n\tconstructor(objectID, label, w, h, linkPercent, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.nullPointer = false;\n\n\t\tthis.label = label;\n\t\tthis.labelPosX = 0;\n\t\tthis.labelPosY = 0;\n\t\tthis.labelColor = foregroundColor;\n\t}\n\n\tsetNull(np) {\n\t\tif (this.nullPointer !== np) {\n\t\t\tthis.nullPointer = np;\n\t\t}\n\t}\n\n\tgetNull() {\n\t\treturn this.nullPointer;\n\t}\n\n\tleft() {\n\t\treturn this.x - (this.w * (1 - this.linkPercent)) / 2;\n\t}\n\n\tright() {\n\t\treturn this.x + (this.w * (this.linkPercent + 1)) / 2;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2.0;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2.0;\n\t}\n\n\tresetTextPosition() {\n\t\tthis.labelPosX = this.x;\n\t\tthis.labelPosY = this.y;\n\t}\n\n\tgetTailPointerAttachPos() {\n\t\treturn [this.x + this.w / 2.0, this.y];\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tif (fromX < this.x) {\n\t\t\treturn this.getClosestCardinalPoint(fromX, fromY); // Normal anchor\n\t\t} else {\n\t\t\treturn [this.x, this.bottom()]; // Curved pointer coming from the right, connect to bottom\n\t\t}\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t\tthis.resetTextPosition();\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tstartX = this.left();\n\t\tstartY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\tcontext.fillStyle = '#FF0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tstartX = this.right() - this.w * this.linkPercent;\n\t\tstartY = this.top();\n\n\t\tcontext.lineWidth = 1;\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tif (this.nullPointer) {\n\t\t\tcontext.lineTo(this.right(), startY + this.h);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\n\t\tthis.resetTextPosition();\n\t\tcontext.fillStyle = this.labelColor;\n\t\tcontext.fillText(this.label, this.labelPosX, this.labelPosY);\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColor = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColor;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteCircularlyLinkedList(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.labelColor,\n\t\t\tthis.layer,\n\t\t\tthis.nullPointer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteCircularlyLinkedList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlinkPercent,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlabelColor,\n\t\tlayer,\n\t\tnullPointer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.labelColor = labelColor;\n\t\tthis.layer = layer;\n\t\tthis.nullPointer = nullPointer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addCircularlyLinkedListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setNull(this.objectID, this.nullPointer);\n\t\tworld.setTextColor(this.objectID, this.labelColor);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedDoublyLinkedListNode extends AnimatedObject {\n\tconstructor(objectID, label, w, h, linkPercent, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.prevNullPointer = false;\n\t\tthis.nextNullPointer = false;\n\n\t\tthis.label = label;\n\t\tthis.labelPosX = 0;\n\t\tthis.labelPosY = 0;\n\t\tthis.labelColor = foregroundColor;\n\t}\n\n\tsetPrevNull(np) {\n\t\tif (this.prevNullPointer !== np) {\n\t\t\tthis.prevNullPointer = np;\n\t\t}\n\t}\n\n\tsetNextNull(np) {\n\t\tif (this.nextNullPointer !== np) {\n\t\t\tthis.nextNullPointer = np;\n\t\t}\n\t}\n\n\tgetLeftNull() {\n\t\treturn this.prevNullPointer;\n\t}\n\n\tgetRightNull() {\n\t\treturn this.nextNullPointer;\n\t}\n\n\tleft() {\n\t\treturn this.x - (this.w * (1 - this.linkPercent)) / 2;\n\t}\n\n\tright() {\n\t\treturn this.x + (this.w * (this.linkPercent + 1)) / 2;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2.0;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2.0;\n\t}\n\n\tresetTextPosition() {\n\t\tthis.labelPosY = this.y;\n\t\tthis.labelPosX = this.left() + this.w * (this.linkPercent * 2);\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tif (anchor === 0) {\n\t\t\treturn [this.x + this.w / 2.0, this.y - this.h * 0.2];\n\t\t} else {\n\t\t\treturn [this.left() + (this.w * this.linkPercent) / 2, this.y + this.h * 0.2];\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tconst closest = this.getClosestCardinalPoint(fromX, fromY);\n\t\tif (closest[1] === this.y) {\n\t\t\tif (closest[0] === this.left()) {\n\t\t\t\treturn [closest[0], this.y - this.h * 0.2];\n\t\t\t} else {\n\t\t\t\treturn [closest[0], this.y + this.h * 0.2];\n\t\t\t}\n\t\t} else {\n\t\t\treturn [closest[0], closest[1]];\n\t\t}\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t\tthis.resetTextPosition();\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tstartX = this.left();\n\t\tstartY = this.top();\n\n\t\t// Highlighted edges\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\tcontext.fillStyle = '#FF0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\n\t\t// Node edges\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tcontext.lineWidth = 1;\n\t\t// Left inner line between node and pointer area\n\t\tstartX = this.left() + this.w * this.linkPercent;\n\t\tstartY = this.top();\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tif (this.prevNullPointer) {\n\t\t\t// Left null marker\n\t\t\tcontext.moveTo(this.left(), startY);\n\t\t\tcontext.lineTo(this.left() + this.w * this.linkPercent, startY + this.h);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\n\t\t// Right inner line between node and pointer area\n\t\tstartX = this.right() - this.w * this.linkPercent;\n\t\tstartY = this.top();\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tif (this.nextNullPointer) {\n\t\t\t// Right null marker\n\t\t\tcontext.moveTo(this.right() - this.w * this.linkPercent, startY);\n\t\t\tcontext.lineTo(this.right(), startY + this.h);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\n\t\t// Label\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\t\tthis.resetTextPosition();\n\t\tcontext.fillStyle = this.labelColor;\n\t\tcontext.fillText(this.label, this.labelPosX, this.labelPosY);\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColors = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColors;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteDoublyLinkedList(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.labelColor,\n\t\t\tthis.layer,\n\t\t\tthis.prevNullPointer,\n\t\t\tthis.nextNullPointer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteDoublyLinkedList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlinkPercent,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlabelColor,\n\t\tlayer,\n\t\tpnp,\n\t\tnnp,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.labelColors = labelColor;\n\t\tthis.layer = layer;\n\t\tthis.prevNullPointer = pnp;\n\t\tthis.nextNullPointer = nnp;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addDoublyLinkedListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setPrevNull(this.objectID, this.prevNullPointer);\n\t\tworld.setNextNull(this.objectID, this.nextNullPointer);\n\t\tworld.setTextColor(this.objectID, this.labelColor);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// \"Class\" animatedCircle\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedHighlightCircle extends AnimatedObject {\n\tconstructor(objectID, foregroundColor, radius) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.radius = radius;\n\t\tthis.thickness = 4;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\tdraw(context) {\n\t\tcontext.globalAlpha = this.alpha;\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.lineWidth = this.thickness;\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteHighlightCircle(\n\t\t\tthis.objectID,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.radius,\n\t\t\tthis.layer,\n\t\t\tthis.alpha,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteHighlightCircle extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tx,\n\t\ty,\n\t\tforegroundColor,\n\t\tradius,\n\t\tlayer,\n\t\talpha,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.radius = radius;\n\t\tthis.layer = layer;\n\t\tthis.alpha = alpha;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addHighlightCircleObject(this.objectID, this.foregroundColor, this.radius);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setAlpha(this.objectID, this.alpha);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedLabel extends AnimatedObject {\n\tconstructor(objectID, label, centered, initialWidth) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.textWidth = initialWidth || 0;\n\n\t\tthis.label = label;\n\t\tthis.labelColor = '#000000';\n\t\tthis.highlighted = false;\n\t\tthis.centered = centered;\n\n\t\tthis.leftWidth = -1;\n\t\tthis.centerWidth = -1;\n\t\tthis.highlightIndex = -1;\n\t}\n\n\tcentered() {\n\t\treturn this.centered;\n\t}\n\n\tdraw(context) {\n\t\tif (!this.addedToScene) return;\n\n\t\tcontext.globalAlpha = this.alpha;\n\t\tcontext.font = '12px Arial';\n\n\t\tlet startingXForHighlight = this.x;\n\n\t\tif (this.highlightIndex >= this.label.length) {\n\t\t\tthis.highlightIndex = -1;\n\t\t}\n\t\tif (this.highlightIndexDirty && this.highlightIndex !== -1) {\n\t\t\tthis.leftWidth = context.measureText(\n\t\t\t\tthis.label.substring(0, this.highlightIndex),\n\t\t\t).width;\n\t\t\tthis.centerWidth = context.measureText(\n\t\t\t\tthis.label.substring(this.highlightIndex, this.highlightIndex + 1),\n\t\t\t).width;\n\t\t\tthis.highlightIndexDirty = false;\n\t\t}\n\n\t\tif (this.centered) {\n\t\t\tif (this.highlightIndex !== -1) {\n\t\t\t\tstartingXForHighlight = this.x - this.width / 2;\n\t\t\t\tcontext.textAlign = 'left';\n\t\t\t\tcontext.textBaseline = 'middle';\n\t\t\t} else {\n\t\t\t\tcontext.textAlign = 'center';\n\t\t\t\tcontext.textBaseline = 'middle';\n\t\t\t}\n\t\t} else {\n\t\t\tcontext.textAlign = 'left';\n\t\t\tcontext.textBaseline = 'top';\n\t\t}\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FFAAAA';\n\t\t\tcontext.fillStyle = '#FF0000';\n\t\t\tcontext.lineWidth = this.highlightDiff;\n\t\t\tcontext.strokeText(this.label, this.x, this.y);\n\t\t}\n\t\tcontext.strokeStyle = this.labelColor;\n\t\tcontext.fillStyle = this.labelColor;\n\t\tcontext.lineWidth = 2;\n\t\tconst strList = this.label.split('\\n');\n\t\tif (strList.length === 1) {\n\t\t\tif (this.highlightIndex === -1) {\n\t\t\t\tcontext.fillText(this.label, this.x, this.y);\n\t\t\t} else {\n\t\t\t\tconst leftStr = this.label.substring(0, this.highlightIndex);\n\t\t\t\tconst highlightStr = this.label.substring(\n\t\t\t\t\tthis.highlightIndex,\n\t\t\t\t\tthis.highlightIndex + 1,\n\t\t\t\t);\n\t\t\t\tconst rightStr = this.label.substring(this.highlightIndex + 1);\n\t\t\t\tcontext.fillText(leftStr, startingXForHighlight, this.y);\n\t\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\t\tcontext.fillStyle = '#FF0000';\n\t\t\t\tcontext.fillText(highlightStr, startingXForHighlight + this.leftWidth, this.y);\n\n\t\t\t\tcontext.strokeStyle = this.labelColor;\n\t\t\t\tcontext.fillStyle = this.labelColor;\n\t\t\t\tcontext.fillText(\n\t\t\t\t\trightStr,\n\t\t\t\t\tstartingXForHighlight + this.leftWidth + this.centerWidth,\n\t\t\t\t\tthis.y,\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tconst offset = this.centered ? (1.0 - strList.length) / 2.0 : 0;\n\t\t\tfor (let i = 0; i < strList.length; i++) {\n\t\t\t\tcontext.fillText(strList[i], this.x, this.y + offset + i * 12);\n\t\t\t}\n\t\t}\n\t\tcontext.closePath();\n\t}\n\n\tgetAlignLeftPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.left() - this.textWidth / 2, (this.y = otherObject.centerY())];\n\t\t} else {\n\t\t\treturn [otherObject.left() - this.textWidth, otherObject.centerY() - 5];\n\t\t}\n\t}\n\n\talignLeft(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.centerY();\n\t\t\tthis.x = otherObject.left() - this.textWidth / 2;\n\t\t} else {\n\t\t\tthis.y = otherObject.centerY() - 5;\n\t\t\tthis.x = otherObject.left() - this.textWidth;\n\t\t}\n\t}\n\n\talignRight(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.centerY();\n\t\t\tthis.x = otherObject.right() + this.textWidth / 2;\n\t\t} else {\n\t\t\tthis.y = otherObject.centerY() - 5;\n\t\t\tthis.x = otherObject.right();\n\t\t}\n\t}\n\n\tgetAlignRightPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.right() + this.textWidth / 2, otherObject.centerY()];\n\t\t} else {\n\t\t\treturn [otherObject.right(), otherObject.centerY() - 5];\n\t\t}\n\t}\n\n\talignTop(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.top() - 5;\n\t\t\tthis.x = otherObject.centerX();\n\t\t} else {\n\t\t\tthis.y = otherObject.top() - 10;\n\t\t\tthis.x = otherObject.centerX() - this.textWidth / 2;\n\t\t}\n\t}\n\n\tgetAlignTopPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.centerX(), otherObject.top() - 5];\n\t\t} else {\n\t\t\treturn [otherObject.centerX() - this.textWidth / 2, otherObject.top() - 10];\n\t\t}\n\t}\n\n\talignBottom(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.bottom() + 5;\n\t\t\tthis.x = otherObject.centerX();\n\t\t} else {\n\t\t\tthis.y = otherObject.bottom();\n\t\t\tthis.x = otherObject.centerX() - this.textWidth / 2;\n\t\t}\n\t}\n\n\tgetAlignBottomPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.centerX(), otherObject.bottom() + 5];\n\t\t} else {\n\t\t\treturn [otherObject.centerX() - this.textWidth / 2, otherObject.bottom()];\n\t\t}\n\t}\n\n\tgetWidth() {\n\t\treturn this.textWidth;\n\t}\n\n\tgetHeight() {\n\t\treturn 10; // HACK!  HACK!  HACK!  HACK!\n\t}\n\n\tsetHighlight(value) {\n\t\tthis.highlighted = value;\n\t}\n\n\tcenterX() {\n\t\tif (this.centered) {\n\t\t\treturn this.x;\n\t\t} else {\n\t\t\treturn this.x + this.textWidth;\n\t\t}\n\t}\n\n\tcenterY() {\n\t\tif (this.centered) {\n\t\t\treturn this.y;\n\t\t} else {\n\t\t\treturn this.y + 5;\n\t\t}\n\t}\n\n\ttop() {\n\t\tif (this.centered) {\n\t\t\treturn this.y - 5; //TODO: Un-Hardwire\n\t\t} else {\n\t\t\treturn this.y;\n\t\t}\n\t}\n\n\tbottom() {\n\t\tif (this.centered) {\n\t\t\treturn this.y + 5; // TODO: + height / 2;\n\t\t} else {\n\t\t\treturn this.y + 10; // TODO: + hieght;\n\t\t}\n\t}\n\n\tright() {\n\t\tif (this.centered) {\n\t\t\treturn this.x + this.textWidth / 2; // TODO: + width / 2;\n\t\t} else {\n\t\t\treturn this.x + this.textWidth; // TODO: + width;\n\t\t}\n\t}\n\n\tleft() {\n\t\tif (this.centered) {\n\t\t\treturn this.x - this.textWidth / 2;\n\t\t} else {\n\t\t\treturn this.x; // TODO:  - a little?\n\t\t}\n\t}\n\n\tsetHighlightIndex(hlIndex) {\n\t\t// Only allow highlight index for labels that don't have End-Of-Line\n\t\tif (this.label.indexOf('\\n') === -1 && this.label.length > hlIndex) {\n\t\t\tthis.highlightIndex = hlIndex;\n\t\t\tthis.highlightIndexDirty = true;\n\t\t} else {\n\t\t\tthis.highlightIndex = -1;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tsetText(newText, textIndex, initialWidth) {\n\t\tthis.label = newText;\n\t\tif (initialWidth != null) {\n\t\t\tthis.textWidth = initialWidth;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteLabel(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.centered,\n\t\t\tthis.labelColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlightIndex,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteLabel extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tx,\n\t\ty,\n\t\tcentered,\n\t\tlabelColor,\n\t\tlayer,\n\t\thighlightIndex,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.centered = centered;\n\t\tthis.labelColor = labelColor;\n\t\tthis.layer = layer;\n\t\tthis.highlightIndex = highlightIndex;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addLabelObject(this.objectID, this.label, this.centered);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setForegroundColor(this.objectID, this.labelColor);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// This class handles links between vertices in graphs, pointers in linked lists, and so on.\n\nconst LINE_MAX_HEIGHT_DIFF = 5;\nconst LINE_MIN_HEIGHT_DIFF = 3;\nconst LINE_RANGE = LINE_MAX_HEIGHT_DIFF - LINE_MIN_HEIGHT_DIFF + 1;\n\nexport default class AnimatedLine {\n\tconstructor(fromID, toID, color, curve, directed, edgeLabel, anchorPoint, thickness) {\n\t\tthis.fromID = fromID;\n\t\tthis.toID = toID;\n\n\t\tthis.foregroundColor = color;\n\t\tthis.edgeLabel = edgeLabel;\n\t\tthis.highlighted = false;\n\t\tthis.highlightDiff = 0;\n\n\t\tthis.dirty = false;\n\t\tthis.directed = directed;\n\t\tthis.anchorPoint = anchorPoint;\n\n\t\tthis.alpha = 1.0;\n\t\tthis.thickness = thickness;\n\t\tthis.arrowHeight = 8;\n\t\tthis.arrowWidth = 4;\n\t\tthis.curve = curve;\n\t}\n\n\tcolor() {\n\t\treturn this.foregroundColor;\n\t}\n\n\tsetColor(newColor) {\n\t\tthis.foregroundColor = newColor;\n\t\tthis.dirty = true;\n\t}\n\n\tsetHighlight(highlightVal, color) {\n\t\tthis.highlighted = highlightVal;\n\t\tthis.highlightColor = color || '#FF0000';\n\t}\n\n\tsetThickness(thickness) {\n\t\tthis.thickness = thickness;\n\t}\n\n\tpulseHighlight(frameNum) {\n\t\tif (this.highlighted) {\n\t\t\tconst frameMod = frameNum / 14.0;\n\t\t\tconst delta = Math.abs((frameMod % (2 * LINE_RANGE - 2)) - LINE_RANGE + 1);\n\t\t\tthis.highlightDiff = delta + this.thickness + LINE_MIN_HEIGHT_DIFF;\n\t\t\tthis.dirty = true;\n\t\t}\n\t}\n\n\thasNode(n) {\n\t\treturn this.fromID === n || this.toID === n;\n\t}\n\n\tsign(n) {\n\t\tif (n > 0) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tdrawArrow(thickness, color, context) {\n\t\tcontext.strokeStyle = color;\n\t\tcontext.fillStyle = color;\n\t\tcontext.lineWidth = thickness;\n\n\t\tconst fromPos = this.fromID.getTailPointerAttachPos(\n\t\t\tthis.toID.x,\n\t\t\tthis.toID.y,\n\t\t\tthis.anchorPoint,\n\t\t);\n\t\tconst toPos = this.toID.getHeadPointerAttachPos(this.fromID.x, this.fromID.y);\n\n\t\tconst deltaX = toPos[0] - fromPos[0];\n\t\tconst deltaY = toPos[1] - fromPos[1];\n\t\tconst midX = deltaX / 2.0 + fromPos[0];\n\t\tconst midY = deltaY / 2.0 + fromPos[1];\n\t\tconst controlX = midX - deltaY * this.curve;\n\n\t\tconst controlY = midY + deltaX * this.curve;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(fromPos[0], fromPos[1]);\n\t\tcontext.quadraticCurveTo(controlX, controlY, toPos[0], toPos[1]);\n\t\tcontext.stroke();\n\n\t\t// Position of the edge label:  First, we will place it right along the\n\t\t// middle of the curve (or the middle of the line, for curve == 0)\n\t\tlet labelPosX = 0.25 * fromPos[0] + 0.5 * controlX + 0.25 * toPos[0];\n\t\tlet labelPosY = 0.25 * fromPos[1] + 0.5 * controlY + 0.25 * toPos[1];\n\n\t\t// Next, we push the edge position label out just a little in the direction of\n\t\t// the curve, so that the label doesn't intersect the cuve (as long as the label\n\t\t// is only a few characters, that is)\n\t\tconst midLen = Math.sqrt(deltaY * deltaY + deltaX * deltaX);\n\t\tif (midLen !== 0) {\n\t\t\tlabelPosX += ((-deltaY * this.sign(this.curve)) / midLen) * 10;\n\t\t\tlabelPosY += ((deltaX * this.sign(this.curve)) / midLen) * 10;\n\t\t}\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.fillText(this.edgeLabel, labelPosX, labelPosY);\n\n\t\tif (this.directed) {\n\t\t\tlet xVec = controlX - toPos[0];\n\t\t\tlet yVec = controlY - toPos[1];\n\t\t\tconst len = Math.sqrt(xVec * xVec + yVec * yVec);\n\n\t\t\tif (len > 0) {\n\t\t\t\txVec = xVec / len;\n\t\t\t\tyVec = yVec / len;\n\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(toPos[0], toPos[1]);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\ttoPos[0] + xVec * this.arrowHeight - yVec * this.arrowWidth,\n\t\t\t\t\ttoPos[1] + yVec * this.arrowHeight + xVec * this.arrowWidth,\n\t\t\t\t);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\ttoPos[0] + xVec * this.arrowHeight + yVec * this.arrowWidth,\n\t\t\t\t\ttoPos[1] + yVec * this.arrowHeight - xVec * this.arrowWidth,\n\t\t\t\t);\n\t\t\t\tcontext.lineTo(toPos[0], toPos[1]);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t\tcontext.fill();\n\t\t\t}\n\t\t}\n\t}\n\n\tdraw(context) {\n\t\tcontext.globalAlpha = this.alpha;\n\t\tconsole.log(this.highlightColor);\n\n\t\tif (this.highlighted) this.drawArrow(this.highlightDiff, this.highlightColor, context);\n\t\tthis.drawArrow(this.thickness, this.foregroundColor, context);\n\t}\n\n\tcreateUndoConnect() {\n\t\treturn new UndoConnect(\n\t\t\tthis.fromID.objectID,\n\t\t\tthis.toID.objectID,\n\t\t\ttrue,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.curve,\n\t\t\tthis.directed,\n\t\t\tthis.edgeLabel,\n\t\t\tthis.anchorPoint,\n\t\t\tthis.thickness,\n\t\t\tthis.highlighted,\n\t\t);\n\t}\n}\n\nexport class UndoConnect {\n\tconstructor(\n\t\tfromID,\n\t\ttoID,\n\t\tcreateConnection,\n\t\tcolor,\n\t\tcurve,\n\t\tdirected,\n\t\tedgeLabel,\n\t\tanchorPoint,\n\t\tthickness,\n\t\thighlighted,\n\t) {\n\t\tthis.fromID = fromID;\n\t\tthis.toID = toID;\n\t\tthis.createConnection = createConnection;\n\t\tthis.color = color;\n\t\tthis.curve = curve;\n\t\tthis.directed = directed;\n\t\tthis.edgeLabel = edgeLabel;\n\t\tthis.anchorPoint = anchorPoint;\n\t\tthis.thickness = thickness;\n\t\tthis.highlighted = highlighted;\n\t}\n\n\tundoInitialStep(world) {\n\t\tif (this.createConnection) {\n\t\t\tworld.connectEdge(\n\t\t\t\tthis.fromID,\n\t\t\t\tthis.toID,\n\t\t\t\tthis.color,\n\t\t\t\tthis.curve,\n\t\t\t\tthis.directed,\n\t\t\t\tthis.edgeLabel,\n\t\t\t\tthis.anchorPoint,\n\t\t\t\tthis.thickness,\n\t\t\t);\n\t\t\tworld.setEdgeHighlight(this.fromID, this.toID, this.highlighted);\n\t\t} else {\n\t\t\tworld.disconnect(this.fromID, this.toID);\n\t\t}\n\t}\n\n\taddUndoAnimation() {\n\t\treturn false;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedLinkedListNode extends AnimatedObject {\n\tconstructor(\n\t\tobjectID,\n\t\tlabels,\n\t\tw,\n\t\th,\n\t\tlinkPercent,\n\t\tvertical,\n\t\tlinkPosEnd,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.vertical = vertical;\n\t\tthis.linkPosEnd = linkPosEnd;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.nullPointer = false;\n\n\t\tthis.labels = labels;\n\t\tthis.labelPosX = [0];\n\t\tthis.labelPosY = [0];\n\t\tthis.labelColors = [foregroundColor];\n\t}\n\n\tleft() {\n\t\tif (this.vertical) {\n\t\t\treturn this.x - this.w / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.x - (this.w * (1 - this.linkPercent)) / 2;\n\t\t} else {\n\t\t\treturn this.x - (this.w * (this.linkPercent + 1)) / 2;\n\t\t}\n\t}\n\n\tsetNull(np) {\n\t\tif (this.nullPointer !== np) {\n\t\t\tthis.nullPointer = np;\n\t\t}\n\t}\n\n\tgetNull() {\n\t\treturn this.nullPointer;\n\t}\n\n\tright() {\n\t\tif (this.vertical) {\n\t\t\treturn this.x + this.w / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.x + (this.w * (this.linkPercent + 1)) / 2;\n\t\t} else {\n\t\t\treturn this.x + (this.w * (1 - this.linkPercent)) / 2;\n\t\t}\n\t}\n\n\ttop() {\n\t\tif (!this.vertical) {\n\t\t\treturn this.y - this.h / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.y - (this.h * (1 - this.linkPercent)) / 2;\n\t\t} else {\n\t\t\treturn this.y - (this.h * (1 + this.linkPercent)) / 2;\n\t\t}\n\t}\n\n\tbottom() {\n\t\tif (!this.vertical) {\n\t\t\treturn this.y + this.h / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.y + (this.h * (1 + this.linkPercent)) / 2;\n\t\t} else {\n\t\t\treturn this.y + (this.h * (1 - this.linkPercent)) / 2;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tif (this.vertical && this.linkPosEnd) {\n\t\t\treturn [this.x, this.y + this.h / 2.0];\n\t\t} else if (this.vertical && !this.linkPosEnd) {\n\t\t\treturn [this.x, this.y - this.h / 2.0];\n\t\t} else if (!this.vertical && this.linkPosEnd) {\n\t\t\treturn [this.x + this.w / 2.0, this.y];\n\t\t} else {\n\t\t\t// !this.vertical && !this.linkPosEnd\n\t\t\treturn [this.x - this.w / 2.0, this.y];\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tstartX = this.left();\n\t\tstartY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#ff0000';\n\t\t\tcontext.fillStyle = '#ff0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tif (this.vertical) {\n\t\t\tstartX = this.left();\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tstartY = this.y + this.h * (1 - this.linkPercent) * (i / this.labels.length - 0.5);\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(startX, startY);\n\t\t\t\tcontext.lineTo(startX + this.w, startY);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t} else {\n\t\t\tstartY = this.top();\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tstartX = this.x + this.w * (1 - this.linkPercent) * (i / this.labels.length - 0.5);\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(startX, startY);\n\t\t\t\tcontext.lineTo(startX, startY + this.h);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t}\n\n\t\tcontext.lineWidth = 1;\n\t\tif (this.vertical && this.linkPosEnd) {\n\t\t\tstartX = this.left();\n\t\t\tstartY = this.bottom() - this.h * this.linkPercent;\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(this.startX + this.w, this.bottom());\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t} else if (this.vertical && !this.linkPosEnd) {\n\t\t\tstartX = this.left();\n\t\t\tstartY = this.top() + this.h * this.linkPercent;\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(startX + this.w, this.top());\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t} else if (!this.vertical && this.linkPosEnd) {\n\t\t\tstartX = this.right() - this.w * this.linkPercent;\n\t\t\tstartY = this.top();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(this.right(), startY + this.h);\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t} else {\n\t\t\t// !vertical && !linkPosEnd\n\t\t\tstartX = this.left() + this.w * this.linkPercent;\n\t\t\tstartY = this.top();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(this.left(), startY);\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t}\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\n\t\tif (this.vertical) {\n\t\t\tthis.labelPosX[0] = this.x;\n\t\t\tthis.labelPosY[0] =\n\t\t\t\tthis.y + ((this.h * (1 - this.linkPercent)) / 2) * (1 / this.labels.length - 1);\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tthis.labelPosX[i] = this.x;\n\t\t\t\tthis.labelPosY[i] =\n\t\t\t\t\tthis.labelPosY[i - 1] + (this.h * (1 - this.linkPercent)) / this.labels.length;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.labelPosY[0] = this.y;\n\t\t\tthis.labelPosX[0] =\n\t\t\t\tthis.x + ((this.w * (1 - this.linkPercent)) / 2) * (1 / this.labels.length - 1);\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tthis.labelPosY[i] = this.y;\n\t\t\t\tthis.labelPosX[i] =\n\t\t\t\t\tthis.labelPosX[i - 1] + (this.w * (1 - this.linkPercent)) / this.labels.length;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < this.labels.length; i++) {\n\t\t\tcontext.fillStyle = this.labelColors[i];\n\t\t\tcontext.fillText(this.labels[i], this.labelPosX[i], this.labelPosY[i]);\n\t\t}\n\t}\n\n\tsetTextColor(color, index) {\n\t\tthis.labelColors[index] = color;\n\t}\n\n\tgetTextColor(index) {\n\t\treturn this.labelColors[index];\n\t}\n\n\tgetText(index) {\n\t\treturn this.labels[index];\n\t}\n\n\tsetText(newText, index) {\n\t\tthis.labels[index] = newText;\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteLinkedList(\n\t\t\tthis.objectID,\n\t\t\tthis.labels,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.linkPercent,\n\t\t\tthis.vertical,\n\t\t\tthis.linkPosEnd,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.labelColors,\n\t\t\tthis.layer,\n\t\t\tthis.nullPointer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteLinkedList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabels,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlinkPercent,\n\t\tvertical,\n\t\tlinkPosEnd,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlabelColors,\n\t\tlayer,\n\t\tnullPointer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.labels = labels;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.vertical = vertical;\n\t\tthis.linkPosEnd = linkPosEnd;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.labelColors = labelColors;\n\t\tthis.layer = layer;\n\t\tthis.nullPointer = nullPointer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addLinkedListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.labels,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.linkPercent,\n\t\t\tthis.vertical,\n\t\t\tthis.linkPosEnd,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setNull(this.objectID, this.nullPointer);\n\t\tfor (let i = 0; i < this.labels.length; i++) {\n\t\t\tworld.setTextColor(this.objectID, this.labelColors[i], i);\n\t\t}\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.a\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Values for xJust / yJust:  \"center\", \"left\", \"right\", \"top\", \"bottom\"\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedRectangle extends AnimatedObject {\n\tconstructor(objectID, label, w, h, xJustify, yJustify, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.xJustify = xJustify;\n\t\tthis.yJustify = yJustify;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.textColor = foregroundColor;\n\t\tthis.highlighted = false;\n\t\tthis.thicknessArray = [false, false, false, false];\n\n\t\tthis.label = label;\n\n\t\tthis.nullPointer = false;\n\t}\n\n\tsetNull(np) {\n\t\tthis.nullPointer = np;\n\t}\n\n\tgetNull() {\n\t\treturn this.nullPointer;\n\t}\n\n\tleft() {\n\t\tif (this.xJustify === 'left') {\n\t\t\treturn this.x;\n\t\t} else if (this.xJustify === 'center') {\n\t\t\treturn this.x - this.w / 2.0;\n\t\t} else {\n\t\t\t// right\n\t\t\treturn this.x - this.w;\n\t\t}\n\t}\n\n\tcenterX() {\n\t\tif (this.xJustify === 'center') {\n\t\t\treturn this.x;\n\t\t} else if (this.xJustify === 'left') {\n\t\t\treturn this.x + this.w / 2.0;\n\t\t} else {\n\t\t\t// right\n\t\t\treturn this.x - this.w / 2.0;\n\t\t}\n\t}\n\n\tcenterY() {\n\t\tif (this.yJustify === 'center') {\n\t\t\treturn this.y;\n\t\t} else if (this.yJustify === 'top') {\n\t\t\treturn this.y + this.h / 2.0;\n\t\t} else {\n\t\t\t// bottom\n\t\t\treturn this.y - this.w / 2.0;\n\t\t}\n\t}\n\n\ttop() {\n\t\tif (this.yJustify === 'top') {\n\t\t\treturn this.y;\n\t\t} else if (this.yJustify === 'center') {\n\t\t\treturn this.y - this.h / 2.0;\n\t\t} else {\n\t\t\t// bottom\n\t\t\treturn this.y - this.h;\n\t\t}\n\t}\n\n\tbottom() {\n\t\tif (this.yJustify === 'top') {\n\t\t\treturn this.y + this.h;\n\t\t} else if (this.yJustify === 'center') {\n\t\t\treturn this.y + this.h / 2.0;\n\t\t} else {\n\t\t\t// bottom\n\t\t\treturn this.y;\n\t\t}\n\t}\n\n\tright() {\n\t\tif (this.xJustify === 'left') {\n\t\t\treturn this.x + this.w;\n\t\t} else if (this.xJustify === 'center') {\n\t\t\treturn this.x + this.w / 2.0;\n\t\t} else {\n\t\t\t// right\n\t\t\treturn this.x;\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tswitch (anchor) {\n\t\t\tcase 0: // Default\n\t\t\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t\t\tcase 1: // Top\n\t\t\t\treturn [this.x, this.top()];\n\t\t\tcase 2: // Bottom\n\t\t\t\treturn [this.x, this.bottom()];\n\t\t\tcase 3: // Left\n\t\t\t\treturn [this.left(), this.y];\n\t\t\tcase 4: // Right\n\t\t\t\treturn [this.right(), this.y];\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tif (!this.addedToScene) return;\n\n\t\tcontext.globalAlpha = this.alpha;\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tif (this.xJustify === 'left') {\n\t\t\tstartX = this.x;\n\t\t} else if (this.xJustify === 'center') {\n\t\t\tstartX = this.x - this.w / 2.0;\n\t\t} else if (this.xJustify === 'right') {\n\t\t\tstartX = this.x - this.w;\n\t\t}\n\t\tif (this.yJustify === 'top') {\n\t\t\tstartY = this.y;\n\t\t} else if (this.yJustify === 'center') {\n\t\t\tstartY = this.y - this.h / 2.0;\n\t\t} else if (this.yJustify === 'bottom') {\n\t\t\tstartY = this.y - this.h;\n\t\t}\n\n\t\tcontext.lineWidth = 2;\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#ff0000';\n\t\t\tcontext.fillStyle = '#ff0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\t// Thick edges\n\t\t// Top edge\n\t\tif (this.thicknessArray[0]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY);\n\t\t\tcontext.lineTo(startX + this.w, startY);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\t\t// Right edge\n\t\tif (this.thicknessArray[1]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY);\n\t\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\t\t// Bottom edge\n\t\tif (this.thicknessArray[2]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY + this.h);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\t\t// Left edge\n\t\tif (this.thicknessArray[3]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\n\t\tcontext.lineWidth = 1.2;\n\t\tif (this.nullPointer) {\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY);\n\t\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t}\n\n\t\tcontext.fillStyle = this.textColor;\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\t\tcontext.fillText(this.label, this.x, this.y);\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.textColor = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.textColor;\n\t}\n\n\tsetHighlight(value) {\n\t\tthis.highlighted = value;\n\t}\n\n\tsetEdgeThickness(thicknessArray) {\n\t\tthis.thicknessArray = thicknessArray;\n\t}\n\n\tgetEdgeThickness() {\n\t\treturn this.thicknessArray;\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteRectangle(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.xJustify,\n\t\t\tthis.yJustify,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteRectangle extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tx,\n\t\ty,\n\t\tw,\n\t\th,\n\t\txJustify,\n\t\tyJustify,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlayer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.xJustify = xJustify;\n\t\tthis.yJustify = yJustify;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.layer = layer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addRectangleObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.xJustify,\n\t\t\tthis.yJustify,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nconst NINF = '\\u2212\\u221E'; // Negative infinity\nconst PINF = '\\u221E'; // Positive infinity\n\nexport default class AnimatedSkipListNode extends AnimatedObject {\n\tconstructor(objectID, label, w, h, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.label = label;\n\t\tthis.labelPosX = 0;\n\t\tthis.labelPosY = 0;\n\t\tthis.labelColor = foregroundColor;\n\t}\n\n\tleft() {\n\t\treturn this.x - this.w / 2;\n\t}\n\n\tright() {\n\t\treturn this.x + this.w / 2;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2;\n\t}\n\n\tresetTextPosition() {\n\t\tthis.labelPosY = this.y;\n\t\tthis.labelPosX = this.x;\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tswitch (anchor) {\n\t\t\tcase 0: // Top\n\t\t\t\treturn [this.x, this.top()];\n\t\t\tcase 1: // Bottom\n\t\t\t\treturn [this.x, this.bottom()];\n\t\t\tcase 2: // Left\n\t\t\t\treturn [this.left(), this.y];\n\t\t\tcase 3: // Right\n\t\t\t\treturn [this.right(), this.y];\n\t\t\tdefault:\n\t\t\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY); // Normal anchor\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t\tthis.resetTextPosition();\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tconst startX = this.left();\n\t\tconst startY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#ff0000';\n\t\t\tcontext.fillStyle = '#ff0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\n\t\tthis.resetTextPosition();\n\t\tcontext.fillStyle = this.labelColor;\n\t\tif (this.label === NINF || this.label === PINF) {\n\t\t\tcontext.font = '18px sans-serif';\n\t\t}\n\t\tcontext.fillText(this.label, this.labelPosX, this.labelPosY);\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColor = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColor;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteSkipList(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.labelColor,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteSkipList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlabelColor,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlayer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.labelColor = labelColor;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.layer = layer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addSkipListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setTextColor(this.objectID, this.labelColor);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Object Manager\n//\n// Manage all of our animated objects.  Control any animated object should occur through\n// this interface (not language enforced, because enforcing such things in Javascript is\n// problematic.)\n//\n// This class is only accessed through:\n//\n//  AnimationMain\n//  Undo objects (which are themselves controlled by AnimationMain)\n\nimport AnimatedBTreeNode from './AnimatedBTreeNode';\nimport AnimatedCircle from './AnimatedCircle';\nimport AnimatedCircularlyLinkedListNode from './AnimatedCircularlyLinkedListNode';\nimport AnimatedDoublyLinkedListNode from './AnimatedDoublyLinkedListNode';\nimport AnimatedHighlightCircle from './AnimatedHighlightCircle';\nimport AnimatedLabel from './AnimatedLabel';\nimport AnimatedLine from './AnimatedLine';\nimport AnimatedLinkedListNode from './AnimatedLinkedListNode';\nimport AnimatedRectangle from './AnimatedRectangle';\nimport AnimatedSkipListNode from './AnimatedSkipListNode';\n\nexport default class ObjectManager {\n\tconstructor(canvasRef) {\n\t\tthis.nodes = [];\n\t\tthis.edges = [];\n\t\tthis.backEdges = [];\n\t\tthis.activeLayers = [];\n\t\tthis.activeLayers[0] = true;\n\t\tthis.ctx = canvasRef.current.getContext('2d');\n\t\tthis.framenum = 0;\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.statusReport = new AnimatedLabel(-1, 'XXX', false, 30);\n\t\tthis.statusReport.x = 30;\n\t}\n\n\tdraw() {\n\t\tthis.framenum++;\n\t\tif (this.framenum > 1000) this.framenum = 0;\n\n\t\tthis.ctx.clearRect(0, 0, this.width, this.height); // clear canvas\n\t\tthis.statusReport.y = this.height - 15;\n\n\t\tlet i;\n\t\tlet j;\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\t!this.nodes[i].highlighted &&\n\t\t\t\tthis.nodes[i].addedToScene &&\n\t\t\t\t!this.nodes[i].alwaysOnTop\n\t\t\t) {\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\tthis.nodes[i].highlighted &&\n\t\t\t\t!this.nodes[i].alwaysOnTop &&\n\t\t\t\tthis.nodes[i].addedToScene\n\t\t\t) {\n\t\t\t\tthis.nodes[i].pulseHighlight(this.framenum);\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\t!this.nodes[i].highlighted &&\n\t\t\t\tthis.nodes[i].alwaysOnTop &&\n\t\t\t\tthis.nodes[i].addedToScene\n\t\t\t) {\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\tthis.nodes[i].highlighted &&\n\t\t\t\tthis.nodes[i].alwaysOnTop &&\n\t\t\t\tthis.nodes[i].addedToScene\n\t\t\t) {\n\t\t\t\tthis.nodes[i].pulseHighlight(this.framenum);\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this.edges.length; i++) {\n\t\t\tif (this.edges[i] != null) {\n\t\t\t\tfor (j = 0; j < this.edges[i].length; j++) {\n\t\t\t\t\tif (this.edges[i][j].addedToScene) {\n\t\t\t\t\t\tthis.edges[i][j].pulseHighlight(this.framenum);\n\t\t\t\t\t\tthis.edges[i][j].draw(this.ctx);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.statusReport.draw(this.ctx);\n\t}\n\n\tupdate() {}\n\n\tsetLayers(shown, layers) {\n\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\tthis.activeLayers[layers[i]] = shown;\n\t\t}\n\t\tthis.resetLayers();\n\t}\n\n\taddHighlightCircleObject(objectID, objectColor, radius) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'addHighlightCircleObject: object with same ID (' +\n\t\t\t\t\tString(objectID) +\n\t\t\t\t\t') already exists!',\n\t\t\t);\n\t\t}\n\t\tconst newNode = new AnimatedHighlightCircle(objectID, objectColor, radius);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tsetEdgeAlpha(fromID, toID, alphaVal) {\n\t\tlet oldAlpha = 1.0;\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldAlpha = this.edges[fromID][i].alpha;\n\t\t\t\t\tthis.edges[fromID][i].alpha = alphaVal;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldAlpha;\n\t}\n\n\tsetAlpha(nodeID, alphaVal) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tthis.nodes[nodeID].setAlpha(alphaVal);\n\t\t}\n\t}\n\n\tgetAlpha(nodeID) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\treturn this.nodes[nodeID].getAlpha();\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tgetTextColor(nodeID, index) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\treturn this.nodes[nodeID].getTextColor(index);\n\t\t} else {\n\t\t\treturn '#000000';\n\t\t}\n\t}\n\n\tsetTextColor(nodeID, color, index) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tthis.nodes[nodeID].setTextColor(color, index);\n\t\t}\n\t}\n\n\tsetHighlightIndex(nodeID, index) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tthis.nodes[nodeID].setHighlightIndex(index);\n\t\t}\n\t}\n\n\tsetAllLayers(layers) {\n\t\tthis.activeLayers = [];\n\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\tthis.activeLayers[layers[i]] = true;\n\t\t}\n\t\tthis.resetLayers();\n\t}\n\n\tresetLayers() {\n\t\tlet i;\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (this.nodes[i] != null && this.nodes[i] !== undefined) {\n\t\t\t\tthis.nodes[i].addedToScene = this.activeLayers[this.nodes[i].layer] === true;\n\t\t\t}\n\t\t}\n\t\tfor (i = this.edges.length - 1; i >= 0; i--) {\n\t\t\tif (this.edges[i] != null && this.edges[i] !== undefined) {\n\t\t\t\tfor (let j = 0; j < this.edges[i].length; j++) {\n\t\t\t\t\tif (this.edges[i][j] != null && this.edges[i][j] !== undefined) {\n\t\t\t\t\t\tthis.edges[i][j].addedToScene =\n\t\t\t\t\t\t\tthis.activeLayers[this.edges[i][j].fromID.layer] === true &&\n\t\t\t\t\t\t\tthis.activeLayers[this.edges[i][j].toID.layer] === true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetLayer(objectID, layer) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].layer = layer;\n\t\t\tif (this.activeLayers[layer]) {\n\t\t\t\tthis.nodes[objectID].addedToScene = true;\n\t\t\t} else {\n\t\t\t\tthis.nodes[objectID].addedToScene = false;\n\t\t\t}\n\t\t\tif (this.edges[objectID] != null && this.edges[objectID] !== undefined) {\n\t\t\t\tfor (let i = 0; i < this.edges[objectID].length; i++) {\n\t\t\t\t\tconst nextEdge = this.edges[objectID][i];\n\t\t\t\t\tif (nextEdge != null && nextEdge !== undefined) {\n\t\t\t\t\t\tnextEdge.addedToScene =\n\t\t\t\t\t\t\tnextEdge.fromID.addedToScene && nextEdge.toID.addedToScene;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.backEdges[objectID] != null && this.backEdges[objectID] !== undefined) {\n\t\t\t\tfor (let i = 0; i < this.backEdges[objectID].length; i++) {\n\t\t\t\t\tconst nextEdge = this.backEdges[objectID][i];\n\t\t\t\t\tif (nextEdge != null && nextEdge !== undefined) {\n\t\t\t\t\t\tnextEdge.addedToScene =\n\t\t\t\t\t\t\tnextEdge.fromID.addedToScene && nextEdge.toID.addedToScene;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tclearAllObjects() {\n\t\tthis.nodes = [];\n\t\tthis.edges = [];\n\t\tthis.backEdges = [];\n\t}\n\n\tsetForegroundColor(objectID, color) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setForegroundColor(color);\n\t\t}\n\t}\n\n\tsetBackgroundColor(objectID, color) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthis.nodes[objectID].setBackgroundColor(color);\n\t\t}\n\t}\n\n\tsetHighlight(nodeID, val, color) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].setHighlight(val, color);\n\t}\n\n\tgetHighlight(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn false;\n\t\t}\n\t\treturn this.nodes[nodeID].getHighlight();\n\t}\n\n\tgetHighlightIndex(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn false;\n\t\t}\n\t\treturn this.nodes[nodeID].getHighlightIndex();\n\t}\n\n\tsetWidth(nodeID, val) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].setWidth(val);\n\t}\n\n\tsetHeight(nodeID, val) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].setHeight(val);\n\t}\n\n\tgetHeight(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn -1;\n\t\t}\n\t\treturn this.nodes[nodeID].getHeight();\n\t}\n\n\tgetWidth(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn -1;\n\t\t}\n\t\treturn this.nodes[nodeID].getWidth();\n\t}\n\n\tbackgroundColor(objectID) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\treturn this.nodes[objectID].backgroundColor;\n\t\t} else {\n\t\t\treturn '#000000';\n\t\t}\n\t}\n\n\tforegroundColor(objectID) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\treturn this.nodes[objectID].foregroundColor;\n\t\t} else {\n\t\t\treturn '#000000';\n\t\t}\n\t}\n\n\tdisconnect(objectIDfrom, objectIDto) {\n\t\tlet undo = null;\n\t\tlet len;\n\t\tlet deleted;\n\t\tif (this.edges[objectIDfrom] != null) {\n\t\t\tlen = this.edges[objectIDfrom].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[objectIDfrom][i] != null &&\n\t\t\t\t\tthis.edges[objectIDfrom][i].toID === this.nodes[objectIDto]\n\t\t\t\t) {\n\t\t\t\t\tdeleted = this.edges[objectIDfrom][i];\n\t\t\t\t\tundo = deleted.createUndoConnect();\n\t\t\t\t\tthis.edges[objectIDfrom][i] = this.edges[objectIDfrom][len - 1];\n\t\t\t\t\tlen -= 1;\n\t\t\t\t\tthis.edges[objectIDfrom].pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.backEdges[objectIDto] != null) {\n\t\t\tlen = this.backEdges[objectIDto].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.backEdges[objectIDto][i] != null &&\n\t\t\t\t\tthis.backEdges[objectIDto][i].fromID === this.nodes[objectIDfrom]\n\t\t\t\t) {\n\t\t\t\t\tdeleted = this.backEdges[objectIDto][i];\n\t\t\t\t\t// Note:  Don't need to remove this child, did it above on the regular edge\n\t\t\t\t\tthis.backEdges[objectIDto][i] = this.backEdges[objectIDto][len - 1];\n\t\t\t\t\tlen -= 1;\n\t\t\t\t\tthis.backEdges[objectIDto].pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undo;\n\t}\n\n\tdeleteIncident(objectID) {\n\t\tconst undoStack = [];\n\t\tlet len;\n\t\tlet deleted;\n\t\tif (this.edges[objectID] != null) {\n\t\t\tlen = this.edges[objectID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tdeleted = this.edges[objectID][i];\n\t\t\t\tconst node2ID = deleted.toID.identifier();\n\t\t\t\tundoStack.push(deleted.createUndoConnect());\n\n\t\t\t\tlet len2 = this.backEdges[node2ID].length;\n\t\t\t\tfor (let j = len2 - 1; j >= 0; j--) {\n\t\t\t\t\tif (this.backEdges[node2ID][j] === deleted) {\n\t\t\t\t\t\tthis.backEdges[node2ID][j] = this.backEdges[node2ID][len2 - 1];\n\t\t\t\t\t\tlen2 -= 1;\n\t\t\t\t\t\tthis.backEdges[node2ID].pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.edges[objectID] = null;\n\t\t}\n\t\tif (this.backEdges[objectID] != null) {\n\t\t\tlen = this.backEdges[objectID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tdeleted = this.backEdges[objectID][i];\n\t\t\t\tconst node1ID = deleted.fromID.identifier();\n\t\t\t\tundoStack.push(deleted.createUndoConnect());\n\n\t\t\t\tlet len2 = this.edges[node1ID].length;\n\t\t\t\tfor (let j = len2 - 1; j >= 0; j--) {\n\t\t\t\t\tif (this.edges[node1ID][j] === deleted) {\n\t\t\t\t\t\tthis.edges[node1ID][j] = this.edges[node1ID][len2 - 1];\n\t\t\t\t\t\tlen2 -= 1;\n\t\t\t\t\t\tthis.edges[node1ID].pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.backEdges[objectID] = null;\n\t\t}\n\t\treturn undoStack;\n\t}\n\n\tremoveObject(objectID) {\n\t\tconst oldObject = this.nodes[objectID];\n\t\tif (objectID === this.nodes.length - 1) {\n\t\t\tthis.nodes.pop();\n\t\t} else {\n\t\t\tthis.nodes[objectID] = null;\n\t\t}\n\t\treturn oldObject;\n\t}\n\n\tgetObject(objectID) {\n\t\tif (this.nodes[objectID] == null || this.nodes[objectID] === undefined) {\n\t\t\tthrow new Error('getObject:Object with ID (' + String(objectID) + ') does not exist');\n\t\t}\n\t\treturn this.nodes[objectID];\n\t}\n\n\taddCircleObject(objectID, objectLabel) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'addCircleObject: object with same ID (' + String(objectID) + ') already exists!',\n\t\t\t);\n\t\t}\n\t\tconst newNode = new AnimatedCircle(objectID, objectLabel);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tgetNodeX(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('Getting x position of an object that does not exist');\n\t\t}\n\t\treturn this.nodes[nodeID].x;\n\t}\n\n\tgetTextWidth(text) {\n\t\t// TODO:  Need to make fonts more flexible, and less hardwired.\n\t\tthis.ctx.font = '12px Arial';\n\t\tconst strList = text.split('\\n');\n\t\tlet width = 0;\n\t\tif (strList.length === 1) {\n\t\t\twidth = this.ctx.measureText(text).width;\n\t\t} else {\n\t\t\tfor (let i = 0; i < strList.length; i++) {\n\t\t\t\twidth = Math.max(width, this.ctx.measureText(strList[i]).width);\n\t\t\t}\n\t\t}\n\n\t\treturn width;\n\t}\n\n\tsetText(nodeID, text, index) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('setting text of an object that does not exist');\n\t\t}\n\t\tthis.nodes[nodeID].setText(text, index, this.getTextWidth(text));\n\t}\n\n\tgetText(nodeID, index) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('getting text of an object that does not exist');\n\t\t}\n\t\treturn this.nodes[nodeID].getText(index);\n\t}\n\n\tgetNodeY(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('getting y position of an object that does not exist');\n\t\t}\n\t\treturn this.nodes[nodeID].y;\n\t}\n\n\tconnectEdge(objectIDfrom, objectIDto, color, curve, directed, lab, connectionPoint, thickness) {\n\t\tconst fromObj = this.nodes[objectIDfrom];\n\t\tconst toObj = this.nodes[objectIDto];\n\t\tif (fromObj == null || toObj == null) {\n\t\t\tthrow new Error(\"Tried to connect two nodes, one didn't exist!\");\n\t\t}\n\t\tconst l = new AnimatedLine(\n\t\t\tfromObj,\n\t\t\ttoObj,\n\t\t\tcolor,\n\t\t\tcurve,\n\t\t\tdirected,\n\t\t\tlab,\n\t\t\tconnectionPoint,\n\t\t\tthickness,\n\t\t);\n\t\tif (this.edges[objectIDfrom] == null) {\n\t\t\tthis.edges[objectIDfrom] = [];\n\t\t}\n\t\tif (this.backEdges[objectIDto] == null) {\n\t\t\tthis.backEdges[objectIDto] = [];\n\t\t}\n\t\tl.addedToScene = fromObj.addedToScene && toObj.addedToScene;\n\t\tthis.edges[objectIDfrom].push(l);\n\t\tthis.backEdges[objectIDto].push(l);\n\t}\n\n\tsetNull(objectID, nullVal) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setNull(nullVal);\n\t\t}\n\t}\n\n\tsetPrevNull(objectID, nullVal) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setPrevNull(nullVal);\n\t\t}\n\t}\n\n\tsetNextNull(objectID, nullVal) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setNextNull(nullVal);\n\t\t}\n\t}\n\n\tgetNull(objectID) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\treturn this.nodes[objectID].getNull();\n\t\t}\n\t\treturn false; // TODO:  Error here?\n\t}\n\n\tgetLeftNull(objectID) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\treturn this.nodes[objectID].getLeftNull();\n\t\t}\n\t\treturn false; // TODO:  Error here?\n\t}\n\n\tgetRightNull(objectID) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\treturn this.nodes[objectID].getRightNull();\n\t\t}\n\t\treturn false; // TODO:  Error here?\n\t}\n\n\tsetEdgeColor(\n\t\tfromID,\n\t\ttoID,\n\t\tcolor, // returns old color\n\t) {\n\t\tlet oldColor = '#000000';\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldColor = this.edges[fromID][i].color();\n\t\t\t\t\tthis.edges[fromID][i].setColor(color);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldColor;\n\t}\n\n\talignTop(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignTop(this.nodes[id2]);\n\t}\n\n\talignLeft(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignLeft(this.nodes[id2]);\n\t}\n\n\talignRight(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignRight(this.nodes[id2]);\n\t}\n\n\tgetAlignRightPos(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\treturn this.nodes[id1].getAlignRightPos(this.nodes[id2]);\n\t}\n\n\tgetAlignLeftPos(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\treturn this.nodes[id1].getAlignLeftPos(this.nodes[id2]);\n\t}\n\n\talignBottom(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignBottom(this.nodes[id2]);\n\t}\n\n\tsetAlwaysOnTop(nodeID, onTop) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tconst oldTop = this.nodes[nodeID].alwaysOnTop;\n\t\t\tthis.nodes[nodeID].alwaysOnTop = onTop;\n\t\t\treturn oldTop;\n\t\t} else {\n\t\t\tthrow new Error(\"Trying to bring node that doesn't exist to top\");\n\t\t}\n\t}\n\n\tsetEdgeHighlight(fromID, toID, val, color) {\n\t\tlet oldHighlight = false;\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldHighlight = this.edges[fromID][i].highlighted;\n\t\t\t\t\tthis.edges[fromID][i].setHighlight(val, color);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldHighlight;\n\t}\n\n\tsetEdgeThickness(fromID, toID, val) {\n\t\tlet oldThickness = 1;\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldThickness = this.edges[fromID][i].thickness;\n\t\t\t\t\tthis.edges[fromID][i].setThickness(val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldThickness;\n\t}\n\n\tsetRectangleEdgeThickness(nodeID, thicknessArray) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tconst oldEdgeThickness = this.nodes[nodeID].getEdgeThickness();\n\t\t\tthis.nodes[nodeID].setEdgeThickness(thicknessArray);\n\t\t\treturn oldEdgeThickness;\n\t\t} else {\n\t\t\tthrow new Error(\"Trying to bring node that doesn't exist to top\");\n\t\t}\n\t}\n\n\taddLabelObject(objectID, objectLabel, centering) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error('addLabelObject: object already exists!');\n\t\t}\n\n\t\tconst newLabel = new AnimatedLabel(\n\t\t\tobjectID,\n\t\t\tobjectLabel,\n\t\t\tcentering,\n\t\t\tthis.getTextWidth(objectLabel),\n\t\t);\n\t\tthis.nodes[objectID] = newLabel;\n\t}\n\n\taddLinkedListObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\tlinkPer,\n\t\tverticalOrientation,\n\t\tlinkPosEnd,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addLinkedListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedLinkedListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tlinkPer,\n\t\t\tverticalOrientation,\n\t\t\tlinkPosEnd,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddDoublyLinkedListObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\tlinkPer,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addDoublyLinkedListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedDoublyLinkedListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tlinkPer,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddCircularlyLinkedListObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\tlinkPer,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addCircularlyLinkedListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedCircularlyLinkedListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tlinkPer,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddSkipListObject(objectID, nodeLabel, width, height, backgroundColor, foregroundColor) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addSkipListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedSkipListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tgetNumElements(objectID) {\n\t\treturn this.nodes[objectID].getNumElements();\n\t}\n\n\tsetNumElements(objectID, numElems) {\n\t\tthis.nodes[objectID].setNumElements(numElems);\n\t}\n\n\taddBTreeNode(objectID, widthPerElem, height, numElems, backgroundColor, foregroundColor) {\n\t\tbackgroundColor = backgroundColor === undefined ? '#FFFFFF' : backgroundColor;\n\t\tforegroundColor = foregroundColor === undefined ? '#FFFFFF' : foregroundColor;\n\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error('addBTreeNode: object with same ID already exists!');\n\t\t}\n\n\t\tconst newNode = new AnimatedBTreeNode(\n\t\t\tobjectID,\n\t\t\twidthPerElem,\n\t\t\theight,\n\t\t\tnumElems,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddRectangleObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\txJustify,\n\t\tyJustify,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error('addRectangleObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedRectangle(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\txJustify,\n\t\t\tyJustify,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tsetNodePosition(nodeID, newX, newY) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tif (newX === undefined || newY === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].x = newX;\n\t\tthis.nodes[nodeID].y = newY;\n\t\t/* Don't need to dirty anything, since we repaint everything every frame\n\t\t (TODO:  Revisit if we do conditional redraws) */\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Global timer used for doing animation callbacks.\n//  TODO:  Make this an instance variable of Animation Manager.\n\n/* global canvas */\n\nimport {\n\tUndoCreate,\n\tUndoHighlight,\n\tUndoHighlightEdge,\n\tUndoMove,\n\tUndoSetAlpha,\n\tUndoSetAlwaysOnTop,\n\tUndoSetBackgroundColor,\n\tUndoSetEdgeAlpha,\n\tUndoSetEdgeColor,\n\tUndoSetEdgeThickness,\n\tUndoSetForegroundColor,\n\tUndoSetHeight,\n\tUndoSetHighlightIndex,\n\tUndoSetNextNull,\n\tUndoSetNull,\n\tUndoSetNumElements,\n\tUndoSetPosition,\n\tUndoSetPrevNull,\n\tUndoSetRectangleEdgeThickness,\n\tUndoSetText,\n\tUndoSetTextColor,\n\tUndoSetWidth,\n} from './UndoFunctions.js';\nimport EventListener from './CustomEvents.js';\nimport ObjectManager from './ObjectManager.js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport SingleAnimation from './SingleAnimation.js';\nimport { Slider } from '@material-ui/core';\nimport { UndoConnect } from './AnimatedLine.js';\n\n// Utility function to read a cookie\nfunction getCookie(cookieName) {\n\tlet i, x, y;\n\tconst cookies = document.cookie.split(';');\n\tfor (i = 0; i < cookies.length; i++) {\n\t\tx = cookies[i].substr(0, cookies[i].indexOf('='));\n\t\ty = cookies[i].substr(cookies[i].indexOf('=') + 1);\n\t\tx = x.replace(/^\\s+|\\s+$/g, '');\n\t\tif (x === cookieName) {\n\t\t\treturn unescape(y);\n\t\t}\n\t}\n}\n\n// Utility function to write a cookie\nfunction setCookie(cookieName, value, expireDays) {\n\tconst exDate = new Date();\n\texDate.setDate(exDate.getDate() + expireDays);\n\tdocument.cookie = cookieName + '=' + value;\n}\n\nconst ANIMATION_SPEED_DEFAULT = 75;\n\n// TODO:  Move these out of global space into animation manager?\n\nfunction controlKey(keyASCII) {\n\treturn (\n\t\tkeyASCII === 8 ||\n\t\tkeyASCII === 9 ||\n\t\tkeyASCII === 37 ||\n\t\tkeyASCII === 38 ||\n\t\tkeyASCII === 39 ||\n\t\tkeyASCII === 40 ||\n\t\tkeyASCII === 46\n\t);\n}\n\nfunction returnSubmit(field, func, maxSize, intOnly) {\n\tif (maxSize !== undefined) {\n\t\tfield.size = maxSize;\n\t}\n\treturn function (event) {\n\t\tlet keyASCII = 0;\n\t\tif (window.event) {\n\t\t\t// IE\n\t\t\tkeyASCII = event.keyCode;\n\t\t} else if (event.which) {\n\t\t\t// Netscape/Firefox/Opera\n\t\t\tkeyASCII = event.which;\n\t\t}\n\n\t\tif (keyASCII === 13) {\n\t\t\tfunc();\n\t\t\treturn false;\n\t\t} else if (\n\t\t\tkeyASCII === 59 ||\n\t\t\tkeyASCII === 45 ||\n\t\t\tkeyASCII === 46 ||\n\t\t\tkeyASCII === 190 ||\n\t\t\tkeyASCII === 173\n\t\t) {\n\t\t\treturn false;\n\t\t} else if (\n\t\t\t(maxSize !== undefined && field.value.length >= maxSize) ||\n\t\t\t(intOnly && (keyASCII < 48 || keyASCII > 57))\n\t\t) {\n\t\t\tif (!controlKey(keyASCII)) return false;\n\t\t}\n\t\treturn true;\n\t};\n}\n\nfunction addControlToAnimationBar(animBarRef, type, name, callback) {\n\tconst element = document.createElement('input');\n\n\telement.setAttribute('type', type);\n\telement.setAttribute('value', name);\n\tif (type === 'Button') {\n\t\telement.onclick = callback;\n\t} else if (type === 'Text') {\n\t\telement.onkeydown = callback;\n\t}\n\n\tconst tableEntry = document.createElement('td');\n\n\ttableEntry.appendChild(element);\n\n\tanimBarRef.current.appendChild(tableEntry);\n\treturn element;\n}\n\nfunction addDivisorToAnimationBar(animBarRef) {\n\tconst divisorLeft = document.createElement('td');\n\tdivisorLeft.setAttribute('class', 'divisorLeft');\n\n\tconst divisorRight = document.createElement('td');\n\tdivisorRight.setAttribute('class', 'divisorRight');\n\n\tanimBarRef.current.appendChild(divisorLeft);\n\tanimBarRef.current.appendChild(divisorRight);\n}\n\nexport default class AnimationManager extends EventListener {\n\tconstructor(canvasRef, animBarRef) {\n\t\tsuper();\n\n\t\tthis.objectManager = new ObjectManager(canvasRef);\n\t\t// Holder for all animated objects.\n\t\t// All animation is done by manipulating objects in\n\t\t// this container\n\t\tthis.animatedObjects = this.objectManager;\n\n\t\t// Control variables for stopping / starting animation\n\t\tthis.animationPaused = false;\n\t\tthis.awaitingStep = false;\n\t\tthis.currentlyAnimating = false;\n\n\t\t// Array holding the code for the animation.  This is\n\t\t// an array of strings, each of which is an animation command\n\t\t// currentAnimation is an index into this array\n\t\tthis.animationSteps = [];\n\t\tthis.currentAnimation = 0;\n\n\t\tthis.previousAnimationSteps = [];\n\n\t\t// Control variables for where we are in the current animation block.\n\t\t// currFrame holds the frame number of the current animation block,\n\t\t// while animationBlockLength holds the length of the current animation\n\t\t// block (in frame numbers).\n\t\tthis.currFrame = 0;\n\t\tthis.animationBlockLength = 0;\n\n\t\t//  The animation block that is currently running.  Array of singleAnimations\n\t\tthis.currentBlock = null;\n\n\t\t////////////////////////////////////\n\t\t// Variables for handling undo.\n\t\t////////////////////////////////////\n\t\t//  A stack of UndoBlock objects (subclassed, UndoBlock is an abstract base class)\n\t\t//  each of which can undo a single animation element\n\t\tthis.undoStack = [];\n\t\tthis.doingUndo = false;\n\n\t\t// A stack containing the beginning of each animation block, as an index\n\t\t// into the animationSteps array\n\t\tthis.undoAnimationStepIndices = [];\n\t\tthis.undoAnimationStepIndicesStack = [];\n\n\t\tthis.animationBlockLength = 10;\n\n\t\tthis.paused = false;\n\n\t\tthis.canvas = canvasRef;\n\n\t\tthis.skipBackButton = addControlToAnimationBar(animBarRef, 'Button', 'Skip Back', () =>\n\t\t\tthis.skipBack(),\n\t\t);\n\t\tthis.stepBackButton = addControlToAnimationBar(animBarRef, 'Button', 'Step Back', () =>\n\t\t\tthis.stepBack(),\n\t\t);\n\t\tthis.playPauseBackButton = addControlToAnimationBar(animBarRef, 'Button', 'Pause', () =>\n\t\t\tthis.doPlayPause(),\n\t\t);\n\t\tthis.playPauseBackButton.setAttribute('style', 'width: 80px');\n\t\tthis.stepForwardButton = addControlToAnimationBar(\n\t\t\tanimBarRef,\n\t\t\t'Button',\n\t\t\t'Step Forward',\n\t\t\t() => this.step(),\n\t\t);\n\t\tthis.skipForwardButton = addControlToAnimationBar(\n\t\t\tanimBarRef,\n\t\t\t'Button',\n\t\t\t'Skip Forward',\n\t\t\t() => this.skipForward(),\n\t\t);\n\n\t\taddDivisorToAnimationBar(animBarRef);\n\n\t\tconst element = document.createElement('div');\n\t\telement.setAttribute('display', 'inline-block');\n\t\telement.setAttribute('float', 'left');\n\n\t\tlet speed = getCookie('VisualizationSpeed');\n\t\tif (speed == null || speed === '') {\n\t\t\tspeed = ANIMATION_SPEED_DEFAULT;\n\t\t} else {\n\t\t\tspeed = parseInt(speed);\n\t\t}\n\n\t\tconst slider = (\n\t\t\t<Slider\n\t\t\t\tdefaultValue={speed}\n\t\t\t\tonChange={(e, val) => {\n\t\t\t\t\tthis.setSpeed(val);\n\t\t\t\t\tsetCookie('VisualizationSpeed', String(val), 30);\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\n\t\tlet tableEntry = document.createElement('td');\n\n\t\tconst controlBar = document.getElementById('GeneralAnimationControls');\n\n\t\tconst newTable = document.createElement('table');\n\n\t\tlet midLevel = document.createElement('tr');\n\t\tlet bottomLevel = document.createElement('td');\n\t\tmidLevel.appendChild(bottomLevel);\n\t\tReactDOM.render(slider, bottomLevel);\n\t\tnewTable.appendChild(midLevel);\n\n\t\tmidLevel = document.createElement('tr');\n\t\tbottomLevel = document.createElement('td');\n\t\tbottomLevel.align = 'center';\n\t\tlet txtNode = document.createTextNode('Animation Speed');\n\t\tmidLevel.appendChild(bottomLevel);\n\t\tbottomLevel.appendChild(txtNode);\n\t\tnewTable.appendChild(midLevel);\n\n\t\ttableEntry.appendChild(newTable);\n\n\t\t// Append the element in page (in span)\n\t\tcontrolBar.appendChild(tableEntry);\n\n\t\tthis.setSpeed(speed);\n\n\t\telement.setAttribute('style', 'width:200px');\n\n\t\taddDivisorToAnimationBar(animBarRef);\n\n\t\tlet width = getCookie('VisualizationWidth');\n\t\twidth = width == null || width === '' ? 1500 : parseInt(width);\n\n\t\tlet height = getCookie('VisualizationHeight');\n\t\theight = height == null || height === '' ? 505 : parseInt(height);\n\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\n\t\ttableEntry = document.createElement('td');\n\t\ttxtNode = document.createTextNode('h:');\n\t\ttableEntry.appendChild(txtNode);\n\t\tcontrolBar.appendChild(tableEntry);\n\n\t\tthis.heightEntry = addControlToAnimationBar(animBarRef, 'Text', canvas.height, () =>\n\t\t\treturnSubmit(\n\t\t\t\tthis.heightEntry,\n\t\t\t\t() =>\n\t\t\t\t\tthis.changeSize(\n\t\t\t\t\t\tdocument.documentElement.clientWidth,\n\t\t\t\t\t\tparseInt(this.heightEntry.value),\n\t\t\t\t\t),\n\t\t\t\t4,\n\t\t\t\ttrue,\n\t\t\t),\n\t\t);\n\n\t\tthis.heightEntry.size = 4;\n\t\tthis.sizeButton = addControlToAnimationBar(animBarRef, 'Button', 'Change Canvas Size', () =>\n\t\t\tthis.changeSize(),\n\t\t);\n\n\t\tthis.addListener('AnimationStarted', this, this.animStarted);\n\t\tthis.addListener('AnimationEnded', this, this.animEnded);\n\t\tthis.addListener('AnimationWaiting', this, this.animWaiting);\n\t\tthis.addListener('AnimationUndoUnavailable', this, this.animUndoUnavailable);\n\t\tthis.objectManager.width = canvas.width;\n\t\tthis.objectManager.height = canvas.height;\n\t}\n\n\tlerp(from, to, percent) {\n\t\treturn (to - from) * percent + from;\n\t}\n\n\t// Pause / unpause animation\n\tsetPaused(pausedValue) {\n\t\tthis.animationPaused = pausedValue;\n\t\tif (!this.animationPaused) {\n\t\t\tthis.step();\n\t\t}\n\t}\n\n\tparseBool(str) {\n\t\tconst uppercase = str.toUpperCase();\n\t\tconst returnVal = !(\n\t\t\tuppercase === 'False' ||\n\t\t\tuppercase === 'f' ||\n\t\t\tuppercase === ' 0' ||\n\t\t\tuppercase === '0' ||\n\t\t\tuppercase === ''\n\t\t);\n\t\treturn returnVal;\n\t}\n\n\tparseColor(clr) {\n\t\tif (clr.charAt(0) === '#') {\n\t\t\treturn clr;\n\t\t} else if (clr.substring(0, 2) === '0x') {\n\t\t\treturn '#' + clr.substring(2);\n\t\t}\n\t}\n\n\t// Set the speed of the animation, from 0 (slow) to 100 (fast)\n\tsetSpeed(newSpeed) {\n\t\tthis.animationBlockLength = Math.floor((100 - newSpeed) / 2);\n\t}\n\n\tchangeSize(\n\t\twidth = document.documentElement.clientWidth,\n\t\theight = parseInt(this.heightEntry.value),\n\t) {\n\t\tif (width > 100) {\n\t\t\tcanvas.width = width;\n\t\t\tthis.animatedObjects.width = width;\n\t\t\tsetCookie('VisualizationWidth', String(width), 30);\n\t\t}\n\t\tif (height > 100) {\n\t\t\tcanvas.height = height;\n\t\t\tthis.animatedObjects.height = height;\n\t\t\tsetCookie('VisualizationHeight', String(height), 30);\n\t\t}\n\t\tthis.heightEntry.value = canvas.height;\n\n\t\tthis.animatedObjects.draw();\n\t\tthis.fireEvent('CanvasSizeChanged', { width: canvas.width, height: canvas.height });\n\t}\n\n\tstartNextBlock() {\n\t\tthis.awaitingStep = false;\n\t\tthis.currentBlock = [];\n\t\tthis.undoBlock = [];\n\t\tif (this.currentAnimation === this.animationSteps.length) {\n\t\t\tthis.currentlyAnimating = false;\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.fireEvent('AnimationEnded', 'NoData');\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\t\t\treturn;\n\t\t}\n\t\tthis.undoAnimationStepIndices.push(this.currentAnimation);\n\n\t\tthis.foundBreak = false;\n\t\tthis.anyAnimations = false;\n\n\t\twhile (this.currentAnimation < this.animationSteps.length && !this.foundBreak) {\n\t\t\tconst [act, params] = this.animationSteps[this.currentAnimation];\n\t\t\tact.call(this, params);\n\t\t\tthis.currentAnimation++;\n\t\t}\n\t\tthis.currFrame = 0;\n\n\t\t// Hack:  If there are not any animations, and we are currently paused,\n\t\t// then set the current frame to the end of the animation, so that we will\n\t\t// advance immediately upon the next step button.  If we are not paused, then\n\t\t// animate as normal.\n\t\tif (\n\t\t\t(!this.anyAnimations && this.animationPaused) ||\n\t\t\t(!this.anyAnimations && this.currentAnimation === this.animationSteps.length)\n\t\t) {\n\t\t\tthis.currFrame = this.animationBlockLength;\n\t\t}\n\n\t\tthis.undoStack.push(this.undoBlock);\n\t}\n\n\t//  Start a new animation.  The input parameter commands is an array of strings,\n\t//  which represents the animation to start\n\tstartNewAnimation(commands) {\n\t\tthis.stopTimer();\n\t\tif (this.animationSteps !== null) {\n\t\t\tthis.previousAnimationSteps.push(this.animationSteps);\n\t\t\tthis.undoAnimationStepIndicesStack.push(this.undoAnimationStepIndices);\n\t\t}\n\t\tif (commands === undefined || commands.length === 0) {\n\t\t\tthis.animationSteps = [[act.step, []]];\n\t\t} else {\n\t\t\tthis.animationSteps = commands;\n\t\t}\n\t\tthis.undoAnimationStepIndices = [];\n\t\tthis.currentAnimation = 0;\n\t\tthis.startNextBlock();\n\t\tthis.currentlyAnimating = true;\n\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\tthis.startTimer();\n\t}\n\n\t// Step backwards one step.  A no-op if the animation is not currently paused\n\tstepBack() {\n\t\tif (this.awaitingStep && this.undoStack !== null && this.undoStack.length !== 0) {\n\t\t\t//  TODO:  Get events working correctly!\n\t\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\t\tthis.stopTimer();\n\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.undoLastBlock();\n\t\t\t// Re-kick the timer.  The timer may or may not be running at this point,\n\t\t\t// so to be safe we'll kill it and start it again.\n\t\t\tthis.stopTimer();\n\t\t\tthis.startTimer();\n\t\t} else if (\n\t\t\t!this.currentlyAnimating &&\n\t\t\tthis.animationPaused &&\n\t\t\tthis.undoAnimationStepIndices !== null\n\t\t) {\n\t\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\t\tthis.currentlyAnimating = true;\n\t\t\tthis.undoLastBlock();\n\t\t\t// Re-kick the timer.  The timer may or may not be running at this point,\n\t\t\t// so to be safe we'll kill it and start it again.\n\t\t\tthis.stopTimer();\n\t\t\tthis.startTimer();\n\t\t}\n\t}\n\n\t// Step forwards one step.  A no-op if the animation is not currently paused\n\tstep() {\n\t\tif (this.awaitingStep) {\n\t\t\tthis.startNextBlock();\n\t\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\t\tthis.currentlyAnimating = true;\n\t\t\t// Re-kick the timer.  The timer should be going now, but we've had some difficulty with\n\t\t\t// it timing itself out, so we'll be safe and kick it now.\n\t\t\tthis.stopTimer();\n\t\t\tthis.startTimer();\n\t\t}\n\t}\n\n\t/// WARNING:  Could be dangerous to call while an animation is running ...\n\tclearHistory() {\n\t\tthis.undoStack = [];\n\t\tthis.undoAnimationStepIndices = null;\n\t\tthis.previousAnimationSteps = [];\n\t\tthis.undoAnimationStepIndicesStack = [];\n\t\tthis.animationSteps = null;\n\t\tthis.fireEvent('AnimationUndoUnavailable', 'NoData');\n\t\tthis.stopTimer();\n\t\tthis.animatedObjects.update();\n\t\tthis.animatedObjects.draw();\n\t}\n\n\tskipBack() {\n\t\tlet keepUndoing =\n\t\t\tthis.undoAnimationStepIndices !== null && this.undoAnimationStepIndices.length !== 0;\n\t\tif (keepUndoing) {\n\t\t\tlet i;\n\t\t\tfor (i = 0; this.currentBlock !== null && i < this.currentBlock.length; i++) {\n\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\tobjectID,\n\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.doingUndo) {\n\t\t\t\tthis.finishUndoBlock(this.undoStack.pop());\n\t\t\t}\n\t\t\twhile (keepUndoing) {\n\t\t\t\tthis.undoLastBlock();\n\t\t\t\tfor (i = 0; i < this.currentBlock.length; i++) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tobjectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tkeepUndoing = this.finishUndoBlock(this.undoStack.pop());\n\t\t\t}\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\t\t\tif (this.undoStack == null || this.undoStack.length === 0) {\n\t\t\t\tthis.fireEvent('AnimationUndoUnavailable', 'NoData');\n\t\t\t}\n\t\t}\n\t}\n\n\tresetAll() {\n\t\tthis.clearHistory();\n\t\tthis.animatedObjects.clearAllObjects();\n\t\tthis.animatedObjects.draw();\n\t\tthis.stopTimer();\n\t}\n\n\tskipForward() {\n\t\tif (this.currentlyAnimating) {\n\t\t\tthis.animatedObjects.runFast = true;\n\t\t\twhile (\n\t\t\t\tthis.animationSteps !== null &&\n\t\t\t\tthis.currentAnimation < this.animationSteps.length\n\t\t\t) {\n\t\t\t\tfor (let i = 0; this.currentBlock !== null && i < this.currentBlock.length; i++) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tobjectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (this.doingUndo) {\n\t\t\t\t\tthis.finishUndoBlock(this.undoStack.pop());\n\t\t\t\t}\n\t\t\t\tthis.startNextBlock();\n\t\t\t\tfor (let i = 0; i < this.currentBlock.length; i++) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tobjectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.currentlyAnimating = false;\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.doingUndo = false;\n\n\t\t\tthis.animatedObjects.runFast = false;\n\t\t\tthis.fireEvent('AnimationEnded', 'NoData');\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\t\t}\n\t}\n\n\tfinishUndoBlock(undoBlock) {\n\t\tfor (let i = undoBlock.length - 1; i >= 0; i--) {\n\t\t\tundoBlock[i].undoInitialStep(this.animatedObjects);\n\t\t}\n\t\tthis.doingUndo = false;\n\n\t\t// If we are at the final end of the animation ...\n\t\tif (this.undoAnimationStepIndices.length === 0) {\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.currentlyAnimating = false;\n\t\t\tthis.undoAnimationStepIndices = this.undoAnimationStepIndicesStack.pop();\n\t\t\tthis.animationSteps = this.previousAnimationSteps.pop();\n\t\t\tthis.fireEvent('AnimationEnded', 'NoData');\n\t\t\tthis.fireEvent('AnimationUndo', 'NoData');\n\t\t\tthis.currentBlock = [];\n\t\t\tif (this.undoStack == null || this.undoStack.length === 0) {\n\t\t\t\tthis.currentlyAnimating = false;\n\t\t\t\tthis.awaitingStep = false;\n\t\t\t\tthis.fireEvent('AnimationUndoUnavailable', 'NoData');\n\t\t\t}\n\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tundoLastBlock() {\n\t\tif (this.undoAnimationStepIndices.length === 0) {\n\t\t\t// Nothing on the undo stack.  Return\n\t\t\treturn;\n\t\t}\n\t\tif (this.undoAnimationStepIndices.length > 0) {\n\t\t\tthis.doingUndo = true;\n\t\t\tlet anyAnimations = false;\n\t\t\tthis.currentAnimation = this.undoAnimationStepIndices.pop();\n\t\t\tthis.currentBlock = [];\n\t\t\tconst undo = this.undoStack[this.undoStack.length - 1];\n\t\t\tlet i;\n\t\t\tfor (i = undo.length - 1; i >= 0; i--) {\n\t\t\t\tconst animateNext = undo[i].addUndoAnimation(this.currentBlock);\n\t\t\t\tanyAnimations = anyAnimations || animateNext;\n\t\t\t}\n\t\t\tthis.currFrame = 0;\n\n\t\t\t// Hack:  If there are not any animations, and we are currently paused,\n\t\t\t// then set the current frame to the end of the animation, so that we will\n\t\t\t// advance immediately upon the next step button.  If we are not paused, then\n\t\t\t// animate as normal.\n\t\t\tif (!anyAnimations && this.animationPaused) {\n\t\t\t\tthis.currFrame = this.animationBlockLength;\n\t\t\t}\n\t\t\tthis.currentlyAnimating = true;\n\t\t}\n\t}\n\n\tsetLayer(shown, layers) {\n\t\tthis.animatedObjects.setLayer(shown, layers);\n\t\t// Drop in an extra draw call here, just in case we are not\n\t\t// in the middle of an update loop when this changes\n\t\tthis.animatedObjects.draw();\n\t}\n\n\tsetAllLayers(layers) {\n\t\tthis.animatedObjects.setAllLayers(layers);\n\t\t// Drop in an extra draw call here, just in case we are not\n\t\t// in the middle of an update loop when this changes\n\t\tthis.animatedObjects.draw();\n\t}\n\n\tupdate() {\n\t\tif (this.currentlyAnimating) {\n\t\t\tthis.currFrame = this.currFrame + 1;\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < this.currentBlock.length; i++) {\n\t\t\t\tif (\n\t\t\t\t\tthis.currFrame === this.animationBlockLength ||\n\t\t\t\t\t(this.currFrame === 1 && this.animationBlockLength === 0)\n\t\t\t\t) {\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tthis.currentBlock[i].objectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t} else if (this.currFrame < this.animationBlockLength) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tconst percent = 1 / (this.animationBlockLength - this.currFrame);\n\t\t\t\t\tconst newX = this.lerp(\n\t\t\t\t\t\tthis.animatedObjects.getNodeX(objectID),\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tpercent,\n\t\t\t\t\t);\n\t\t\t\t\tconst newY = this.lerp(\n\t\t\t\t\t\tthis.animatedObjects.getNodeY(objectID),\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t\tpercent,\n\t\t\t\t\t);\n\t\t\t\t\tthis.animatedObjects.setNodePosition(objectID, newX, newY);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.currFrame >= this.animationBlockLength) {\n\t\t\t\tif (this.doingUndo) {\n\t\t\t\t\tif (this.finishUndoBlock(this.undoStack.pop())) {\n\t\t\t\t\t\tthis.awaitingStep = true;\n\t\t\t\t\t\tthis.fireEvent('AnimationWaiting', 'NoData');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.animationPaused &&\n\t\t\t\t\t\tthis.currentAnimation < this.animationSteps.length\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.awaitingStep = true;\n\t\t\t\t\t\tthis.fireEvent('AnimationWaiting', 'NoData');\n\t\t\t\t\t\tthis.currentBlock = [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.startNextBlock();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.animatedObjects.update();\n\t\t}\n\t}\n\n\tanimWaiting() {\n\t\tthis.stepForwardButton.disabled = false;\n\t\tif (this.skipBackButton.disabled === false) {\n\t\t\tthis.stepBackButton.disabled = false;\n\t\t}\n\t\tthis.objectManager.statusReport.setText('Animation Paused');\n\t\tthis.objectManager.statusReport.setForegroundColor('#FF0000');\n\t}\n\n\tanimStarted() {\n\t\tthis.skipForwardButton.disabled = false;\n\t\tthis.skipBackButton.disabled = false;\n\t\tthis.stepForwardButton.disabled = true;\n\t\tthis.stepBackButton.disabled = true;\n\t\tthis.objectManager.statusReport.setText('Animation Running');\n\t\tthis.objectManager.statusReport.setForegroundColor('#009900');\n\t}\n\n\tanimEnded() {\n\t\tthis.skipForwardButton.disabled = true;\n\t\tthis.stepForwardButton.disabled = true;\n\t\tif (this.skipBackButton.disabled === false && this.paused) {\n\t\t\tthis.stepBackButton.disabled = false;\n\t\t}\n\t\tthis.objectManager.statusReport.setText('Animation Completed');\n\t\tthis.objectManager.statusReport.setForegroundColor('#000000');\n\t}\n\n\tanimUndoUnavailable() {\n\t\tthis.skipBackButton.disabled = true;\n\t\tthis.stepBackButton.disabled = true;\n\t}\n\n\ttimeout() {\n\t\t// We need to set the timeout *first*, otherwise if we\n\t\t// try to clear it later, we get behavior we don't want ...\n\t\tthis.timer = setTimeout(() => this.timeout(), 30);\n\t\tthis.update();\n\t\tthis.objectManager.draw();\n\t}\n\n\tdoPlayPause() {\n\t\tthis.paused = !this.paused;\n\t\tif (this.paused) {\n\t\t\tthis.playPauseBackButton.setAttribute('value', 'Play');\n\t\t\tif (this.skipBackButton.disabled === false) {\n\t\t\t\tthis.stepBackButton.disabled = false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.playPauseBackButton.setAttribute('value', 'Pause');\n\t\t}\n\t\tthis.setPaused(this.paused);\n\t}\n\n\tstartTimer() {\n\t\tthis.timer = setTimeout(() => this.timeout(), 30);\n\t}\n\n\tstopTimer() {\n\t\tclearInterval(this.timer);\n\t}\n}\n\nexport const act = {\n\tstep() {\n\t\tthis.foundBreak = true;\n\t},\n\tmove(params) {\n\t\t// id, x, y\n\t\tconst nextAnim = new SingleAnimation(\n\t\t\tparams[0],\n\t\t\tthis.animatedObjects.getNodeX(params[0]),\n\t\t\tthis.animatedObjects.getNodeY(params[0]),\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t);\n\t\tthis.currentBlock.push(nextAnim);\n\t\tthis.undoBlock.push(\n\t\t\tnew UndoMove(\n\t\t\t\tnextAnim.objectID,\n\t\t\t\tnextAnim.toX,\n\t\t\t\tnextAnim.toY,\n\t\t\t\tnextAnim.fromX,\n\t\t\t\tnextAnim.fromY,\n\t\t\t),\n\t\t);\n\t\tthis.anyAnimations = true;\n\t},\n\tdelete(params) {\n\t\t// id\n\t\tconst removedEdges = this.animatedObjects.deleteIncident(params[0]);\n\t\tif (removedEdges.length > 0) {\n\t\t\tthis.undoBlock = this.undoBlock.concat(removedEdges);\n\t\t}\n\t\tconst obj = this.animatedObjects.getObject(params[0]);\n\t\tif (obj !== null) {\n\t\t\tthis.undoBlock.push(obj.createUndoDelete());\n\t\t\tthis.animatedObjects.removeObject(params[0]);\n\t\t}\n\t},\n\tconnect(params) {\n\t\t// fromID, toID | color, curve, directed, label, anchorPos, thickness\n\t\tparams[2] = params[2] || '#000000';\n\t\tparams[3] = params[3] || 0.0;\n\t\tparams[4] = params[4] !== false && params[4] !== 0;\n\t\tparams[5] = params[5] === undefined ? '' : params[5];\n\t\tparams[6] = params[6] || 0;\n\t\tparams[7] = params[7] === undefined ? 1 : params[7];\n\t\tthis.animatedObjects.connectEdge(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[4],\n\t\t\tString(params[5]),\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectNext(params) {\n\t\t// fromID, toID\n\t\tthis.animatedObjects.connectEdge(params[0], params[1], '#000000', 0.0, true, '', 0);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectPrev(params) {\n\t\t// fromID, toID\n\t\tthis.animatedObjects.connectEdge(params[0], params[1], '#000000', 0.0, true, '', 1);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectCurve(params) {\n\t\t// fromID, toID, curve\n\t\tthis.animatedObjects.connectEdge(params[0], params[1], '#000000', params[2], true, '', 1);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectSkipList(params) {\n\t\t// fromID, toID, anchorPos\n\t\tthis.animatedObjects.connectEdge(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\t'#000000',\n\t\t\t0.0,\n\t\t\tfalse,\n\t\t\t'',\n\t\t\tparams[2],\n\t\t);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tdisconnect(params) {\n\t\t// fromID, toID\n\t\tconst undoConnect = this.animatedObjects.disconnect(params[0], params[1]);\n\t\tif (undoConnect !== null) this.undoBlock.push(undoConnect);\n\t},\n\tcreateCircle(params) {\n\t\t// id, label | x, y\n\t\tparams[2] = params[2] || 0;\n\t\tparams[3] = params[3] || 0;\n\t\tthis.animatedObjects.addCircleObject(params[0], String(params[1]));\n\t\tthis.animatedObjects.setNodePosition(\n\t\t\tparseInt(params[0]),\n\t\t\tparseInt(params[2]),\n\t\t\tparseInt(params[3]),\n\t\t);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateHighlightCircle(params) {\n\t\t// id, color | x, y, radius\n\t\tparams[2] = params[2] || 0;\n\t\tparams[3] = params[3] || 0;\n\t\tparams[4] = params[4] === undefined ? 20 : params[4];\n\t\tthis.animatedObjects.addHighlightCircleObject(params[0], params[1], params[4]);\n\t\tthis.animatedObjects.setNodePosition(\n\t\t\tparseInt(params[0]),\n\t\t\tparseInt(params[2]),\n\t\t\tparseInt(params[3]),\n\t\t);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateRectangle(params) {\n\t\t// id, label, w, h | x, y, xJustify, yJustify, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] || 'center';\n\t\tparams[7] = params[7] || 'center';\n\t\tparams[8] = params[8] || '#FFFFFF';\n\t\tparams[9] = params[9] || '#000000';\n\t\tthis.animatedObjects.addRectangleObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t\tparams[9],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateLabel(params) {\n\t\t// id, label | x, y, centered\n\t\tparams[2] = params[2] || 0;\n\t\tparams[3] = params[3] || 0;\n\t\tparams[4] = params[4] !== false && params[4] !== 0;\n\t\tthis.animatedObjects.addLabelObject(params[0], String(params[1]), params[4]);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[2], params[3]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateLinkedListNode(params) {\n\t\t// id, label, w, h | x, y, linkPercent, vertical, linkPosEnd, bgColor, fgColor\n\t\tparams[1] = Array.isArray(params[1]) ? params[1].map(x => String(x)) : [String(params[1])];\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] === undefined ? 0.25 : params[6];\n\t\tparams[7] = params[7] !== false && params[7] !== 0;\n\t\tparams[8] = params[8] || false;\n\t\tparams[9] = params[9] || '#FFFFFF';\n\t\tparams[10] = params[10] || '#000000';\n\t\tthis.animatedObjects.addLinkedListObject(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t\tparams[9],\n\t\t\tparams[10],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateDoublyLinkedListNode(params) {\n\t\t// id, label, w, h | x, y, linkPercent, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] === undefined ? 0.25 : params[6];\n\t\tparams[7] = params[7] || '#FFFFFF';\n\t\tparams[8] = params[8] || '#000000';\n\t\tthis.animatedObjects.addDoublyLinkedListObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateCircularlyLinkedListNode(params) {\n\t\t// id, label, w, h | x, y, linkPercent, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] === undefined ? 0.25 : params[6];\n\t\tparams[7] = params[7] || '#FFFFFF';\n\t\tparams[8] = params[8] || '#000000';\n\t\tthis.animatedObjects.addCircularlyLinkedListObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateSkipListNode(params) {\n\t\t// id, label, w, h | x, y, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] || '#FFFFFF';\n\t\tparams[7] = params[7] || '#000000';\n\t\tthis.animatedObjects.addSkipListObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateBTreeNode(params) {\n\t\t// id, widthPerElement, height, numLabels, x, y, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] || '#FFFFFF';\n\t\tparams[7] = params[7] || '#000000';\n\t\tthis.animatedObjects.addBTreeNode(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tsetText(params) {\n\t\t// id, text | textIndex\n\t\tparams[2] = params[2] || 0;\n\t\tconst oldText = this.animatedObjects.getText(params[0], params[2]);\n\t\tthis.animatedObjects.setText(params[0], String(params[1]), params[2]);\n\t\tif (oldText !== undefined) {\n\t\t\tthis.undoBlock.push(new UndoSetText(params[0], oldText, params[2]));\n\t\t}\n\t},\n\tsetTextColor(params) {\n\t\t// id, color, textIndex\n\t\tparams[2] = params[2] || 0;\n\t\tconst oldColor = this.animatedObjects.getTextColor(params[0], params[2]);\n\t\tthis.animatedObjects.setTextColor(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetTextColor(params[0], oldColor, params[2]));\n\t},\n\tsetForegroundColor(params) {\n\t\t// id, color\n\t\tconst oldColor = this.animatedObjects.foregroundColor(params[0]);\n\t\tthis.animatedObjects.setForegroundColor(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetForegroundColor(params[0], oldColor));\n\t},\n\tsetBackgroundColor(params) {\n\t\t// id, color\n\t\tconst oldColor = this.animatedObjects.backgroundColor(params[0]);\n\t\tthis.animatedObjects.setBackgroundColor(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetBackgroundColor(params[0], oldColor));\n\t},\n\tsetHighlight(params) {\n\t\t// id, highlight, color\n\t\tthis.animatedObjects.setHighlight(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoHighlight(params[0], !params[1], params[2]));\n\t},\n\tsetAlpha(params) {\n\t\t// id, alpha\n\t\tconst oldAlpha = this.animatedObjects.getAlpha(params[0]);\n\t\tthis.animatedObjects.setAlpha(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetAlpha(params[0], oldAlpha));\n\t},\n\tsetEdgeColor(params) {\n\t\t// fromID, toID, newColor\n\t\tconst oldColor = this.animatedObjects.setEdgeColor(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetEdgeColor(params[0], params[1], oldColor));\n\t},\n\tsetEdgeAlpha(params) {\n\t\t// fromID, toID, alpha\n\t\tconst oldAlpha = this.animatedObjects.setEdgeAlpha(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetEdgeAlpha(params[0], params[1], oldAlpha));\n\t},\n\tsetEdgeHighlight(params) {\n\t\t// fromID, toID, highlight\n\t\tconst oldHighlight = this.animatedObjects.setEdgeHighlight(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t);\n\t\tthis.undoBlock.push(new UndoHighlightEdge(params[0], params[1], oldHighlight));\n\t},\n\tsetEdgeThickness(params) {\n\t\t// fromID, toID, thickness\n\t\tconst oldThickness = this.animatedObjects.setEdgeThickness(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetEdgeThickness(params[0], params[1], oldThickness));\n\t},\n\tsetRectangleEdgeThickness(params) {\n\t\t//id, thicknessArray\n\t\tconst oldThicknessArray = this.animatedObjects.setRectangleEdgeThickness(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t);\n\t\tthis.undoBlock.push(new UndoSetRectangleEdgeThickness(params[0], oldThicknessArray));\n\t},\n\tsetHeight(params) {\n\t\t// id, height\n\t\tconst oldHeight = this.animatedObjects.getHeight(params[0]);\n\t\tthis.animatedObjects.setHeight(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetHeight(params[0], oldHeight));\n\t},\n\tsetWidth(params) {\n\t\t// id, width\n\t\tconst oldWidth = this.animatedObjects.getWidth(params[0]);\n\t\tthis.animatedObjects.setWidth(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetWidth(params[0], oldWidth));\n\t},\n\tsetLayer(params) {\n\t\t// id, height\n\t\tthis.animatedObjects.setLayer(params[0], params[1]);\n\t\t//TODO: Add undo information here\n\t},\n\tsetNull(params) {\n\t\t// id, null\n\t\tconst oldNull = this.animatedObjects.getNull(params[0]);\n\t\tthis.animatedObjects.setNull(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetNull(params[0], oldNull));\n\t},\n\tsetPrevNull(params) {\n\t\t// id, null\n\t\tconst oldNull = this.animatedObjects.getLeftNull(params[0]);\n\t\tthis.animatedObjects.setPrevNull(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPrevNull(params[0], oldNull));\n\t},\n\tsetNextNull(params) {\n\t\t// id, null\n\t\tconst oldNull = this.animatedObjects.getRightNull(params[0]);\n\t\tthis.animatedObjects.setNextNull(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetNextNull(params[0], oldNull));\n\t},\n\tsetNumElements(params) {\n\t\t// id, numElements\n\t\tconst oldElem = this.animatedObjects.getObject(params[0]);\n\t\tthis.undoBlock.push(new UndoSetNumElements(oldElem, params[1]));\n\t\tthis.animatedObjects.setNumElements(params[0], params[1]);\n\t},\n\tsetPosition(params) {\n\t\t// id, x, y\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\tsetHighlightIndex(params) {\n\t\tconst oldIndex = this.animatedObjects.getHighlightIndex(params[0]);\n\t\tthis.undoBlock.push(new UndoSetHighlightIndex(params[0], oldIndex));\n\t\tthis.animatedObjects.setHighlightIndex(params[0], params[1]);\n\t},\n\talignRight(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignRight(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\talignLeft(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignLeft(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\talignTop(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignTop(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\talignBottom(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignBottom(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\tbringToTop(params) {\n\t\tconst oldTop = this.animatedObjects.setAlwaysOnTop(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetAlwaysOnTop(params[0], oldTop));\n\t},\n\tmoveToAlignRight(params) {\n\t\t// id, otherID\n\t\tconst newXY = this.animatedObjects.getAlignRightPos(params[0], params[1]);\n\t\tconst nextAnim = new SingleAnimation(\n\t\t\tparams[0],\n\t\t\tthis.animatedObjects.getNodeX(params[0]),\n\t\t\tthis.animatedObjects.getNodeY(params[0]),\n\t\t\tnewXY[0],\n\t\t\tnewXY[1],\n\t\t);\n\t\tthis.currentBlock.push(nextAnim);\n\t\tthis.undoBlock.push(\n\t\t\tnew UndoMove(\n\t\t\t\tnextAnim.objectID,\n\t\t\t\tnextAnim.toX,\n\t\t\t\tnextAnim.toY,\n\t\t\t\tnextAnim.fromX,\n\t\t\t\tnextAnim.fromY,\n\t\t\t),\n\t\t);\n\t\tthis.anyAnimations = true;\n\t},\n};\n","import React from 'react';\n\nconst Footer = () => (\n\t<div className=\"footer\">\n\t\tCopyright 2019 <a href=\"https://rodrigodlpontes.github.io/website/\">Rodrigo Pontes</a>,\n\t\tCopyright 2011 <a href=\"http://www.cs.usfca.edu/galles\">David Galles</a>\n\t</div>\n);\n\nexport default Footer;\n","import { Link } from 'react-router-dom';\nimport React from 'react';\n\nclass Header extends React.Component {\n\tstate = { menuVisible: null };\n\n\trender() {\n\t\tconst menuClass = { null: '', true: 'show', false: 'hide' };\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"header\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={this.state.menuVisible ? 'selected' : ''}\n\t\t\t\t\t\tonClick={this.toggleMenu}\n\t\t\t\t\t></button>\n\t\t\t\t\t<h1>CS1332 Data Structures and Algorithms Visualizations</h1>\n\t\t\t\t</div>\n\t\t\t\t<div className={`menu ${menuClass[this.state.menuVisible]}`}>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/\" onClick={this.toggleMenu}>\n\t\t\t\t\t\t\t\tHome\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/about\" onClick={this.toggleMenu}>\n\t\t\t\t\t\t\t\tAbout\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"https://github.com/RodrigoDLPontes/visualization-tool\">\n\t\t\t\t\t\t\t\tSource Code\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\ttoggleMenu = () => this.setState(state => ({ menuVisible: !state.menuVisible }));\n}\n\nexport default Header;\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport { act } from '../anim/AnimationMain';\n\nexport function addLabelToAlgorithmBar(labelName, group) {\n\tconst element = document.createElement('p');\n\telement.appendChild(document.createTextNode(labelName));\n\n\tif (!group) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(element);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\t// Append the element in page (in span)\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tgroup.appendChild(element);\n\t\telement.setAttribute('class', 'groupChild');\n\t}\n\n\treturn element;\n}\n\nexport function addCheckboxToAlgorithmBar(boxLabel, checked, group) {\n\tconst element = document.createElement('input');\n\n\telement.setAttribute('type', 'checkbox');\n\telement.setAttribute('id', boxLabel);\n\telement.setAttribute('name', boxLabel);\n\telement.setAttribute('value', boxLabel);\n\tchecked && element.setAttribute('checked', 'true');\n\n\tconst label = document.createElement('label');\n\tlabel.setAttribute('for', boxLabel);\n\tconst txtNode = document.createTextNode(boxLabel);\n\tlabel.appendChild(txtNode);\n\n\tif (!group) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(element);\n\t\ttableEntry.appendChild(label);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tconst span = document.createElement('span');\n\t\tspan.appendChild(element);\n\t\tspan.appendChild(label);\n\n\t\tgroup.appendChild(span);\n\t\tspan.setAttribute('class', 'groupChild');\n\t}\n\n\treturn element;\n}\n\nexport function addRadioButtonGroupToAlgorithmBar(buttonNames, groupName, group) {\n\tconst buttonList = [];\n\tconst newTable = document.createElement('table');\n\n\tfor (let i = 0; i < buttonNames.length; i++) {\n\t\tconst midLevel = document.createElement('tr');\n\t\tconst bottomLevel = document.createElement('td');\n\n\t\tconst button = document.createElement('input');\n\t\tbutton.setAttribute('type', 'radio');\n\t\tbutton.setAttribute('name', groupName);\n\t\tbutton.setAttribute('id', buttonNames[i]);\n\t\tbutton.setAttribute('value', buttonNames[i]);\n\t\tbottomLevel.appendChild(button);\n\t\tmidLevel.appendChild(bottomLevel);\n\t\tconst label = document.createElement('label');\n\t\tlabel.setAttribute('for', buttonNames[i]);\n\t\tconst txtNode = document.createTextNode(' ' + buttonNames[i]);\n\t\tlabel.appendChild(txtNode);\n\t\tbottomLevel.appendChild(label);\n\t\tnewTable.appendChild(midLevel);\n\t\tbuttonList.push(button);\n\t}\n\n\tif (!group) {\n\t\tconst topLevelTableEntry = document.createElement('td');\n\t\ttopLevelTableEntry.appendChild(newTable);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(topLevelTableEntry);\n\t} else {\n\t\tgroup.appendChild(newTable);\n\t\tnewTable.setAttribute('class', 'groupChild');\n\t}\n\n\treturn buttonList;\n}\n\nexport function addControlToAlgorithmBar(type, value, group) {\n\tconst element = document.createElement('input');\n\n\telement.setAttribute('type', type);\n\telement.setAttribute('value', value);\n\n\tif (!group) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(element);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tgroup.appendChild(element);\n\t\telement.setAttribute('class', 'groupChild');\n\t}\n\n\treturn element;\n}\n\nexport function addDivisorToAlgorithmBar() {\n\tconst divisorLeft = document.createElement('td');\n\tdivisorLeft.setAttribute('class', 'divisorLeft');\n\n\tconst divisorRight = document.createElement('td');\n\tdivisorRight.setAttribute('class', 'divisorRight');\n\n\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\tcontrolBar.appendChild(divisorLeft);\n\tcontrolBar.appendChild(divisorRight);\n}\n\nexport function addGroupToAlgorithmBar(horizontal, parentGroup) {\n\tconst group = document.createElement('div');\n\n\tgroup.setAttribute('class', horizontal ? 'hgroup' : 'vgroup');\n\n\tif (!parentGroup) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(group);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tparentGroup.appendChild(group);\n\t}\n\n\treturn group;\n}\n\nexport default class Algorithm {\n\tconstructor(am, w, h) {\n\t\tif (am == null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.animationManager = am;\n\t\tam.addListener('AnimationStarted', this, this.disableUI);\n\t\tam.addListener('AnimationEnded', this, this.enableUI);\n\t\tam.addListener('AnimationUndo', this, this.undo);\n\t\tthis.canvasWidth = w;\n\t\tthis.canvasHeight = h;\n\n\t\tthis.actionHistory = [];\n\t\tthis.recordAnimation = true;\n\t\tthis.commands = [];\n\t}\n\n\taddCodeToCanvasBase(code, start_x, start_y, line_height, standard_color, layer) {\n\t\tlayer = typeof layer !== 'undefined' ? layer : 0;\n\t\tconst codeID = Array(code.length);\n\t\tlet i, j;\n\t\tfor (i = 0; i < code.length; i++) {\n\t\t\tcodeID[i] = new Array(code[i].length);\n\t\t\tfor (j = 0; j < code[i].length; j++) {\n\t\t\t\tcodeID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tcodeID[i][j],\n\t\t\t\t\tcode[i][j],\n\t\t\t\t\tstart_x,\n\t\t\t\t\tstart_y + i * line_height,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, codeID[i][j], standard_color);\n\t\t\t\tthis.cmd(act.setLayer, codeID[i][j], layer);\n\t\t\t\tif (j > 0) {\n\t\t\t\t\tthis.cmd(act.alignRight, codeID[i][j], codeID[i][j - 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn codeID;\n\t}\n\n\tsetCodeAlpha(code, newAlpha) {\n\t\tfor (let i = 0; i < code.length; i++) {\n\t\t\tfor (let j = 0; j < code[i].length; j++) {\n\t\t\t\tthis.cmd(act.setAlpha, code[i][j], newAlpha);\n\t\t\t}\n\t\t}\n\t}\n\n\tcmd(act, ...params) {\n\t\t// Helper method to add command to stack\n\t\tif (this.recordAnimation) {\n\t\t\tthis.commands.push([act, params]);\n\t\t}\n\t}\n\n\tclearHistory() {\n\t\tthis.actionHistory = [];\n\t}\n\n\tundo() {\n\t\t// Remove the last action (the one that we are going to undo)\n\t\tthis.actionHistory.pop();\n\t\t// Clear out our data structure.  Be sure to implement reset in\n\t\t// every AlgorithmAnimation subclass!\n\t\tthis.reset();\n\t\t//  Redo all actions from the beginning, throwing out the animation\n\t\t//  commands (the animation manager will update the animation on its own).\n\t\t//  Note that if you do something non-deterministic, you might cause problems!\n\t\t//  Be sure if you do anything non-deterministic (that is, calls to a random\n\t\t//  number generator) you clear out the undo stack here and in the animation\n\t\t//  manager.\n\n\t\t//  If this seems horribly inefficient -- it is! However, it seems to work well\n\t\t//  in practice, and you get undo for free for all algorithms, which is a non-trivial\n\t\t//  gain.\n\t\tconst len = this.actionHistory.length;\n\t\tthis.recordAnimation = false;\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tthis.actionHistory[i][0](...this.actionHistory[i][1]);\n\t\t}\n\t\tthis.recordAnimation = true;\n\t}\n\n\timplementAction(func, ...args) {\n\t\tconst next = [func, args];\n\t\tthis.actionHistory.push(next);\n\t\tconst retVal = func(...args);\n\t\tthis.animationManager.startNewAnimation(retVal);\n\t}\n\n\tnormalizeNumber(input, maxLen) {\n\t\tconst isAllDigits = str => !/\\D/.test(str);\n\t\tif (!isAllDigits(input) || input === '') {\n\t\t\treturn input;\n\t\t}\n\t\treturn input.substr(-maxLen);\n\t}\n\n\treturnSubmit(field, funct, maxsize, intOnly) {\n\t\tif (maxsize !== undefined) {\n\t\t\tfield.size = maxsize;\n\t\t}\n\t\treturn function (event) {\n\t\t\tlet keyASCII = 0;\n\t\t\tif (window.event) {\n\t\t\t\t// IE\n\t\t\t\tkeyASCII = event.keyCode;\n\t\t\t} else if (event.which) {\n\t\t\t\t// Netscape/Firefox/Opera\n\t\t\t\tkeyASCII = event.which;\n\t\t\t}\n\n\t\t\tif (keyASCII === 13 && funct != null) {\n\t\t\t\tfunct();\n\t\t\t} else if (\n\t\t\t\tkeyASCII === 190 ||\n\t\t\t\tkeyASCII === 59 ||\n\t\t\t\tkeyASCII === 173 ||\n\t\t\t\tkeyASCII === 189\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t} else if (\n\t\t\t\t(maxsize !== undefined && field.value.length >= maxsize) ||\n\t\t\t\t(intOnly && (keyASCII < 48 || keyASCII > 57))\n\t\t\t) {\n\t\t\t\tif (!controlKey(keyASCII)) return false;\n\t\t\t}\n\t\t};\n\t}\n\n\t// Abstract methods - these should be implemented in the base class\n\n\t// eslint-disable-next-line no-unused-vars\n\tsizeChanged(newWidth, newHeight) {\n\t\tthrow new Error('sizeChanged() should be implemented in base class');\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tdisableUI(event) {\n\t\tthrow new Error('disableUI() should be implemented in base class');\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tenableUI(event) {\n\t\tthrow new Error('enableUI() should be implemented in base class');\n\t}\n\n\treset() {\n\t\tthrow new Error('reset() should be implemented in base class');\n\t}\n}\n\nexport function controlKey(keyASCII) {\n\treturn (\n\t\tkeyASCII === 8 ||\n\t\tkeyASCII === 9 ||\n\t\tkeyASCII === 37 ||\n\t\tkeyASCII === 38 ||\n\t\tkeyASCII === 39 ||\n\t\tkeyASCII === 40 ||\n\t\tkeyASCII === 46\n\t);\n}\n\nAlgorithm.prototype.returnSubmitFloat = function (field, funct, maxsize) {\n\tif (maxsize !== undefined) {\n\t\tfield.size = maxsize;\n\t}\n\treturn function (event) {\n\t\tlet keyASCII = 0;\n\t\tif (window.event) {\n\t\t\t// IE\n\t\t\tkeyASCII = event.keyCode;\n\t\t} else if (event.which) {\n\t\t\t// Netscape/Firefox/Opera\n\t\t\tkeyASCII = event.which;\n\t\t}\n\t\t// Submit on return\n\t\tif (keyASCII === 13) {\n\t\t\tfunct();\n\t\t}\n\t\t// Control keys (arrows, del, etc) are always OK\n\t\telse if (controlKey(keyASCII)) {\n\t\t\treturn;\n\t\t}\n\t\t// - (minus sign) only OK at beginning of number\n\t\t//  (For now we will allow anywhere -- hard to see where the beginning of the\n\t\t//   number is ...)\n\t\t//else if (keyASCII == 109 && field.value.length  == 0)\n\t\telse if (keyASCII === 109) {\n\t\t\treturn;\n\t\t}\n\t\t// Digis are OK if we have enough space\n\t\telse if (\n\t\t\t(maxsize !== undefined || field.value.length < maxsize) &&\n\t\t\tkeyASCII >= 48 &&\n\t\t\tkeyASCII <= 57\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// . (Decimal point) is OK if we haven't had one yet, and there is space\n\t\telse if (\n\t\t\t(maxsize !== undefined || field.value.length < maxsize) &&\n\t\t\tkeyASCII === 190 &&\n\t\t\tfield.value.indexOf('.') === -1\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// Nothing else is OK\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t};\n};\n\nAlgorithm.prototype.addReturnSubmit = function (field, action) {\n\tfield.onkeydown = this.returnSubmit(field, action, 4, false);\n};\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nexport default class AVL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.first_print_pos_y = h - 2 * AVL.PRINT_VERTICAL_GAP;\n\t\tthis.print_max = w - 10;\n\t\tthis.startingX = w / 2;\n\t\tthis.addControls();\n\t\tthis.nextIndex = 1;\n\t\tthis.commands = [];\n\t\tthis.edges = [];\n\t\tthis.cmd(act.createLabel, 0, '', AVL.EXPLANITORY_TEXT_X, AVL.EXPLANITORY_TEXT_Y, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.printButton = addControlToAlgorithmBar('Button', 'Print');\n\t\tthis.printButton.onclick = this.printCallback.bind(this);\n\t\tthis.controls.push(this.printButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst predSuccButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Predecessor', 'Successor'],\n\t\t\t'Predecessor/Successor',\n\t\t);\n\n\t\tthis.predButton = predSuccButtonList[0];\n\t\tthis.succButton = predSuccButtonList[1];\n\t\tthis.predButton.onclick = () => (this.predSucc = 'pred');\n\t\tthis.succButton.onclick = () => (this.predSucc = 'succ');\n\t\tthis.succButton.checked = true;\n\t\tthis.predSucc = 'succ';\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 1;\n\t\tthis.treeRoot = null;\n\t\tthis.edges = [];\n\t}\n\n\tinsertCallback() {\n\t\tlet insertedValue = this.insertField.value;\n\t\t// Get text value\n\t\tinsertedValue = this.normalizeNumber(insertedValue, 4);\n\t\tif (insertedValue !== '') {\n\t\t\t// set text value\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tlet deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tdeletedValue = this.normalizeNumber(deletedValue, 4);\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.remove.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tlet findValue = this.findField.value;\n\t\tif (findValue !== '') {\n\t\t\tfindValue = this.normalizeNumber(findValue, 4);\n\t\t\tthis.findField.value = '';\n\t\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t\t}\n\t}\n\n\tprintCallback() {\n\t\tthis.implementAction(this.printTree.bind(this));\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tsizeChanged(newWidth) {\n\t\tthis.startingX = newWidth / 2;\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\n\t\tif (this.treeRoot != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tconst firstLabel = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tAVL.HIGHLIGHT_COLOR,\n\t\t\t\tthis.treeRoot.x,\n\t\t\t\tthis.treeRoot.y,\n\t\t\t);\n\t\t\tthis.xPosOfNextLabel = AVL.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\t\t\tthis.printTreeRec(this.treeRoot);\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let i = firstLabel; i < this.nextIndex; i++) this.cmd(act.delete, i);\n\t\t\tthis.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.printTreeRec(tree.left);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, AVL.PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += AVL.PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = AVL.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += AVL.PRINT_VERTICAL_GAP;\n\t\t}\n\t\tif (tree.right != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.printTreeRec(tree.right);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\treturn;\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tthis.doFind(this.treeRoot, findValue);\n\n\t\treturn this.commands;\n\t}\n\n\tdoFind(tree, value) {\n\t\tthis.cmd(act.setText, 0, 'Searchiing for ' + value);\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tif (tree.data === value) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Searching for ' + value + ' : ' + value + ' = ' + value + ' (Element found!)',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Found:' + value);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t} else {\n\t\t\t\tif (tree.data > value) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to left subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.left != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tAVL.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.left, value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t' Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' > ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to right subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.right != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tAVL.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.right, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\t' Searching for ' + value + ' : < Empty Tree > (Element not found)',\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, ' Searching for ' + value + ' :  (Element not found)');\n\t\t}\n\t}\n\n\tremakeTree(curr) {\n\t\tif (curr == null) return;\n\t\tif (curr.left != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.left.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.left);\n\t\t}\n\t\tif (curr.right != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.right.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.right);\n\t\t}\n\t}\n\n\tadd(data) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, ' Inserting ' + data);\n\t\tthis.treeRoot = this.addH(data, this.treeRoot);\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\taddH(data, curr) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, 'Null found, inserting new node');\n\t\t\tconst treeNodeID = this.nextIndex++;\n\t\t\tconst heightLabelID = this.nextIndex++;\n\t\t\tconst bfLabelID = this.nextIndex++;\n\t\t\tthis.cmd(act.createCircle, treeNodeID, data, 30, AVL.STARTING_Y);\n\n\t\t\tthis.cmd(act.setForegroundColor, treeNodeID, AVL.FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, treeNodeID, AVL.BACKGROUND_COLOR);\n\t\t\tthis.cmd(act.createLabel, heightLabelID, 0, 30 - 20, AVL.STARTING_Y - 20);\n\t\t\tthis.cmd(act.setForegroundColor, heightLabelID, AVL.HEIGHT_LABEL_COLOR);\n\n\t\t\tthis.cmd(act.createLabel, bfLabelID, 0, 30 + 20, AVL.STARTING_Y - 20);\n\t\t\tthis.cmd(act.setForegroundColor, bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn new AVLNode(data, treeNodeID, heightLabelID, bfLabelID, 0, 0);\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking at left subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.addH(data, curr.left);\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking at right subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.addH(data, curr.right);\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, `${data} == ${curr.data}. Ignoring duplicate!`);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tconnectSmart(id1, id2) {\n\t\tif (!this.edges.some(e => e[0] === id1 && e[1] === id2)) {\n\t\t\tthis.cmd(act.connect, id1, id2, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.setEdgeAlpha, id1, id2, AVL.LINK_OPACITY);\n\t\t\tthis.edges.push([id1, id2]);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tbalance(curr) {\n\t\tcurr.updateHeightAndBF();\n\t\tthis.cmd(act.setText, curr.heightLabelID, curr.height);\n\t\tthis.cmd(act.setText, curr.bfLabelID, curr.bf);\n\t\tthis.cmd(act.setText, 0, 'Adjusting height and balance factor after recursive call');\n\t\tthis.cmd(act.step);\n\n\t\tif (curr.bf < -1) {\n\t\t\tthis.cmd(act.setText, 0, 'Balance factor < -1');\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tif (curr.right != null && curr.right.bf > 0) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Right child balance factor > 0');\n\t\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Right-left rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\t\tcurr.right = this.singleRotateRight(curr.right);\n\t\t\t} else {\n\t\t\t\tif (curr.right != null) {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'Right child balance factor <= 0');\n\t\t\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'No right child');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setText, 0, 'Left rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tcurr = this.singleRotateLeft(curr);\n\t\t} else if (curr.bf > 1) {\n\t\t\tthis.cmd(act.setText, 0, 'Balance factor > 1');\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tif (curr.left != null && curr.left.bf < 0) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Left child balance factor < 0');\n\t\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Left-right rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\t\tcurr.left = this.singleRotateLeft(curr.left);\n\t\t\t} else {\n\t\t\t\tif (curr.left != null) {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'Left child balance factor >= 0');\n\t\t\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'No left child');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setText, 0, 'Right rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\t}\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tcurr = this.singleRotateRight(curr);\n\t\t}\n\t\treturn curr;\n\t}\n\n\tsingleRotateRight(tree) {\n\t\tconst B = tree;\n\t\tconst A = tree.left;\n\t\tconst t2 = A.right;\n\n\t\t// this.cmd(act.setText, 0, 'Single Rotate Right');\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, A.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t2.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.setEdgeAlpha, B.graphicID, t2.graphicID, AVL.LINK_OPACITY);\n\t\t\tt2.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, B.graphicID, A.graphicID);\n\t\tthis.cmd(act.connect, A.graphicID, B.graphicID, AVL.LINK_COLOR);\n\t\tthis.cmd(act.setEdgeAlpha, A.graphicID, B.graphicID, AVL.LINK_OPACITY);\n\t\tA.parent = B.parent;\n\t\tif (this.treeRoot === B) {\n\t\t\tthis.treeRoot = A;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, B.parent.graphicID, B.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.connect, B.parent.graphicID, A.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.setEdgeAlpha, B.parent.graphicID, A.graphicID, AVL.LINK_OPACITY);\n\n\t\t\tif (B.isLeftChild()) {\n\t\t\t\tB.parent.left = A;\n\t\t\t} else {\n\t\t\t\tB.parent.right = A;\n\t\t\t}\n\t\t}\n\t\tA.right = B;\n\t\tB.parent = A;\n\t\tB.left = t2;\n\t\tthis.cmd(act.setHighlight, A.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, B.graphicID, 0);\n\t\tB.updateHeightAndBF();\n\t\tthis.cmd(act.setText, B.heightLabelID, B.height);\n\t\tthis.cmd(act.setText, B.bfLabelID, B.bf);\n\t\tA.updateHeightAndBF();\n\t\tthis.cmd(act.setText, A.heightLabelID, A.height);\n\t\tthis.cmd(act.setText, A.bfLabelID, A.bf);\n\t\tthis.resizeTree();\n\t\treturn A;\n\t}\n\n\tsingleRotateLeft(tree) {\n\t\tconst A = tree;\n\t\tconst B = tree.right;\n\t\tconst t2 = B.left;\n\n\t\t// this.cmd(act.setText, 0, 'Single Rotate Left');\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.setEdgeAlpha, A.graphicID, t2.graphicID, AVL.LINK_OPACITY);\n\n\t\t\tt2.parent = A;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, AVL.LINK_COLOR);\n\t\tthis.cmd(act.setEdgeAlpha, B.graphicID, A.graphicID, AVL.LINK_OPACITY);\n\n\t\tB.parent = A.parent;\n\t\tif (this.treeRoot === A) {\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, B.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.setEdgeAlpha, A.parent.graphicID, B.graphicID, AVL.LINK_OPACITY);\n\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = B;\n\t\t\t} else {\n\t\t\t\tA.parent.right = B;\n\t\t\t}\n\t\t}\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tA.right = t2;\n\t\tthis.cmd(act.setHighlight, A.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, B.graphicID, 0);\n\t\tA.updateHeightAndBF();\n\t\tthis.cmd(act.setText, A.heightLabelID, A.height);\n\t\tthis.cmd(act.setText, A.bfLabelID, A.bf);\n\t\tB.updateHeightAndBF();\n\t\tthis.cmd(act.setText, B.heightLabelID, B.height);\n\t\tthis.cmd(act.setText, B.bfLabelID, B.bf);\n\n\t\tthis.resizeTree();\n\t\treturn B;\n\t}\n\n\tgetHeight(tree) {\n\t\tif (tree == null) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn tree.height;\n\t}\n\n\tresetHeight(tree) {\n\t\tif (tree != null) {\n\t\t\tconst newHeight = Math.max(this.getHeight(tree.left), this.getHeight(tree.right)) + 1;\n\t\t\tif (tree.height !== newHeight) {\n\t\t\t\ttree.height = Math.max(this.getHeight(tree.left), this.getHeight(tree.right)) + 1;\n\t\t\t\tthis.cmd(act.setText, tree.heightLabelID, newHeight);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteNode(curr) {\n\t\tthis.cmd(act.delete, curr.graphicID);\n\t\tthis.cmd(act.delete, curr.heightLabelID);\n\t\tthis.cmd(act.delete, curr.bfLabelID);\n\t}\n\n\tremove(data) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, 0, `Deleting ${data}`);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, ' ');\n\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.treeRoot = this.removeH(this.treeRoot, data);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\tremoveH(curr, data) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, `${data} not found in the tree`);\n\t\t\treturn;\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking left`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.removeH(curr.left, data);\n\t\t\tif (curr.left != null) {\n\t\t\t\tcurr.left.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking right`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.removeH(curr.right, data);\n\t\t\tif (curr.right != null) {\n\t\t\t\tcurr.right.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else {\n\t\t\tif (curr.left == null && curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Element to delete is a leaf node');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn null;\n\t\t\t} else if (curr.left == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with right child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.right;\n\t\t\t} else if (curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with left child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.left;\n\t\t\t} else {\n\t\t\t\tconst dummy = [];\n\t\t\t\tif (this.predSucc === 'succ') {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with successor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.right = this.removeSucc(curr.right, dummy);\n\t\t\t\t\tcurr.right && this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with predecessor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.left = this.removePred(curr.left, dummy);\n\t\t\t\t\tcurr.left && this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\t}\n\t\t\t\tthis.resizeTree();\n\t\t\t\tcurr.data = dummy[0];\n\t\t\t\tthis.cmd(act.setText, curr.graphicID, curr.data);\n\t\t\t}\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tremoveSucc(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.left == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No left child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.right;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Left child exists, look left');\n\t\tthis.cmd(act.step);\n\t\tcurr.left = this.removeSucc(curr.left, dummy);\n\t\tif (curr.left != null) {\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\treturn curr;\n\t}\n\n\tremovePred(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.right == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No right child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.left;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Right child exists, look right');\n\t\tthis.cmd(act.step);\n\t\tcurr.right = this.removePred(curr.right, dummy);\n\t\tif (curr.right != null) {\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\treturn curr;\n\t}\n\n\tresizeTree() {\n\t\tif (this.treeRoot == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet startingPoint = this.startingX;\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tif (this.treeRoot != null) {\n\t\t\tif (this.treeRoot.leftWidth > startingPoint) {\n\t\t\t\tstartingPoint = this.treeRoot.leftWidth;\n\t\t\t} else if (this.treeRoot.rightWidth > startingPoint) {\n\t\t\t\tstartingPoint = Math.max(\n\t\t\t\t\tthis.treeRoot.leftWidth,\n\t\t\t\t\t2 * startingPoint - this.treeRoot.rightWidth,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.setNewPositions(this.treeRoot, startingPoint, AVL.STARTING_Y, 0);\n\t\t\tthis.animateNewPositions(this.treeRoot);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition, side) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\tif (side === -1) {\n\t\t\t\txPosition = xPosition - tree.rightWidth;\n\t\t\t\ttree.heightLabelX = xPosition - 20;\n\t\t\t\ttree.bfLabelX = xPosition + 20;\n\t\t\t} else if (side === 1) {\n\t\t\t\txPosition = xPosition + tree.leftWidth;\n\t\t\t\ttree.heightLabelX = xPosition - 20;\n\t\t\t\ttree.bfLabelX = xPosition + 20;\n\t\t\t} else {\n\t\t\t\ttree.heightLabelX = xPosition - 20;\n\t\t\t\ttree.bfLabelX = xPosition + 20;\n\t\t\t}\n\t\t\ttree.x = xPosition;\n\t\t\ttree.heightLabelY = tree.y - 20;\n\t\t\ttree.bfLabelY = tree.y - 20;\n\t\t\tthis.setNewPositions(tree.left, xPosition, yPosition + AVL.HEIGHT_DELTA, -1);\n\t\t\tthis.setNewPositions(tree.right, xPosition, yPosition + AVL.HEIGHT_DELTA, 1);\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t\t\tthis.cmd(act.move, tree.heightLabelID, tree.heightLabelX, tree.heightLabelY);\n\t\t\tthis.cmd(act.move, tree.bfLabelID, tree.bfLabelX, tree.bfLabelY);\n\t\t\tthis.animateNewPositions(tree.left);\n\t\t\tthis.animateNewPositions(tree.right);\n\t\t}\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\ttree.leftWidth = Math.max(this.resizeWidths(tree.left), AVL.WIDTH_DELTA / 2);\n\t\ttree.rightWidth = Math.max(this.resizeWidths(tree.right), AVL.WIDTH_DELTA / 2);\n\t\treturn tree.leftWidth + tree.rightWidth;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.recClear(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\treturn this.commands;\n\t}\n\n\trecClear(curr) {\n\t\tif (curr != null) {\n\t\t\tthis.cmd(act.delete, curr.graphicID);\n\t\t\tthis.cmd(act.delete, curr.heightLabelID);\n\t\t\tthis.cmd(act.delete, curr.bfLabelID);\n\t\t\tthis.recClear(curr.left);\n\t\t\tthis.recClear(curr.right);\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n\nclass AVLNode {\n\tconstructor(val, id, hid, bfid, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\t\tthis.heightLabelID = hid;\n\t\tthis.bfLabelID = bfid;\n\t\tthis.height = 0;\n\t\tthis.bf = 0;\n\n\t\tthis.graphicID = id;\n\t\tthis.left = null;\n\t\tthis.right = null;\n\t\tthis.parent = null;\n\t}\n\n\tupdateHeightAndBF() {\n\t\tconst h = node => (node == null ? -1 : node.height);\n\t\tconst l = h(this.left);\n\t\tconst r = h(this.right);\n\t\tthis.height = Math.max(l, r) + 1;\n\t\tthis.bf = l - r;\n\t}\n\n\tisLeftChild() {\n\t\tif (this.parent == null) {\n\t\t\treturn true;\n\t\t}\n\t\treturn this.parent.left === this;\n\t}\n}\n\n// Various constants\n\nAVL.HIGHLIGHT_LABEL_COLOR = '#FF0000';\nAVL.HIGHLIGHT_LINK_COLOR = '#FF0000';\n\nAVL.HIGHLIGHT_COLOR = '#007700';\nAVL.HEIGHT_LABEL_COLOR = '#065e9d';\n\nAVL.LINK_COLOR = '#00B000';\nAVL.LINK_OPACITY = 0.25;\nAVL.HIGHLIGHT_CIRCLE_COLOR = '#007700';\nAVL.FOREGROUND_COLOR = '#007700';\nAVL.BACKGROUND_COLOR = '#DDFFDD';\nAVL.PRINT_COLOR = AVL.FOREGROUND_COLOR;\n\nAVL.WIDTH_DELTA = 50;\nAVL.HEIGHT_DELTA = 50;\nAVL.STARTING_Y = 50;\n\nAVL.FIRST_PRINT_POS_X = 50;\nAVL.PRINT_VERTICAL_GAP = 20;\nAVL.PRINT_HORIZONTAL_GAP = 50;\nAVL.EXPLANITORY_TEXT_X = 10;\nAVL.EXPLANITORY_TEXT_Y = 10;\n","/* eslint-disable lines-between-class-members */\n// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 150;\nconst RESIZE_ARRAY_START_X = 100;\nconst RESIZE_ARRAY_START_Y = 280;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst ARRAY_ELEMS_PER_LINE = 14;\nconst ARRAY_LINE_SPACING = 130;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\nconst PUSH_RESIZE_LABEL_X = 60;\nconst PUSH_RESIZE_LABEL_Y = 60;\n\nconst SIZE = 7;\nconst MAX_SIZE = 30;\n\nexport default class ArrayList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.arrayData = new Array(SIZE);\n\n\t\tthis.size = 0;\n\t\tthis.length = SIZE;\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], '#0000FF');\n\t\t}\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.size = 0;\n\t\tthis.length = SIZE;\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tthis.arrayData = new Array(SIZE);\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.highlight1ID = this.nextIndex++;\n\t}\n\n\taddIndexCallback() {\n\t\tif (\n\t\t\tthis.addValueField.value !== '' &&\n\t\t\tthis.addIndexField.value !== '' &&\n\t\t\t!(this.length === this.size && this.length * 2 > MAX_SIZE)\n\t\t) {\n\t\t\tconst addVal = this.addValueField.value;\n\t\t\tconst index = this.addIndexField.value;\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tif (this.size === this.length) {\n\t\t\t\t\tthis.implementAction(this.resize.bind(this), addVal, index);\n\t\t\t\t} else {\n\t\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (\n\t\t\tthis.addValueField.value !== '' &&\n\t\t\t!(this.length === this.size && this.length * 2 > MAX_SIZE)\n\t\t) {\n\t\t\tconst addVal = this.addValueField.value;\n\t\t\tthis.addValueField.value = '';\n\t\t\tif (this.size === this.length) {\n\t\t\t\tthis.implementAction(this.resize.bind(this), addVal, 0);\n\t\t\t} else {\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t\t}\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (\n\t\t\tthis.addValueField.value !== '' &&\n\t\t\t!(this.length === this.size && this.length * 2 > MAX_SIZE)\n\t\t) {\n\t\t\tconst addVal = this.addValueField.value;\n\t\t\tthis.addValueField.value = '';\n\t\t\tif (this.size === this.length) {\n\t\t\t\tthis.implementAction(this.resize.bind(this), addVal, this.size);\n\t\t\t} else {\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.clearAll();\n\t\treturn this.commands;\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = this.size; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\n\t\tthis.arrayMoveID = new Array(this.size);\n\n\t\tif (index !== this.size) {\n\t\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\t\tconst ypos =\n\t\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\t\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i], this.arrayData[i + 1], xpos, ypos);\n\t\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos + ARRAY_ELEM_WIDTH, ypos);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\n\t\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\t\tthis.cmd(act.setText, this.arrayID[i + 1], this.arrayData[i + 1]);\n\t\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\t'#0000FF',\n\t\t\tPUSH_ELEMENT_X,\n\t\t\tPUSH_ELEMENT_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (parseInt(index) % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(parseInt(index) / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos);\n\t\tthis.cmd(act.move, labPushValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\tif (index != null) {\n\t\t\tthis.nextIndex = this.nextIndex - (this.size - index) - 2;\n\t\t} else {\n\t\t\tthis.nextIndex = this.nextIndex - 2;\n\t\t}\n\n\t\tthis.size = this.size + 1;\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tconst xpos = (index % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos = Math.floor(index / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, '#0000FF', xpos, ypos);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[index], '');\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos - 100);\n\t\tthis.cmd(act.move, labPopValID, xpos, ypos - 100);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t}\n\t\tthis.arrayData[this.size] = null;\n\n\t\tthis.arrayMoveID = new Array(this.size);\n\n\t\tfor (let i = index + 1; i < this.size; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i], this.arrayData[i - 1], xpos, ypos);\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos - ARRAY_ELEM_WIDTH, ypos);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = index + 1; i < this.size; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i - 1], this.arrayData[i - 1]);\n\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tif (index != null) {\n\t\t\tthis.nextIndex = this.nextIndex - (this.size - index);\n\t\t} else {\n\t\t\tthis.nextIndex = this.nextIndex - 2;\n\t\t}\n\n\t\tthis.size = this.size - 1;\n\n\t\treturn this.commands;\n\t}\n\n\tresize(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tconst labPushResizeID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabPushResizeID,\n\t\t\t'(Resize Required)',\n\t\t\tPUSH_RESIZE_LABEL_X,\n\t\t\tPUSH_RESIZE_LABEL_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tthis.arrayIDNew = new Array(this.size * 2);\n\t\tthis.arrayLabelIDNew = new Array(this.size * 2);\n\t\tthis.arrayDataNew = new Array(this.size * 2);\n\n\t\tthis.length = this.length * 2;\n\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tthis.arrayIDNew[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelIDNew[i] = this.nextIndex++;\n\t\t\tif (i < index) {\n\t\t\t\tthis.arrayDataNew[i] = this.arrayData[i];\n\t\t\t} else if (i > index && i <= this.size) {\n\t\t\t\tthis.arrayDataNew[i] = this.arrayData[i - 1];\n\t\t\t}\n\t\t}\n\n\t\tthis.arrayDataNew[index] = elemToAdd;\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\t//Create new array\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayIDNew[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelIDNew[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelIDNew[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.arrayMoveID = new Array(this.size);\n\n\t\t//Move elements before index from old array\n\t\tfor (let i = 0; i < index; i++) {\n\t\t\tconst xposinit = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst yposinit =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\n\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i], this.arrayData[i], xposinit, yposinit);\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos, ypos);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//delete movement id objects and set text\n\t\tfor (let i = 0; i < index; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\tthis.cmd(act.setText, this.arrayIDNew[i], this.arrayData[i]);\n\t\t}\n\n\t\t//Add elemToAdd at the index\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\t'#0000FF',\n\t\t\tPUSH_ELEMENT_X,\n\t\t\tPUSH_ELEMENT_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos =\n\t\t\t(parseInt(index) % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(parseInt(index) / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING +\n\t\t\tRESIZE_ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos);\n\t\tthis.cmd(act.move, labPushValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayIDNew[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.step);\n\n\t\t//Move elements after index from old array\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tconst xposinit = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst yposinit =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tconst xpos = (i % (ARRAY_ELEMS_PER_LINE - 1)) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / (ARRAY_ELEMS_PER_LINE - 1)) * ARRAY_LINE_SPACING +\n\t\t\t\tRESIZE_ARRAY_START_Y;\n\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\n\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i], this.arrayData[i], xposinit, yposinit);\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos + ARRAY_ELEM_WIDTH, ypos);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//delete movement id objects\n\t\tfor (let i = index; i <= this.size; i++) {\n\t\t\tif (i < this.size) {\n\t\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\t}\n\t\t\tthis.cmd(act.setText, this.arrayIDNew[i], this.arrayData[i - 1]);\n\t\t}\n\n\t\tthis.cmd(act.setText, this.arrayIDNew[index], elemToAdd);\n\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.delete, labPushResizeID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t\tthis.cmd(act.delete, this.arrayLabelID[i]);\n\t\t}\n\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tthis.cmd(act.move, this.arrayIDNew[i], xpos, ypos);\n\t\t\tthis.cmd(act.move, this.arrayLabelIDNew[i], xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t}\n\n\t\tthis.arrayID = this.arrayIDNew;\n\t\tthis.arrayLabelID = this.arrayLabelIDNew;\n\t\tthis.arrayData = this.arrayDataNew;\n\n\t\tif (index != null) {\n\t\t\tthis.nextIndex = this.nextIndex - this.size;\n\t\t}\n\n\t\tthis.size = this.size + 1;\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t\tthis.arrayData[i] = null;\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// General\n\nconst LARGE_ALLOWED = [\n\t[\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t],\n\t[\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t],\n];\n\nconst LARGE_CURVE = [\n\t[0, 0, -0.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.25, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.25],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[-0.25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.4],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.4, 0, 0],\n];\n\nconst LARGE_X_POS_LOGICAL = [\n\t600,\n\t700,\n\t800,\n\t900,\n\t650,\n\t750,\n\t850,\n\t600,\n\t700,\n\t800,\n\t900,\n\t650,\n\t750,\n\t850,\n\t600,\n\t700,\n\t800,\n\t900,\n];\n\nconst LARGE_Y_POS_LOGICAL = [\n\t50,\n\t50,\n\t50,\n\t50,\n\t150,\n\t150,\n\t150,\n\t250,\n\t250,\n\t250,\n\t250,\n\t350,\n\t350,\n\t350,\n\t450,\n\t450,\n\t450,\n\t450,\n];\n\nconst SMALL_ALLLOWED = [\n\t[false, true, true, true, true, false, false, false],\n\t[true, false, true, true, false, true, true, false],\n\t[true, true, false, false, true, true, true, false],\n\t[true, true, false, false, false, true, false, true],\n\t[true, false, true, false, false, false, true, true],\n\t[false, true, true, true, false, false, true, true],\n\t[false, true, true, false, true, true, false, true],\n\t[false, false, false, true, true, true, true, false],\n];\n\nconst SMALL_CURVE = [\n\t[0, 0.001, 0, 0.5, -0.5, 0, 0, 0],\n\t[0, 0, 0, 0.001, 0, 0.001, -0.2, 0],\n\t[0, 0.001, 0, 0, 0, 0.2, 0, 0],\n\t[-0.5, 0, 0, 0, 0, 0.001, 0, 0.5],\n\t[0.5, 0, 0, 0, 0, 0, 0, -0.5],\n\t[0, 0, -0.2, 0, 0, 0, 0.001, 0.001],\n\t[0, 0.2, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, -0.5, 0.5, 0, 0, 0],\n];\n\nconst SMALL_X_POS_LOGICAL = [800, 725, 875, 650, 950, 725, 875, 800];\nconst SMALL_Y_POS_LOGICAL = [25, 125, 125, 225, 225, 325, 325, 425];\n\n// BFS / DFS\n\nconst BFS_DFS_ADJ_LIST =\n\t//A     B      C     D      E     F      G      H\n\t/*A*/ [\n\t\t[0, 1, 1, 1, 1, 0, 0, 0],\n\t\t/*B*/ [1, 0, 0, 0, 0, 0, 1, 0],\n\t\t/*C*/ [1, 0, 0, 0, 0, 0, 0, 0],\n\t\t/*D*/ [1, 0, 0, 0, 0, 1, 0, 0],\n\t\t/*E*/ [1, 0, 0, 0, 0, 0, 1, 0],\n\t\t/*F*/ [0, 0, 0, 1, 0, 0, 1, 0],\n\t\t/*G*/ [0, 1, 0, 0, 1, 1, 0, 1],\n\t\t/*H*/ [0, 0, 0, 0, 0, 0, 1, 0],\n\t].map(row => row.map(x => x || -1)); // Turn 0s to -1s\n\n// Dijkstra's\n\nconst DIJKSTRAS_ADJ_LIST =\n\t//A     B      C     D      E     F      G      H\n\t/*A*/ [\n\t\t[0, 8, 2, 5, 0, 0, 0, 0],\n\t\t/*B*/ [8, 0, 1, 1, 0, 0, 7, 0],\n\t\t/*C*/ [2, 1, 0, 0, 3, 0, 0, 0],\n\t\t/*D*/ [5, 1, 0, 0, 0, 4, 0, 0],\n\t\t/*E*/ [0, 0, 3, 0, 0, 0, 2, 0],\n\t\t/*F*/ [0, 0, 0, 4, 0, 0, '0', 1], // Hacky way to get actual 0 in final matrix\n\t\t/*G*/ [0, 7, 0, 0, 2, '0', 0, 1],\n\t\t/*H*/ [0, 0, 0, 0, 0, 1, 1, 0],\n\t].map(row => row.map(x => Number(x || -1))); // '0' is truthy, so we can cast it after the ||\n\n// Prim's / Kruskal's\n\nconst PRIMS_KRUSKALS_ADJ_LIST =\n\t//A     B      C     D      E     F      G      H\n\t/*A*/ [\n\t\t[0, 1, 5, 0, 0, 0, 0, 0],\n\t\t/*B*/ [1, 0, 7, 9, 0, 0, 1, 0],\n\t\t/*C*/ [5, 7, 0, 0, 0, 0, 13, 0],\n\t\t/*D*/ [0, 9, 0, 0, 0, 4, 0, 0],\n\t\t/*E*/ [0, 0, 0, 0, 0, 0, 10, 0],\n\t\t/*F*/ [0, 0, 0, 4, 0, 0, 2, '0'],\n\t\t/*G*/ [0, 1, 13, 0, 10, 2, 0, 3],\n\t\t/*H*/ [0, 0, 0, 0, 0, '0', 3, 0],\n\t].map(row => row.map(x => Number(x || -1)));\n\n// Color coding for Disjoint Set in Kruskal's\n\nconst KRUSKALS_DS_COLORS = [\n\t'#9b9bd4',\n\t'#6aaf6a',\n\t'#f07575',\n\t'#ffe866',\n\t'#b8f9b8',\n\t'#ff99ff',\n\t'#99ffff',\n\t'#ffccd4',\n];\n\nexport {\n\tLARGE_ALLOWED,\n\tLARGE_CURVE,\n\tLARGE_X_POS_LOGICAL,\n\tLARGE_Y_POS_LOGICAL,\n\tSMALL_X_POS_LOGICAL,\n\tSMALL_Y_POS_LOGICAL,\n\tSMALL_ALLLOWED,\n\tSMALL_CURVE,\n\tBFS_DFS_ADJ_LIST,\n\tDIJKSTRAS_ADJ_LIST,\n\tPRIMS_KRUSKALS_ADJ_LIST,\n\tKRUSKALS_DS_COLORS,\n};\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// TODO:  UNDO (all the way) is BROKEN.  Redo reset ...\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport {\n\tLARGE_ALLOWED,\n\tLARGE_CURVE,\n\tLARGE_X_POS_LOGICAL,\n\tLARGE_Y_POS_LOGICAL,\n\tSMALL_ALLLOWED,\n\tSMALL_CURVE,\n\tSMALL_X_POS_LOGICAL,\n\tSMALL_Y_POS_LOGICAL,\n} from './util/GraphValues.js';\nimport { act } from '../anim/AnimationMain';\n\nconst SMALL_ADJ_MATRIX_X_START = 700;\nconst SMALL_ADJ_MATRIX_Y_START = 45;\nconst SMALL_ADJ_MATRIX_WIDTH = 30;\nconst SMALL_ADJ_MATRIX_HEIGHT = 30;\n\nconst SMALL_ADJ_LIST_X_START = 600;\nconst SMALL_ADJ_LIST_Y_START = 30;\n\nconst SMALL_ADJ_LIST_ELEM_WIDTH = 80;\nconst SMALL_ADJ_LIST_ELEM_HEIGHT = 30;\n\nconst SMALL_ADJ_LIST_HEIGHT = 36;\nconst SMALL_ADJ_LIST_WIDTH = 36;\n\nconst SMALL_ADJ_LIST_SPACING_AFTER_LIST = 15;\nconst SMALL_ADJ_LIST_SPACING_BETWEEN_NODES = 15;\n\nconst LARGE_ADJ_MATRIX_X_START = 575;\nconst LARGE_ADJ_MATRIX_Y_START = 40;\nconst LARGE_ADJ_MATRIX_WIDTH = 23;\nconst LARGE_ADJ_MATRIX_HEIGHT = 23;\n\nconst LARGE_ADJ_LIST_X_START = 600;\nconst LARGE_ADJ_LIST_Y_START = 30;\n\nconst LARGE_ADJ_LIST_ELEM_WIDTH = 80;\nconst LARGE_ADJ_LIST_ELEM_HEIGHT = 20;\n\nconst LARGE_ADJ_LIST_HEIGHT = 25;\nconst LARGE_ADJ_LIST_WIDTH = 20;\n\nconst LARGE_ADJ_LIST_SPACING_AFTER_LIST = 25;\nconst LARGE_ADJ_LIST_SPACING_BETWEEN_NODES = 15;\n\nexport const VERTEX_INDEX_COLOR = '#0000FF';\nexport const EDGE_COLOR = '#000000';\n\nconst HIGHLIGHT_CIRCLE_COLOR = '#000000';\n\nexport const SMALL_SIZE = 8;\nexport const LARGE_SIZE = 18;\n\nexport default class Graph extends Algorithm {\n\tconstructor(am, w, h, defaultEdges, dir, dag, costs) {\n\t\tsuper(am, w, h);\n\t\tthis.controls = [];\n\t\tdefaultEdges = defaultEdges === [] ? undefined : defaultEdges;\n\t\tdir = dir === undefined ? false : dir;\n\t\tdag = dag === undefined ? false : dag;\n\t\tcosts = costs === undefined ? false : costs;\n\n\t\tthis.nextIndex = 0;\n\n\t\tthis.currentLayer = 1;\n\t\tthis.defaultEdges = defaultEdges;\n\t\tthis.directed = dir;\n\t\tthis.isDAG = dag;\n\t\tthis.showEdgeCosts = costs;\n\t\tthis.currentLayer = 1;\n\n\t\tthis.setup_small(this.defaultEdges);\n\t}\n\n\taddControls(addDirection) {\n\t\tif (addDirection == null) {\n\t\t\taddDirection = true;\n\t\t}\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\t\tthis.newGraphButton = addControlToAlgorithmBar('Button', 'New Graph', verticalGroup);\n\t\tthis.newGraphButton.onclick = this.newGraphCallback.bind(this);\n\t\tthis.controls.push(this.newGraphButton);\n\t\tthis.defaultGraphButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Default Graph',\n\t\t\tverticalGroup,\n\t\t);\n\t\tthis.defaultGraphButton.onclick = this.defaultGraphCallback.bind(this);\n\t\tthis.defaultGraphButton.disabled = true;\n\t\tthis.controls.push(this.defaultGraphButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tif (addDirection) {\n\t\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t\t['Undirected Graph', 'Directed Graph'],\n\t\t\t\t'GraphType',\n\t\t\t);\n\n\t\t\tthis.undirectedGraphButton = radioButtonList[0];\n\t\t\tthis.undirectedGraphButton.onclick = this.directedGraphCallback.bind(this, false);\n\t\t\tthis.undirectedGraphButton.checked = !this.directed;\n\t\t\tthis.controls.push(this.undirectedGraphButton);\n\n\t\t\tthis.directedGraphButton = radioButtonList[1];\n\t\t\tthis.directedGraphButton.onclick = this.directedGraphCallback.bind(this, true);\n\t\t\tthis.directedGraphButton.checked = this.directed;\n\t\t\tthis.controls.push(this.directedGraphButton);\n\n\t\t\taddDivisorToAlgorithmBar();\n\t\t}\n\n\t\tlet radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Small Graph', 'Large Graph'],\n\t\t\t'GraphSize',\n\t\t);\n\n\t\tthis.smallGraphButton = radioButtonList[0];\n\t\tthis.smallGraphButton.onclick = this.smallGraphCallback.bind(this);\n\t\tthis.smallGraphButton.checked = true;\n\t\tthis.controls.push(this.smallGraphButton);\n\n\t\tthis.largeGraphButton = radioButtonList[1];\n\t\tthis.largeGraphButton.onclick = this.largeGraphCallback.bind(this);\n\t\tthis.controls.push(this.largeGraphButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// We are explicitly not adding the buttons below to this.controls\n\t\t// since we don't want them to be disabled\n\t\tradioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t[\n\t\t\t\t'Logical Representation',\n\t\t\t\t'Adjacency List Representation',\n\t\t\t\t'Adjacency Matrix Representation',\n\t\t\t],\n\t\t\t'GraphRepresentation',\n\t\t);\n\n\t\tthis.logicalButton = radioButtonList[0];\n\t\tthis.logicalButton.onclick = this.graphRepChangedCallback.bind(this, 1);\n\n\t\tthis.adjacencyListButton = radioButtonList[1];\n\t\tthis.adjacencyListButton.onclick = this.graphRepChangedCallback.bind(this, 2);\n\n\t\tthis.adjacencyMatrixButton = radioButtonList[2];\n\t\tthis.adjacencyMatrixButton.onclick = this.graphRepChangedCallback.bind(this, 3);\n\t\tthis.logicalButton.checked = true;\n\t}\n\n\tdirectedGraphCallback(newDirected) {\n\t\tif (newDirected !== this.directed) {\n\t\t\tthis.defaultGraphButton.disabled = newDirected;\n\t\t\tthis.directed = newDirected;\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup();\n\t\t}\n\t}\n\n\tsmallGraphCallback() {\n\t\tif (this.size !== SMALL_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup_small();\n\t\t}\n\t}\n\n\tlargeGraphCallback() {\n\t\tif (this.size !== LARGE_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup_large();\n\t\t}\n\t}\n\n\tnewGraphCallback() {\n\t\tthis.animationManager.resetAll();\n\t\tthis.setup();\n\t}\n\n\tdefaultGraphCallback() {\n\t\tthis.animationManager.resetAll();\n\t\tthis.setup(this.defaultEdges);\n\t}\n\n\tgraphRepChangedCallback(newLayer) {\n\t\tthis.animationManager.setAllLayers([0, newLayer]);\n\t\tthis.currentLayer = newLayer;\n\t}\n\n\trecolorGraph() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tthis.setEdgeColor(i, j, EDGE_COLOR);\n\t\t\t\t\tthis.setEdgeThickness(i, j, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thighlightEdge(i, j, highlightVal, color) {\n\t\tthis.cmd(act.setHighlight, this.adj_list_edges[i][j], highlightVal, color);\n\t\tthis.cmd(act.setHighlight, this.adj_matrixID[i][j], highlightVal, color);\n\t\tthis.cmd(act.setEdgeHighlight, this.circleID[i], this.circleID[j], highlightVal, color);\n\t\tif (!this.directed) {\n\t\t\tthis.cmd(act.setEdgeHighlight, this.circleID[j], this.circleID[i], highlightVal, color);\n\t\t}\n\t}\n\n\tvisitVertex(i) {\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightCircleL,\n\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\tthis.x_pos_logical[i],\n\t\t\tthis.y_pos_logical[i],\n\t\t);\n\t\tthis.cmd(act.setLayer, this.highlightCircleL, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightCircleAL,\n\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\tthis.adj_list_x_start - this.adj_list_width,\n\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t);\n\t\tthis.cmd(act.setLayer, this.highlightCircleAL, 2);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightCircleAM,\n\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\tthis.adj_matrix_x_start - this.adj_matrix_width,\n\t\t\tthis.adj_matrix_y_start + i * this.adj_matrix_height,\n\t\t);\n\t\tthis.cmd(act.setLayer, this.highlightCircleAM, 3);\n\t}\n\n\tleaveVertex() {\n\t\tthis.cmd(act.delete, this.highlightCircleL);\n\t\tthis.cmd(act.delete, this.highlightCircleAM);\n\t\tthis.cmd(act.delete, this.highlightCircleAL);\n\t}\n\n\tsetEdgeColor(i, j, color) {\n\t\tthis.cmd(act.setForegroundColor, this.adj_list_edges[i][j], color);\n\t\tthis.cmd(act.setTextColor, this.adj_matrixID[i][j], color);\n\t\tthis.cmd(act.setEdgeColor, this.circleID[i], this.circleID[j], color);\n\t\tif (!this.directed) {\n\t\t\tthis.cmd(act.setEdgeColor, this.circleID[j], this.circleID[i], color);\n\t\t}\n\t}\n\n\tsetEdgeThickness(i, j, thickness) {\n\t\tthis.cmd(act.setEdgeThickness, this.circleID[i], this.circleID[j], thickness);\n\t\tif (!this.directed) {\n\t\t\tthis.cmd(act.setEdgeThickness, this.circleID[j], this.circleID[i], thickness);\n\t\t}\n\t}\n\n\tclearEdges() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tthis.cmd(act.disconnect, this.circleID[i], this.circleID[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trebuildEdges() {\n\t\tthis.clearEdges();\n\t\tthis.buildEdges();\n\t}\n\n\tbuildEdges() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tconst edgeLabel = this.showEdgeCosts ? String(this.adj_matrix[i][j]) : '';\n\t\t\t\t\tif (this.directed) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.circleID[i],\n\t\t\t\t\t\t\tthis.circleID[j],\n\t\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t\tthis.adjustCurveForDirectedEdges(\n\t\t\t\t\t\t\t\tthis.curve[i][j],\n\t\t\t\t\t\t\t\tthis.adj_matrix[j][i] >= 0,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tedgeLabel,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (i < j) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.circleID[i],\n\t\t\t\t\t\t\tthis.circleID[j],\n\t\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t\tthis.curve[i][j],\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tedgeLabel,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetup_small(adj_matrix) {\n\t\tthis.allowed = SMALL_ALLLOWED;\n\t\tthis.curve = SMALL_CURVE;\n\t\tthis.x_pos_logical = SMALL_X_POS_LOGICAL;\n\t\tthis.y_pos_logical = SMALL_Y_POS_LOGICAL;\n\t\tthis.adj_matrix_x_start = SMALL_ADJ_MATRIX_X_START;\n\t\tthis.adj_matrix_y_start = SMALL_ADJ_MATRIX_Y_START;\n\t\tthis.adj_matrix_width = SMALL_ADJ_MATRIX_WIDTH;\n\t\tthis.adj_matrix_height = SMALL_ADJ_MATRIX_HEIGHT;\n\t\tthis.adj_list_x_start = SMALL_ADJ_LIST_X_START;\n\t\tthis.adj_list_y_start = SMALL_ADJ_LIST_Y_START;\n\t\tthis.adj_list_elem_width = SMALL_ADJ_LIST_ELEM_WIDTH;\n\t\tthis.adj_list_elem_height = SMALL_ADJ_LIST_ELEM_HEIGHT;\n\t\tthis.adj_list_height = SMALL_ADJ_LIST_HEIGHT;\n\t\tthis.adj_list_width = SMALL_ADJ_LIST_WIDTH;\n\t\tthis.adj_list_spacing_after_list = SMALL_ADJ_LIST_SPACING_AFTER_LIST;\n\t\tthis.adj_list_spacing_between_nodes = SMALL_ADJ_LIST_SPACING_BETWEEN_NODES;\n\t\tthis.size = SMALL_SIZE;\n\t\tthis.isLarge = false;\n\t\tthis.highlightCircleL = this.nextIndex++;\n\t\tthis.highlightCircleAL = this.nextIndex++;\n\t\tthis.highlightCircleAM = this.nextIndex++;\n\t\tthis.setup(adj_matrix);\n\t}\n\n\tsetup_large() {\n\t\tthis.allowed = LARGE_ALLOWED;\n\t\tthis.curve = LARGE_CURVE;\n\t\tthis.x_pos_logical = LARGE_X_POS_LOGICAL;\n\t\tthis.y_pos_logical = LARGE_Y_POS_LOGICAL;\n\t\tthis.adj_matrix_x_start = LARGE_ADJ_MATRIX_X_START;\n\t\tthis.adj_matrix_y_start = LARGE_ADJ_MATRIX_Y_START;\n\t\tthis.adj_matrix_width = LARGE_ADJ_MATRIX_WIDTH;\n\t\tthis.adj_matrix_height = LARGE_ADJ_MATRIX_HEIGHT;\n\t\tthis.adj_list_x_start = LARGE_ADJ_LIST_X_START;\n\t\tthis.adj_list_y_start = LARGE_ADJ_LIST_Y_START;\n\t\tthis.adj_list_elem_width = LARGE_ADJ_LIST_ELEM_WIDTH;\n\t\tthis.adj_list_elem_height = LARGE_ADJ_LIST_ELEM_HEIGHT;\n\t\tthis.adj_list_height = LARGE_ADJ_LIST_HEIGHT;\n\t\tthis.adj_list_width = LARGE_ADJ_LIST_WIDTH;\n\t\tthis.adj_list_spacing_after_list = LARGE_ADJ_LIST_SPACING_AFTER_LIST;\n\t\tthis.adj_list_spacing_between_nodes = LARGE_ADJ_LIST_SPACING_BETWEEN_NODES;\n\t\tthis.size = LARGE_SIZE;\n\t\tthis.isLarge = true;\n\t\tthis.highlightCircleL = this.nextIndex++;\n\t\tthis.highlightCircleAL = this.nextIndex++;\n\t\tthis.highlightCircleAM = this.nextIndex++;\n\t\tthis.setup();\n\t}\n\n\tadjustCurveForDirectedEdges(curve, bidirectional) {\n\t\tif (!this.directed || !bidirectional || Math.abs(curve) > 0.01) {\n\t\t\treturn curve;\n\t\t} else {\n\t\t\treturn 0.1;\n\t\t}\n\t}\n\n\tsetup(adj_matrix) {\n\t\tthis.commands = [];\n\t\tthis.circleID = new Array(this.size);\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.circleID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircle,\n\t\t\t\tthis.circleID[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.x_pos_logical[i],\n\t\t\t\tthis.y_pos_logical[i],\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.circleID[i], VERTEX_INDEX_COLOR, 0);\n\n\t\t\tthis.cmd(act.setLayer, this.circleID[i], 1);\n\t\t}\n\n\t\tif (adj_matrix) {\n\t\t\tthis.adj_matrix = adj_matrix;\n\t\t\tthis.adj_matrixID = new Array(this.size);\n\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\tthis.adj_matrixID[i] = new Array(this.size);\n\t\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.buildEdges();\n\t\t} else {\n\t\t\tthis.adj_matrix = new Array(this.size);\n\t\t\tthis.adj_matrixID = new Array(this.size);\n\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\tthis.adj_matrix[i] = new Array(this.size);\n\t\t\t\tthis.adj_matrixID[i] = new Array(this.size);\n\t\t\t}\n\n\t\t\tlet edgePercent;\n\t\t\tif (this.size === SMALL_SIZE) {\n\t\t\t\tif (this.directed) {\n\t\t\t\t\tedgePercent = 0.4;\n\t\t\t\t} else {\n\t\t\t\t\tedgePercent = 0.5;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.directed) {\n\t\t\t\t\tedgePercent = 0.35;\n\t\t\t\t} else {\n\t\t\t\t\tedgePercent = 0.6;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.directed) {\n\t\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.allowed[i][j] &&\n\t\t\t\t\t\t\tMath.random() <= edgePercent &&\n\t\t\t\t\t\t\t(i < j ||\n\t\t\t\t\t\t\t\tMath.abs(this.curve[i][j]) < 0.01 ||\n\t\t\t\t\t\t\t\tthis.adj_matrixID[j][i] === -1) &&\n\t\t\t\t\t\t\t(!this.isDAG || i < j)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (this.showEdgeCosts) {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = Math.floor(Math.random() * 9) + 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.adj_matrix[i][j] = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.buildEdges();\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\t\tfor (let j = i + 1; j < this.size; j++) {\n\t\t\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\t\t\tthis.adj_matrixID[j][i] = this.nextIndex++;\n\n\t\t\t\t\t\tif (this.allowed[i][j] && Math.random() <= edgePercent) {\n\t\t\t\t\t\t\tif (this.showEdgeCosts) {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = Math.floor(Math.random() * 9) + 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.adj_matrix[j][i] = this.adj_matrix[i][j];\n\t\t\t\t\t\t\tlet edgeLabel;\n\t\t\t\t\t\t\tif (this.showEdgeCosts) {\n\t\t\t\t\t\t\t\tedgeLabel = String(this.adj_matrix[i][j]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tedgeLabel = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\t\tthis.circleID[i],\n\t\t\t\t\t\t\t\tthis.circleID[j],\n\t\t\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t\t\tthis.curve[i][j],\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tedgeLabel,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.adj_matrix[i][j] = -1;\n\t\t\t\t\t\t\tthis.adj_matrix[j][i] = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.buildEdges();\n\n\t\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\t\tthis.adj_matrix[i][i] = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Create Adj List\n\n\t\tthis.buildAdjList();\n\n\t\t// Create Adj Matrix\n\n\t\tthis.buildAdjMatrix();\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.clearHistory();\n\t}\n\n\tresetAll() {}\n\n\tbuildAdjMatrix() {\n\t\tthis.adj_matrix_index_x = new Array(this.size);\n\t\tthis.adj_matrix_index_y = new Array(this.size);\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.adj_matrix_index_x[i] = this.nextIndex++;\n\t\t\tthis.adj_matrix_index_y[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.adj_matrix_index_x[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.adj_matrix_x_start + i * this.adj_matrix_width,\n\t\t\t\tthis.adj_matrix_y_start - this.adj_matrix_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.adj_matrix_index_x[i], VERTEX_INDEX_COLOR);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.adj_matrix_index_y[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.adj_matrix_x_start - this.adj_matrix_width,\n\t\t\t\tthis.adj_matrix_y_start + i * this.adj_matrix_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.adj_matrix_index_y[i], VERTEX_INDEX_COLOR);\n\t\t\tthis.cmd(act.setLayer, this.adj_matrix_index_x[i], 3);\n\t\t\tthis.cmd(act.setLayer, this.adj_matrix_index_y[i], 3);\n\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\tlet lab;\n\t\t\t\tif (this.adj_matrix[i][j] < 0) {\n\t\t\t\t\tlab = '';\n\t\t\t\t} else {\n\t\t\t\t\tlab = String(this.adj_matrix[i][j]);\n\t\t\t\t}\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.adj_matrixID[i][j],\n\t\t\t\t\tlab,\n\t\t\t\t\tthis.adj_matrix_width,\n\t\t\t\t\tthis.adj_matrix_height,\n\t\t\t\t\tthis.adj_matrix_x_start + j * this.adj_matrix_width,\n\t\t\t\t\tthis.adj_matrix_y_start + i * this.adj_matrix_height,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setLayer, this.adj_matrixID[i][j], 3);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveAdjList() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.adj_list_list[i], 'RAL1');\n\t\t\tthis.cmd(act.delete, this.adj_list_index[i], 'RAL2');\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] > 0) {\n\t\t\t\t\tthis.cmd(act.delete, this.adj_list_edges[i][j], 'RAL3');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildAdjList() {\n\t\tthis.adj_list_index = new Array(this.size);\n\t\tthis.adj_list_list = new Array(this.size);\n\t\tthis.adj_list_edges = new Array(this.size);\n\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.adj_list_index[i] = this.nextIndex++;\n\t\t\tthis.adj_list_edges[i] = new Array(this.size);\n\t\t\tthis.adj_list_index[i] = this.nextIndex++;\n\t\t\tthis.adj_list_list[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.adj_list_list[i],\n\t\t\t\t'',\n\t\t\t\tthis.adj_list_width,\n\t\t\t\tthis.adj_list_height,\n\t\t\t\tthis.adj_list_x_start,\n\t\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setLayer, this.adj_list_list[i], 2);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.adj_list_index[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.adj_list_x_start - this.adj_list_width,\n\t\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.adj_list_index[i], VERTEX_INDEX_COLOR);\n\t\t\tthis.cmd(act.setLayer, this.adj_list_index[i], 2);\n\t\t\tlet lastElem = this.adj_list_list[i];\n\t\t\tlet nextXPos =\n\t\t\t\tthis.adj_list_x_start +\n\t\t\t\tthis.adj_list_width +\n\t\t\t\tthis.adj_list_spacing_after_list +\n\t\t\t\tthis.adj_list_spacing_between_nodes;\n\t\t\tlet hasEdges = false;\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\thasEdges = true;\n\t\t\t\t\tthis.adj_list_edges[i][j] = this.nextIndex++;\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLinkedListNode,\n\t\t\t\t\t\tthis.adj_list_edges[i][j],\n\t\t\t\t\t\t[this.toStr(j), this.adj_matrix[i][j]],\n\t\t\t\t\t\tthis.adj_list_elem_width,\n\t\t\t\t\t\tthis.adj_list_elem_height,\n\t\t\t\t\t\tnextXPos,\n\t\t\t\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t\t\t\t\t0.25,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.setNull, this.adj_list_edges[i][j], 1);\n\t\t\t\t\tthis.cmd(act.setTextColor, this.adj_list_edges[i][j], VERTEX_INDEX_COLOR, 0);\n\t\t\t\t\tthis.cmd(act.setLayer, this.adj_list_edges[i][j], 2);\n\n\t\t\t\t\tnextXPos =\n\t\t\t\t\t\tnextXPos + this.adj_list_elem_width + this.adj_list_spacing_between_nodes;\n\t\t\t\t\tthis.cmd(act.connect, lastElem, this.adj_list_edges[i][j]);\n\t\t\t\t\tthis.cmd(act.setNull, lastElem, 0);\n\t\t\t\t\tlastElem = this.adj_list_edges[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!hasEdges) {\n\t\t\t\tthis.cmd(act.setNull, this.adj_list_list[i], 1);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Should be overwritten in child\n\treset() {\n\t\tthrow new Error('reset() should be implemented in child');\n\t}\n\n\ttoStr(vertex) {\n\t\treturn String.fromCharCode(65 + vertex);\n\t}\n\n\tenableUI() {\n\t\tfor (const control of this.controls) {\n\t\t\tif (\n\t\t\t\tcontrol === this.defaultGraphButton &&\n\t\t\t\t(this.directed || this.isLarge || this.adj_matrix === this.defaultEdges)\n\t\t\t) {\n\t\t\t\tcontrol.disabled = true;\n\t\t\t} else {\n\t\t\t\tcontrol.disabled = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (const control of this.controls) {\n\t\t\tcontrol.disabled = true;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { BFS_DFS_ADJ_LIST } from './util/GraphValues';\nimport Graph from './Graph.js';\nimport { act } from '../anim/AnimationMain';\n\nconst BFS_QUEUE_HEAD_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst LIST_START_X = 30;\nconst LIST_START_Y = 65;\nconst LIST_SPACING = 20;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 115;\n\nconst CURRENT_VERTEX_LABEL_X = 25;\nconst CURRENT_VERTEX_LABEL_Y = 140;\nconst CURRENT_VERTEX_X = 115;\nconst CURRENT_VERTEX_Y = 146;\n\nconst QUEUE_START_X = 30;\nconst QUEUE_START_Y = 190;\nconst QUEUE_SPACING = 20;\n\nexport default class BFS extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, BFS_DFS_ADJ_LIST);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.startField.size = 2;\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.commands = [];\n\t\tthis.messageID = [];\n\n\t\tthis.visited = [];\n\n\t\tthis.queueID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'List:',\n\t\t\tLIST_START_X - 5,\n\t\t\tLIST_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current vertex:',\n\t\t\tCURRENT_VERTEX_LABEL_X,\n\t\t\tCURRENT_VERTEX_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Queue:',\n\t\t\tQUEUE_START_X - 5,\n\t\t\tQUEUE_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.listID = [];\n\t\tthis.messageID = [];\n\t\tthis.visitedID = [];\n\t}\n\n\tstartCallback() {\n\t\tif (this.startField.value !== '') {\n\t\t\tlet startvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size) {\n\t\t\t\tthis.implementAction(this.doBFS.bind(this), startvalue);\n\t\t\t}\n\t\t}\n\t}\n\n\tdoBFS(startVetex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.queue = [];\n\t\tthis.queueID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.rebuildEdges();\n\n\t\tlet vertex = startVetex;\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Enqueueing ' + this.toStr(vertex) + ' and adding to visited set',\n\t\t);\n\t\tthis.visited[vertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(vertex),\n\t\t\tVISITED_START_X,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[vertex], VISITED_COLOR);\n\t\tthis.queue.push(vertex);\n\t\tthis.queueID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(vertex),\n\t\t\tQUEUE_START_X,\n\t\t\tQUEUE_START_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\twhile (this.queue.length > 0 && this.listID.length < this.size) {\n\t\t\tvertex = this.queue.shift();\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'Dequeueing ' + this.toStr(vertex) + ' and adding to list',\n\t\t\t);\n\n\t\t\tthis.cmd(act.setTextColor, this.queueID[0], BFS_QUEUE_HEAD_COLOR);\n\t\t\tthis.cmd(act.move, this.queueID[0], CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\t\tfor (let i = 1; i < this.queueID.length; i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.queueID[i],\n\t\t\t\t\tQUEUE_START_X + (i - 1) * QUEUE_SPACING,\n\t\t\t\t\tQUEUE_START_Y,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.listID.push(this.nextIndex);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tthis.toStr(vertex),\n\t\t\t\tLIST_START_X + (this.listID.length - 1) * LIST_SPACING,\n\t\t\t\tLIST_START_Y,\n\t\t\t);\n\n\t\t\tthis.visitVertex(vertex);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\tif (this.adj_matrix[vertex][neighbor] > 0) {\n\t\t\t\t\tthis.highlightEdge(vertex, neighbor, 1);\n\t\t\t\t\tif (!this.visited[neighbor]) {\n\t\t\t\t\t\tthis.visited[neighbor] = true;\n\t\t\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t' has not yet been visited, enqueueing and adding to visited set',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * LIST_SPACING,\n\t\t\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[neighbor], VISITED_COLOR);\n\t\t\t\t\t\tthis.queue.push(neighbor);\n\t\t\t\t\t\tthis.queueID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tQUEUE_START_X + (this.queue.length - 1) * QUEUE_SPACING,\n\t\t\t\t\t\t\tQUEUE_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) + ' has already been visited, skipping',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.highlightEdge(vertex, neighbor, 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.cmd(act.delete, this.queueID.shift());\n\n\t\t\tthis.leaveVertex();\n\t\t}\n\n\t\tif (this.queue.length > 0) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'All vertices have been visited, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.visited[i] = false;\n\t\t}\n\t\tfor (let i = 0; i < this.listID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.listID[i]);\n\t\t}\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nexport default class BST extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.first_print_pos_y = h - 2 * BST.PRINT_VERTICAL_GAP;\n\t\tthis.print_max = w - 10;\n\t\tthis.startingX = w / 2;\n\t\tthis.addControls();\n\t\tthis.nextIndex = 1;\n\t\tthis.commands = [];\n\t\tthis.edges = [];\n\t\tthis.toClear = [];\n\t\tthis.cmd(act.createLabel, 0, '', BST.EXPLANITORY_TEXT_X, BST.EXPLANITORY_TEXT_Y, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst traversalButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Pre-order', 'In-order', 'Post-order', 'Level order'],\n\t\t\t'Traversals',\n\t\t);\n\n\t\tthis.preOrderSelect = traversalButtonList[0];\n\t\tthis.inOrderSelect = traversalButtonList[1];\n\t\tthis.postOrderSelect = traversalButtonList[2];\n\t\tthis.levelOrderSelect = traversalButtonList[3];\n\t\tthis.preOrderSelect.onclick = () => (this.traversal = 'pre');\n\t\tthis.inOrderSelect.onclick = () => (this.traversal = 'in');\n\t\tthis.postOrderSelect.onclick = () => (this.traversal = 'post');\n\t\tthis.levelOrderSelect.onclick = () => (this.traversal = 'level');\n\t\tthis.preOrderSelect.checked = true;\n\t\tthis.traversal = 'pre';\n\n\t\tthis.traverseButton = addControlToAlgorithmBar('Button', 'Traverse');\n\t\tthis.traverseButton.onclick = this.traverseCallback.bind(this);\n\t\tthis.controls.push(this.traverseButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst predSuccButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Predecessor', 'Successor'],\n\t\t\t'Predecessor/Successor',\n\t\t);\n\n\t\tthis.predButton = predSuccButtonList[0];\n\t\tthis.succButton = predSuccButtonList[1];\n\t\tthis.predButton.onclick = () => (this.predSucc = 'pred');\n\t\tthis.succButton.onclick = () => (this.predSucc = 'succ');\n\t\tthis.succButton.checked = true;\n\t\tthis.predSucc = 'succ';\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 1;\n\t\tthis.treeRoot = null;\n\t\tthis.edges = [];\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.insertField.value;\n\t\t// Get text value\n\t\tif (insertedValue !== '') {\n\t\t\t// set text value\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tconst deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.remove.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.findField.value;\n\t\tif (findValue !== '') {\n\t\t\tthis.findField.value = '';\n\t\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t\t}\n\t}\n\n\ttraverseCallback() {\n\t\tthis.implementAction(this.traverse.bind(this));\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tsizeChanged(newWidth) {\n\t\tthis.startingX = newWidth / 2;\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\n\t\tif (this.treeRoot != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tconst firstLabel = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\t\tthis.treeRoot.x,\n\t\t\t\tthis.treeRoot.y,\n\t\t\t);\n\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\t\t\tthis.printTreeRec(this.treeRoot);\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let i = firstLabel; i < this.nextIndex; i++) this.cmd(act.delete, i);\n\t\t\tthis.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tpreOrderRec(tree) {\n\t\tthis.cmd(act.step);\n\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, BST.PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += BST.PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += BST.PRINT_VERTICAL_GAP;\n\t\t}\n\n\t\tif (tree.left != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.preOrderRec(tree.left);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tif (tree.right != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.preOrderRec(tree.right);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\treturn;\n\t}\n\n\tlevelOrder(tree) {\n\t\tthis.highlightID = this.nextIndex++;\n\t\t// const firstLabel = this.nextIndex;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightID,\n\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\tthis.treeRoot.x,\n\t\t\tthis.treeRoot.y,\n\t\t);\n\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\n\t\tconst queue = [tree];\n\n\t\twhile (queue.length !== 0) {\n\t\t\tconst curr = queue.shift();\n\n\t\t\tconst nextLabelID = this.nextIndex++;\n\t\t\tthis.cmd(act.move, this.highlightID, curr.x, curr.y);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.createLabel, nextLabelID, curr.data, curr.x, curr.y);\n\t\t\tthis.cmd(act.setForegroundColor, nextLabelID, BST.PRINT_COLOR);\n\t\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.xPosOfNextLabel += BST.PRINT_HORIZONTAL_GAP;\n\t\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\t\tthis.yPosOfNextLabel += BST.PRINT_VERTICAL_GAP;\n\t\t\t}\n\n\t\t\tif (curr.left != null) {\n\t\t\t\tqueue.push(curr.left);\n\t\t\t}\n\n\t\t\tif (curr.right != null) {\n\t\t\t\tqueue.push(curr.right);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, this.highlightID);\n\t\tthis.cmd(act.step);\n\t\t// for (let i = firstLabel; i < this.nextIndex; i++) this.cmd(act.delete, i);\n\t\t// this.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\t}\n\n\ttraverse() {\n\t\tthis.commands = [];\n\t\tthis.clearOldObjects();\n\n\t\tif (this.treeRoot == null) {\n\t\t\treturn this.commands;\n\t\t}\n\n\t\tif (this.traversal === 'level') {\n\t\t\tthis.levelOrder(this.treeRoot);\n\t\t}\n\n\t\tthis.highlightID = this.nextIndex++;\n\t\tconst firstLabel = this.nextIndex;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightID,\n\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\tthis.treeRoot.x,\n\t\t\tthis.treeRoot.y,\n\t\t);\n\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\n\t\tif (this.traversal === 'pre') {\n\t\t\tthis.preOrderRec(this.treeRoot);\n\t\t} else if (this.traversal === 'in') {\n\t\t\tthis.printTreeRec(this.treeRoot);\n\t\t} else if (this.traversal === 'post') {\n\t\t\tthis.postOrderRec(this.treeRoot);\n\t\t}\n\n\t\tthis.cmd(act.delete, this.highlightID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = firstLabel; i < this.nextIndex; i++) this.toClear.push(i);\n\t\t// this.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\n\t\treturn this.commands;\n\t}\n\n\tpostOrderRec(tree) {\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.postOrderRec(tree.left);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tif (tree.right != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.postOrderRec(tree.right);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, BST.PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += BST.PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += BST.PRINT_VERTICAL_GAP;\n\t\t}\n\t\treturn;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.printTreeRec(tree.left);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, BST.PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += BST.PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += BST.PRINT_VERTICAL_GAP;\n\t\t}\n\t\tif (tree.right != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.printTreeRec(tree.right);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\treturn;\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\t\tthis.clearOldObjects();\n\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tthis.doFind(this.treeRoot, findValue);\n\n\t\treturn this.commands;\n\t}\n\n\tdoFind(tree, value) {\n\t\tthis.cmd(act.setText, 0, 'Searching for ' + value);\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tif (tree.data === value) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Searching for ' + value + ' : ' + value + ' = ' + value + ' (Element found!)',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Found:' + value);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t} else {\n\t\t\t\tif (tree.data > value) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to left subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.left != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.left, value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t' Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' > ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to right subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.right != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.right, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\t'Searching for ' + value + ' : < Empty Tree > (Element not found)',\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, 'Searching for ' + value + ' :  (Element not found)');\n\t\t}\n\t}\n\n\tremakeTree(curr) {\n\t\tif (curr == null) return;\n\t\tif (curr.left != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.left.graphicID, BST.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.left);\n\t\t}\n\t\tif (curr.right != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.right.graphicID, BST.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.right);\n\t\t}\n\t}\n\n\tclearOldObjects() {\n\t\tthis.toClear.forEach(i => this.cmd(act.delete, i));\n\t\tthis.toClear = [];\n\t}\n\n\tadd(data) {\n\t\tthis.commands = [];\n\t\tthis.clearOldObjects();\n\t\tthis.cmd(act.setText, 0, 'Inserting ' + data);\n\t\tthis.treeRoot = this.addH(data, this.treeRoot);\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\taddH(data, curr) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, 'Null found, inserting new node');\n\t\t\tconst treeNodeID = this.nextIndex++;\n\t\t\tthis.cmd(act.createCircle, treeNodeID, data, 30, BST.STARTING_Y);\n\n\t\t\tthis.cmd(act.setForegroundColor, treeNodeID, BST.FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, treeNodeID, BST.BACKGROUND_COLOR);\n\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn new BSTNode(data, treeNodeID, 0, 0);\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking at left subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.addH(data, curr.left);\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking at right subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.addH(data, curr.right);\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, `${data} == ${curr.data}. Ignoring duplicate!`);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tconnectSmart(id1, id2) {\n\t\tif (!this.edges.some(e => e[0] === id1 && e[1] === id2)) {\n\t\t\tthis.cmd(act.connect, id1, id2, BST.LINK_COLOR);\n\t\t\tthis.edges.push([id1, id2]);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tdeleteNode(curr) {\n\t\tthis.cmd(act.delete, curr.graphicID);\n\t}\n\n\tremove(data) {\n\t\tthis.commands = [];\n\t\tthis.clearOldObjects();\n\n\t\tthis.cmd(act.setText, 0, `Deleting ${data}`);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, ' ');\n\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.treeRoot = this.removeH(this.treeRoot, data);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\tremoveH(curr, data) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, `${data} not found in the tree`);\n\t\t\treturn;\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking left`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.removeH(curr.left, data);\n\t\t\tif (curr.left != null) {\n\t\t\t\tcurr.left.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking right`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.removeH(curr.right, data);\n\t\t\tif (curr.right != null) {\n\t\t\t\tcurr.right.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else {\n\t\t\tif (curr.left == null && curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Element to delete is a leaf node');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn null;\n\t\t\t} else if (curr.left == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with right child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.right;\n\t\t\t} else if (curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with left child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.left;\n\t\t\t} else {\n\t\t\t\tconst dummy = [];\n\t\t\t\tif (this.predSucc === 'succ') {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with successor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.right = this.removeSucc(curr.right, dummy);\n\t\t\t\t\tcurr.right && this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with predecessor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.left = this.removePred(curr.left, dummy);\n\t\t\t\t\tcurr.left && this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\t}\n\t\t\t\tthis.resizeTree();\n\t\t\t\tcurr.data = dummy[0];\n\t\t\t\tthis.cmd(act.setText, curr.graphicID, curr.data);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tremoveSucc(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.left == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No left child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.right;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Left child exists, look left');\n\t\tcurr.left = this.removeSucc(curr.left, dummy);\n\t\tif (curr.left != null) {\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0, '#0000ff');\n\t\treturn curr;\n\t}\n\n\tremovePred(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.right == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No right child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.left;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Right child exists, look right');\n\t\tthis.cmd(act.step);\n\t\tcurr.right = this.removePred(curr.right, dummy);\n\t\tif (curr.right != null) {\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0, '#0000ff');\n\t\treturn curr;\n\t}\n\n\tresizeTree() {\n\t\tif (this.treeRoot == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet startingPoint = this.startingX;\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tif (this.treeRoot != null) {\n\t\t\tif (this.treeRoot.leftWidth > startingPoint) {\n\t\t\t\tstartingPoint = this.treeRoot.leftWidth;\n\t\t\t} else if (this.treeRoot.rightWidth > startingPoint) {\n\t\t\t\tstartingPoint = Math.max(\n\t\t\t\t\tthis.treeRoot.leftWidth,\n\t\t\t\t\t2 * startingPoint - this.treeRoot.rightWidth,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.setNewPositions(this.treeRoot, startingPoint, BST.STARTING_Y, 0);\n\t\t\tthis.animateNewPositions(this.treeRoot);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition, side) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\tif (side === -1) {\n\t\t\t\txPosition = xPosition - tree.rightWidth;\n\t\t\t} else if (side === 1) {\n\t\t\t\txPosition = xPosition + tree.leftWidth;\n\t\t\t}\n\t\t\ttree.x = xPosition;\n\t\t\tthis.setNewPositions(tree.left, xPosition, yPosition + BST.HEIGHT_DELTA, -1);\n\t\t\tthis.setNewPositions(tree.right, xPosition, yPosition + BST.HEIGHT_DELTA, 1);\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t\t\tthis.animateNewPositions(tree.left);\n\t\t\tthis.animateNewPositions(tree.right);\n\t\t}\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\ttree.leftWidth = Math.max(this.resizeWidths(tree.left), BST.WIDTH_DELTA / 2);\n\t\ttree.rightWidth = Math.max(this.resizeWidths(tree.right), BST.WIDTH_DELTA / 2);\n\t\treturn tree.leftWidth + tree.rightWidth;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.clearOldObjects();\n\n\t\tthis.recClear(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\treturn this.commands;\n\t}\n\n\trecClear(curr) {\n\t\tif (curr != null) {\n\t\t\tthis.cmd(act.delete, curr.graphicID);\n\t\t\tthis.recClear(curr.left);\n\t\t\tthis.recClear(curr.right);\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n\nclass BSTNode {\n\tconstructor(val, id, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\n\t\tthis.graphicID = id;\n\t\tthis.left = null;\n\t\tthis.right = null;\n\t\tthis.parent = null;\n\t}\n}\n\n// Various constants\n\nBST.HIGHLIGHT_LABEL_COLOR = '#FF0000';\nBST.HIGHLIGHT_LINK_COLOR = '#FF0000';\n\nBST.HIGHLIGHT_COLOR = '#007700';\nBST.HEIGHT_LABEL_COLOR = '#007700';\n\nBST.LINK_COLOR = '#00B000';\nBST.HIGHLIGHT_CIRCLE_COLOR = '#007700';\nBST.FOREGROUND_COLOR = '#007700';\nBST.BACKGROUND_COLOR = '#DDFFDD';\nBST.PRINT_COLOR = BST.FOREGROUND_COLOR;\n\nBST.WIDTH_DELTA = 50;\nBST.HEIGHT_DELTA = 50;\nBST.STARTING_Y = 50;\n\nBST.FIRST_PRINT_POS_X = 50;\nBST.PRINT_VERTICAL_GAP = 20;\nBST.PRINT_HORIZONTAL_GAP = 50;\nBST.EXPLANITORY_TEXT_X = 10;\nBST.EXPLANITORY_TEXT_Y = 10;\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst FIRST_PRINT_POS_X = 50;\nconst PRINT_VERTICAL_GAP = 20;\nconst PRINT_MAX = 990;\nconst PRINT_HORIZONTAL_GAP = 50;\n\nconst MIN_MAX_DEGREE = 4;\n\nconst HEIGHT_DELTA = 50;\nconst NODE_SPACING = 3;\nconst STARTING_Y = 30;\nconst WIDTH_PER_ELEM = 40;\nconst NODE_HEIGHT = 20;\n\nconst MESSAGE_X = 5;\nconst MESSAGE_Y = 10;\n\nconst FOREGROUND_COLOR = '#007700';\nconst BACKGROUND_COLOR = '#EEFFEE';\nconst PRINT_COLOR = FOREGROUND_COLOR;\n\nexport default class BTree extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.nextIndex = 0;\n\n\t\tthis.starting_x = w / 2;\n\n\t\tthis.preemptiveSplit = false;\n\n\t\tthis.addControls();\n\n\t\tthis.max_keys = 3;\n\t\tthis.min_keys = 1;\n\t\tthis.split_index = 1;\n\n\t\tthis.max_degree = 4;\n\n\t\tthis.messageID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.messageID, '', MESSAGE_X, MESSAGE_Y, 0);\n\t\tthis.moveLabel1ID = this.nextIndex++;\n\t\tthis.moveLabel2ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.commands = [];\n\n\t\tthis.first_print_pos_y = h - 3 * PRINT_VERTICAL_GAP;\n\n\t\tthis.xPosOfNextLabel = 100;\n\t\tthis.yPosOfNextLabel = 200;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.printButton = addControlToAlgorithmBar('Button', 'Print');\n\t\tthis.printButton.onclick = this.printCallback.bind(this);\n\t\tthis.controls.push(this.printButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\t\taddLabelToAlgorithmBar('Promote with');\n\t\tconst splitIndexButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['second data', 'third data'],\n\t\t\t'Split Index',\n\t\t);\n\n\t\tthis.splitSecondSelect = splitIndexButtonList[0];\n\t\tthis.splitThirdSelect = splitIndexButtonList[1];\n\t\tthis.splitSecondSelect.onclick = () => (this.split_index = 1);\n\t\tthis.splitThirdSelect.onclick = () => (this.split_index = 2);\n\t\tthis.splitSecondSelect.checked = true;\n\t\tthis.split_index = 1;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 3;\n\t\tthis.max_degree = 4;\n\t\tthis.max_keys = 3;\n\t\tthis.min_keys = 1;\n\t\tthis.split_index = 1;\n\t\t// NOTE: The order of these last two this.commands matters!\n\t\tthis.treeRoot = null;\n\t\tthis.ignoreInputs = true;\n\t\tthis.ignoreInputs = false;\n\t}\n\n\tenableUI() {\n\t\tlet i;\n\t\tfor (i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tmaxDegreeChangedHandler(newMaxDegree) {\n\t\tif (this.max_degree !== newMaxDegree) {\n\t\t\tthis.implementAction(this.changeDegree.bind(this), newMaxDegree);\n\t\t\tthis.animationManager.skipForward();\n\t\t\tthis.animationManager.clearHistory();\n\t\t}\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.normalizeNumber(this.insertField.value, 4);\n\t\tif (insertedValue !== '') {\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tlet deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tdeletedValue = this.normalizeNumber(this.deleteField.value, 4);\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.deleteElement.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearTree.bind(this));\n\t}\n\n\tpremtiveSplitCallback() {\n\t\tif (this.preemptiveSplit !== this.premptiveSplitBox.checked) {\n\t\t\tthis.implementAction(\n\t\t\t\tthis.changePreemtiveSplit.bind(this),\n\t\t\t\tthis.premptiveSplitBox.checked,\n\t\t\t);\n\t\t}\n\t}\n\n\tchangePreemtiveSplit(newValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.step);\n\t\tthis.preemptiveSplit = newValue;\n\t\tif (this.premptiveSplitBox.checked !== this.preemptiveSplit) {\n\t\t\tthis.premptiveSplitBox.checked = this.preemptiveSplit;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tprintCallback() {\n\t\tthis.implementAction(this.printTree.bind(this));\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.messageID, 'Printing tree');\n\t\tconst firstLabel = this.nextIndex;\n\n\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\n\t\tthis.printTreeRec(this.treeRoot);\n\t\tthis.cmd(act.step);\n\t\tfor (let i = firstLabel; i < this.nextIndex; i++) {\n\t\t\tthis.cmd(act.delete, i);\n\t\t}\n\t\tthis.nextIndex = firstLabel;\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn this.commands;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tlet nextLabelID;\n\t\tif (tree.isLeaf) {\n\t\t\tfor (let i = 0; i < tree.numKeys; i++) {\n\t\t\t\tnextLabelID = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tnextLabelID,\n\t\t\t\t\ttree.keys[i],\n\t\t\t\t\tthis.getLabelX(tree, i),\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, nextLabelID, PRINT_COLOR);\n\t\t\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.xPosOfNextLabel += PRINT_HORIZONTAL_GAP;\n\t\t\t\tif (this.xPosOfNextLabel > PRINT_MAX) {\n\t\t\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\t\t\tthis.yPosOfNextLabel += PRINT_VERTICAL_GAP;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t} else {\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[0].graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[0].graphicID, 0);\n\t\t\tthis.printTreeRec(tree.children[0]);\n\t\t\tfor (let i = 0; i < tree.numKeys; i++) {\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\t\tnextLabelID = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tnextLabelID,\n\t\t\t\t\ttree.keys[i],\n\t\t\t\t\tthis.getLabelX(tree, i),\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, nextLabelID, PRINT_COLOR);\n\t\t\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.xPosOfNextLabel += PRINT_HORIZONTAL_GAP;\n\t\t\t\tif (this.xPosOfNextLabel > PRINT_MAX) {\n\t\t\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\t\t\tthis.yPosOfNextLabel += PRINT_VERTICAL_GAP;\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i + 1].graphicID, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i + 1].graphicID, 0);\n\t\t\t\tthis.printTreeRec(tree.children[i + 1]);\n\t\t\t}\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t}\n\t}\n\n\tclearTree() {\n\t\tthis.commands = [];\n\t\tthis.deleteTree(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\tthis.nextIndex = 3;\n\t\treturn this.commands;\n\t}\n\n\tdeleteTree(tree) {\n\t\tif (tree != null) {\n\t\t\tif (!tree.isLeaf) {\n\t\t\t\tfor (let i = 0; i <= tree.numKeys; i++) {\n\t\t\t\t\tthis.cmd(act.disconnect, tree.graphicID, tree.children[i].graphicID);\n\t\t\t\t\tthis.deleteTree(tree.children[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.delete, tree.graphicID);\n\t\t}\n\t}\n\n\tchangeDegree(degree) {\n\t\tthis.commands = [];\n\t\tthis.deleteTree(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\tthis.nextIndex = 3;\n\t\tconst newDegree = degree;\n\t\tthis.ignoreInputs = true;\n\t\tthis.maxDegreeRadioButtons[newDegree - MIN_MAX_DEGREE].checked = true;\n\n\t\tthis.ignoreInputs = false;\n\t\tthis.max_degree = newDegree;\n\t\tthis.max_keys = newDegree - 1;\n\t\tthis.min_keys = Math.floor((newDegree + 1) / 2) - 1;\n\t\tthis.split_index = Math.floor((newDegree - 1) / 2);\n\t\tif (this.commands.length === 0) {\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tif (newDegree % 2 !== 0 && this.preemptiveSplit) {\n\t\t\tthis.preemptiveSplit = false;\n\t\t\tthis.premptiveSplitBox.checked = false;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.normalizeNumber(this.findField.value, 4);\n\t\tthis.findField.value = '';\n\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.messageID, 'Finding ' + findValue);\n\t\tthis.findInTree(this.treeRoot, findValue);\n\n\t\treturn this.commands;\n\t}\n\n\tfindInTree(tree, val) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < tree.numKeys && tree.keys[i] < val; i++);\n\t\t\tif (i === tree.numKeys) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.findInTree(tree.children[tree.numKeys], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' is not in the tree');\n\t\t\t\t}\n\t\t\t} else if (tree.keys[i] > val) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\t\t\t\t\tthis.findInTree(tree.children[i], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' is not in the tree');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, '#FF0000', i);\n\t\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' found');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' is not in the tree');\n\t\t}\n\t}\n\n\tinsertElement(insertedValue) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.messageID, 'Inserting ' + insertedValue);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.treeRoot == null) {\n\t\t\tthis.treeRoot = new BTreeNode(this.nextIndex++, this.starting_x, STARTING_Y);\n\t\t\tthis.cmd(\n\t\t\t\tact.createBTreeNode,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\tWIDTH_PER_ELEM,\n\t\t\t\tNODE_HEIGHT,\n\t\t\t\t1,\n\t\t\t\tthis.starting_x,\n\t\t\t\tSTARTING_Y,\n\t\t\t\tBACKGROUND_COLOR,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t);\n\t\t\tthis.treeRoot.keys[0] = insertedValue;\n\t\t\tthis.cmd(act.setText, this.treeRoot.graphicID, insertedValue, 0);\n\t\t} else {\n\t\t\tif (this.preemptiveSplit) {\n\t\t\t\tif (this.treeRoot.numKeys === this.max_keys) {\n\t\t\t\t\tthis.split(this.treeRoot);\n\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tthis.insertNotFull(this.treeRoot, insertedValue);\n\t\t\t} else {\n\t\t\t\tthis.insert(this.treeRoot, insertedValue);\n\t\t\t}\n\t\t\tif (!this.treeRoot.isLeaf) {\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.setText, this.messageID, '');\n\n\t\treturn this.commands;\n\t}\n\n\tinsertNotFull(tree, insertValue) {\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tif (tree.isLeaf) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.messageID,\n\t\t\t\t'Inserting ' + insertValue + '.  Inserting into a leaf',\n\t\t\t);\n\t\t\ttree.numKeys++;\n\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\tlet insertIndex = tree.numKeys - 1;\n\t\t\twhile (insertIndex > 0 && tree.keys[insertIndex - 1] > insertValue) {\n\t\t\t\ttree.keys[insertIndex] = tree.keys[insertIndex - 1];\n\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\t\tinsertIndex--;\n\t\t\t}\n\t\t\ttree.keys[insertIndex] = insertValue;\n\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.resizeTree();\n\t\t} else {\n\t\t\tlet findIndex = 0;\n\t\t\twhile (findIndex < tree.numKeys && tree.keys[findIndex] < insertValue) {\n\t\t\t\tfindIndex++;\n\t\t\t}\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 0);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tif (tree.children[findIndex].numKeys === this.max_keys) {\n\t\t\t\tconst newTree = this.split(tree.children[findIndex]);\n\t\t\t\tthis.resizeTree();\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.insertNotFull(newTree, insertValue);\n\t\t\t} else {\n\t\t\t\tthis.insertNotFull(tree.children[findIndex], insertValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tinsert(tree, insertValue) {\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tif (tree.isLeaf) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.messageID,\n\t\t\t\t'Inserting ' + insertValue + '.  Inserting into a leaf',\n\t\t\t);\n\t\t\ttree.numKeys++;\n\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\tlet insertIndex = tree.numKeys - 1;\n\t\t\twhile (insertIndex > 0 && tree.keys[insertIndex - 1] > insertValue) {\n\t\t\t\ttree.keys[insertIndex] = tree.keys[insertIndex - 1];\n\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\t\tinsertIndex--;\n\t\t\t}\n\t\t\ttree.keys[insertIndex] = insertValue;\n\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.resizeTree();\n\t\t\tthis.insertRepair(tree);\n\t\t} else {\n\t\t\tlet findIndex = 0;\n\t\t\twhile (findIndex < tree.numKeys && tree.keys[findIndex] < insertValue) {\n\t\t\t\tfindIndex++;\n\t\t\t}\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 0);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.insert(tree.children[findIndex], insertValue);\n\t\t}\n\t}\n\n\tinsertRepair(tree) {\n\t\tif (tree.numKeys <= this.max_keys) {\n\t\t\treturn;\n\t\t} else if (tree.parent == null) {\n\t\t\tthis.treeRoot = this.split(tree);\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst newNode = this.split(tree);\n\t\t\tthis.insertRepair(newNode);\n\t\t}\n\t}\n\n\tsplit(tree) {\n\t\tthis.cmd(act.setText, this.messageID, 'Node now contains too many keys.  Splittig ...');\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\tconst rightNode = new BTreeNode(this.nextIndex++, tree.x + 100, tree.y);\n\t\trightNode.numKeys = tree.numKeys - this.split_index - 1;\n\t\tconst risingNode = tree.keys[this.split_index];\n\t\tlet currentParent;\n\t\tlet parentIndex;\n\t\tif (tree.parent != null) {\n\t\t\tcurrentParent = tree.parent;\n\t\t\tfor (\n\t\t\t\tparentIndex = 0;\n\t\t\t\tparentIndex < currentParent.numKeys + 1 &&\n\t\t\t\tcurrentParent.children[parentIndex] !== tree;\n\t\t\t\tparentIndex++\n\t\t\t);\n\t\t\tif (parentIndex === currentParent.numKeys + 1) {\n\t\t\t\tthrow new Error(\"Couldn't find which child we were!\");\n\t\t\t}\n\t\t\tthis.cmd(act.setNumElements, currentParent.graphicID, currentParent.numKeys + 1);\n\t\t\tfor (let i = currentParent.numKeys; i > parentIndex; i--) {\n\t\t\t\tcurrentParent.children[i + 1] = currentParent.children[i];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tcurrentParent.graphicID,\n\t\t\t\t\tcurrentParent.children[i].graphicID,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tcurrentParent.graphicID,\n\t\t\t\t\tcurrentParent.children[i].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti + 1,\n\t\t\t\t);\n\n\t\t\t\tcurrentParent.keys[i] = currentParent.keys[i - 1];\n\t\t\t\tthis.cmd(act.setText, currentParent.graphicID, currentParent.keys[i], i);\n\t\t\t}\n\t\t\tcurrentParent.numKeys++;\n\t\t\tcurrentParent.keys[parentIndex] = risingNode;\n\t\t\tthis.cmd(act.setText, currentParent.graphicID, '', parentIndex);\n\t\t\tthis.moveLabel1ID = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.moveLabel1ID,\n\t\t\t\trisingNode,\n\t\t\t\tthis.getLabelX(tree, this.split_index),\n\t\t\t\ttree.y,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.moveLabel1ID, FOREGROUND_COLOR);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.moveLabel1ID,\n\t\t\t\tthis.getLabelX(currentParent, parentIndex),\n\t\t\t\tcurrentParent.y,\n\t\t\t);\n\n\t\t\tcurrentParent.children[parentIndex + 1] = rightNode;\n\t\t\trightNode.parent = currentParent;\n\t\t}\n\n\t\tthis.cmd(\n\t\t\tact.createBTreeNode,\n\t\t\trightNode.graphicID,\n\t\t\tWIDTH_PER_ELEM,\n\t\t\tNODE_HEIGHT,\n\t\t\ttree.numKeys - this.split_index - 1,\n\t\t\ttree.x,\n\t\t\ttree.y,\n\t\t\tBACKGROUND_COLOR,\n\t\t\tFOREGROUND_COLOR,\n\t\t);\n\n\t\tfor (let i = this.split_index + 1; i < tree.numKeys + 1; i++) {\n\t\t\trightNode.children[i - this.split_index - 1] = tree.children[i];\n\t\t\tif (tree.children[i] != null) {\n\t\t\t\trightNode.isLeaf = false;\n\t\t\t\tthis.cmd(act.disconnect, tree.graphicID, tree.children[i].graphicID);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\trightNode.graphicID,\n\t\t\t\t\trightNode.children[i - this.split_index - 1].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti - this.split_index - 1,\n\t\t\t\t);\n\t\t\t\tif (tree.children[i] != null) {\n\t\t\t\t\ttree.children[i].parent = rightNode;\n\t\t\t\t}\n\t\t\t\ttree.children[i] = null;\n\t\t\t}\n\t\t}\n\t\tfor (let i = this.split_index + 1; i < tree.numKeys; i++) {\n\t\t\trightNode.keys[i - this.split_index - 1] = tree.keys[i];\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\trightNode.graphicID,\n\t\t\t\trightNode.keys[i - this.split_index - 1],\n\t\t\t\ti - this.split_index - 1,\n\t\t\t);\n\t\t}\n\t\tconst leftNode = tree;\n\t\tleftNode.numKeys = this.split_index;\n\t\tfor (let i = this.split_index; i < tree.numKeys; i++) {\n\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t}\n\t\tthis.cmd(act.setNumElements, tree.graphicID, this.split_index);\n\n\t\tif (tree.parent != null) {\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tcurrentParent.graphicID,\n\t\t\t\trightNode.graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\tparentIndex + 1,\n\t\t\t);\n\t\t\tthis.resizeTree();\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\tthis.cmd(act.setText, currentParent.graphicID, risingNode, parentIndex);\n\t\t\treturn tree.parent;\n\t\t} else {\n\t\t\tthis.treeRoot = new BTreeNode(this.nextIndex++, this.starting_x, STARTING_Y);\n\t\t\tthis.cmd(\n\t\t\t\tact.createBTreeNode,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\tWIDTH_PER_ELEM,\n\t\t\t\tNODE_HEIGHT,\n\t\t\t\t1,\n\t\t\t\tthis.starting_x,\n\t\t\t\tSTARTING_Y,\n\t\t\t\tBACKGROUND_COLOR,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t);\n\t\t\tthis.treeRoot.keys[0] = risingNode;\n\t\t\tthis.cmd(act.setText, this.treeRoot.graphicID, risingNode, 0);\n\t\t\tthis.treeRoot.children[0] = leftNode;\n\t\t\tthis.treeRoot.children[1] = rightNode;\n\t\t\tleftNode.parent = this.treeRoot;\n\t\t\trightNode.parent = this.treeRoot;\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\tleftNode.graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\t0,\n\t\t\t); // Connection Point\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\trightNode.graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\t1,\n\t\t\t); // Connection Point\n\t\t\tthis.treeRoot.isLeaf = false;\n\t\t\treturn this.treeRoot;\n\t\t}\n\t}\n\n\tdeleteElement(deletedValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, 'Deleting ' + deletedValue);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.cmd(act.setText, 0, '');\n\t\tif (this.preemptiveSplit) {\n\t\t\tthis.doDeleteNotEmpty(this.treeRoot, deletedValue);\n\t\t} else {\n\t\t\tthis.doDelete(this.treeRoot, deletedValue);\n\t\t}\n\t\tif (this.treeRoot.numKeys === 0) {\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, this.treeRoot.graphicID);\n\t\t\tthis.treeRoot = this.treeRoot.children[0];\n\t\t\tthis.treeRoot.parent = null;\n\t\t\tthis.resizeTree();\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tdoDeleteNotEmpty(tree, val) {\n\t\tif (tree != null) {\n\t\t\tlet nextNode;\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < tree.numKeys && tree.keys[i] < val; i++);\n\t\t\tif (i === tree.numKeys) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\n\t\t\t\t\tif (tree.children[tree.numKeys].numKeys === this.min_keys) {\n\t\t\t\t\t\tif (tree.children[tree.numKeys - 1].numKeys > this.min_keys) {\n\t\t\t\t\t\t\tnextNode = this.stealFromLeft(\n\t\t\t\t\t\t\t\ttree.children[tree.numKeys],\n\t\t\t\t\t\t\t\ttree.numKeys,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextNode = this.mergeRight(tree.children[tree.numKeys - 1]);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.doDeleteNotEmpty(tree.children[tree.numKeys], val);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else if (tree.keys[i] > val) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\n\t\t\t\t\tif (tree.children[i].numKeys > this.min_keys) {\n\t\t\t\t\t\tthis.doDeleteNotEmpty(tree.children[i], val);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (tree.children[i + 1].numKeys > this.min_keys) {\n\t\t\t\t\t\t\tnextNode = this.stealFromRight(tree.children[i], i);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextNode = this.mergeRight(tree.children[i]);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, 'FF0000', i);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\tfor (let j = i; j < tree.numKeys - 1; j++) {\n\t\t\t\t\t\ttree.keys[j] = tree.keys[j + 1];\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[j], j);\n\t\t\t\t\t}\n\t\t\t\t\ttree.numKeys--;\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\tthis.cmd(act.setText, this.messageID, '');\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t'Checking to see if tree to left of element to delete \\nhas an extra key',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\t\t\t\t\tlet maxNode = tree.children[i];\n\n\t\t\t\t\tif (tree.children[i].numKeys === this.min_keys) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t'Tree to left of element to delete does not have an extra key.  \\nLooking to the right ...',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\t\ttree.children[i + 1].graphicID,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\t\ttree.children[i + 1].graphicID,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t);\n\t\t\t\t\t\t// Trees to left and right of node to delete don't have enough keys\n\t\t\t\t\t\t// Do a merge, and then recursively delete the element\n\t\t\t\t\t\tif (tree.children[i + 1].numKeys === this.min_keys) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t\t'Neither subtree has extra nodes.  Mergeing around the key to delete, \\nand recursively deleting ...',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\t\tnextNode = this.mergeRight(tree.children[i]);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t\t'Tree to right of element to delete does have an extra key. \\nFinding the smallest key in that subtree ...',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\tlet minNode = tree.children[i + 1];\n\t\t\t\t\t\t\twhile (!minNode.isLeaf) {\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 1);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 0);\n\t\t\t\t\t\t\t\tif (minNode.children[0].numKeys === this.min_keys) {\n\t\t\t\t\t\t\t\t\tif (minNode.children[1].numKeys === this.min_keys) {\n\t\t\t\t\t\t\t\t\t\tminNode = this.mergeRight(minNode.children[0]);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tminNode = this.stealFromRight(minNode.children[0], 0);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tminNode = minNode.children[0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 1);\n\t\t\t\t\t\t\ttree.keys[i] = minNode.keys[0];\n\t\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t\t\t\t\t\tthis.cmd(act.setText, minNode.graphicID, '', 0);\n\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\tthis.moveLabel1ID,\n\t\t\t\t\t\t\t\tminNode.keys[0],\n\t\t\t\t\t\t\t\tthis.getLabelX(minNode, 0),\n\t\t\t\t\t\t\t\tminNode.y,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, i), tree.y);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t\t\t\t\t\tfor (i = 1; i < minNode.numKeys; i++) {\n\t\t\t\t\t\t\t\tminNode.keys[i - 1] = minNode.keys[i];\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tminNode.graphicID,\n\t\t\t\t\t\t\t\t\tminNode.keys[i - 1],\n\t\t\t\t\t\t\t\t\ti - 1,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.cmd(act.setText, minNode.graphicID, '', minNode.numKeys - 1);\n\n\t\t\t\t\t\t\tminNode.numKeys--;\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 0);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\t\t\t\tthis.cmd(act.setNumElements, minNode.graphicID, minNode.numKeys);\n\t\t\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\t\t\tthis.cmd(act.setText, this.messageID, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t'Tree to left of element to delete does have \\nan extra key. Finding the largest key in that subtree ...',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\twhile (!maxNode.isLeaf) {\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\t\t\tif (maxNode.children[maxNode.numKeys].numKeys === this.min_keys) {\n\t\t\t\t\t\t\t\tif (maxNode.children[maxNode.numKeys - 1] > this.min_keys) {\n\t\t\t\t\t\t\t\t\tmaxNode = this.stealFromLeft(\n\t\t\t\t\t\t\t\t\t\tmaxNode.children[maxNode.numKeys],\n\t\t\t\t\t\t\t\t\t\tmaxNode.numKeys,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmaxNode = this.mergeRight(maxNode.children[maxNode.numKeys - 1]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxNode = maxNode.children[maxNode.numKeys];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\ttree.keys[i] = maxNode.keys[maxNode.numKeys - 1];\n\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t\t\t\t\tthis.cmd(act.setText, maxNode.graphicID, '', maxNode.numKeys - 1);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.moveLabel1ID,\n\t\t\t\t\t\t\ttree.keys[i],\n\t\t\t\t\t\t\tthis.getLabelX(maxNode, maxNode.numKeys - 1),\n\t\t\t\t\t\t\tmaxNode.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, i), tree.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t\t\t\t\tmaxNode.numKeys--;\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\t\t\tthis.cmd(act.setNumElements, maxNode.graphicID, maxNode.numKeys);\n\t\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\t\tthis.cmd(act.setText, this.messageID, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdoDelete(tree, val) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < tree.numKeys && tree.keys[i] < val; i++);\n\t\t\tif (i === tree.numKeys) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.doDelete(tree.children[tree.numKeys], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else if (tree.keys[i] > val) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\t\t\t\t\tthis.doDelete(tree.children[i], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, '#FF0000', i);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\tfor (let j = i; j < tree.numKeys - 1; j++) {\n\t\t\t\t\t\ttree.keys[j] = tree.keys[j + 1];\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[j], j);\n\t\t\t\t\t}\n\t\t\t\t\ttree.numKeys--;\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.repairAfterDelete(tree);\n\t\t\t\t} else {\n\t\t\t\t\tlet maxNode = tree.children[i];\n\t\t\t\t\twhile (!maxNode.isLeaf) {\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\t\tmaxNode = maxNode.children[maxNode.numKeys];\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\ttree.keys[i] = maxNode.keys[maxNode.numKeys - 1];\n\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t\t\t\tthis.cmd(act.setText, maxNode.graphicID, '', maxNode.numKeys - 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tthis.moveLabel1ID,\n\t\t\t\t\t\ttree.keys[i],\n\t\t\t\t\t\tthis.getLabelX(maxNode, maxNode.numKeys - 1),\n\t\t\t\t\t\tmaxNode.y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, i), tree.y);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t\t\t\tmaxNode.numKeys--;\n\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\t\tthis.cmd(act.setNumElements, maxNode.graphicID, maxNode.numKeys);\n\t\t\t\t\tthis.repairAfterDelete(maxNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmergeRight(tree) {\n\t\tthis.cmd(act.setText, this.messageID, 'Merging node');\n\n\t\tconst parentNode = tree.parent;\n\t\tlet parentIndex = 0;\n\t\tfor (parentIndex = 0; parentNode.children[parentIndex] !== tree; parentIndex++);\n\t\tconst rightSib = parentNode.children[parentIndex + 1];\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.setHighlight, parentNode.graphicID, 1);\n\t\tthis.cmd(act.setHighlight, rightSib.graphicID, 1);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys + rightSib.numKeys + 1);\n\t\ttree.x = (tree.x + rightSib.x) / 2;\n\t\tthis.cmd(act.setPosition, tree.graphicID, tree.x, tree.y);\n\n\t\ttree.keys[tree.numKeys] = parentNode.keys[parentIndex];\n\t\tconst fromParentIndex = tree.numKeys;\n\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.moveLabel1ID,\n\t\t\tparentNode.keys[parentIndex],\n\t\t\tthis.getLabelX(parentNode, parentIndex),\n\t\t\tparentNode.y,\n\t\t);\n\n\t\tfor (let i = 0; i < rightSib.numKeys; i++) {\n\t\t\ttree.keys[tree.numKeys + 1 + i] = rightSib.keys[i];\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\ttree.graphicID,\n\t\t\t\ttree.keys[tree.numKeys + 1 + i],\n\t\t\t\ttree.numKeys + 1 + i,\n\t\t\t);\n\t\t\tthis.cmd(act.setText, rightSib.graphicID, '', i);\n\t\t}\n\t\tif (!tree.isLeaf) {\n\t\t\tfor (let i = 0; i <= rightSib.numKeys; i++) {\n\t\t\t\tthis.cmd(act.disconnect, rightSib.graphicID, rightSib.children[i].graphicID);\n\t\t\t\ttree.children[tree.numKeys + 1 + i] = rightSib.children[i];\n\t\t\t\ttree.children[tree.numKeys + 1 + i].parent = tree;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\ttree.graphicID,\n\t\t\t\t\ttree.children[tree.numKeys + 1 + i].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ttree.numKeys + 1 + i,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.disconnect, parentNode.graphicID, rightSib.graphicID);\n\t\tfor (let i = parentIndex + 1; i < parentNode.numKeys; i++) {\n\t\t\tthis.cmd(act.disconnect, parentNode.graphicID, parentNode.children[i + 1].graphicID);\n\t\t\tparentNode.children[i] = parentNode.children[i + 1];\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tparentNode.graphicID,\n\t\t\t\tparentNode.children[i].graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\ti,\n\t\t\t);\n\t\t\tparentNode.keys[i - 1] = parentNode.keys[i];\n\t\t\tthis.cmd(act.setText, parentNode.graphicID, parentNode.keys[i - 1], i - 1);\n\t\t}\n\t\tthis.cmd(act.setText, parentNode.graphicID, '', parentNode.numKeys - 1);\n\t\tparentNode.numKeys--;\n\t\tthis.cmd(act.setNumElements, parentNode.graphicID, parentNode.numKeys);\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, parentNode.graphicID, 0);\n\n\t\tthis.cmd(act.delete, rightSib.graphicID);\n\t\ttree.numKeys = tree.numKeys + rightSib.numKeys + 1;\n\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, fromParentIndex), tree.y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[fromParentIndex], fromParentIndex);\n\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn tree;\n\t}\n\n\tstealFromRight(tree, parentIndex) {\n\t\t// Steal from right sibling\n\t\tconst parentNode = tree.parent;\n\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys + 1);\n\n\t\tthis.cmd(act.setText, this.messageID, 'Stealing from right sibling');\n\n\t\tconst rightSib = parentNode.children[parentIndex + 1];\n\t\ttree.numKeys++;\n\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\n\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys - 1);\n\t\tthis.cmd(act.setText, parentNode.graphicID, '', parentIndex);\n\t\tthis.cmd(act.setText, rightSib.graphicID, '', 0);\n\n\t\tconst tmpLabel1 = this.nextIndex++;\n\t\tconst tmpLabel2 = this.nextIndex++;\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel1,\n\t\t\trightSib.keys[0],\n\t\t\tthis.getLabelX(rightSib, 0),\n\t\t\trightSib.y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel2,\n\t\t\tparentNode.keys[parentIndex],\n\t\t\tthis.getLabelX(parentNode, parentIndex),\n\t\t\tparentNode.y,\n\t\t);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel1, FOREGROUND_COLOR);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel2, FOREGROUND_COLOR);\n\n\t\tthis.cmd(act.move, tmpLabel1, this.getLabelX(parentNode, parentIndex), parentNode.y);\n\t\tthis.cmd(act.move, tmpLabel2, this.getLabelX(tree, tree.numKeys - 1), tree.y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, tmpLabel1);\n\t\tthis.cmd(act.delete, tmpLabel2);\n\t\ttree.keys[tree.numKeys - 1] = parentNode.keys[parentIndex];\n\t\tparentNode.keys[parentIndex] = rightSib.keys[0];\n\n\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[tree.numKeys - 1], tree.numKeys - 1);\n\t\tthis.cmd(act.setText, parentNode.graphicID, parentNode.keys[parentIndex], parentIndex);\n\t\tif (!tree.isLeaf) {\n\t\t\ttree.children[tree.numKeys] = rightSib.children[0];\n\t\t\ttree.children[tree.numKeys].parent = tree;\n\t\t\tthis.cmd(act.disconnect, rightSib.graphicID, rightSib.children[0].graphicID);\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\ttree.graphicID,\n\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\ttree.numKeys,\n\t\t\t);\n\n\t\t\tfor (let i = 1; i < rightSib.numKeys + 1; i++) {\n\t\t\t\tthis.cmd(act.disconnect, rightSib.graphicID, rightSib.children[i].graphicID);\n\t\t\t\trightSib.children[i - 1] = rightSib.children[i];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\trightSib.graphicID,\n\t\t\t\t\trightSib.children[i - 1].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti - 1,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tfor (let i = 1; i < rightSib.numKeys; i++) {\n\t\t\trightSib.keys[i - 1] = rightSib.keys[i];\n\t\t\tthis.cmd(act.setText, rightSib.graphicID, rightSib.keys[i - 1], i - 1);\n\t\t}\n\t\tthis.cmd(act.setText, rightSib.graphicID, '', rightSib.numKeys - 1);\n\t\trightSib.numKeys--;\n\t\tthis.cmd(act.setNumElements, rightSib.graphicID, rightSib.numKeys);\n\t\tthis.resizeTree();\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn tree;\n\t}\n\n\tstealFromLeft(tree, parentIndex) {\n\t\tconst parentNode = tree.parent;\n\t\t// Steal from left sibling\n\t\ttree.numKeys++;\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.messageID,\n\t\t\t'Node has too few keys.  Stealing from left sibling.',\n\t\t);\n\n\t\tfor (let i = tree.numKeys - 1; i > 0; i--) {\n\t\t\ttree.keys[i] = tree.keys[i - 1];\n\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t}\n\t\tconst leftSib = parentNode.children[parentIndex - 1];\n\n\t\tthis.cmd(act.setText, tree.graphicID, '', 0);\n\t\tthis.cmd(act.setText, parentNode.graphicID, '', parentIndex - 1);\n\t\tthis.cmd(act.setText, leftSib.graphicID, '', leftSib.numKeys - 1);\n\n\t\tconst tmpLabel1 = this.nextIndex++;\n\t\tconst tmpLabel2 = this.nextIndex++;\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel1,\n\t\t\tleftSib.keys[leftSib.numKeys - 1],\n\t\t\tthis.getLabelX(leftSib, leftSib.numKeys - 1),\n\t\t\tleftSib.y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel2,\n\t\t\tparentNode.keys[parentIndex - 1],\n\t\t\tthis.getLabelX(parentNode, parentIndex - 1),\n\t\t\tparentNode.y,\n\t\t);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel1, FOREGROUND_COLOR);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel2, FOREGROUND_COLOR);\n\n\t\tthis.cmd(act.move, tmpLabel1, this.getLabelX(parentNode, parentIndex - 1), parentNode.y);\n\t\tthis.cmd(act.move, tmpLabel2, this.getLabelX(tree, 0), tree.y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, tmpLabel1);\n\t\tthis.cmd(act.delete, tmpLabel2);\n\n\t\tif (!tree.isLeaf) {\n\t\t\tfor (let i = tree.numKeys; i > 0; i--) {\n\t\t\t\tthis.cmd(act.disconnect, tree.graphicID, tree.children[i - 1].graphicID);\n\t\t\t\ttree.children[i] = tree.children[i - 1];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\ttree.graphicID,\n\t\t\t\t\ttree.children[i].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti,\n\t\t\t\t);\n\t\t\t}\n\t\t\ttree.children[0] = leftSib.children[leftSib.numKeys];\n\t\t\tthis.cmd(\n\t\t\t\tact.disconnect,\n\t\t\t\tleftSib.graphicID,\n\t\t\t\tleftSib.children[leftSib.numKeys].graphicID,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\ttree.graphicID,\n\t\t\t\ttree.children[0].graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\t0,\n\t\t\t);\n\t\t\tleftSib.children[leftSib.numKeys] = null;\n\t\t\ttree.children[0].parent = tree;\n\t\t}\n\n\t\ttree.keys[0] = parentNode.keys[parentIndex - 1];\n\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[0], 0);\n\t\tparentNode.keys[parentIndex - 1] = leftSib.keys[leftSib.numKeys - 1];\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tparentNode.graphicID,\n\t\t\tparentNode.keys[parentIndex - 1],\n\t\t\tparentIndex - 1,\n\t\t);\n\t\tthis.cmd(act.setText, leftSib.graphicID, '', leftSib.numKeys - 1);\n\n\t\tleftSib.numKeys--;\n\t\tthis.cmd(act.setNumElements, leftSib.graphicID, leftSib.numKeys);\n\t\tthis.resizeTree();\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn tree;\n\t}\n\n\trepairAfterDelete(tree) {\n\t\tif (tree.numKeys < this.min_keys) {\n\t\t\tif (tree.parent == null) {\n\t\t\t\tif (tree.numKeys === 0) {\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, tree.graphicID);\n\t\t\t\t\tthis.treeRoot = tree.children[0];\n\t\t\t\t\tif (this.treeRoot != null) this.treeRoot.parent = null;\n\t\t\t\t\tthis.resizeTree();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst parentNode = tree.parent;\n\t\t\t\tlet parentIndex;\n\t\t\t\tlet nextNode;\n\t\t\t\tfor (parentIndex = 0; parentNode.children[parentIndex] !== tree; parentIndex++);\n\t\t\t\tif (\n\t\t\t\t\tparentIndex > 0 &&\n\t\t\t\t\tparentNode.children[parentIndex - 1].numKeys > this.min_keys\n\t\t\t\t) {\n\t\t\t\t\tthis.stealFromLeft(tree, parentIndex);\n\t\t\t\t} else if (\n\t\t\t\t\tparentIndex < parentNode.numKeys &&\n\t\t\t\t\tparentNode.children[parentIndex + 1].numKeys > this.min_keys\n\t\t\t\t) {\n\t\t\t\t\tthis.stealFromRight(tree, parentIndex);\n\t\t\t\t} else if (parentIndex === 0) {\n\t\t\t\t\t// Merge with right sibling\n\t\t\t\t\tnextNode = this.mergeRight(tree);\n\t\t\t\t\tthis.repairAfterDelete(nextNode.parent);\n\t\t\t\t} else {\n\t\t\t\t\t// Merge with left sibling\n\t\t\t\t\tnextNode = this.mergeRight(parentNode.children[parentIndex - 1]);\n\t\t\t\t\tthis.repairAfterDelete(nextNode.parent);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetLabelX(tree, index) {\n\t\treturn (\n\t\t\ttree.x -\n\t\t\t(WIDTH_PER_ELEM * tree.numKeys) / 2 +\n\t\t\tWIDTH_PER_ELEM / 2 +\n\t\t\tindex * WIDTH_PER_ELEM\n\t\t);\n\t}\n\n\tresizeTree() {\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tthis.setNewPositions(this.treeRoot, this.starting_x, STARTING_Y);\n\t\tthis.animateNewPositions(this.treeRoot);\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\ttree.x = xPosition;\n\t\t\tif (!tree.isLeaf) {\n\t\t\t\tconst leftEdge = xPosition - tree.width / 2;\n\t\t\t\tlet priorWidth = 0;\n\t\t\t\tfor (let i = 0; i < tree.numKeys + 1; i++) {\n\t\t\t\t\tthis.setNewPositions(\n\t\t\t\t\t\ttree.children[i],\n\t\t\t\t\t\tleftEdge + priorWidth + tree.widths[i] / 2,\n\t\t\t\t\t\tyPosition + HEIGHT_DELTA,\n\t\t\t\t\t);\n\t\t\t\t\tpriorWidth += tree.widths[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet i;\n\t\tfor (i = 0; i < tree.numKeys + 1; i++) {\n\t\t\tthis.animateNewPositions(tree.children[i]);\n\t\t}\n\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (tree.isLeaf) {\n\t\t\tfor (let i = 0; i < tree.numKeys + 1; i++) {\n\t\t\t\ttree.widths[i] = 0;\n\t\t\t}\n\t\t\ttree.width = tree.numKeys * WIDTH_PER_ELEM + NODE_SPACING;\n\t\t\treturn tree.width;\n\t\t} else {\n\t\t\tlet treeWidth = 0;\n\t\t\tfor (let i = 0; i < tree.numKeys + 1; i++) {\n\t\t\t\ttree.widths[i] = this.resizeWidths(tree.children[i]);\n\t\t\t\ttreeWidth = treeWidth + tree.widths[i];\n\t\t\t}\n\t\t\ttreeWidth = Math.max(treeWidth, tree.numKeys * WIDTH_PER_ELEM + NODE_SPACING);\n\t\t\ttree.width = treeWidth;\n\t\t\treturn treeWidth;\n\t\t}\n\t}\n}\n\nfunction BTreeNode(id, initialX, initialY) {\n\tthis.widths = [];\n\tthis.keys = [];\n\tthis.children = [];\n\tthis.x = initialX;\n\tthis.y = initialY;\n\tthis.graphicID = id;\n\tthis.numKeys = 1;\n\tthis.isLeaf = true;\n\tthis.parent = null;\n\n\tthis.leftWidth = 0;\n\tthis.rightWidth = 0;\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\nconst PATTERN_START_Y = 100;\n\nconst LAST_TABLE_START_Y = 200;\n\nexport default class BoyerMoore extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Build Last Occurrence Table button\n\t\tthis.blotButton = addControlToAlgorithmBar('Button', 'Build Last Occurrence Table');\n\t\tthis.blotButton.onclick = this.buildLastOccurrenceTableCallback.bind(this);\n\t\tthis.controls.push(this.blotButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.patternTableLabelID = this.nextIndex++;\n\t\tthis.patternTableCharacterID = [];\n\t\tthis.patternTableIndexID = [];\n\t\tthis.lastTableLabelID = this.nextIndex++;\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.patternTableLabelID = this.nextIndex++;\n\t\tthis.patternTableCharacterID = [];\n\t\tthis.patternTableIndexID = [];\n\t\tthis.lastTableLabelID = this.nextIndex++;\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tbuildLastOccurrenceTableCallback() {\n\t\tif (this.patternField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.onlyBuildLastOccurrenceTable.bind(this), 0, pattern);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\tconst maxRows = this.getMaxRows(text, pattern);\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\tconst xpos = i * this.cellSize + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tlet xpos;\n\t\tlet ypos;\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst lastTable = this.buildLastTable(text.length, pattern);\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + (pattern.length - 1) * this.cellSize,\n\t\t\tARRAY_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + (pattern.length - 1) * this.cellSize,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\n\t\tlet i = 0;\n\t\tlet j = pattern.length - 1;\n\t\tlet row = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (j >= 0 && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#2ECC71');\n\t\t\t\tj--;\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (j >= 0) {\n\t\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (j === -1) {\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#E74C3C');\n\t\t\t\tlet shift;\n\t\t\t\tif (text.charAt(i + j) in lastTable) {\n\t\t\t\t\tshift = lastTable[text.charAt(i + j)];\n\t\t\t\t} else {\n\t\t\t\t\tshift = -1;\n\t\t\t\t}\n\t\t\t\tif (shift < j) {\n\t\t\t\t\ti += j - shift;\n\t\t\t\t} else {\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tj = pattern.length - 1;\n\t\t\trow++;\n\t\t\tif (i <= text.length - pattern.length) {\n\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\treturn this.commands;\n\t}\n\n\tgetMaxRows(text, pattern) {\n\t\tconst lastTable = {};\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tlastTable[pattern.charAt(i)] = i;\n\t\t}\n\t\tlet i = 0;\n\t\tlet j = pattern.length - 1;\n\t\tlet maxRows = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\twhile (j >= 0 && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tj--;\n\t\t\t}\n\t\t\tif (j === -1) {\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tlet shift;\n\t\t\t\tif (text.charAt(i + j) in lastTable) {\n\t\t\t\t\tshift = lastTable[text.charAt(i + j)];\n\t\t\t\t} else {\n\t\t\t\t\tshift = -1;\n\t\t\t\t}\n\t\t\t\tif (shift < j) {\n\t\t\t\t\ti += j - shift;\n\t\t\t\t} else {\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tj = pattern.length - 1;\n\t\t\tmaxRows++;\n\t\t}\n\t\treturn maxRows;\n\t}\n\n\tonlyBuildLastOccurrenceTable(textLength, pattern) {\n\t\tthis.commands = [];\n\t\tthis.cellSize = 30;\n\t\tthis.buildLastTable(textLength, pattern);\n\t\treturn this.commands;\n\t}\n\n\tbuildLastTable(textLength, pattern) {\n\t\t// Display labels\n\t\tconst labelsX = ARRAY_START_X + textLength * this.cellSize + 10;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.patternTableLabelID,\n\t\t\t'Pattern:',\n\t\t\tlabelsX,\n\t\t\tPATTERN_START_Y - 5,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.lastTableLabelID,\n\t\t\t'Last occurence table:',\n\t\t\tlabelsX,\n\t\t\tLAST_TABLE_START_Y + 10,\n\t\t\t0,\n\t\t);\n\n\t\t// Display pattern table\n\t\tconst patternTableStartX = ARRAY_START_X + textLength * this.cellSize + 80;\n\t\tthis.patternTableCharacterID = new Array(pattern.length);\n\t\tthis.patternTableIndexID = new Array(pattern.length);\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tconst xpos = patternTableStartX + i * this.cellSize;\n\t\t\tthis.patternTableCharacterID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tpattern.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tPATTERN_START_Y,\n\t\t\t);\n\t\t\tthis.patternTableIndexID[i] = this.nextIndex;\n\t\t\tthis.cmd(act.createLabel, this.nextIndex++, i, xpos, PATTERN_START_Y + this.cellSize);\n\t\t}\n\n\t\t// Create and display last occurrence table\n\t\tconst lastTable = {};\n\t\tconst lotStartX = ARRAY_START_X + textLength * this.cellSize + 155;\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\t\tlet j = 0;\n\n\t\tconst lotPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tlotPointerID,\n\t\t\t'#0000FF',\n\t\t\tpatternTableStartX,\n\t\t\tPATTERN_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(act.setHighlight, lotPointerID, 1);\n\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tlet xpos = patternTableStartX + i * this.cellSize;\n\t\t\tthis.cmd(act.move, lotPointerID, xpos, PATTERN_START_Y);\n\t\t\tif (lastTable[pattern.charAt(i)]) {\n\t\t\t\tthis.cmd(act.setText, lastTable[pattern.charAt(i)][1], i);\n\t\t\t\tthis.cmd(act.setHighlight, lastTable[pattern.charAt(i)][1], 1);\n\t\t\t\tlastTable[pattern.charAt(i)][0] = i;\n\t\t\t} else {\n\t\t\t\txpos = lotStartX + j * this.cellSize;\n\t\t\t\tthis.lastTableCharacterID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\tpattern.charAt(i),\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\tLAST_TABLE_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t\t\tthis.lastTableValueID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\ti,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\tLAST_TABLE_START_Y + this.cellSize,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setHighlight, this.nextIndex, 1);\n\t\t\t\tj++;\n\t\t\t\tlastTable[pattern.charAt(i)] = [i, this.nextIndex++];\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, lastTable[pattern.charAt(i)][1], 0);\n\t\t}\n\n\t\t// Display '*' entry\n\t\tthis.cmd(act.delete, lotPointerID);\n\t\tconst xpos = lotStartX + j * this.cellSize;\n\t\tthis.lastTableCharacterID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.nextIndex,\n\t\t\t'*',\n\t\t\tthis.cellSize,\n\t\t\tthis.cellSize,\n\t\t\txpos,\n\t\t\tLAST_TABLE_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\tthis.lastTableValueID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.nextIndex++,\n\t\t\t'-1',\n\t\t\tthis.cellSize,\n\t\t\tthis.cellSize,\n\t\t\txpos,\n\t\t\tLAST_TABLE_START_Y + this.cellSize,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tObject.keys(lastTable).map(char => (lastTable[char] = lastTable[char][0])); // Return only indices\n\t\treturn lastTable;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\t\tif (this.patternTableCharacterID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.patternTableLabelID);\n\t\t}\n\t\tfor (let i = 0; i < this.patternTableCharacterID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.patternTableCharacterID[i]);\n\t\t\tthis.cmd(act.delete, this.patternTableIndexID[i]);\n\t\t}\n\t\tthis.patternTableCharacterID = [];\n\t\tthis.patternTableIndexID = [];\n\t\tif (this.lastTableCharacterID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.lastTableLabelID);\n\t\t}\n\t\tfor (let i = 0; i < this.lastTableCharacterID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.lastTableCharacterID[i]);\n\t\t\tthis.cmd(act.delete, this.lastTableValueID[i]);\n\t\t}\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\nexport default class BruteForce extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\tconst maxRows = text.length - pattern.length + 1;\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tlet xpos, ypos;\n\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\typos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\n\t\tlet i = 0;\n\t\tlet j = 0;\n\t\tlet row = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#2ECC71');\n\t\t\t\tj++;\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (j !== pattern.length) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#E74C3C');\n\t\t\t}\n\t\t\ti++;\n\t\t\tj = 0;\n\t\t\trow++;\n\t\t\tif (i <= text.length - pattern.length) {\n\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddCheckboxToAlgorithmBar,\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nlet lastSwapEnabled = true;\n\nexport default class BubbleSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Last swap optimization toggle\n\t\tthis.lastSwapCheckbox = addCheckboxToAlgorithmBar('Enable last swap optimization', true);\n\t\tthis.lastSwapCheckbox.onclick = this.toggleLastSwap.bind(this);\n\t\tthis.controls.push(this.lastSwapCheckbox);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\ttoggleLastSwap() {\n\t\tlastSwapEnabled = !lastSwapEnabled;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tconst length = this.arrayData.length;\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tlet sorted = true;\n\t\tlet end = this.arrayData.length - 1;\n\t\tlet lastSwapped = 0;\n\t\tdo {\n\t\t\tsorted = true;\n\t\t\tfor (let i = 0; i < end; i++) {\n\t\t\t\tthis.movePointers(i, i + 1);\n\t\t\t\tif (this.arrayData[i] > this.arrayData[i + 1]) {\n\t\t\t\t\tthis.swap(i, i + 1);\n\t\t\t\t\tsorted = false;\n\t\t\t\t\tlastSwapped = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lastSwapEnabled) {\n\t\t\t\tend = lastSwapped;\n\t\t\t} else {\n\t\t\t\tend--;\n\t\t\t}\n\t\t\tif (!sorted) {\n\t\t\t\tfor (let i = end + 1; i < this.arrayData.length; i++) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t} while (!sorted);\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, ARRAY_START_Y);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\t// Change pointer colors to red\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\t// Create temporary labels and remove text in array\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, ARRAY_START_Y);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\t// Move labels\n\t\tthis.cmd(act.move, iLabelID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, jLabelID, iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array and delete temporary labels\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t\t// Reset pointer colors back to blue\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 9;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 9;\n\nexport default class CircularlyLinkedList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddIndexCallback() {\n\t\tif (\n\t\t\tthis.addValueField.value !== '' &&\n\t\t\tthis.addIndexField.value !== '' &&\n\t\t\tthis.size < SIZE\n\t\t) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tconst index = parseInt(this.addIndexField.value);\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (this.addValueField.value !== '' && this.size < SIZE) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (this.addValueField.value !== '' && this.size < SIZE) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// CircularlySinglyLinkedList.prototype.getCallback = function()\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\t// Order of data should behave as normal\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\n\t\t// Adding to the front or back using O(1) trick, so new node will be added to index 1\n\t\tif (this.size !== 0 && (index === 0 || index === this.size)) {\n\t\t\t// Move over all node IDs but the first\n\t\t\tfor (let i = this.size - 1; i >= 1; i--) {\n\t\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t\t}\n\t\t\t// Place new node's ID at index 1\n\t\t\tthis.linkedListElemID[1] = this.nextIndex++;\n\t\t}\n\t\t// Adding first node or to the middle, so new node will be placed normally\n\t\telse {\n\t\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t\t}\n\t\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\t\t}\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tif (this.size !== 0 && (index === 0 || index === this.size)) {\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircularlyLinkedListNode,\n\t\t\t\tthis.linkedListElemID[1],\n\t\t\t\t'',\n\t\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\t\tLINKED_LIST_INSERT_X,\n\t\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircularlyLinkedListNode,\n\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t'',\n\t\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\t\tLINKED_LIST_INSERT_X,\n\t\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size === 0) {\n\t\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.cmd(act.setText, this.linkedListElemID[0], elemToAdd);\n\t\t\tthis.cmd(act.delete, labPushValID);\n\t\t\tthis.cmd(act.connectCurve, this.linkedListElemID[0], this.linkedListElemID[0], -0.5);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.size = this.size + 1;\n\t\t\tthis.resetNodePositions();\n\t\t} else {\n\t\t\tif (index === 0 || index === this.size) {\n\t\t\t\t// Move label from first node to new node\n\t\t\t\tconst labCopiedValID = this.nextIndex++;\n\t\t\t\tconst copiedData = index === 0 ? this.arrayData[1] : this.arrayData[0];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tlabCopiedValID,\n\t\t\t\t\tcopiedData,\n\t\t\t\t\tLINKED_LIST_START_X,\n\t\t\t\t\tLINKED_LIST_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, labCopiedValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[1], copiedData);\n\t\t\t\tthis.cmd(act.delete, labCopiedValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t// Move label for new data to the first node\n\t\t\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_START_X, LINKED_LIST_START_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[0], elemToAdd);\n\t\t\t\tthis.cmd(act.delete, labPushValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t// Change pointers\n\t\t\t\tif (this.size === 1) {\n\t\t\t\t\t// Case where we're adding the second node\n\t\t\t\t\tthis.cmd(act.disconnect, this.linkedListElemID[0], this.linkedListElemID[0]); // Disconnect head node from itself\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[0], this.linkedListElemID[1]); // Connect head node to new node\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t); // Connect new node to head node\n\t\t\t\t} else {\n\t\t\t\t\t// Other cases\n\t\t\t\t\tthis.cmd(act.disconnect, this.linkedListElemID[0], this.linkedListElemID[2]); // Disconnect head from old second node\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[0], this.linkedListElemID[1]); // Connect head node to new node\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[1], this.linkedListElemID[2]); // Connect new node to old second node\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.size = this.size + 1;\n\t\t\t\tthis.resetNodePositions();\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t// If adding to the back, \"move head over\" (rotate elements backwards)\n\t\t\t\tif (index === this.size - 1) {\n\t\t\t\t\t// We increment size above, so subtract one to check if adding to back\n\t\t\t\t\tlet i;\n\t\t\t\t\tconst firstNodeID = this.linkedListElemID[0];\n\t\t\t\t\tfor (i = 0; i < this.size - 1; i++) {\n\t\t\t\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t\t\t\t}\n\t\t\t\t\tthis.linkedListElemID[this.size - 1] = firstNodeID;\n\n\t\t\t\t\tconst lastX =\n\t\t\t\t\t\t((this.size - 1) % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\t\tconst lastY =\n\t\t\t\t\t\tMath.floor((this.size - 1) / LINKED_LIST_ELEMS_PER_LINE) *\n\t\t\t\t\t\t\tLINKED_LIST_LINE_SPACING +\n\t\t\t\t\t\tLINKED_LIST_START_Y;\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tthis.linkedListElemID[i],\n\t\t\t\t\t\t(LINKED_LIST_START_X + lastX) / 2,\n\t\t\t\t\t\tlastY + LINKED_LIST_ELEM_HEIGHT * 3,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tfor (let i = 0; i < this.size - 1; i++) {\n\t\t\t\t\t\tconst nextX =\n\t\t\t\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\t\t\tconst nextY =\n\t\t\t\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\t\t\t\tLINKED_LIST_START_Y;\n\t\t\t\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.disconnect,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 2],\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t); // Disconnect curved pointer\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 2],\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t); // Connect with normal pointer\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.disconnect,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t); // Disconnect normal pointer\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t); // Connect with curved pointer\n\t\t\t\t\tthis.cmd(act.move, this.linkedListElemID[i], lastX, lastY);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\t\t\tthis.cmd(act.delete, labPushValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\n\t\t\t\tthis.size = this.size + 1;\n\t\t\t\tthis.resetNodePositions();\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\t// O(1) remove from front trick\n\t\t\t\tconst labCopiedValID = this.nextIndex++;\n\t\t\t\tconst secondNodeX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING;\n\t\t\t\tconst secondNodeY = LINKED_LIST_START_Y;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tlabCopiedValID,\n\t\t\t\t\tthis.arrayData[1],\n\t\t\t\t\tsecondNodeX,\n\t\t\t\t\tsecondNodeY,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, labCopiedValID, LINKED_LIST_START_X, LINKED_LIST_START_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[0], this.arrayData[1]);\n\t\t\t\tthis.cmd(act.delete, labCopiedValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.linkedListElemID[1],\n\t\t\t\t\tsecondNodeX,\n\t\t\t\t\tsecondNodeY - LINKED_LIST_ELEM_HEIGHT * 2,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.disconnect, this.linkedListElemID[0], this.linkedListElemID[1]);\n\t\t\t\tif (this.size === 2) {\n\t\t\t\t\t// Only one node will remain, connect it to itself\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Normal remove\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[0], this.linkedListElemID[2]);\n\t\t\t\t}\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tif (this.size === 2) {\n\t\t\t\t\t// Only one node will remain, connect it to itself\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Normal remove\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\n\t\t\tconst removedNodeIndex = index === 0 ? 1 : index; // If deleting from front, we need to remove the second node\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[removedNodeIndex]);\n\t\t\tfor (let i = removedNodeIndex; i < this.size; i++) {\n\t\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[0]);\n\t\t}\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_HASH_LENGTH = 10;\nconst MAX_LOAD_LENGTH = 2;\n\nconst HASH_NUMBER_START_X = 200;\nconst HASH_X_DIFF = 7;\nconst HASH_NUMBER_START_Y = 10;\nconst HASH_ADD_START_Y = 30;\nconst HASH_INPUT_START_X = 60;\nconst HASH_INPUT_X_DIFF = 7;\nconst HASH_INPUT_START_Y = 45;\nconst HASH_ADD_LINE_Y = 42;\nconst HASH_RESULT_Y = 50;\nconst ELF_HASH_SHIFT = 10;\n\nconst HASH_LABEL_X = 200;\nconst HASH_LABEL_Y = 45;\nconst HASH_LABEL_DELTA_X = 50;\n\nconst HIGHLIGHT_COLOR = '#0000FF';\n\nexport default class Hash extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.hashingIntegers = true;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.size = MAX_HASH_LENGTH;\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\tMAX_HASH_LENGTH,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.size = MAX_HASH_LENGTH;\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\tMAX_HASH_LENGTH,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.size = MAX_HASH_LENGTH;\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_HASH_LENGTH,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.loadField = addControlToAlgorithmBar('Text', '');\n\t\tthis.loadField.setAttribute('placeholder', 'LF/100');\n\t\tthis.loadField.size = MAX_LOAD_LENGTH;\n\t\tthis.loadField.onkeydown = this.returnSubmit(\n\t\t\tthis.loadField,\n\t\t\tthis.changeLoadFactor.bind(this),\n\t\t\tMAX_LOAD_LENGTH,\n\t\t\ttrue\n\t\t)\n\n\t\tthis.controls.push(this.loadField);\n\n\t\tthis.loadButton = addControlToAlgorithmBar('Button', 'Load Factor');\n\t\tthis.loadButton.onclick = this.loadFactorCallBack.bind(this);\n\t\tthis.controls.push(this.loadButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Hash Integer', 'Hash Strings'],\n\t\t\t'HashType',\n\t\t);\n\t\tthis.hashIntegerButton = radioButtonList[0];\n\t\tthis.hashIntegerButton.onclick = this.changeHashTypeCallback.bind(this, true);\n\t\tthis.controls.push(this.hashIntegerButton);\n\t\tthis.hashStringButton = radioButtonList[1];\n\t\tthis.hashStringButton.onclick = this.changeHashTypeCallback.bind(this, false);\n\t\tthis.hashIntegerButton.checked = true;\n\t\tthis.controls.push(this.hashStringButton);\n\t}\n\n\t// Do this extra level of wrapping to get undo to work properly.\n\t// (also, so that we only implement the action if we are changing the\n\t// radio button)\n\tchangeHashTypeCallback(newHashingIntegers) {\n\t\tif (this.hashingIntegers !== newHashingIntegers) {\n\t\t\tthis.implementAction(this.changeHashType.bind(this), newHashingIntegers);\n\t\t}\n\t}\n\n\tchangeHashType(newHashingIntegerValue) {\n\t\tthis.hashingIntegers = newHashingIntegerValue;\n\t\tif (this.hashingIntegers) {\n\t\t\tthis.hashIntegerButton.checked = true;\n\t\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.insertCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.deleteCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.findCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.hashStringButton.checked = true;\n\t\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.insertCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.deleteCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.insertField,\n\t\t\t\tthis.findCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t}\n\t\treturn this.resetAll();\n\t}\n\n\tdoHash(input) {\n\t\tif (this.hashingIntegers) {\n\t\t\tconst labelID1 = this.nextIndex++;\n\t\t\tconst labelID2 = this.nextIndex++;\n\t\t\tconst highlightID = this.nextIndex++;\n\t\t\tconst index = parseInt(input) % this.table_size;\n\t\t\tthis.currHash = parseInt(input);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabelID1,\n\t\t\t\tinput + ' % ' + String(this.table_size) + ' = ',\n\t\t\t\tHASH_LABEL_X,\n\t\t\t\tHASH_LABEL_Y,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabelID2,\n\t\t\t\tindex,\n\t\t\t\tHASH_LABEL_X + HASH_LABEL_DELTA_X,\n\t\t\t\tHASH_LABEL_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightID,\n\t\t\t\tHIGHLIGHT_COLOR,\n\t\t\t\tHASH_LABEL_X + HASH_LABEL_DELTA_X,\n\t\t\t\tHASH_LABEL_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.move, highlightID, this.indexXPos[index], this.indexYPos[index]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, labelID1);\n\t\t\tthis.cmd(act.delete, labelID2);\n\t\t\tthis.cmd(act.delete, highlightID);\n\t\t\tthis.nextIndex -= 3;\n\n\t\t\treturn index;\n\t\t} else {\n\t\t\tconst label1 = this.nextIndex++;\n\t\t\tthis.cmd(act.createLabel, label1, 'Hashing:', 10, 45, 0);\n\t\t\tconst wordToHashID = new Array(input.length);\n\t\t\tconst wordToHash = new Array(input.length);\n\t\t\tfor (let i = 0; i < input.length; i++) {\n\t\t\t\twordToHashID[i] = this.nextIndex++;\n\t\t\t\twordToHash[i] = input.charAt(i);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\twordToHashID[i],\n\t\t\t\t\twordToHash[i],\n\t\t\t\t\tHASH_INPUT_START_X + i * HASH_INPUT_X_DIFF,\n\t\t\t\t\tHASH_INPUT_START_Y,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst digits = new Array(32);\n\t\t\tconst hashValue = new Array(32);\n\t\t\tconst nextByte = new Array(8);\n\t\t\tconst nextByteID = new Array(8);\n\t\t\tconst resultDigits = new Array(32);\n\t\t\tconst floatingDigits = new Array(4);\n\t\t\tconst floatingVals = new Array(4);\n\n\t\t\tconst operatorID = this.nextIndex++;\n\t\t\tconst barID = this.nextIndex++;\n\t\t\tfor (let i = 0; i < 32; i++) {\n\t\t\t\thashValue[i] = 0;\n\t\t\t\tdigits[i] = this.nextIndex++;\n\t\t\t\tresultDigits[i] = this.nextIndex++;\n\t\t\t}\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\tnextByteID[i] = this.nextIndex++;\n\t\t\t}\n\t\t\tfor (let i = 0; i < 4; i++) {\n\t\t\t\tfloatingDigits[i] = this.nextIndex++;\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let i = wordToHash.length - 1; i >= 0; i--) {\n\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tdigits[j],\n\t\t\t\t\t\thashValue[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, wordToHashID[i]);\n\t\t\t\tlet nextChar = wordToHash[i].charCodeAt(0);\n\t\t\t\tfor (let j = 7; j >= 0; j--) {\n\t\t\t\t\tnextByte[j] = nextChar % 2;\n\t\t\t\t\tnextChar = Math.floor(nextChar / 2);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tnextByteID[j],\n\t\t\t\t\t\tnextByte[j],\n\t\t\t\t\t\tHASH_INPUT_START_X + i * HASH_INPUT_X_DIFF,\n\t\t\t\t\t\tHASH_INPUT_START_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tnextByteID[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + (j + 24) * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tbarID,\n\t\t\t\t\t'',\n\t\t\t\t\t32 * HASH_X_DIFF,\n\t\t\t\t\t0,\n\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\tHASH_ADD_LINE_Y,\n\t\t\t\t\t'left',\n\t\t\t\t\t'bottom',\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\toperatorID,\n\t\t\t\t\t'+',\n\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tlet carry = 0;\n\t\t\t\tfor (let j = 7; j >= 0; j--) {\n\t\t\t\t\thashValue[j + 24] = hashValue[j + 24] + nextByte[j] + carry;\n\t\t\t\t\tif (hashValue[j + 24] > 1) {\n\t\t\t\t\t\thashValue[j + 24] = hashValue[j + 24] - 2;\n\t\t\t\t\t\tcarry = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcarry = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let j = 23; j >= 0; j--) {\n\t\t\t\t\thashValue[j] = hashValue[j] + carry;\n\t\t\t\t\tif (hashValue[j] > 1) {\n\t\t\t\t\t\thashValue[j] = hashValue[j] - 2;\n\t\t\t\t\t\tcarry = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcarry = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\thashValue[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_RESULT_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tfor (let j = 0; j < 8; j++) {\n\t\t\t\t\tthis.cmd(act.delete, nextByteID[j]);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, barID);\n\t\t\t\tthis.cmd(act.delete, operatorID);\n\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\tthis.cmd(act.delete, digits[j]);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + (j - 4) * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tfor (let j = 0; j < 28; j++) {\n\t\t\t\t\t\tfloatingVals[j] = hashValue[j];\n\t\t\t\t\t\thashValue[j] = hashValue[j + 4];\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let j = 0; j < 4; j++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + (j + ELF_HASH_SHIFT) * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\thashValue[j + 28] = 0;\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tfloatingDigits[j],\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + (j + 28) * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (floatingVals[j]) {\n\t\t\t\t\t\t\thashValue[j + ELF_HASH_SHIFT] = 1 - hashValue[j + ELF_HASH_SHIFT];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createRectangle,\n\t\t\t\t\t\tbarID,\n\t\t\t\t\t\t'',\n\t\t\t\t\t\t32 * HASH_X_DIFF,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\t\tHASH_ADD_LINE_Y,\n\t\t\t\t\t\t'left',\n\t\t\t\t\t\t'bottom',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\toperatorID,\n\t\t\t\t\t\t'XOR',\n\t\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tdigits[j],\n\t\t\t\t\t\t\thashValue[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_RESULT_Y,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tthis.cmd(act.delete, operatorID);\n\t\t\t\t\tthis.cmd(act.delete, barID);\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, resultDigits[j]);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tdigits[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tfor (let j = 0; j < 4; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, floatingDigits[j]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, digits[j]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, resultDigits[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.delete, label1);\n\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tdigits[j],\n\t\t\t\t\thashValue[j],\n\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.currHash = 0;\n\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\tthis.currHash = this.currHash * 2 + hashValue[j];\n\t\t\t}\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabel1,\n\t\t\t\t' = ' + String(this.currHash),\n\t\t\t\tHASH_NUMBER_START_X + 32 * HASH_X_DIFF,\n\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t0,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\tthis.cmd(act.delete, digits[j]);\n\t\t\t}\n\n\t\t\tconst label2 = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tlabel1,\n\t\t\t\tString(this.currHash) + ' % ' + String(this.table_size) + ' = ',\n\t\t\t);\n\t\t\tconst index = this.currHash % this.table_size;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabel2,\n\t\t\t\tindex,\n\t\t\t\tHASH_NUMBER_START_X + 32 * HASH_X_DIFF + 105,\n\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t0,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tconst highlightID = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightID,\n\t\t\t\tHIGHLIGHT_COLOR,\n\t\t\t\tHASH_NUMBER_START_X + 30 * HASH_X_DIFF + 120,\n\t\t\t\tHASH_NUMBER_START_Y + 15,\n\t\t\t);\n\t\t\tthis.cmd(act.move, highlightID, this.indexXPos[index], this.indexYPos[index]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, highlightID);\n\t\t\tthis.cmd(act.delete, label1);\n\t\t\tthis.cmd(act.delete, label2);\n\n\t\t\treturn index;\n\t\t}\n\t}\n\n\tresetAll() {\n\t\tthis.insertField.value = '';\n\t\tthis.deleteField.value = '';\n\t\tthis.findField.value = '';\n\t\treturn [];\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.insertField.value;\n\t\tif (insertedValue !== '') {\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), insertedValue);\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tconst deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.deleteElement.bind(this), deletedValue);\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.findField.value;\n\t\tif (findValue !== '') {\n\t\t\tthis.findField.value = '';\n\t\t\tthis.implementAction(this.findElement.bind(this), findValue);\n\t\t}\n\t}\n\n\tloadFactorCallBack() {\n\t\tif (this.loadField.value !== '') {\n\t\t\tconst newLF = this.loadField.value / 100;\n\t\t\tthis.loadField.value = '';\n\t\t\tthis.implementAction(this.changeLoadFactor.bind(this), newLF);\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.hashIntegerButton.checked = true;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport { addDivisorToAlgorithmBar, addRadioButtonGroupToAlgorithmBar } from './Algorithm.js';\nimport Hash from './Hash.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_ELEM_WIDTH = 60;\nconst ARRAY_ELEM_HEIGHT = 30;\nconst ARRAY_ELEM_START_Y = 110;\nconst ARRAY_VERTICAL_SEPARATION = 70;\n\nconst CLOSED_HASH_TABLE_SIZE = 13;\n\nconst ARRAY_ELEM_START_X = 100;\n// If you want to center the array:\n// const ARRAY_ELEM_START_X = (window.screen.width - CLOSED_HASH_TABLE_SIZE * ARRAY_ELEM_WIDTH + ARRAY_ELEM_WIDTH) / 2;\nconst ARRAY_RESIZE_ELEM_START_Y = 240;\nconst ELEMS_PER_ROW = 14;\n\nconst LOAD_LABEL_X = 60;\nconst LOAD_LABEL_Y = 20;\n\nconst HASH2_LABEL_X = 270;\nconst HASH2_LABEL_Y = 70;\n\nconst RESIZE_LABEL_X = 400;\nconst RESIZE_LABEL_Y = 20;\n\nconst DEFAULT_LOAD_FACTOR = 0.67;\n\nconst MAX_SIZE = 70;\n\nconst INDEX_COLOR = '#0000FF';\n\nexport default class ClosedHash extends Hash {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.elements_per_row = ELEMS_PER_ROW;\n\t\t//this.elements_per_row = Math.floor(w / ARRAY_ELEM_WIDTH) - 1;\n\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tsuper.addControls();\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t[\n\t\t\t\t'Linear Probing: f(i) = i',\n\t\t\t\t'Quadratic Probing: f(i) = i * i',\n\t\t\t\t'Double Hashing: f(i) = i * hash2(elem)',\n\t\t\t],\n\t\t\t'Collision Strategy: h(elem) + f(i)',\n\t\t);\n\t\tthis.linearProblingButton = radioButtonList[0];\n\t\tthis.linearProblingButton.onclick = this.linearProbeCallback.bind(this);\n\t\tthis.quadraticProbingButton = radioButtonList[1];\n\t\tthis.quadraticProbingButton.onclick = this.quadraticProbeCallback.bind(this);\n\t\tthis.doubleHashingButton = radioButtonList[2];\n\t\tthis.doubleHashingButton.onclick = this.doubleHashingCallback.bind(this);\n\n\t\tthis.linearProblingButton.checked = true;\n\t\tthis.currentHashingTypeButtonState = this.linearProblingButton;\n\n\t\t// Add new controls\n\t}\n\n\tchangeProbeType(newProbingType) {\n\t\tif (newProbingType === this.linearProblingButton) {\n\t\t\tthis.linearProblingButton.checked = true;\n\t\t\tthis.currentHashingTypeButtonState = this.linearProblingButton;\n\t\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\t\tthis.skipDist[i] = i;\n\t\t\t}\n\t\t} else if (newProbingType === this.quadraticProbingButton) {\n\t\t\tthis.quadraticProbingButton.checked = true;\n\t\t\tthis.currentHashingTypeButtonState = this.quadraticProbingButton;\n\n\t\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\t\tthis.skipDist[i] = i * i;\n\t\t\t}\n\t\t} else if (newProbingType === this.doubleHashingButton) {\n\t\t\tthis.doubleHashingButton.checked = true;\n\t\t\tthis.currentHashingTypeButtonState = this.doubleHashingButton;\n\t\t}\n\t\tthis.commands = this.resetAll();\n\t\treturn this.commands;\n\t}\n\n\tquadraticProbeCallback() {\n\t\tif (this.currentHashingTypeButtonState !== this.quadraticProbingButton) {\n\t\t\tthis.implementAction(this.changeProbeType.bind(this), this.quadraticProbingButton);\n\t\t}\n\t}\n\n\tdoubleHashingCallback() {\n\t\tif (this.currentHashingTypeButtonState !== this.doubleHashingButton) {\n\t\t\tthis.implementAction(this.changeProbeType.bind(this), this.doubleHashingButton);\n\t\t}\n\t}\n\n\tlinearProbeCallback() {\n\t\tif (this.currentHashingTypeButtonState !== this.linearProblingButton) {\n\t\t\tthis.implementAction(this.changeProbeType.bind(this), this.linearProblingButton);\n\t\t}\n\t}\n\n\tinsertElement(elem) {\n\t\tthis.commands = [];\n\n\t\tif (\n\t\t\t(this.size + 1) / this.table_size > this.load_factor\n\t\t\t&& this.table_size * 2 < MAX_SIZE\n\t\t) {\n\t\t\tthis.resize(false);\n\t\t}\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting element: ' + String(elem));\n\t\tthis.cmd(act.step);\n\n\t\tlet index = this.doHash(elem);\n\n\t\tindex = this.getEmptyIndex(index, elem);\n\n\t\tif (index === -2 && this.table_size * 2 < MAX_SIZE) {\n\t\t\tthis.resize(true);\n\t\t} else if (index === -2) {\n\t\t\tthis.cmd(act.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t`Array would normally resize after length number of probes,\n\t\t\t\thowever there just isn't enough space on the screen to resize. \n\t\t\t\tSo here's a cute emoji of jack instead: VV`\n\t\t\t\t)\n\t\t\treturn this.commands;\n\t\t}\n\n\t\tif (index === -1) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Element ' + String(elem) + ' is already in HashMap.',\n\t\t\t);\n\t\t\treturn this.commands;\n\t\t}\n\n\t\tconst labID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, labID, elem, 20, 25);\n\t\tthis.cmd(\n\t\t\tact.move,\n\t\t\tlabID,\n\t\t\tthis.indexXPos[index],\n\t\t\tthis.indexYPos[index] - ARRAY_ELEM_HEIGHT,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, labID);\n\t\tthis.cmd(act.setText, this.hashTableVisual[index], elem);\n\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\tthis.hashTableValues[index] = elem;\n\t\tthis.empty[index] = false;\n\t\tthis.deleted[index] = false;\n\t\tthis.size++;\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\t\tthis.cmd(act.setText, this.DelIndexLabel, '');\n\t\treturn this.commands;\n\t}\n\n\tresetSkipDist(elem, labelID) {\n\t\tconst skipVal = this.nextLowestPrime - this.currHash % this.nextLowestPrime;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabelID,\n\t\t\t`hash2(${String(elem)}) = `\n\t\t\t+ `${this.nextLowestPrime} - ${String(this.currHash)} % ${this.nextLowestPrime} = ${String(skipVal)}`,\n\t\t\tHASH2_LABEL_X,\n\t\t\tHASH2_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.skipDist[0] = 0;\n\t\tfor (let i = 1; i < this.table_size; i++) {\n\t\t\tthis.skipDist[i] = this.skipDist[i - 1] + skipVal;\n\t\t}\n\t\treturn skipVal;\n\t}\n\n\tgetEmptyIndex(index, elem) {\n\t\tlet HashID = -1;\n\t\tlet skipVal = 1;\n\t\tif (this.currentHashingTypeButtonState === this.doubleHashingButton) {\n\t\t\tHashID = this.nextIndex++;\n\t\t\tskipVal = this.resetSkipDist(elem, HashID);\n\t\t}\n\n\t\tlet probes = 0;\n\t\tlet removedIndex = -1;\n\t\tconst start = index;\n\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 1);\n\t\twhile (\n\t\t\tprobes < this.table_size &&\n\t\t\t!this.empty[index] &&\n\t\t\t!(this.hashTableValues[index] === elem)\n\t\t) {\n\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, `Entry occupied, so probe forward`);\n\t\t\tthis.cmd(act.step);\n\t\t\t// storing removed index\n\t\t\tif (removedIndex === -1 && this.deleted[index]) {\n\t\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Storing index of first deleted element');\n\t\t\t\tthis.cmd(act.setText, this.DelIndexLabel, 'First Deleted Index: ' + index);\n\t\t\t\tremovedIndex = index;\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tprobes++;\n\t\t\n\t\t\t// increment index and clear labels\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\n\t\t\tindex = (start + this.skipDist[probes]) % this.table_size;\n\n\t\t\tif (this.currentHashingTypeButtonState === this.quadraticProbingButton) {\n\t\t\t\tskipVal = probes;\n\t\t\t}\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.HashIndexID,\n\t\t\t\t`Index to probe: (${start} + ${probes}*${skipVal}) % ${this.table_size} =` \n\t\t\t\t+ ` ${(start + this.skipDist[probes]) % this.table_size}`\n\t\t\t);\n\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 1);\n\t\t\tif (this.empty[index]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.ExplainLabel,\n\t\t\t\t\t'Encountered null spot, so terminate loop',\n\t\t\t\t);\n\t\t\t} else if (this.hashTableValues[index] === elem) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.ExplainLabel,\n\t\t\t\t\t`Encountered matching key, so terminate loop`,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tthis.cmd(act.setText, this.HashIndexID, '');\n\n\t\tif (HashID !== -1) {\n\t\t\tthis.cmd(act.delete, HashID);\n\t\t\tthis.nextIndex--;\n\t\t}\n\n\t\tif (!this.empty[index] && this.hashTableValues[index] === elem && !this.deleted[index]) {\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\t\treturn -1;\n\t\t} else if (probes === this.table_size && removedIndex === -1) {\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\t\treturn -2;\n\t\t} else {\n\t\t\tif (removedIndex !== -1) {\n\t\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting at earlier DEL spot');\n\t\t\t\tindex = removedIndex;\n\t\t\t} else if (this.hashTableValues[index] === elem) {\n\t\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting at DEL spot with same key')\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting at null spot');\n\t\t\t}\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 1);\n\t\t\tthis.cmd(act.step);\n\t\t\treturn removedIndex !== -1 ? removedIndex : index;\n\t\t}\n\t}\n\n\tgetElemIndex(index, elem) {\n\t\tlet HashID = -1;\n\t\tlet skipVal = 1;\n\t\tif (this.currentHashingTypeButtonState === this.doubleHashingButton) {\n\t\t\tHashID = this.nextIndex++;\n\t\t\tskipVal = this.resetSkipDist(elem, HashID);\n\t\t}\n\t\t\n\t\tconst start = index;\n\t\tlet foundIndex = -1;\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tconst candidateIndex = (index + this.skipDist[i]) % this.table_size;\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[candidateIndex], 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[candidateIndex], 0);\n\t\t\tif (\n\t\t\t\t!this.empty[candidateIndex] &&\n\t\t\t\t!this.deleted[candidateIndex] &&\n\t\t\t\tthis.hashTableValues[candidateIndex] === elem\n\t\t\t) {\n\t\t\t\tfoundIndex = candidateIndex;\n\t\t\t\tbreak;\n\t\t\t} else if (this.empty[candidateIndex]) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.currentHashingTypeButtonState === this.quadraticProbingButton) {\n\t\t\t\tskipVal = i + 1;\n\t\t\t}\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.HashIndexID,\n\t\t\t\t`Index to probe: (${start} + ${i + 1}*${skipVal}) % ${this.table_size} =` \n\t\t\t\t+ ` ${(start + this.skipDist[i + 1]) % this.table_size}`\n\t\t\t);\n\t\t}\n\n\t\tthis.cmd(act.setText, this.HashIndexID, '');\n\t\tif (HashID !== -1) {\n\t\t\tthis.cmd(act.delete, HashID);\n\t\t\tthis.nextIndex--;\n\t\t}\n\n\t\treturn foundIndex;\n\t}\n\n\tdeleteElement(elem) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Deleting element: ' + elem);\n\t\tlet index = this.doHash(elem);\n\n\t\tindex = this.getElemIndex(index, elem);\n\n\t\tif (index >= 0) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting element: ' + elem + '  Element deleted',\n\t\t\t);\n\t\t\t// this.empty[index] = true;\n\t\t\tthis.deleted[index] = true;\n\t\t\tthis.cmd(act.setText, this.hashTableVisual[index], '<deleted>');\n\t\t\tthis.size--;\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting element: ' + elem + '  Element not in table',\n\t\t\t);\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tfindElement(elem) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem);\n\t\tconst index = this.doHash(elem);\n\n\t\tconst found = this.getElemIndex(index, elem) !== -1;\n\t\tif (found) {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem + '  Found!');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem + '  Not Found!');\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tresize(fromCycle) {\n\t\tthis.commands = []; \n\n\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\t\tthis.cmd(act.setText, this.DelIndexLabel, '');\n\n\t\tconst resizeLabel = this.nextIndex++;\n\t\tif (!fromCycle) {\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tresizeLabel, \n\t\t\t\t`(Resize Required): (Size + 1 / length) > Load Factor --> (${this.size + 1} / ${this.table_size}) > ${this.load_factor}`,\n\t\t\t\tRESIZE_LABEL_X,\n\t\t\t\tRESIZE_LABEL_Y\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tresizeLabel, \n\t\t\t\t`(Resize Required): ${this.table_size} elements probed`,\n\t\t\t\tRESIZE_LABEL_X,\n\t\t\t\tRESIZE_LABEL_Y\n\t\t\t);\n\t\t}\n\n\t\tthis.table_size = this.table_size * 2 + 1;\n\n\t\tif (this.table_size * 2 > MAX_SIZE) {\n\t\t\tthis.load_factor = 0.99;\n\t\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\t\t}\n\n\t\tthis.cmd(act.step);\n\t\t\n\n\t\tthis.oldHashTableVisual = this.hashTableVisual;\n\t\tthis.oldHashTableValues = this.hashTableValues;\n\t\tthis.oldskipDist = this.skipDist;\n\t\tthis.oldempty = this.empty;\n\t\tthis.olddeleted = this.deleted;\n\t\tthis.oldIndexXPos = this.indexXPos;\n\t\tthis.oldIndexYPos = this.indexYPos;\n\t\tthis.oldindexLabelID = this.indexLabelID;\n\n\t\tthis.hashTableValues = new Array(this.table_size);\n\t\tthis.hashTableVisual = new Array(this.table_size);\n\t\tthis.skipDist = new Array(this.table_size);\n\t\tthis.empty = new Array(this.table_size);\n\t\tthis.deleted = new Array(this.table_size);\n\t\tthis.indexXPos = new Array(this.table_size);\n\t\tthis.indexYPos = new Array(this.table_size);\n\t\tthis.indexLabelID = new Array(this.table_size);\n\n\t\tif (this.currentHashingTypeButtonState === this.linearProblingButton) {\n\t\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\t\tthis.skipDist[i] = i;\n\t\t\t}\n\t\t} else if (this.currentHashingTypeButtonState === this.quadraticProbingButton) {\n\t\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\t\tthis.skipDist[i] = i * i;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\n\t\t\tthis.hashTableVisual[i] = this.nextIndex++;\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\n\t\t\tconst nextXPos = ARRAY_ELEM_START_X + (i % this.elements_per_row) * ARRAY_ELEM_WIDTH;\n\t\t\tconst nextYPos =\n\t\t\t\tARRAY_RESIZE_ELEM_START_Y +\n\t\t\t\tMath.floor(i / this.elements_per_row) * ARRAY_VERTICAL_SEPARATION;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.hashTableVisual[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\tnextXPos,\n\t\t\t\tnextYPos,\n\t\t\t);\n\t\t\tthis.indexLabelID[i] = this.nextIndex++;\n\t\t\tthis.indexXPos[i] = nextXPos;\n\t\t\tthis.indexYPos[i] = nextYPos + ARRAY_ELEM_HEIGHT;\n\n\t\t\tthis.cmd(act.createLabel, this.indexLabelID[i], i, this.indexXPos[i], this.indexYPos[i]);\n\t\t\tthis.cmd(act.setForegroundColor, this.indexLabelID[i], INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tlet elementsMoved = 0;\n\n\t\tfor (let i = 0; i < this.table_size / 2 && elementsMoved < this.size; i++) {\n\n\t\t\tthis.cmd(act.setHighlight, this.oldHashTableVisual[i], 1);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (!this.oldempty[i] && !this.olddeleted[i]) {\n\t\t\t\tconst oldElement = this.oldHashTableValues[i];\n\n\t\t\t\tlet index = this.doHash(oldElement);\n\n\t\t\t\tindex = this.getEmptyIndex(index, oldElement);\n\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tconst labID = this.nextIndex++;\n\t\t\t\t\tthis.cmd(act.createLabel, labID, oldElement, this.oldIndexXPos[i], this.oldIndexYPos[i] - ARRAY_ELEM_HEIGHT);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tlabID,\n\t\t\t\t\t\tthis.indexXPos[index],\n\t\t\t\t\t\tthis.indexYPos[index] - ARRAY_ELEM_HEIGHT,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, labID);\n\t\t\t\t\tthis.cmd(act.setText, this.hashTableVisual[index], oldElement);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\t\t\t\tthis.hashTableValues[index] = oldElement;\n\t\t\t\t\tthis.empty[index] = false;\n\t\t\t\t\tthis.deleted[index] = false;\n\t\t\t\t\telementsMoved++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.cmd(act.setHighlight, this.oldHashTableVisual[i], 0);\n\t\t}\n\n\t\tthis.cmd(act.delete, resizeLabel);\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tconst nextXPos = ARRAY_ELEM_START_X + (i % this.elements_per_row) * ARRAY_ELEM_WIDTH;\n\t\t\tconst nextYPos =\n\t\t\t\tARRAY_ELEM_START_Y +\n\t\t\t\tMath.floor(i / this.elements_per_row) * ARRAY_VERTICAL_SEPARATION;\n\t\t\tif (i < (this.table_size - 1) / 2) {\n\t\t\t\tthis.cmd(act.delete, this.oldHashTableVisual[i]);\n\t\t\t\tthis.cmd(act.delete, this.oldindexLabelID[i]);\n\t\t\t}\n\t\t\tthis.cmd(act.move, this.hashTableVisual[i], nextXPos, nextYPos);\n\t\t\tthis.cmd(act.move, this.indexLabelID[i], nextXPos, nextYPos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.indexYPos[i] = nextYPos + ARRAY_ELEM_HEIGHT;\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tchangeLoadFactor(LF) {\n\t\tthis.commands = [];\n\n\t\tif (this.table_size * 2 < MAX_SIZE) {\n\t\t\tthis.load_factor = LF;\n\t\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.loadFactorID,\n\t\t\t\t`Load Factor: ${this.load_factor}\n\t\t\t(Max Array Length)`\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tsetup() {\n\t\tthis.resetIndex = this.nextIndex;\n\t\tthis.table_size = CLOSED_HASH_TABLE_SIZE;\n\t\tthis.nextLowestPrime = 11;\n\t\tthis.load_factor = DEFAULT_LOAD_FACTOR;\n\t\tthis.skipDist = new Array(this.table_size);\n\t\tthis.hashTableVisual = new Array(this.table_size);\n\t\tthis.hashTableValues = new Array(this.table_size);\n\t\tthis.size = 0;\n\n\t\tthis.indexLabelID = new Array(this.table_size);\n\t\tthis.indexXPos = new Array(this.table_size);\n\t\tthis.indexYPos = new Array(this.table_size);\n\n\t\tthis.empty = new Array(this.table_size);\n\t\tthis.deleted = new Array(this.table_size);\n\n\t\tthis.ExplainLabel = this.nextIndex++;\n\n\t\tthis.HashIndexID = this.nextIndex++;\n\n\t\t// stores deleted index\n\t\tthis.DelIndexLabel = this.nextIndex++;\n\n\t\t// stores the load factor\n\t\tthis.loadFactorID = this.nextIndex++;\n\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.skipDist[i] = i; // Start with linear probing\n\t\t\tthis.hashTableVisual[i] = this.nextIndex++;\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\n\t\t\tconst nextXPos = ARRAY_ELEM_START_X + (i % this.elements_per_row) * ARRAY_ELEM_WIDTH;\n\t\t\tconst nextYPos =\n\t\t\t\tARRAY_ELEM_START_Y +\n\t\t\t\tMath.floor(i / this.elements_per_row) * ARRAY_VERTICAL_SEPARATION;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.hashTableVisual[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\tnextXPos,\n\t\t\t\tnextYPos,\n\t\t\t);\n\t\t\tthis.indexLabelID[i] = this.nextIndex++;\n\t\t\tthis.indexXPos[i] = nextXPos;\n\t\t\tthis.indexYPos[i] = nextYPos + ARRAY_ELEM_HEIGHT;\n\n\t\t\tthis.cmd(act.createLabel, this.indexLabelID[i], i, this.indexXPos[i], this.indexYPos[i]);\n\t\t\tthis.cmd(act.setForegroundColor, this.indexLabelID[i], INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, this.ExplainLabel, '', 10, 40, 0);\n\t\tthis.cmd(act.createLabel, this.HashIndexID, '', HASH2_LABEL_X + 300, HASH2_LABEL_Y + 5);\n\t\tthis.cmd(act.createLabel, this.DelIndexLabel, '', 10, 60, 0);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.loadFactorID,\n\t\t\t`Load Factor: ${this.load_factor}`,\n\t\t\tLOAD_LABEL_X,\n\t\t\tLOAD_LABEL_Y\n\t\t);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tresetAll() {\n\t\tthis.commands = super.resetAll();\n\n\t\tthis.size = 0;\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\t\t\tthis.hashTableValues[i] = undefined;\n\t\t\tthis.cmd(act.setText, this.hashTableVisual[i], '');\n\t\t}\n\n\t\treturn this.commands;\n\t\t// Clear array, etc\n\t}\n\n\t// NEED TO OVERRIDE IN PARENT\n\treset() {\n\t\tthis.nextIndex = this.resetIndex;\n\t\tthis.table_size = CLOSED_HASH_TABLE_SIZE;\n\t\tthis.load_factor = DEFAULT_LOAD_FACTOR;\n\t\tthis.size = 0;\n\n\t\tthis.empty = new Array(this.table_size);\n\t\tthis.deleted = new Array(this.table_size);\n\t\tthis.hashTableVisual = new Array(this.table_size);\n\t\tthis.hashTableValues = new Array(this.table_size);\n\t\tthis.indexLabelID = new Array(this.table_size);\n\n\t\tthis.ExplainLabel = this.nextIndex++;\n\n\t\tthis.HashIndexID = this.nextIndex++;\n\n\t\t// stores deleted index\n\t\tthis.DelIndexLabel = this.nextIndex++;\n\n\t\t// stores the load factor\n\t\tthis.loadFactorID = this.nextIndex++;\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\t\t\tthis.hashTableVisual[i] = this.nextIndex++;\n\t\t\tthis.indexLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tsuper.reset();\n\t}\n\n\tresetCallback() {}\n\n\tdisableUI() {\n\t\tsuper.disableUI();\n\t\tthis.linearProblingButton.disabled = true;\n\t\tthis.quadraticProbingButton.disabled = true;\n\t\tthis.doubleHashingButton.disabled = true;\n\t}\n\n\tenableUI() {\n\t\tsuper.enableUI();\n\t\tthis.linearProblingButton.disabled = false;\n\t\tthis.quadraticProbingButton.disabled = false;\n\t\tthis.doubleHashingButton.disabled = false;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddCheckboxToAlgorithmBar,\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nlet lastSwapEnabled = true;\n\nexport default class CocktailSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Last swap optimization toggle\n\t\tthis.lastSwapCheckbox = addCheckboxToAlgorithmBar('Enable last swap optimization', true);\n\t\tthis.lastSwapCheckbox.onclick = this.toggleLastSwap.bind(this);\n\t\tthis.controls.push(this.lastSwapCheckbox);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\ttoggleLastSwap() {\n\t\tlastSwapEnabled = !lastSwapEnabled;\n\t}\n\n\tclear() {\n\t\tthis.arrayData = [];\n\t\tthis.commands = [];\n\t\tthis.displayData = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\t\tconst length = this.arrayData.length;\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tlet sorted = true;\n\t\tlet start = 0;\n\t\tlet end = this.arrayData.length - 1;\n\t\tlet lastSwapped = 0;\n\t\tdo {\n\t\t\tsorted = true;\n\t\t\tfor (let i = start; i < end; i++) {\n\t\t\t\tthis.movePointers(i, i + 1);\n\t\t\t\tif (this.arrayData[i] > this.arrayData[i + 1]) {\n\t\t\t\t\tthis.swap(i, i + 1);\n\t\t\t\t\tsorted = false;\n\t\t\t\t\tlastSwapped = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lastSwapEnabled) {\n\t\t\t\tend = lastSwapped;\n\t\t\t} else {\n\t\t\t\tend--;\n\t\t\t}\n\t\t\tif (!sorted) {\n\t\t\t\tfor (let i = end + 1; i < this.arrayData.length; i++) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tif (!sorted) {\n\t\t\t\tsorted = true;\n\t\t\t\tfor (let i = end; i > start; i--) {\n\t\t\t\t\tthis.movePointers(i - 1, i);\n\t\t\t\t\tif (+this.arrayData[i] < +this.arrayData[i - 1]) {\n\t\t\t\t\t\tthis.swap(i, i - 1);\n\t\t\t\t\t\tsorted = false;\n\t\t\t\t\t\tlastSwapped = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (lastSwapEnabled) {\n\t\t\t\t\tstart = lastSwapped;\n\t\t\t\t} else {\n\t\t\t\t\tstart++;\n\t\t\t\t}\n\t\t\t\tif (!sorted) {\n\t\t\t\t\tfor (let i = start - 1; i >= 0; i--) {\n\t\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t} while (!sorted);\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\n\t\t// Swap actual data\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\n\t\t// Swap displayed data\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { BFS_DFS_ADJ_LIST } from './util/GraphValues';\nimport Graph from './Graph.js';\nimport { act } from '../anim/AnimationMain';\n\nconst DFS_STACK_TOP_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst LIST_START_X = 30;\nconst LIST_START_Y = 70;\nconst LIST_SPACING = 20;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 120;\n\nconst CURRENT_VERTEX_LABEL_X = 25;\nconst CURRENT_VERTEX_LABEL_Y = 145;\nconst CURRENT_VERTEX_X = 115;\nconst CURRENT_VERTEX_Y = 151;\n\nconst STACK_LABEL_X = 25;\nconst STACK_LABEL_Y = 170;\n\nconst STACK_START_X = 40;\nconst SMALL_STACK_START_Y = 335;\nconst LARGE_STACK_START_Y = 465;\nconst SMALL_STACK_SPACING = 20;\nconst LARGE_STACK_SPACING = 16;\n\nconst RECURSION_START_X = 125;\nconst RECURSION_START_Y = 185;\nconst SMALL_RECURSION_SPACING_X = 20;\nconst LARGE_RECURSION_SPACING_X = 10;\nconst SMALL_RECURSION_SPACING_Y = 20;\nconst LARGE_RECURSION_SPACING_Y = 15;\n\nexport default class DFS extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, BFS_DFS_ADJ_LIST);\n\t\tthis.addControls();\n\t\tthis.physicalStack = false;\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Recursion', 'Stack'],\n\t\t\t'StackType',\n\t\t);\n\n\t\tthis.recursiveStackButton = radioButtonList[0];\n\t\tthis.recursiveStackButton.onclick = this.stackCallback.bind(this, false);\n\t\tthis.recursiveStackButton.checked = true;\n\t\tthis.controls.push(this.recursiveStackButton);\n\n\t\tthis.physicalStackButton = radioButtonList[1];\n\t\tthis.physicalStackButton.onclick = this.stackCallback.bind(this, true);\n\t\tthis.controls.push(this.physicalStackButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.commands = [];\n\t\tthis.messageID = [];\n\n\t\tthis.visited = [];\n\n\t\tthis.stackID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'List:',\n\t\t\tLIST_START_X - 5,\n\t\t\tLIST_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current vertex:',\n\t\t\tCURRENT_VERTEX_LABEL_X,\n\t\t\tCURRENT_VERTEX_LABEL_Y,\n\t\t\t0,\n\t\t);\n\n\t\tthis.stackLabelID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.stackLabelID,\n\t\t\tthis.physicalStack ? 'Stack:' : 'Recursive stack:   Recursive calls:',\n\t\t\tSTACK_LABEL_X,\n\t\t\tSTACK_LABEL_Y,\n\t\t\t0,\n\t\t);\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\t\tthis.messageID = [];\n\t}\n\n\tstackCallback(physical) {\n\t\tif (this.physicalStack !== physical) {\n\t\t\tthis.physicalStack = physical;\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup(this.adj_matrix);\n\t\t}\n\t}\n\n\tstartCallback() {\n\t\tif (this.startField.value !== '') {\n\t\t\tlet startvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size) {\n\t\t\t\tif (this.physicalStack) {\n\t\t\t\t\tthis.implementAction(this.doDFSStack.bind(this), startvalue);\n\t\t\t\t} else {\n\t\t\t\t\tthis.implementAction(this.doDFSRecursive.bind(this), startvalue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdoDFSStack(startVertex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.visited = new Array(this.size);\n\t\tthis.stack = [];\n\t\tthis.stackID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\t\tthis.stackStartY = this.isLarge ? LARGE_STACK_START_Y : SMALL_STACK_START_Y;\n\t\tthis.stackSpacing = this.isLarge ? LARGE_STACK_SPACING : SMALL_STACK_SPACING;\n\n\t\tthis.rebuildEdges();\n\n\t\tlet vertex = startVertex;\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Pushing ' + this.toStr(vertex) + ' and adding to visited set',\n\t\t);\n\t\tlet vertexID = this.nextIndex++;\n\t\tthis.visited[vertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(vertex),\n\t\t\tVISITED_START_X,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[vertex], VISITED_COLOR);\n\t\tthis.stack.push(vertex);\n\t\tthis.stackID.push(vertexID);\n\t\tthis.cmd(act.createLabel, vertexID, this.toStr(vertex), STACK_START_X, this.stackStartY);\n\t\tthis.cmd(act.step);\n\n\t\twhile (this.stack.length > 0 && this.listID.length < this.size) {\n\t\t\tvertex = this.stack.pop();\n\t\t\tvertexID = this.stackID.pop();\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'Popping ' + this.toStr(vertex) + ' and adding to list',\n\t\t\t);\n\n\t\t\tthis.cmd(act.setTextColor, vertexID, DFS_STACK_TOP_COLOR);\n\t\t\tthis.cmd(act.move, vertexID, CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\n\t\t\tthis.listID.push(this.nextIndex);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tthis.toStr(vertex),\n\t\t\t\tLIST_START_X + (this.listID.length - 1) * LIST_SPACING,\n\t\t\t\tLIST_START_Y,\n\t\t\t);\n\n\t\t\tthis.visitVertex(vertex);\n\n\t\t\tthis.cmd(act.step);\n\n\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\tif (this.adj_matrix[vertex][neighbor] > 0) {\n\t\t\t\t\tthis.highlightEdge(vertex, neighbor, 1);\n\t\t\t\t\tif (!this.visited[neighbor]) {\n\t\t\t\t\t\tthis.visited[neighbor] = true;\n\t\t\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t' has not yet been visited, pushing and adding to visited set',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * LIST_SPACING,\n\t\t\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[neighbor], VISITED_COLOR);\n\t\t\t\t\t\tthis.stack.push(neighbor);\n\t\t\t\t\t\tthis.stackID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tSTACK_START_X,\n\t\t\t\t\t\t\tthis.stackStartY - (this.stack.length - 1) * this.stackSpacing,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) + ' has already been visited, skipping',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t// this.highlightEdge(vertex, neighbor, 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.cmd(act.delete, vertexID);\n\n\t\t\tthis.leaveVertex();\n\t\t}\n\n\t\tif (this.stack.length > 0) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'All vertices have been visited, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Stack is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tdoDFSRecursive(startVertex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.visited = new Array(this.size);\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\t\tthis.stackStartY = this.isLarge ? LARGE_STACK_START_Y : SMALL_STACK_START_Y;\n\t\tthis.stackSpacing = this.isLarge ? LARGE_STACK_SPACING : SMALL_STACK_SPACING;\n\t\tthis.recursionSpacingX = this.isLarge\n\t\t\t? LARGE_RECURSION_SPACING_X\n\t\t\t: SMALL_RECURSION_SPACING_X;\n\t\tthis.recursionSpacingY = this.isLarge\n\t\t\t? LARGE_RECURSION_SPACING_Y\n\t\t\t: SMALL_RECURSION_SPACING_Y;\n\t\tthis.currentID = this.nextIndex++;\n\n\t\tthis.rebuildEdges();\n\n\t\tthis.cmd(act.setText, this.infoLabelID, '');\n\n\t\tconst vertex = startVertex;\n\n\t\tthis.cmd(act.createLabel, this.currentID, '', CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\tthis.cmd(act.setTextColor, this.currentID, DFS_STACK_TOP_COLOR);\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'About to recurse to ' + this.toStr(startVertex));\n\t\tthis.cmd(act.step);\n\n\t\tthis.visitVertex(vertex);\n\n\t\tthis.dfsVisit(vertex, RECURSION_START_X);\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Returned from ' + this.toStr(vertex) + ', done');\n\t\tthis.cmd(act.delete, this.currentID);\n\t\tthis.leaveVertex();\n\n\t\treturn this.commands;\n\t}\n\n\tdfsVisit(currVertex, messageX) {\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Visiting ' + this.toStr(currVertex) + ' and adding to list',\n\t\t);\n\t\tthis.cmd(act.setText, this.currentID, this.toStr(currVertex));\n\n\t\tthis.stackID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(currVertex),\n\t\t\tSTACK_START_X,\n\t\t\tthis.stackStartY - (this.stackID.length - 1) * this.stackSpacing,\n\t\t);\n\n\t\tconst nextMessage = this.nextIndex++;\n\t\tthis.messageID.push(nextMessage);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tnextMessage,\n\t\t\t'DFS(' + this.toStr(currVertex) + ')',\n\t\t\tmessageX,\n\t\t\tRECURSION_START_Y + (this.messageID.length - 1) * this.recursionSpacingY,\n\t\t\t0,\n\t\t);\n\n\t\tthis.listID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(currVertex),\n\t\t\tLIST_START_X + (this.listID.length - 1) * LIST_SPACING,\n\t\t\tLIST_START_Y,\n\t\t);\n\n\t\tthis.visited[currVertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(currVertex),\n\t\t\tVISITED_START_X + (this.visitedID.length - 1) * LIST_SPACING,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[currVertex], VISITED_COLOR);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\tif (this.adj_matrix[currVertex][neighbor] > 0) {\n\t\t\t\tif (this.visited[neighbor]) {\n\t\t\t\t\t// this.highlightEdge(currVertex, neighbor, 1, 'blue');\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'Vertex ' + this.toStr(neighbor) + ' already visited, skipping',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t// this.highlightEdge(currVertex, neighbor, 0);\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlightEdge(currVertex, neighbor, 1, 'red');\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'About to recurse to ' + this.toStr(neighbor),\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tthis.leaveVertex();\n\t\t\t\t\tthis.visitVertex(neighbor);\n\t\t\t\t\t// this.highlightEdge(currVertex, neighbor, 0);\n\n\t\t\t\t\tthis.dfsVisit(neighbor, messageX + this.recursionSpacingX);\n\n\t\t\t\t\tthis.leaveVertex();\n\t\t\t\t\tthis.visitVertex(currVertex);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'Returned from ' + this.toStr(neighbor) + ' to ' + this.toStr(currVertex),\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, this.stackID.pop());\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.visited[i] = false;\n\t\t}\n\t\tfor (let i = 0; i < this.listID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.listID[i]);\n\t\t}\n\t\tthis.listID = [];\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tthis.visitedID = [];\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t\tthis.cmd(act.setText, this.infoLabelID, '');\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addLabelToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst INFO_MSG_X = 20;\nconst INFO_MSG_Y = 10;\n\nconst TABLE_ELEM_WIDTH = 40;\nconst TABLE_ELEM_HEIGHT = 30;\n\nconst TABLE_START_X = 500;\nconst TABLE_START_Y = 80;\n\nconst CODE_START_X = 20;\nconst CODE_START_Y = 35;\nconst CODE_LINE_HEIGHT = 14;\n\nconst CODE_HIGHLIGHT_COLOR = '#FF0000';\nconst CODE_STANDARD_COLOR = '#000000';\nconst LCS_CELL_COLOR = '#99CCFF';\nconst MAX_SEQUENCE_LENGTH = 13;\n\nconst SEQUENCE_START_X = 20;\nconst SEQUENCE_START_Y = 195;\nconst SEQUENCE_DELTA_X = 10;\n\nexport default class LCS extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\taddLabelToAlgorithmBar('S1:');\n\t\tthis.S1Field = addControlToAlgorithmBar('Text', '');\n\t\tthis.S1Field.onkeydown = this.returnSubmit(\n\t\t\tthis.S1Field,\n\t\t\tthis.runCallback.bind(this),\n\t\t\tMAX_SEQUENCE_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.S1Field);\n\n\t\taddLabelToAlgorithmBar('S2:');\n\t\tthis.S2Field = addControlToAlgorithmBar('Text', '');\n\t\tthis.S2Field.onkeydown = this.returnSubmit(\n\t\t\tthis.S2Field,\n\t\t\tthis.runCallback.bind(this),\n\t\t\tMAX_SEQUENCE_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.S2Field);\n\n\t\tthis.tableButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.tableButton.onclick = this.runCallback.bind(this);\n\t\tthis.controls.push(this.tableButton);\n\t}\n\n\tsetup() {\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.code = [\n\t\t\t['def ', 'LCS(S1, S2, matrix)', ':'],\n\t\t\t['     for x from 0 to S1.length - 1:'],\n\t\t\t['          for y from 0 to S2.length - 1:'],\n\t\t\t['               if ', '(S1[x] == S2[y]):'],\n\t\t\t['                    matrix[x][y] = 1 + ', 'matrix[x - 1][y-1]'],\n\t\t\t['               else:'],\n\t\t\t[\n\t\t\t\t'                    matrix[x][y] = max(',\n\t\t\t\t'matrix[x - 1][y]',\n\t\t\t\t',',\n\t\t\t\t' matrix[x][y - 1]',\n\t\t\t\t')',\n\t\t\t],\n\t\t];\n\n\t\tthis.codeID = Array(this.code.length);\n\t\tlet i, j;\n\t\tfor (i = 0; i < this.code.length; i++) {\n\t\t\tthis.codeID[i] = new Array(this.code[i].length);\n\t\t\tfor (j = 0; j < this.code[i].length; j++) {\n\t\t\t\tthis.codeID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.codeID[i][j],\n\t\t\t\t\tthis.code[i][j],\n\t\t\t\t\tCODE_START_X,\n\t\t\t\t\tCODE_START_Y + i * CODE_LINE_HEIGHT,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[i][j], CODE_STANDARD_COLOR);\n\t\t\t\tif (j > 0) {\n\t\t\t\t\tthis.cmd(act.alignRight, this.codeID[i][j], this.codeID[i][j - 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.initialIndex = this.nextIndex;\n\t\tthis.oldIDs = [];\n\t\tthis.commands = [];\n\t}\n\n\treset() {\n\t\tthis.oldIDs = [];\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\trunCallback() {\n\t\tif (this.S1Field.value !== '' && this.S2Field.value !== '') {\n\t\t\tthis.implementAction(this.run.bind(this), this.S1Field.value, this.S2Field.value);\n\t\t}\n\t}\n\n\trun(str1, str2) {\n\t\tthis.commands = [];\n\t\tthis.clearOldIDs();\n\n\t\tthis.buildTable(str1, str2);\n\n\t\tconst moveID = this.nextIndex++;\n\t\tconst x = str1.length;\n\t\tconst y = str2.length;\n\t\tlet i, j;\n\n\t\tfor (i = 0; i <= x; i++) {\n\t\t\tthis.cmd(act.setText, this.tableID[i][0], '0');\n\t\t\tthis.tableVals[i][0] = 0;\n\t\t}\n\t\tfor (i = 0; i <= y; i++) {\n\t\t\tthis.cmd(act.setText, this.tableID[0][i], '0');\n\t\t\tthis.tableVals[0][i] = 0;\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tfor (j = 0; j < y; j++) {\n\t\t\tfor (i = 0; i < x; i++) {\n\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j + 1], 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[i], 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[j], 1);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[3][1], CODE_HIGHLIGHT_COLOR);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Comparing ' + str1.charAt(i) + ' and ' + str2.charAt(j),\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[i], 0);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[j], 0);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[3][1], CODE_STANDARD_COLOR);\n\t\t\t\tif (str1.charAt(i) === str2.charAt(j)) {\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[4][0], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[4][1], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1 - 1][j + 1 - 1], 1);\n\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Match, increment from the diagonal');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\tthis.tableVals[i][j] + 1,\n\t\t\t\t\t\tthis.tableXPos[i][j],\n\t\t\t\t\t\tthis.tableYPos[i][j],\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.bringToTop, moveID, 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\tthis.tableXPos[i + 1][j + 1],\n\t\t\t\t\t\tthis.tableYPos[i + 1][j + 1],\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, moveID);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[4][0], CODE_STANDARD_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[4][1], CODE_STANDARD_COLOR);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1 - 1][j + 1 - 1], 0);\n\t\t\t\t\tthis.tableVals[i + 1][j + 1] = this.tableVals[i][j] + 1;\n\t\t\t\t\tthis.cmd(act.setText, this.tableID[i + 1][j + 1], this.tableVals[i + 1][j + 1]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][0], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][1], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][2], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][3], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][4], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i][j + 1], 1);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j], 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'Mismatch, copy greatest value from left or above',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][0], CODE_STANDARD_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][2], CODE_STANDARD_COLOR);\n\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][4], CODE_STANDARD_COLOR);\n\n\t\t\t\t\tif (this.tableVals[i][j + 1] > this.tableVals[i + 1][j]) {\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j], 0);\n\t\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][3], CODE_STANDARD_COLOR);\n\n\t\t\t\t\t\tthis.tableVals[i + 1][j + 1] = this.tableVals[i][j + 1];\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\t\tthis.tableVals[i][j + 1],\n\t\t\t\t\t\t\tthis.tableXPos[i][j + 1],\n\t\t\t\t\t\t\tthis.tableYPos[i][j + 1],\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][1], CODE_STANDARD_COLOR);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i][j + 1], 0);\n\t\t\t\t\t\tthis.tableVals[i + 1][j + 1] = this.tableVals[i + 1][j];\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\t\tthis.tableVals[i + 1][j],\n\t\t\t\t\t\t\tthis.tableXPos[i + 1][j],\n\t\t\t\t\t\t\tthis.tableYPos[i + 1][j],\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.bringToTop, moveID, 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\tthis.tableXPos[i + 1][j + 1],\n\t\t\t\t\t\tthis.tableYPos[i + 1][j + 1],\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setText, this.tableID[i + 1][j + 1], this.tableVals[i + 1][j + 1]);\n\t\t\t\t\tthis.cmd(act.delete, moveID);\n\t\t\t\t\tif (this.tableVals[i][j + 1] > this.tableVals[i + 1][j]) {\n\t\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][1], CODE_STANDARD_COLOR);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i][j + 1], 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[6][3], CODE_STANDARD_COLOR);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j], 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j + 1], 0);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Finished building table, can now find LCS');\n\t\tthis.cmd(act.step);\n\n\t\tthis.buildLCSFromTable(str1, str2);\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Done');\n\t\treturn this.commands;\n\t}\n\n\tbuildTable(str1, str2) {\n\t\tconst x = str1.length;\n\t\tconst y = str2.length;\n\t\tthis.tableID = new Array(x + 1);\n\t\tthis.tableVals = new Array(x + 1);\n\t\tthis.tableXPos = new Array(x + 1);\n\t\tthis.tableYPos = new Array(x + 1);\n\n\t\tlet i, j;\n\n\t\tthis.S1TableID = new Array(x);\n\t\tfor (i = 0; i <= x; i++) {\n\t\t\tif (i > 0) {\n\t\t\t\tthis.S1TableID[i - 1] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.S1TableID[i - 1],\n\t\t\t\t\tstr1.charAt(i - 1),\n\t\t\t\t\tTABLE_START_X + i * TABLE_ELEM_WIDTH,\n\t\t\t\t\tTABLE_START_Y - 2 * TABLE_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t\tthis.oldIDs.push(this.S1TableID[i - 1]);\n\t\t\t}\n\t\t\tconst index = this.nextIndex++;\n\t\t\tthis.oldIDs.push(index);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tindex,\n\t\t\t\ti - 1 === -1 ? '\\u2205' : i - 1,\n\t\t\t\tTABLE_START_X + i * TABLE_ELEM_WIDTH,\n\t\t\t\tTABLE_START_Y - 1 * TABLE_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, index, '#0000FF');\n\t\t}\n\n\t\tthis.S2TableID = new Array(y);\n\t\tfor (i = 0; i <= y; i++) {\n\t\t\tif (i > 0) {\n\t\t\t\tthis.S2TableID[i - 1] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.S2TableID[i - 1],\n\t\t\t\t\tstr2.charAt(i - 1),\n\t\t\t\t\tTABLE_START_X - 2 * TABLE_ELEM_WIDTH,\n\t\t\t\t\tTABLE_START_Y + i * TABLE_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t\tthis.oldIDs.push(this.S2TableID[i - 1]);\n\t\t\t}\n\t\t\tconst index = this.nextIndex++;\n\t\t\tthis.oldIDs.push(index);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tindex,\n\t\t\t\ti - 1 === -1 ? '\\u2205' : i - 1,\n\t\t\t\tTABLE_START_X - 1 * TABLE_ELEM_WIDTH,\n\t\t\t\tTABLE_START_Y + i * TABLE_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, index, '#0000FF');\n\t\t}\n\n\t\tfor (i = 0; i <= x; i++) {\n\t\t\tthis.tableID[i] = new Array(y + 1);\n\t\t\tthis.tableVals[i] = new Array(y + 1);\n\t\t\tthis.tableXPos[i] = new Array(y + 1);\n\t\t\tthis.tableYPos[i] = new Array(y + 1);\n\n\t\t\tfor (j = 0; j <= y; j++) {\n\t\t\t\tthis.tableID[i][j] = this.nextIndex++;\n\t\t\t\tthis.tableVals[i][j] = -1;\n\t\t\t\tthis.oldIDs.push(this.tableID[i][j]);\n\n\t\t\t\tthis.tableXPos[i][j] = TABLE_START_X + i * TABLE_ELEM_WIDTH;\n\t\t\t\tthis.tableYPos[i][j] = TABLE_START_Y + j * TABLE_ELEM_HEIGHT;\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.tableID[i][j],\n\t\t\t\t\t'',\n\t\t\t\t\tTABLE_ELEM_WIDTH,\n\t\t\t\t\tTABLE_ELEM_HEIGHT,\n\t\t\t\t\tthis.tableXPos[i][j],\n\t\t\t\t\tthis.tableYPos[i][j],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearOldIDs() {\n\t\tfor (let i = 0; i < this.oldIDs.length; i++) {\n\t\t\tthis.cmd(act.delete, this.oldIDs[i]);\n\t\t}\n\t\tthis.oldIDs = [];\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tbuildLCSFromTable(str1, str2) {\n\t\tlet currX = this.tableVals.length - 1;\n\t\tlet currY = this.tableVals[0].length - 1;\n\n\t\tconst sequence = [];\n\n\t\tconst header = this.nextIndex++;\n\t\tthis.oldIDs.push(header);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\theader,\n\t\t\t'Longest Common Subsequence:',\n\t\t\tSEQUENCE_START_X,\n\t\t\tSEQUENCE_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.setForegroundColor, header, '#003300');\n\n\t\tfor (let i = 1; i <= str1.length; i++) {\n\t\t\tfor (let j = 1; j <= str2.length; j++) {\n\t\t\t\tconst topThick = this.tableVals[i][j] !== this.tableVals[i][j - 1];\n\t\t\t\tconst leftThick = this.tableVals[i][j] !== this.tableVals[i - 1][j];\n\t\t\t\tif (topThick || leftThick) {\n\t\t\t\t\tthis.cmd(act.setRectangleEdgeThickness, this.tableID[i][j], [\n\t\t\t\t\t\ttopThick,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tleftThick,\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twhile (currX > 0 && currY > 0) {\n\t\t\tthis.cmd(act.setHighlight, this.tableID[currX][currY], 1);\n\t\t\tthis.cmd(act.setBackgroundColor, this.tableID[currX][currY], LCS_CELL_COLOR);\n\n\t\t\tif (\n\t\t\t\tthis.tableVals[currX - 1][currY] === this.tableVals[currX][currY - 1] &&\n\t\t\t\tthis.tableVals[currX - 1][currY] !== this.tableVals[currX][currY]\n\t\t\t) {\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[currX - 1], 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[currY - 1], 1);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Hit a corner, move diagonally and add current character to LCS',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[currX - 1], 0);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[currY - 1], 0);\n\t\t\t} else {\n\t\t\t\tif (this.tableVals[currX - 1][currY] > this.tableVals[currX][currY - 1]) {\n\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Move left');\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Move up');\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\n\t\t\tthis.cmd(act.setHighlight, this.tableID[currX][currY], 0);\n\n\t\t\tif (\n\t\t\t\tthis.tableVals[currX - 1][currY] === this.tableVals[currX][currY - 1] &&\n\t\t\t\tthis.tableVals[currX - 1][currY] !== this.tableVals[currX][currY]\n\t\t\t) {\n\t\t\t\tconst nextSequenceID = this.nextIndex++;\n\t\t\t\tthis.oldIDs.push(nextSequenceID);\n\t\t\t\tsequence.push(nextSequenceID);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tnextSequenceID,\n\t\t\t\t\tstr1.charAt(currX - 1),\n\t\t\t\t\tSEQUENCE_START_X + (sequence.length - 1) * SEQUENCE_DELTA_X + 4,\n\t\t\t\t\tSEQUENCE_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, nextSequenceID, '#0000FF');\n\n\t\t\t\tfor (let i = sequence.length - 1; i >= 0; i--) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tsequence[i],\n\t\t\t\t\t\tSEQUENCE_START_X + (sequence.length - 1 - i) * SEQUENCE_DELTA_X + 4,\n\t\t\t\t\t\tSEQUENCE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tcurrX = currX - 1;\n\t\t\t\tcurrY = currY - 1;\n\t\t\t} else {\n\t\t\t\tif (this.tableVals[currX - 1][currY] > this.tableVals[currX][currY - 1]) {\n\t\t\t\t\tcurrX = currX - 1;\n\t\t\t\t} else {\n\t\t\t\t\tcurrY = currY - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst ARRAY_ELEMS_PER_LINE = 14;\nconst ARRAY_LINE_SPACING = 130;\n\nconst FRONT_POS_X = 180;\nconst FRONT_POS_Y = 100;\nconst FRONT_LABEL_X = 130;\nconst FRONT_LABEL_Y = 100;\n\nconst SIZE_POS_X = 280;\nconst SIZE_POS_Y = 100;\nconst SIZE_LABEL_X = 230;\nconst SIZE_LABEL_Y = 100;\n\nconst QUEUE_LABEL_X = 50;\nconst QUEUE_LABEL_Y = 30;\nconst QUEUE_ELEMENT_X = 120;\nconst QUEUE_ELEMENT_Y = 30;\n\nconst RESIZE_ARRAY_START_X = 100;\nconst RESIZE_ARRAY_START_Y = 300;\nconst QUEUE_RESIZE_LABEL_X = 60;\nconst QUEUE_RESIZE_LABEL_Y = 60;\n\nconst FRONT_LABEL_OFFSET = -40;\n\n\nconst INDEX_COLOR = '#0000FF';\n\nconst SIZE = 7;\nconst MAX_SIZE = 30;\n\nexport default class DequeArray extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\t// Add's value text field\n\t\tthis.addField = addControlToAlgorithmBar('Text', '');\n\t\tthis.addField.onkeydown = this.returnSubmit(this.addField, null, 4);\n\t\tthis.controls.push(this.addField);\n\n\t\t// Add first button\n\t\tthis.addFirstButton = addControlToAlgorithmBar('Button', 'Add First');\n\t\tthis.addFirstButton.onclick = this.addFirstCallBack.bind(this);\n\t\tthis.controls.push(this.addFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Add last button\n\t\tthis.addLastButton = addControlToAlgorithmBar('Button', 'Add Last');\n\t\tthis.addLastButton.onclick = this.addLastCallback.bind(this);\n\t\tthis.controls.push(this.addLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Remove first button\n\t\tthis.removeFirstButton = addControlToAlgorithmBar('Button', 'Remove First');\n\t\tthis.removeFirstButton.onclick = this.removeFirstCallback.bind(this);\n\t\tthis.controls.push(this.removeFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Remove last button\n\t\tthis.removeLastButton = addControlToAlgorithmBar('Button', 'Remove Last');\n\t\tthis.removeLastButton.onclick = this.removeLastCallback.bind(this);\n\t\tthis.controls.push(this.removeLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.frontID = this.nextIndex++;\n\t\tconst frontLabelID = this.nextIndex++;\n\t\tthis.frontPointerID = this.nextIndex++;\n\t\tthis.sizeID = this.nextIndex++;\n\t\tconst sizeLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, frontLabelID, 'Front', FRONT_LABEL_X, FRONT_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.frontID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, sizeLabelID, 'Size', SIZE_LABEL_X, SIZE_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.sizeID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tSIZE_POS_X,\n\t\t\tSIZE_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel,\n\t\t\tthis.frontPointerID,\n\t\t\t'Front',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + FRONT_LABEL_OFFSET);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', QUEUE_LABEL_X, QUEUE_LABEL_Y, false);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.arrayID = new Array(SIZE); \n\t\tthis.arrayLabelID = new Array(SIZE);\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.nextIndex = this.nextIndex + 7;\n\t}\n\n\taddLastCallback() {\n\t\tif (this.size < this.arrayData.length && this.addField.value !== '') {\n\t\t\tconst pushVal = this.addField.value;\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.addLast.bind(this), pushVal);\n\t\t} else if (this.size === this.arrayData.length \n\t\t\t&& this.addField.value !== ''\n\t\t\t&& this.size * 2 < MAX_SIZE) {\n\t\t\t\tconst pushVal = this.addField.value;\n\t\t\t\tthis.addField.value = '';\n\t\t\t\tthis.implementAction(this.resize.bind(this), pushVal, false);\n\t\t\t}\n\t}\n\n\tremoveFirstCallback() {\n\t\tif (this.size !== 0) {\n\t\t\tthis.implementAction(this.removeFirst.bind(this));\n\t\t}\n\t}\n\n\tremoveLastCallback() {\n\t\tif (this.size !== 0) {\n\t\t\tthis.implementAction(this.removeLast.bind(this));\n\t\t}\n\t}\n\n\taddFirstCallBack() {\n\t\tif (this.size < this.arrayData.length && this.addField.value !== '') {\n\t\t\tconst pushVal = this.addField.value;\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.addFirst.bind(this), pushVal);\n\t\t} else if (this.size === this.arrayData.length\n\t\t\t&& this.addField.value !== ''\n\t\t\t&& this.size * 2 < MAX_SIZE) {\n\t\t\t\tconst pushVal = this.addField.value;\n\t\t\t\tthis.addField.value = '';\n\t\t\t\tthis.implementAction(this.resize.bind(this), pushVal, true);\n\t\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\taddLast(elemToAddLast) {\n\t\tthis.commands = [];\n\n\t\tconst labAddLastID = this.nextIndex++;\n\t\tconst labAddLastValID = this.nextIndex++;\n\t\tconst addIndex = (this.front + this.size) % this.arrayData.length;\n\n\t\tthis.arrayData[addIndex] = elemToAddLast;\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X + 100, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labAddLastID, 'Enqueuing Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labAddLastValID, elemToAddLast, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.leftoverLabelID,\n\t\t\t`Adding ${elemToAddLast} to back at index (${this.front} + ${this.size}) % ${this.arrayData.length}`,\n\t\t);\n\n\t\tconst xpos = (addIndex % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(addIndex / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labAddLastValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[addIndex], elemToAddLast);\n\t\tthis.cmd(act.delete, labAddLastValID);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.delete, labAddLastID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\taddFirst(elemToAdd) {\n\t\tthis.commands = [];\n\n\t\tconst labelAddID = this.nextIndex++;\n\t\tconst labelAddIDVal = this.nextIndex++;\n\n\t\tconst addIndex = (this.front - 1 + this.arrayData.length) % this.arrayData.length;\n\n\t\tconst xpos = (addIndex % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(addIndex / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.arrayData[addIndex] = elemToAdd;\n\n\t\tthis.cmd(act.createLabel, labelAddID, 'Enqueuing Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labelAddIDVal, elemToAdd, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X + 100, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.leftoverLabelID,\n\t\t\t`Adding ${elemToAdd} to front at index (${this.front} - 1) % ${this.arrayData.length}`,\n\t\t);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(\n\t\t\tact.move,\n\t\t\tthis.highlight1ID,\n\t\t\tthis.front * ARRAY_ELEM_WIDTH + ARRAY_START_X,\n\t\t\typos + ARRAY_ELEM_HEIGHT,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, labelAddIDVal, xpos, ypos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, labelAddIDVal);\n\n\t\tthis.front = addIndex;\n\n\t\tconst frontxpos = (addIndex % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst frontypos =\n\t\t\tMath.floor(addIndex / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING \n\t\t\t+ ARRAY_START_Y + FRONT_LABEL_OFFSET;\n\t\t\n\n\t\tthis.cmd(act.setText, this.arrayID[addIndex], elemToAdd);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, this.frontPointerID, frontxpos, frontypos);\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 0);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.sizeID, this.size + 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.delete, labelAddID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.size++;\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\tremoveFirst() {\n\t\tthis.commands = [];\n\n\t\tconst labremoveFirstID = this.nextIndex++;\n\t\tconst labremoveFirstValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabremoveFirstID,\n\t\t\t'removeFirst Value: ',\n\t\t\tQUEUE_LABEL_X,\n\t\t\tQUEUE_LABEL_Y,\n\t\t);\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.front % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.front / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tconst removeFirstdVal = this.arrayData[this.front];\n\t\tthis.cmd(act.createLabel, labremoveFirstValID, removeFirstdVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[this.front], '');\n\t\tthis.cmd(act.move, labremoveFirstValID, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tthis.front = (this.front + 1) % this.arrayData.length;\n\t\tconst frontxpos = (this.front % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst frontypos =\n\t\t\tMath.floor(this.front / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING \n\t\t\t+ ARRAY_START_Y + FRONT_LABEL_OFFSET;\n\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.move, this.frontPointerID, frontxpos, frontypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 0);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'removeFirst Value: ' + removeFirstdVal);\n\n\t\tthis.cmd(act.delete, labremoveFirstID);\n\t\tthis.cmd(act.delete, labremoveFirstValID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.size--;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\tremoveLast() {\n\t\tthis.commands = [];\n\t\tconst remLabelID = this.nextIndex++;\n\t\tconst remLabelValID = this.nextIndex++;\n\n\t\tconst remIndex = (this.front + this.size - 1 + this.arrayData.length) % this.arrayData.length;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(act.createLabel, remLabelID, 'Removed Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight2ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (remIndex % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(remIndex / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, this.highlight2ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.delete, this.highlight2ID);\n\n\t\tconst removedVal = this.arrayData[remIndex];\n\t\tthis.cmd(act.createLabel, remLabelValID, removedVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[remIndex], '');\n\t\tthis.cmd(act.move, remLabelValID, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Removed Value: ' + removedVal);\n\n\t\tthis.cmd(act.delete, remLabelID);\n\t\tthis.cmd(act.delete, remLabelValID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.sizeID, this.size - 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.size--;\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\tresize(elemToEnqueue, isFront) {\n\t\tthis.commands = [];\n\n\t\tconst labEnqueueID = this.nextIndex++;\n\t\tconst labEnqueueValID = this.nextIndex++;\n\t\tconst labEnqueueResizeID = this.nextIndex++;\n\n\t\tthis.arrayIDNew = new Array(this.size * 2);\n\t\tthis.arrayLabelIDNew = new Array(this.size * 2);\n\t\tthis.arrayDataNew = new Array(this.size * 2);\n\n\t\tconst frontOffset = (isFront) ? 1 : 0;\n\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tthis.arrayIDNew[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelIDNew[i] = this.nextIndex++;\n\t\t\tif (i < this.size) {\n\t\t\t\tthis.arrayDataNew[i + frontOffset] = this.arrayData[(this.front + i) % this.arrayData.length];\n\t\t\t}\n\t\t}\n\n\t\tconst extra = (isFront) ? \": elements shifted by 1\" : '';\n\n\t\tthis.cmd(act.createLabel, labEnqueueID, 'Enqueuing Value:', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labEnqueueValID, elemToEnqueue, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel, \n\t\t\tlabEnqueueResizeID, \n\t\t\t`(Resize Required${extra})`, \n\t\t\t(isFront) ? QUEUE_RESIZE_LABEL_X + 100 : QUEUE_RESIZE_LABEL_X, \n\t\t\tQUEUE_RESIZE_LABEL_Y\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\t//Create new array\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING \n\t\t\t+ (RESIZE_ARRAY_START_Y);\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayIDNew[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelIDNew[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelIDNew[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.arrayMoveID = new Array(this.size);\n\n\t\t//Move old elements to new array\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst xposinit = (((this.front + i) % this.arrayData.length) % ARRAY_ELEMS_PER_LINE) \n\t\t\t* ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst yposinit = Math.floor(((this.front + i) % this.arrayData.length) / ARRAY_ELEMS_PER_LINE) \n\t\t\t* ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tconst xpos = (((i + frontOffset) % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X);\n\t\t\tconst ypos = Math.floor((i + frontOffset) / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\n\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i],\n\t\t\t\tthis.arrayData[(this.front + i) % this.arrayData.length],\n\t\t\t\txposinit,\n\t\t\t\typosinit\n\t\t\t);\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos, ypos);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\t//Delete movement objects and set text\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\tthis.cmd(act.setText, this.arrayIDNew[i + frontOffset], this.arrayDataNew[i + frontOffset]);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//Delete old array\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t\tthis.cmd(act.delete, this.arrayLabelID[i]);\n\t\t}\n\n\t\t//Move new array\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = ((i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X);\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tthis.cmd(act.move, this.arrayIDNew[i], xpos, ypos);\n\t\t\tthis.cmd(act.move, this.arrayLabelIDNew[i], xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.front = 0;\n\t\tthis.arrayID = this.arrayIDNew;\n\t\tthis.arrayLabelID = this.arrayLabelIDNew;\n\t\tthis.arrayData = this.arrayDataNew;\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.move, this.frontPointerID, ARRAY_START_X, ARRAY_START_Y + FRONT_LABEL_OFFSET);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 0);\n\n\t\t//Delete '(resize required)' text, create circle at the \"size\" object, add enqueue text\n\t\t\n\t\tconst addIndex = (!isFront) ? (this.front + this.size) % this.arrayDataNew.length : this.front;\n\n\t\tthis.cmd(act.delete, labEnqueueResizeID);\n\n\t\t//Just so the element travels over the array instead of underneath it\n\t\tthis.cmd(act.delete, labEnqueueValID);\n\t\tconst labEnqueueValIDNew = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, labEnqueueValIDNew, elemToEnqueue, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (isFront) {\n\t\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, FRONT_POS_X, FRONT_POS_Y);\n\t\t} else {\n\t\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (addIndex % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(addIndex / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\n\n\t\tthis.cmd(\n\t\t\tact.move,\n\t\t\tthis.highlight1ID,\n\t\t\tthis.front * ARRAY_ELEM_WIDTH + ARRAY_START_X,\n\t\t\typos + ARRAY_ELEM_HEIGHT,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, labEnqueueValIDNew, xpos, ypos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, labEnqueueValIDNew);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.arrayData[addIndex] = elemToEnqueue;\n\t\tthis.cmd(act.setText, this.arrayID[addIndex], elemToEnqueue);\n\t\tthis.cmd(act.step);\n\n\t\t\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.sizeID, this.size + 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\n\t\tthis.cmd(act.delete, labEnqueueID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.size++;\n\n\t\tthis.nextIndex = this.nextIndex - this.size;\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t}\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.cmd(act.setText, this.frontID, '0');\n\t\tthis.cmd(act.setText, this.sizeID, '0');\n\t\tthis.cmd(\n\t\t\tact.setPosition, \n\t\t\tthis.frontPointerID, \n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + FRONT_LABEL_OFFSET);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 100;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 150;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class DequeLL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\t// Add's value text field\n\t\tthis.addField = addControlToAlgorithmBar('Text', '');\n\t\tthis.addField.onkeydown = this.returnSubmit(this.addField, null, 4);\n\t\tthis.controls.push(this.addField);\n\n\t\t// Add first button\n\t\tthis.addFirstButton = addControlToAlgorithmBar('Button', 'Add First');\n\t\tthis.addFirstButton.onclick = this.addFirstCallback.bind(this);\n\t\tthis.controls.push(this.addFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Add last button\n\t\tthis.addLastButton = addControlToAlgorithmBar('Button', 'Add Last');\n\t\tthis.addLastButton.onclick = this.addLastCallback.bind(this);\n\t\tthis.controls.push(this.addLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Remove first button\n\t\tthis.removeFirstButton = addControlToAlgorithmBar('Button', 'Remove First');\n\t\tthis.removeFirstButton.onclick = this.removeFirstCallback.bind(this);\n\t\tthis.controls.push(this.removeFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Remove last button\n\t\tthis.removeLastButton = addControlToAlgorithmBar('Button', 'Remove Last');\n\t\tthis.removeLastButton.onclick = this.removeLastCallback.bind(this);\n\t\tthis.controls.push(this.removeLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddFirstCallback() {\n\t\tif (this.addField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addField.value);\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddLastCallback() {\n\t\tif (this.addField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addField.value);\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveFirstCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveLastCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// getCallback(event)\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createDoublyLinkedListNode,\n\t\t\tthis.linkedListElemID[index],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (index === 0) {\n\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (index === this.size) {\n\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (this.size !== 0) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t} else if (index === this.size) {\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.resetNodePositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 1);\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 1);\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[index]);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n}\n","class PriorityQueue {\n\tconstructor() {\n\t\tthis.backingArray = [];\n\t}\n\n\tenqueue(data, id, priority) {\n\t\tthis.backingArray.push([data, id, priority]);\n\t\tthis.backingArray.sort((a, b) => {\n\t\t\tif (a[2] !== b[2]) {\n\t\t\t\treturn a[2] - b[2];\n\t\t\t} else {\n\t\t\t\tif (Array.isArray(a[0])) {\n\t\t\t\t\tif (a[0][0] !== b[0][0]) {\n\t\t\t\t\t\treturn a[0][0] - b[0][0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn a[0][1] - b[0][1];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn a[0] - b[0];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tdequeue() {\n\t\tconst x = this.backingArray.shift();\n\t\treturn [x[0], x[1]];\n\t}\n\n\tsize() {\n\t\treturn this.backingArray.length;\n\t}\n\n\tgetIDs() {\n\t\treturn this.backingArray.map(x => x[1]);\n\t}\n}\n\nexport default PriorityQueue;\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Graph, { VERTEX_INDEX_COLOR } from './Graph.js';\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { DIJKSTRAS_ADJ_LIST } from './util/GraphValues';\nimport PriorityQueue from './util/PriorityQueue';\nimport { act } from '../anim/AnimationMain';\n\nconst PQ_DEQUEUED_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 65;\nconst VISITED_SPACING = 20;\n\nconst CURRENT_VERTEX_LABEL_X = 25;\nconst CURRENT_VERTEX_LABEL_Y = 85;\nconst CURRENT_VERTEX_X = 110;\nconst CURRENT_VERTEX_Y = 85;\n\nconst PQ_LABEL_X = 25;\nconst PQ_LABEL_Y = 110;\n\nconst PQ_X = 110;\nconst PQ_Y = 110;\nconst PQ_SPACING = 42;\nconst PQ_LINE_SPACING = 25;\nconst PQ_MAX_PER_LINE = 9;\n\nconst TABLE_ENTRY_WIDTH = 50;\nconst SMALL_TABLE_ENTRY_HEIGHT = 20;\nconst LARGE_TABLE_ENTRY_HEIGHT = 17;\nconst TABLE_START_X = 50;\nconst TABLE_START_Y = 180;\n\nexport default class Dijkstras extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, DIJKSTRAS_ADJ_LIST, false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.startField.size = 2;\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\n\t\tthis.commands = [];\n\n\t\tthis.vertexID = new Array(this.size);\n\n\t\tthis.distance = new Array(this.size);\n\t\tthis.distanceID = new Array(this.size);\n\n\t\tthis.visited = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.pq = new PriorityQueue();\n\n\t\tthis.tableEntryHeight = this.isLarge ? LARGE_TABLE_ENTRY_HEIGHT : SMALL_TABLE_ENTRY_HEIGHT;\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.vertexID[i] = this.nextIndex++;\n\t\t\tthis.distanceID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.vertexID[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tTABLE_ENTRY_WIDTH,\n\t\t\t\tthis.tableEntryHeight,\n\t\t\t\tTABLE_START_X,\n\t\t\t\tTABLE_START_Y + i * this.tableEntryHeight,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.distanceID[i],\n\t\t\t\t'',\n\t\t\t\tTABLE_ENTRY_WIDTH,\n\t\t\t\tthis.tableEntryHeight,\n\t\t\t\tTABLE_START_X + TABLE_ENTRY_WIDTH,\n\t\t\t\tTABLE_START_Y + i * this.tableEntryHeight,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.vertexID[i], VERTEX_INDEX_COLOR);\n\t\t}\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current vertex:',\n\t\t\tCURRENT_VERTEX_LABEL_X,\n\t\t\tCURRENT_VERTEX_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.createLabel, this.nextIndex++, 'Priority Queue:', PQ_LABEL_X, PQ_LABEL_Y, 0);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Distance Map:',\n\t\t\tTABLE_START_X + 0.5 * TABLE_ENTRY_WIDTH,\n\t\t\tTABLE_START_Y - SMALL_TABLE_ENTRY_HEIGHT,\n\t\t);\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.comparisonMessageID = this.nextIndex++;\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.messageID = [];\n\t\tthis.visitedID = [];\n\t\tthis.pq = new PriorityQueue();\n\t}\n\n\tstartCallback() {\n\t\tlet startvalue;\n\n\t\tif (this.startField.value !== '') {\n\t\t\tstartvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size)\n\t\t\t\tthis.implementAction(this.doDijkstra.bind(this), startvalue);\n\t\t}\n\t}\n\n\tdoDijkstra(startVertex) {\n\t\tthis.commands = [];\n\n\t\tlet current = startVertex;\n\t\tlet currentID = this.nextIndex++;\n\n\t\tthis.clear();\n\n\t\tthis.visitedID = [];\n\n\t\tthis.distance[current] = 0;\n\t\tthis.cmd(act.setText, this.distanceID[current], 0);\n\n\t\tthis.pq = new PriorityQueue();\n\t\tthis.pq.enqueue(current, currentID, 0);\n\t\tthis.cmd(act.createLabel, currentID, '(' + this.toStr(current) + ', 0)', PQ_X, PQ_Y, 0);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Enqueueing ' + this.toStr(current) + ' with distance 0 and updating distance map',\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\twhile (this.visited.includes(false) && this.pq.size() !== 0) {\n\t\t\t[current, currentID] = this.pq.dequeue();\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Dequeueing ' + this.toStr(current));\n\t\t\tthis.cmd(act.move, currentID, CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\t\tthis.cmd(act.setText, currentID, this.toStr(current));\n\t\t\tthis.cmd(act.setTextColor, currentID, PQ_DEQUEUED_COLOR);\n\t\t\tlet pqIDs = this.pq.getIDs();\n\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tpqIDs[i],\n\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.visitVertex(current);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (!this.visited[current]) {\n\t\t\t\tthis.visited[current] = true;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Adding ' + this.toStr(current) + ' to visited set',\n\t\t\t\t);\n\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\tthis.toStr(current),\n\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * VISITED_SPACING,\n\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[current], VISITED_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Updating neighbors of vertex ' + this.toStr(current),\n\t\t\t\t);\n\t\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\t\tif (this.adj_matrix[current][neighbor] >= 0) {\n\t\t\t\t\t\tthis.highlightEdge(current, neighbor, 1);\n\t\t\t\t\t\tif (this.visited[neighbor]) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\tthis.toStr(neighbor) + ' has already been visited, skipping',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Comparing distances');\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[current], 1);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[neighbor], 1);\n\t\t\t\t\t\t\tconst curDist = this.distance[current];\n\t\t\t\t\t\t\tconst edgDist = this.adj_matrix[current][neighbor];\n\t\t\t\t\t\t\tconst newDist = curDist + edgDist;\n\t\t\t\t\t\t\tconst oldDist = this.distance[neighbor];\n\t\t\t\t\t\t\tconst oldDistStr =\n\t\t\t\t\t\t\t\toldDist >= 0 ? String(this.distance[neighbor]) : 'INF';\n\n\t\t\t\t\t\t\tif (oldDist < 0 || newDist < oldDist) {\n\t\t\t\t\t\t\t\tthis.distance[neighbor] = newDist;\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tthis.comparisonMessageID,\n\t\t\t\t\t\t\t\t\t'New distance (' +\n\t\t\t\t\t\t\t\t\t\tcurDist +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tedgDist +\n\t\t\t\t\t\t\t\t\t\t' = ' +\n\t\t\t\t\t\t\t\t\t\tnewDist +\n\t\t\t\t\t\t\t\t\t\t') is less than old distance (' +\n\t\t\t\t\t\t\t\t\t\toldDistStr +\n\t\t\t\t\t\t\t\t\t\t'), updating',\n\t\t\t\t\t\t\t\t\tTABLE_START_X + 2 * TABLE_ENTRY_WIDTH - 15,\n\t\t\t\t\t\t\t\t\tTABLE_START_Y + neighbor * this.tableEntryHeight - 5,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Updating distance');\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tthis.distanceID[neighbor],\n\t\t\t\t\t\t\t\t\tthis.distance[neighbor],\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[current], 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[neighbor], 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, this.comparisonMessageID);\n\t\t\t\t\t\t\t\tthis.pq.enqueue(neighbor, this.nextIndex, newDist);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t\t'Enqueueing ' +\n\t\t\t\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t\t\t' with distance ' +\n\t\t\t\t\t\t\t\t\t\tnewDist,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\t\t\t'(' + this.toStr(neighbor) + ', ' + newDist + ')',\n\t\t\t\t\t\t\t\t\tPQ_X + ((this.pq.size() - 1) % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\t\tPQ_Y +\n\t\t\t\t\t\t\t\t\t\tMath.floor((this.pq.size() - 1) / PQ_MAX_PER_LINE) *\n\t\t\t\t\t\t\t\t\t\t\tPQ_LINE_SPACING,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\t\tconst newPqIDs = this.pq.getIDs();\n\t\t\t\t\t\t\t\tif (String(pqIDs) !== String(newPqIDs.slice(0, -1))) {\n\t\t\t\t\t\t\t\t\t// Check if newly enqueued element shifted things\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\t\t\tnewPqIDs[i],\n\t\t\t\t\t\t\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\t\t\t\tPQ_Y +\n\t\t\t\t\t\t\t\t\t\t\t\tMath.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tpqIDs = newPqIDs;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tthis.comparisonMessageID,\n\t\t\t\t\t\t\t\t\t'New distance (' +\n\t\t\t\t\t\t\t\t\t\tcurDist +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tedgDist +\n\t\t\t\t\t\t\t\t\t\t' = ' +\n\t\t\t\t\t\t\t\t\t\tnewDist +\n\t\t\t\t\t\t\t\t\t\t') is greater than or equal to old distance (' +\n\t\t\t\t\t\t\t\t\t\toldDistStr +\n\t\t\t\t\t\t\t\t\t\t'), skipping',\n\t\t\t\t\t\t\t\t\tTABLE_START_X + 2 * TABLE_ENTRY_WIDTH - 15,\n\t\t\t\t\t\t\t\t\tTABLE_START_Y + neighbor * this.tableEntryHeight - 5,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, this.comparisonMessageID);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[current], 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[neighbor], 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.highlightEdge(current, neighbor, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\tthis.toStr(current) + ' has already been visited, skipping',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.leaveVertex();\n\t\t\tthis.cmd(act.delete, currentID);\n\t\t}\n\n\t\tif (this.pq.size() > 0) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'All vertices have been visited, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Priority queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.cmd(act.setText, this.distanceID[i], 'INF');\n\t\t\tthis.visited[i] = false;\n\t\t\tthis.distance[i] = -1;\n\t\t}\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tconst pqIDs = this.pq.getIDs();\n\t\tfor (const id of pqIDs) {\n\t\t\tthis.cmd(act.delete, id);\n\t\t}\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 100;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 150;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class DoublyLinkedList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddIndexCallback() {\n\t\tif (this.addValueField.value !== '' && this.addIndexField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tconst index = parseInt(this.addIndexField.value);\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// DoublyLinkedList.prototype.getCallback = function(event)\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createDoublyLinkedListNode,\n\t\t\tthis.linkedListElemID[index],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (index === 0) {\n\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (index === this.size) {\n\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (this.size !== 0) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t} else if (index === this.size) {\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.resetNodePositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 1);\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 1);\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[index]);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Graph, { LARGE_SIZE, SMALL_SIZE } from './Graph.js';\nimport { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst SMALL_COST_TABLE_WIDTH = 30;\nconst SMALL_COST_TABLE_HEIGHT = 30;\nconst SMALL_COST_TABLE_START_X = 40;\nconst SMALL_COST_TABLE_START_Y = 70;\n\nconst SMALL_PATH_TABLE_WIDTH = 30;\nconst SMALL_PATH_TABLE_HEIGHT = 30;\nconst SMALL_PATH_TABLE_START_X = 330;\nconst SMALL_PATH_TABLE_START_Y = 70;\n\nconst SMALL_NODE_1_X_POS = 50;\nconst SMALL_NODE_1_Y_POS = 400;\nconst SMALL_NODE_2_X_POS = 150;\nconst SMALL_NODE_2_Y_POS = 350;\nconst SMALL_NODE_3_X_POS = 250;\nconst SMALL_NODE_3_Y_POS = 400;\n\nconst SMALL_MESSAGE_X = 400;\nconst SMALL_MESSAGE_Y = 350;\n\nconst LARGE_COST_TABLE_WIDTH = 20;\nconst LARGE_COST_TABLE_HEIGHT = 20;\nconst LARGE_COST_TABLE_START_X = 40;\nconst LARGE_COST_TABLE_START_Y = 50;\n\nconst LARGE_PATH_TABLE_WIDTH = 20;\nconst LARGE_PATH_TABLE_HEIGHT = 20;\nconst LARGE_PATH_TABLE_START_X = 500;\nconst LARGE_PATH_TABLE_START_Y = 50;\n\nconst LARGE_NODE_1_X_POS = 50;\nconst LARGE_NODE_1_Y_POS = 500;\nconst LARGE_NODE_2_X_POS = 150;\nconst LARGE_NODE_2_Y_POS = 450;\nconst LARGE_NODE_3_X_POS = 250;\nconst LARGE_NODE_3_Y_POS = 500;\n\nconst LARGE_MESSAGE_X = 300;\nconst LARGE_MESSAGE_Y = 450;\n\nexport default class Floyd extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, [], false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t\tthis.smallGraphButton.onclick = this.smallGraphCallback.bind(this);\n\t\tthis.largeGraphButton.onclick = this.largeGraphCallback.bind(this);\n\t}\n\n\treset() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tthis.costTable[i][j] = this.adj_matrix[i][j];\n\t\t\t\tif (this.costTable[i][j] >= 0) {\n\t\t\t\t\tthis.pathTable[i][j] = i;\n\t\t\t\t} else {\n\t\t\t\t\tthis.pathTable[i][j] = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsmallGraphCallback() {\n\t\tif (this.size !== SMALL_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\t\tthis.logicalButton.disabled = false;\n\t\t\tthis.adjacencyListButton.disabled = false;\n\t\t\tthis.adjacencyMatrixButton.disabled = false;\n\t\t\tthis.setup_small();\n\t\t}\n\t}\n\n\tlargeGraphCallback() {\n\t\tif (this.size !== LARGE_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\t//this.animationManager.setAllLayers([0]);\n\t\t\tthis.logicalButton.disabled = true;\n\t\t\tthis.adjacencyListButton.disabled = true;\n\t\t\tthis.adjacencyMatrixButton.disabled = true;\n\t\t\tthis.setup_large();\n\t\t}\n\t}\n\n\tgetCostLabel(value, alwaysUseINF) {\n\t\talwaysUseINF = alwaysUseINF === undefined ? false : alwaysUseINF;\n\t\tif (value >= 0) {\n\t\t\treturn String(value);\n\t\t} else if (this.size === SMALL_SIZE || alwaysUseINF) {\n\t\t\treturn 'INF';\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tsetup_small() {\n\t\tthis.cost_table_width = SMALL_COST_TABLE_WIDTH;\n\t\tthis.cost_table_height = SMALL_COST_TABLE_HEIGHT;\n\t\tthis.cost_table_start_x = SMALL_COST_TABLE_START_X;\n\t\tthis.cost_table_start_y = SMALL_COST_TABLE_START_Y;\n\n\t\tthis.path_table_width = SMALL_PATH_TABLE_WIDTH;\n\t\tthis.path_table_height = SMALL_PATH_TABLE_HEIGHT;\n\t\tthis.path_table_start_x = SMALL_PATH_TABLE_START_X;\n\t\tthis.path_table_start_y = SMALL_PATH_TABLE_START_Y;\n\n\t\tthis.node_1_x_pos = SMALL_NODE_1_X_POS;\n\t\tthis.node_1_y_pos = SMALL_NODE_1_Y_POS;\n\t\tthis.node_2_x_pos = SMALL_NODE_2_X_POS;\n\t\tthis.node_2_y_pos = SMALL_NODE_2_Y_POS;\n\t\tthis.node_3_x_pos = SMALL_NODE_3_X_POS;\n\t\tthis.node_3_y_pos = SMALL_NODE_3_Y_POS;\n\n\t\tthis.message_x = SMALL_MESSAGE_X;\n\t\tthis.message_y = SMALL_MESSAGE_Y;\n\t\tsuper.setup_small();\n\t}\n\n\tsetup_large() {\n\t\tthis.cost_table_width = LARGE_COST_TABLE_WIDTH;\n\t\tthis.cost_table_height = LARGE_COST_TABLE_HEIGHT;\n\t\tthis.cost_table_start_x = LARGE_COST_TABLE_START_X;\n\t\tthis.cost_table_start_y = LARGE_COST_TABLE_START_Y;\n\n\t\tthis.path_table_width = LARGE_PATH_TABLE_WIDTH;\n\t\tthis.path_table_height = LARGE_PATH_TABLE_HEIGHT;\n\t\tthis.path_table_start_x = LARGE_PATH_TABLE_START_X;\n\t\tthis.path_table_start_y = LARGE_PATH_TABLE_START_Y;\n\n\t\tthis.node_1_x_pos = LARGE_NODE_1_X_POS;\n\t\tthis.node_1_y_pos = LARGE_NODE_1_Y_POS;\n\t\tthis.node_2_x_pos = LARGE_NODE_2_X_POS;\n\t\tthis.node_2_y_pos = LARGE_NODE_2_Y_POS;\n\t\tthis.node_3_x_pos = LARGE_NODE_3_X_POS;\n\t\tthis.node_3_y_pos = LARGE_NODE_3_Y_POS;\n\n\t\tthis.message_x = LARGE_MESSAGE_X;\n\t\tthis.message_y = LARGE_MESSAGE_Y;\n\n\t\tsuper.setup_large();\n\t}\n\n\tsetup() {\n\t\tsuper.setup();\n\t\tthis.commands = [];\n\n\t\tthis.costTable = new Array(this.size);\n\t\tthis.pathTable = new Array(this.size);\n\t\tthis.costTableID = new Array(this.size);\n\t\tthis.pathTableID = new Array(this.size);\n\t\tthis.pathIndexXID = new Array(this.size);\n\t\tthis.pathIndexYID = new Array(this.size);\n\t\tthis.costIndexXID = new Array(this.size);\n\t\tthis.costIndexYID = new Array(this.size);\n\n\t\tthis.node1ID = this.nextIndex++;\n\t\tthis.node2ID = this.nextIndex++;\n\t\tthis.node3ID = this.nextIndex++;\n\n\t\tlet i;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.costTable[i] = new Array(this.size);\n\t\t\tthis.pathTable[i] = new Array(this.size);\n\t\t\tthis.costTableID[i] = new Array(this.size);\n\t\t\tthis.pathTableID[i] = new Array(this.size);\n\t\t}\n\n\t\tconst costTableHeader = this.nextIndex++;\n\t\tconst pathTableHeader = this.nextIndex++;\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tcostTableHeader,\n\t\t\t'Cost Table',\n\t\t\tthis.cost_table_start_x,\n\t\t\tthis.cost_table_start_y - 2 * this.cost_table_height,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tpathTableHeader,\n\t\t\t'Path Table',\n\t\t\tthis.path_table_start_x,\n\t\t\tthis.path_table_start_y - 2 * this.path_table_height,\n\t\t\t0,\n\t\t);\n\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.pathIndexXID[i] = this.nextIndex++;\n\t\t\tthis.pathIndexYID[i] = this.nextIndex++;\n\t\t\tthis.costIndexXID[i] = this.nextIndex++;\n\t\t\tthis.costIndexYID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.pathIndexXID[i],\n\t\t\t\ti,\n\t\t\t\tthis.path_table_start_x + i * this.path_table_width,\n\t\t\t\tthis.path_table_start_y - this.path_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.pathIndexXID[i], '#0000FF');\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.pathIndexYID[i],\n\t\t\t\ti,\n\t\t\t\tthis.path_table_start_x - this.path_table_width,\n\t\t\t\tthis.path_table_start_y + i * this.path_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.pathIndexYID[i], '#0000FF');\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.costIndexXID[i],\n\t\t\t\ti,\n\t\t\t\tthis.cost_table_start_x + i * this.cost_table_width,\n\t\t\t\tthis.cost_table_start_y - this.cost_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.costIndexXID[i], '#0000FF');\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.costIndexYID[i],\n\t\t\t\ti,\n\t\t\t\tthis.cost_table_start_x - this.cost_table_width,\n\t\t\t\tthis.cost_table_start_y + i * this.cost_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.costIndexYID[i], '#0000FF');\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tthis.costTable[i][j] = this.adj_matrix[i][j];\n\t\t\t\tif (this.costTable[i][j] >= 0) {\n\t\t\t\t\tthis.pathTable[i][j] = i;\n\t\t\t\t} else {\n\t\t\t\t\tthis.pathTable[i][j] = -1;\n\t\t\t\t}\n\t\t\t\tthis.costTableID[i][j] = this.nextIndex++;\n\t\t\t\tthis.pathTableID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.costTableID[i][j],\n\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true),\n\t\t\t\t\tthis.cost_table_width,\n\t\t\t\t\tthis.cost_table_height,\n\t\t\t\t\tthis.cost_table_start_x + j * this.cost_table_width,\n\t\t\t\t\tthis.cost_table_start_y + i * this.cost_table_height,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.pathTableID[i][j],\n\t\t\t\t\tthis.pathTable[i][j],\n\t\t\t\t\tthis.path_table_width,\n\t\t\t\t\tthis.path_table_height,\n\t\t\t\t\tthis.path_table_start_x + j * this.path_table_width,\n\t\t\t\t\tthis.path_table_start_y + i * this.path_table_height,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tif (this.size === LARGE_SIZE) {\n\t\t\tthis.animationManager.setAllLayers([0]);\n\t\t}\n\t}\n\n\tstartCallback() {\n\t\tthis.implementAction(this.doFloydWarshall.bind(this));\n\t}\n\n\tdoFloydWarshall() {\n\t\tthis.commands = [];\n\n\t\tconst oldIndex = this.nextIndex;\n\t\tconst messageID = this.nextIndex++;\n\t\tconst moveLabel1ID = this.nextIndex++;\n\t\tconst moveLabel2ID = this.nextIndex++;\n\n\t\tthis.cmd(act.createCircle, this.node1ID, '', this.node_1_x_pos, this.node_1_y_pos);\n\t\tthis.cmd(act.createCircle, this.node2ID, '', this.node_2_x_pos, this.node_2_y_pos);\n\t\tthis.cmd(act.createCircle, this.node3ID, '', this.node_3_x_pos, this.node_3_y_pos);\n\t\tthis.cmd(act.createLabel, messageID, '', this.message_x, this.message_y, 0);\n\n\t\tfor (let k = 0; k < this.size; k++) {\n\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\t\tif (i !== j && j !== k && i !== k) {\n\t\t\t\t\t\tthis.cmd(act.setText, this.node1ID, i);\n\t\t\t\t\t\tthis.cmd(act.setText, this.node2ID, k);\n\t\t\t\t\t\tthis.cmd(act.setText, this.node3ID, j);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.node1ID,\n\t\t\t\t\t\t\tthis.node2ID,\n\t\t\t\t\t\t\t'#009999',\n\t\t\t\t\t\t\t-0.1,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.node2ID,\n\t\t\t\t\t\t\tthis.node3ID,\n\t\t\t\t\t\t\t'#9900CC',\n\t\t\t\t\t\t\t-0.1,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.node1ID,\n\t\t\t\t\t\t\tthis.node3ID,\n\t\t\t\t\t\t\t'#CC0000',\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][k], 1);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[k][j], 1);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][j], 1);\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][k], '#009999');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[k][j], '#9900CC');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][j], '#CC0000');\n\t\t\t\t\t\tif (this.costTable[i][k] >= 0 && this.costTable[k][j] >= 0) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tthis.costTable[i][j] < 0 ||\n\t\t\t\t\t\t\t\tthis.costTable[i][k] + this.costTable[k][j] < this.costTable[i][j]\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tmessageID,\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true) +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true) +\n\t\t\t\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.costTable[i][j] = this.costTable[i][k] + this.costTable[k][j];\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.pathTableID[i][j], '');\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.costTableID[i][j], '');\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tmoveLabel1ID,\n\t\t\t\t\t\t\t\t\tthis.pathTable[k][j],\n\t\t\t\t\t\t\t\t\tthis.path_table_start_x + j * this.path_table_width,\n\t\t\t\t\t\t\t\t\tthis.path_table_start_y + k * this.path_table_height,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\tmoveLabel1ID,\n\t\t\t\t\t\t\t\t\tthis.path_table_start_x + j * this.path_table_width,\n\t\t\t\t\t\t\t\t\tthis.path_table_start_y + i * this.path_table_height,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tmoveLabel2ID,\n\t\t\t\t\t\t\t\t\tthis.costTable[i][j],\n\t\t\t\t\t\t\t\t\tthis.message_x,\n\t\t\t\t\t\t\t\t\tthis.message_y,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, moveLabel2ID, 1);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\tmoveLabel2ID,\n\t\t\t\t\t\t\t\t\tthis.cost_table_start_x + j * this.cost_table_width,\n\t\t\t\t\t\t\t\t\tthis.cost_table_start_y + i * this.cost_table_height,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.pathTable[i][j] = this.pathTable[k][j];\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.costTableID[i][j], this.costTable[i][j]);\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.pathTableID[i][j], this.pathTable[i][j]);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, moveLabel1ID);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, moveLabel2ID);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tmessageID,\n\t\t\t\t\t\t\t\t\t'!(' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true) +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true) +\n\t\t\t\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true) +\n\t\t\t\t\t\t\t\t\t\t')',\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tmessageID,\n\t\t\t\t\t\t\t\t'!(' +\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true) +\n\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true) +\n\t\t\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true) +\n\t\t\t\t\t\t\t\t\t')',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][k], '#000000');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[k][j], '#000000');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][j], '#000000');\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.node1ID, this.node2ID);\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.node2ID, this.node3ID);\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.node1ID, this.node3ID);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][k], 0);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[k][j], 0);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][j], 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.delete, this.node1ID);\n\t\tthis.cmd(act.delete, this.node2ID);\n\t\tthis.cmd(act.delete, this.node3ID);\n\t\tthis.cmd(act.delete, messageID);\n\t\tthis.nextIndex = oldIndex;\n\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_SIZE = 32;\nconst ARRAY_ELEM_WIDTH = 30;\nconst ARRAY_ELEM_HEIGHT = 25;\nconst ARRAY_INITIAL_X = 30;\n\nconst ARRAY_Y_POS = 50;\nconst ARRAY_LABEL_Y_POS = 75;\n\nconst HEAP_X_POSITIONS = [\n\t0,\n\t450,\n\t250,\n\t650,\n\t150,\n\t350,\n\t550,\n\t750,\n\t100,\n\t200,\n\t300,\n\t400,\n\t500,\n\t600,\n\t700,\n\t800,\n\t75,\n\t125,\n\t175,\n\t225,\n\t275,\n\t325,\n\t375,\n\t425,\n\t475,\n\t525,\n\t575,\n\t625,\n\t675,\n\t725,\n\t775,\n\t825,\n];\n\nconst HEAP_Y_POSITIONS = [\n\t0,\n\t110,\n\t180,\n\t180,\n\t250,\n\t250,\n\t250,\n\t250,\n\t320,\n\t320,\n\t320,\n\t320,\n\t320,\n\t320,\n\t320,\n\t320,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n];\n\nexport default class Heap extends Algorithm {\n\tconstructor(am) {\n\t\tsuper(am);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.createArray();\n\t}\n\n\taddControls() {\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Enqueue');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.removeButton = addControlToAlgorithmBar('Button', 'Dequeue');\n\t\tthis.removeButton.onclick = this.removeCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma separated list (e.g. \"3,1,2\", max 31 elements)',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\tthis.buildHeapField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.buildHeapField.onkeydown = this.returnSubmit(\n\t\t\tthis.buildHeapField,\n\t\t\tthis.buildHeapCallback.bind(this),\n\t\t\t61,\n\t\t\tfalse,\n\t\t);\n\n\t\tthis.buildHeapButton = addControlToAlgorithmBar('Button', 'BuildHeap', horizontalGroup);\n\t\tthis.buildHeapButton.onclick = this.buildHeapCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst minMaxButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['MinHeap', 'MaxHeap'],\n\t\t\t'MinHeap/MaxHeap',\n\t\t);\n\n\t\tthis.minHeapButton = minMaxButtonList[0];\n\t\tthis.minHeapButton.onclick = this.minHeapCallback.bind(this);\n\t\tthis.minHeapButton.checked = true;\n\t\tthis.maxHeapButton = minMaxButtonList[1];\n\t\tthis.maxHeapButton.onclick = this.maxHeapCallback.bind(this);\n\t\tthis.isMinHeap = true;\n\t}\n\n\tcreateArray() {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData = new Array(ARRAY_SIZE);\n\t\tthis.arrayLabels = new Array(ARRAY_SIZE);\n\t\tthis.arrayRects = new Array(ARRAY_SIZE);\n\t\tthis.circleObjs = new Array(ARRAY_SIZE);\n\t\tthis.arrayXPositions = new Array(ARRAY_SIZE);\n\t\tthis.currentHeapSize = 0;\n\n\t\tfor (let i = 0; i < ARRAY_SIZE; i++) {\n\t\t\tthis.arrayXPositions[i] = ARRAY_INITIAL_X + i * ARRAY_ELEM_WIDTH;\n\t\t\tthis.arrayLabels[i] = this.nextIndex++;\n\t\t\tthis.arrayRects[i] = this.nextIndex++;\n\t\t\tthis.circleObjs[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayRects[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\tthis.arrayXPositions[i],\n\t\t\t\tARRAY_Y_POS,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.arrayLabels[i],\n\t\t\t\ti,\n\t\t\t\tthis.arrayXPositions[i],\n\t\t\t\tARRAY_LABEL_Y_POS,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabels[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.setText, this.arrayRects[0], 'null');\n\t\tthis.swapLabel1 = this.nextIndex++;\n\t\tthis.swapLabel2 = this.nextIndex++;\n\t\tthis.swapLabel3 = this.nextIndex++;\n\t\tthis.swapLabel4 = this.nextIndex++;\n\t\tthis.descriptLabel1 = this.nextIndex++;\n\t\tthis.descriptLabel2 = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.descriptLabel1, '', 20, 10, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.normalizeNumber(this.insertField.value, 4);\n\t\tif (insertedValue !== '') {\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tremoveCallback() {\n\t\tthis.implementAction(this.remove.bind(this));\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tbuildHeapCallback() {\n\t\tif (this.buildHeapField.value !== '') {\n\t\t\tconst list = this.buildHeapField.value;\n\t\t\tthis.buildHeapField.value = '';\n\t\t\tthis.implementAction(this.buildHeap.bind(this), list);\n\t\t}\n\t}\n\n\tminHeapCallback() {\n\t\tif (!this.isMinHeap) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.isMinHeap = true;\n\t\t}\n\t}\n\n\tmaxHeapCallback() {\n\t\tif (this.isMinHeap) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.isMinHeap = false;\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\twhile (this.currentHeapSize > 0) {\n\t\t\tthis.cmd(act.delete, this.circleObjs[this.currentHeapSize]);\n\t\t\tthis.cmd(act.setText, this.arrayRects[this.currentHeapSize], '');\n\t\t\tthis.currentHeapSize--;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\treset() {\n\t\tthis.currentHeapSize = 0;\n\t}\n\n\tswap(index1, index2) {\n\t\tthis.cmd(act.setText, this.arrayRects[index1], '');\n\t\tthis.cmd(act.setText, this.arrayRects[index2], '');\n\t\tthis.cmd(act.setText, this.circleObjs[index1], '');\n\t\tthis.cmd(act.setText, this.circleObjs[index2], '');\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel1,\n\t\t\tthis.arrayData[index1],\n\t\t\tthis.arrayXPositions[index1],\n\t\t\tARRAY_Y_POS,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel2,\n\t\t\tthis.arrayData[index2],\n\t\t\tthis.arrayXPositions[index2],\n\t\t\tARRAY_Y_POS,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel3,\n\t\t\tthis.arrayData[index1],\n\t\t\tHEAP_X_POSITIONS[index1],\n\t\t\tHEAP_Y_POSITIONS[index1],\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel4,\n\t\t\tthis.arrayData[index2],\n\t\t\tHEAP_X_POSITIONS[index2],\n\t\t\tHEAP_Y_POSITIONS[index2],\n\t\t);\n\t\tthis.cmd(act.move, this.swapLabel1, this.arrayXPositions[index2], ARRAY_Y_POS);\n\t\tthis.cmd(act.move, this.swapLabel2, this.arrayXPositions[index1], ARRAY_Y_POS);\n\t\tthis.cmd(act.move, this.swapLabel3, HEAP_X_POSITIONS[index2], HEAP_Y_POSITIONS[index2]);\n\t\tthis.cmd(act.move, this.swapLabel4, HEAP_X_POSITIONS[index1], HEAP_Y_POSITIONS[index1]);\n\t\tconst tmp = this.arrayData[index1];\n\t\tthis.arrayData[index1] = this.arrayData[index2];\n\t\tthis.arrayData[index2] = tmp;\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayRects[index1], this.arrayData[index1]);\n\t\tthis.cmd(act.setText, this.arrayRects[index2], this.arrayData[index2]);\n\t\tthis.cmd(act.setText, this.circleObjs[index1], this.arrayData[index1]);\n\t\tthis.cmd(act.setText, this.circleObjs[index2], this.arrayData[index2]);\n\t\tthis.cmd(act.delete, this.swapLabel1);\n\t\tthis.cmd(act.delete, this.swapLabel2);\n\t\tthis.cmd(act.delete, this.swapLabel3);\n\t\tthis.cmd(act.delete, this.swapLabel4);\n\t}\n\n\tsetIndexHighlight(index, highlightVal) {\n\t\tthis.cmd(act.setHighlight, this.circleObjs[index], highlightVal);\n\t\tthis.cmd(act.setHighlight, this.arrayRects[index], highlightVal);\n\t}\n\n\tpushDown(index) {\n\t\tlet childIndex; // Used to keep track of smallest (in MinHeap) or largest (in MaxHeap) child\n\n\t\twhile (index * 2 <= this.currentHeapSize) {\n\t\t\tchildIndex = 2 * index;\n\n\t\t\tif (index * 2 + 1 <= this.currentHeapSize) {\n\t\t\t\tthis.setIndexHighlight(2 * index, 1);\n\t\t\t\tthis.setIndexHighlight(2 * index + 1, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.setIndexHighlight(2 * index, 0);\n\t\t\t\tthis.setIndexHighlight(2 * index + 1, 0);\n\t\t\t\tif (this.downheapCheckRightChild(index)) {\n\t\t\t\t\tchildIndex = 2 * index + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setIndexHighlight(index, 1);\n\t\t\tthis.setIndexHighlight(childIndex, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.setIndexHighlight(index, 0);\n\t\t\tthis.setIndexHighlight(childIndex, 0);\n\n\t\t\tif (this.downheapCompare(childIndex, index)) {\n\t\t\t\tthis.swap(childIndex, index);\n\t\t\t\tindex = childIndex;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tdownheapCheckRightChild(index) {\n\t\t// Checks if the right child is smaller (in MinHeap) or greater (in MaxHeap) than left child\n\t\tif (this.isMinHeap) {\n\t\t\tif (this.arrayData[2 * index + 1] < this.arrayData[2 * index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.arrayData[2 * index + 1] > this.arrayData[2 * index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tdownheapCompare(childIndex, index) {\n\t\t// Checks if smallest child is smaller than parent (in MinHeap)\n\t\t// or greatest child is greater than parent (in MaxHeap)\n\t\tif (this.isMinHeap) {\n\t\t\tif (this.arrayData[childIndex] < this.arrayData[index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.arrayData[childIndex] > this.arrayData[index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tremove() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.descriptLabel1, '');\n\n\t\tif (this.currentHeapSize === 0) {\n\t\t\tthis.cmd(act.setText, this.descriptLabel1, 'Heap is empty, cannot dequeue');\n\t\t\treturn this.commands;\n\t\t}\n\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Removing element:');\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.descriptLabel2,\n\t\t\tthis.arrayData[1],\n\t\t\tHEAP_X_POSITIONS[1],\n\t\t\tHEAP_Y_POSITIONS[1],\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.setText, this.circleObjs[1], '');\n\t\tthis.cmd(act.move, this.descriptLabel2, 120, 40);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.descriptLabel2);\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Removing element: ' + this.arrayData[1]);\n\t\tthis.arrayData[1] = '';\n\t\tif (this.currentHeapSize > 1) {\n\t\t\tthis.cmd(act.setText, this.arrayRects[1], '');\n\t\t\tthis.cmd(act.setText, this.arrayRects[this.currentHeapSize], '');\n\t\t\tthis.swap(1, this.currentHeapSize);\n\t\t\tthis.cmd(act.delete, this.circleObjs[this.currentHeapSize]);\n\t\t\tthis.currentHeapSize--;\n\t\t\tthis.pushDown(1);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.arrayRects[1], '');\n\t\t\tthis.cmd(act.delete, this.circleObjs[this.currentHeapSize]);\n\t\t\tthis.currentHeapSize--;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tbuildHeap(params) {\n\t\tthis.commands = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',') // Split on commas\n\t\t\t.map(Number) // Map to numbers (to remove invalid characters)\n\t\t\t.filter(x => !Number.isNaN(x)) // Remove stuff that was invalid\n\t\t\t.slice(0, 31); // Get first 31 numbers\n\t\tthis.arrayData.unshift(0); // Add a 0 to start of array\n\t\tthis.clear();\n\t\tfor (let i = 1; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircle,\n\t\t\t\tthis.circleObjs[i],\n\t\t\t\tthis.arrayData[i],\n\t\t\t\tHEAP_X_POSITIONS[i],\n\t\t\t\tHEAP_Y_POSITIONS[i],\n\t\t\t);\n\t\t\tthis.cmd(act.setText, this.arrayRects[i], this.arrayData[i]);\n\t\t\tif (i > 1) {\n\t\t\t\tthis.cmd(act.connect, this.circleObjs[Math.floor(i / 2)], this.circleObjs[i]);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.currentHeapSize = this.arrayData.length - 1;\n\t\tlet nextElem = this.currentHeapSize;\n\t\twhile (nextElem > 0) {\n\t\t\tthis.pushDown(nextElem);\n\t\t\tnextElem = nextElem - 1;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tinsertElement(insertedValue) {\n\t\tthis.commands = [];\n\n\t\tif (this.currentHeapSize >= ARRAY_SIZE - 1) {\n\t\t\tthis.cmd(act.setText, this.descriptLabel1, 'Heap Full!');\n\t\t\treturn this.commands;\n\t\t}\n\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Enqueueing Element: ' + insertedValue);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Enqueueing Element: ');\n\t\tthis.currentHeapSize++;\n\t\tthis.arrayData[this.currentHeapSize] = insertedValue;\n\t\tthis.cmd(\n\t\t\tact.createCircle,\n\t\t\tthis.circleObjs[this.currentHeapSize],\n\t\t\t'',\n\t\t\tHEAP_X_POSITIONS[this.currentHeapSize],\n\t\t\tHEAP_Y_POSITIONS[this.currentHeapSize],\n\t\t);\n\t\tthis.cmd(act.createLabel, this.descriptLabel2, insertedValue, 120, 45, 1);\n\t\tif (this.currentHeapSize > 1) {\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.circleObjs[Math.floor(this.currentHeapSize / 2)],\n\t\t\t\tthis.circleObjs[this.currentHeapSize],\n\t\t\t);\n\t\t}\n\n\t\tthis.cmd(\n\t\t\tact.move,\n\t\t\tthis.descriptLabel2,\n\t\t\tHEAP_X_POSITIONS[this.currentHeapSize],\n\t\t\tHEAP_Y_POSITIONS[this.currentHeapSize],\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.circleObjs[this.currentHeapSize], insertedValue);\n\t\tthis.cmd(act.delete, this.descriptLabel2);\n\t\tthis.cmd(act.setText, this.arrayRects[this.currentHeapSize], insertedValue);\n\n\t\tlet currentIndex = this.currentHeapSize;\n\t\tlet parentIndex = Math.floor(currentIndex / 2);\n\n\t\tif (currentIndex > 1) {\n\t\t\tthis.setIndexHighlight(currentIndex, 1);\n\t\t\tthis.setIndexHighlight(parentIndex, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.setIndexHighlight(currentIndex, 0);\n\t\t\tthis.setIndexHighlight(parentIndex, 0);\n\t\t}\n\n\t\twhile (currentIndex > 1 && this.upheapCompare(currentIndex, parentIndex)) {\n\t\t\tthis.swap(currentIndex, parentIndex);\n\t\t\tcurrentIndex = parentIndex;\n\t\t\tparentIndex = Math.floor(parentIndex / 2);\n\t\t\tif (currentIndex > 1) {\n\t\t\t\tthis.setIndexHighlight(currentIndex, 1);\n\t\t\t\tthis.setIndexHighlight(parentIndex, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.setIndexHighlight(currentIndex, 0);\n\t\t\t\tthis.setIndexHighlight(parentIndex, 0);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.setText, this.descriptLabel1, '');\n\n\t\treturn this.commands;\n\t}\n\n\tupheapCompare(currentIndex, parentIndex) {\n\t\tif (this.isMinHeap) {\n\t\t\tif (this.arrayData[currentIndex] < this.arrayData[parentIndex]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.arrayData[currentIndex] > this.arrayData[parentIndex]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tthis.insertField.disabled = true;\n\t\tthis.insertButton.disabled = true;\n\t\tthis.removeButton.disabled = true;\n\t\tthis.clearButton.disabled = true;\n\t\tthis.buildHeapButton.disabled = true;\n\t\tthis.minHeapButton.disabled = true;\n\t\tthis.maxHeapButton.disabled = true;\n\t}\n\n\tenableUI() {\n\t\tthis.insertField.disabled = false;\n\t\tthis.insertButton.disabled = false;\n\t\tthis.removeButton.disabled = false;\n\t\tthis.clearButton.disabled = false;\n\t\tthis.buildHeapButton.disabled = false;\n\t\tthis.minHeapButton.disabled = false;\n\t\tthis.maxHeapButton.disabled = false;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addLabelToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nexport default class InsertionSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma seperated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\t\tconst length = this.arrayData.length;\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 1; i < this.arrayData.length; i++) {\n\t\t\tfor (let j = i; j >= 1; j--) {\n\t\t\t\tthis.movePointers(j - 1, j);\n\t\t\t\tif (this.arrayData[j] < this.arrayData[j - 1]) {\n\t\t\t\t\tthis.swap(j, j - 1);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (i === 1) this.cmd(act.setBackgroundColor, this.arrayID[0], '#2ECC71');\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\nconst FAILURE_TABLE_START_Y = 100;\n\nexport default class KMP extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Build Failure Table button\n\t\tthis.bftButton = addControlToAlgorithmBar('Button', 'Build Failure Table');\n\t\tthis.bftButton.onclick = this.buildFailureTableCallback.bind(this);\n\t\tthis.controls.push(this.bftButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.failureTableLabelID = this.nextIndex++;\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.failureTableLabelID = this.nextIndex++;\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tbuildFailureTableCallback() {\n\t\tif (this.patternField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.onlyBuildFailureTable.bind(this), 0, pattern);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\tconst maxRows = this.getMaxRows(text, pattern);\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tlet xpos, ypos;\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\typos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst failureTable = this.buildFailureTable(text.length, pattern);\n\t\tconst tableStartX = ARRAY_START_X + text.length * this.cellSize + 110;\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tconst fjPointerID = this.nextIndex++;\n\t\tconst f0PointerID = this.nextIndex++;\n\t\tconst f1PointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tfjPointerID,\n\t\t\t'#FF0000',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tf0PointerID,\n\t\t\t'#FF0000',\n\t\t\ttableStartX,\n\t\t\tFAILURE_TABLE_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tf1PointerID,\n\t\t\t'#FF0000',\n\t\t\ttableStartX,\n\t\t\tFAILURE_TABLE_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(act.setAlpha, fjPointerID, 0);\n\t\tthis.cmd(act.setAlpha, f0PointerID, 0);\n\t\tthis.cmd(act.setAlpha, f1PointerID, 0);\n\n\t\tlet i = 0;\n\t\tlet j = 0;\n\t\tlet row = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t\tif (k - i < j) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][k], '#FFFF4D');\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setAlpha, fjPointerID, 0);\n\t\t\tthis.cmd(act.setAlpha, f0PointerID, 0);\n\t\t\tthis.cmd(act.setAlpha, f1PointerID, 0);\n\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#2ECC71');\n\t\t\t\tj++;\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\txpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (j === 0) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i], '#E74C3C');\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\tthis.comparisonMatrixID[row][i + j],\n\t\t\t\t\t\t'#E74C3C',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconst nextAlignment = failureTable[j - 1];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setPosition,\n\t\t\t\t\tfjPointerID,\n\t\t\t\t\t(i + j - 1) * this.cellSize + ARRAY_START_X,\n\t\t\t\t\t(row + 1) * this.cellSize + ARRAY_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setPosition,\n\t\t\t\t\tf0PointerID,\n\t\t\t\t\ttableStartX + (j - 1) * this.cellSize,\n\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setPosition,\n\t\t\t\t\tf1PointerID,\n\t\t\t\t\ttableStartX + (j - 1) * this.cellSize,\n\t\t\t\t\tFAILURE_TABLE_START_Y + this.cellSize,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setAlpha, fjPointerID, 1);\n\t\t\t\tthis.cmd(act.setAlpha, f0PointerID, 1);\n\t\t\t\tthis.cmd(act.setAlpha, f1PointerID, 1);\n\t\t\t\ti += j - nextAlignment;\n\t\t\t\tj = nextAlignment;\n\t\t\t}\n\t\t\trow++;\n\t\t\tif (i <= text.length - pattern.length) {\n\t\t\t\txpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\tthis.cmd(act.delete, fjPointerID);\n\t\tthis.cmd(act.delete, f0PointerID);\n\t\tthis.cmd(act.delete, f1PointerID);\n\t\treturn this.commands;\n\t}\n\n\tgetMaxRows(text, pattern) {\n\t\tconst failureTable = [];\n\t\tfailureTable[0] = 0;\n\t\tlet i = 0;\n\t\tlet j = 1;\n\t\twhile (j < pattern.length) {\n\t\t\tif (pattern.charAt(i) === pattern.charAt(j)) {\n\t\t\t\ti++;\n\t\t\t\tfailureTable[j] = i;\n\t\t\t\tj++;\n\t\t\t} else {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tfailureTable[j] = i;\n\t\t\t\t\tj++;\n\t\t\t\t} else {\n\t\t\t\t\ti = failureTable[i - 1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ti = 0;\n\t\tj = 0;\n\t\tlet maxRows = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tj++;\n\t\t\t}\n\t\t\tif (j === 0) {\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tconst nextAlignment = failureTable[j - 1];\n\t\t\t\ti += j - nextAlignment;\n\t\t\t\tj = nextAlignment;\n\t\t\t}\n\t\t\tmaxRows++;\n\t\t}\n\t\treturn maxRows;\n\t}\n\n\tonlyBuildFailureTable(textLength, pattern) {\n\t\tthis.commands = [];\n\t\tthis.cellSize = 30;\n\t\tthis.buildFailureTable(textLength, pattern);\n\t\treturn this.commands;\n\t}\n\n\tbuildFailureTable(textLength, pattern) {\n\t\t// Display label\n\t\tconst labelX = ARRAY_START_X + textLength * this.cellSize + 10;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.failureTableLabelID,\n\t\t\t'Failure table:',\n\t\t\tlabelX,\n\t\t\tFAILURE_TABLE_START_Y + 10,\n\t\t\t0,\n\t\t);\n\n\t\t// Display empty failure table\n\t\tconst tableStartX = ARRAY_START_X + textLength * this.cellSize + 110;\n\t\tthis.failureTableCharacterID = new Array(pattern.length);\n\t\tthis.failureTableValueID = new Array(pattern.length);\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tconst xpos = tableStartX + i * this.cellSize;\n\t\t\tthis.failureTableCharacterID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.failureTableCharacterID[i],\n\t\t\t\tpattern.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.failureTableCharacterID[i], '#D3D3D3');\n\t\t\tthis.failureTableValueID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.failureTableValueID[i],\n\t\t\t\t'',\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tFAILURE_TABLE_START_Y + this.cellSize,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t// Display pointers and set first value to 0\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\ttableStartX,\n\t\t\tFAILURE_TABLE_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#FF0000',\n\t\t\ttableStartX + this.cellSize,\n\t\t\tFAILURE_TABLE_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(act.setText, this.failureTableValueID[0], 0);\n\t\tthis.cmd(act.step);\n\n\t\tconst failureTable = [];\n\t\tfailureTable[0] = 0;\n\t\tlet i = 0;\n\t\tlet j = 1;\n\t\twhile (j < pattern.length) {\n\t\t\tif (pattern.charAt(i) === pattern.charAt(j)) {\n\t\t\t\ti++;\n\t\t\t\tfailureTable[j] = i;\n\t\t\t\tthis.cmd(act.setText, this.failureTableValueID[j], i);\n\t\t\t\tj++;\n\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tiPointerID,\n\t\t\t\t\t\ttableStartX + i * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tjPointerID,\n\t\t\t\t\t\ttableStartX + j * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t} else {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tfailureTable[j] = i;\n\t\t\t\t\tthis.cmd(act.setText, this.failureTableValueID[j], i);\n\t\t\t\t\tj++;\n\t\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tjPointerID,\n\t\t\t\t\t\t\ttableStartX + j * this.cellSize,\n\t\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t} else {\n\t\t\t\t\ti = failureTable[i - 1];\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tiPointerID,\n\t\t\t\t\t\ttableStartX + i * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\n\t\treturn failureTable;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\t\tif (this.failureTableValueID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.failureTableLabelID);\n\t\t}\n\t\tfor (let i = 0; i < this.failureTableCharacterID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.failureTableCharacterID[i]);\n\t\t\tthis.cmd(act.delete, this.failureTableValueID[i]);\n\t\t}\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Graph, { EDGE_COLOR, VERTEX_INDEX_COLOR } from './Graph.js';\nimport { KRUSKALS_DS_COLORS, PRIMS_KRUSKALS_ADJ_LIST } from './util/GraphValues';\nimport { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MESSAGE_LABEL_X = 30;\nconst MESSAGE_LABEL_Y = 15;\n\nconst FIND_LABEL_1_X = 30;\nconst FIND_LABEL_2_X = 100;\nconst FIND_LABEL_1_Y = 40;\nconst FIND_LABEL_2_Y = FIND_LABEL_1_Y;\n\nconst CURRENT_LABEL_X = 145;\nconst CURRENT_LABEL_Y = 67;\n\nconst PQ_LABEL_X = 145;\nconst PQ_LABEL_Y = 92;\n\nconst SET_ARRAY_ELEM_WIDTH = 50;\nconst SET_ARRAY_ELEM_HEIGHT = 20;\nconst SET_ARRAY_START_X = 52;\nconst SET_ARRAY_START_Y = 110;\n\nconst EDGE_LIST_ELEM_WIDTH = 40;\nconst EDGE_LIST_ELEM_HEIGHT = 40;\nconst EDGE_LIST_COLUMN_WIDTH = 100;\nconst EDGE_LIST_MAX_PER_COLUMN = 9;\n\nconst EDGE_LIST_START_X = 150;\nconst EDGE_LIST_START_Y = 135;\n\nconst HIGHLIGHT_CIRCLE_COLOR_1 = '#FF9999';\nconst HIGHLIGHT_CIRCLE_COLOR_2 = '#FF0000';\nconst HIGHLIGHT_CIRCLE_COLOR_3 = '#0000FF';\nconst HIGHLIGHT_CIRCLE_RADIUS = 12;\n\nconst MST_EDGE_COLOR = '#3399FF';\nconst MST_EDGE_THICKNESS = 4;\n\nexport default class Kruskals extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, PRIMS_KRUSKALS_ADJ_LIST, false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls(false);\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.messageID = [];\n\t\tthis.commands = [];\n\t\tthis.setID = new Array(this.size);\n\t\tthis.setIndexID = new Array(this.size);\n\t\tthis.setData = new Array(this.size);\n\t\tthis.edgesListLeftID = [];\n\t\tthis.edgesListRightID = [];\n\n\t\tlet i;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.setID[i] = this.nextIndex++;\n\t\t\tthis.setIndexID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.setIndexID[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tSET_ARRAY_ELEM_WIDTH,\n\t\t\t\tSET_ARRAY_ELEM_HEIGHT,\n\t\t\t\tSET_ARRAY_START_X,\n\t\t\t\tSET_ARRAY_START_Y + i * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.setID[i],\n\t\t\t\t'',\n\t\t\t\tSET_ARRAY_ELEM_WIDTH,\n\t\t\t\tSET_ARRAY_ELEM_HEIGHT,\n\t\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\t\tSET_ARRAY_START_Y + i * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.setIndexID[i], VERTEX_INDEX_COLOR);\n\t\t}\n\n\t\tthis.messageLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.messageLabelID, '', MESSAGE_LABEL_X, MESSAGE_LABEL_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Disjoint Set:',\n\t\t\tSET_ARRAY_START_X + 0.5 * SET_ARRAY_ELEM_WIDTH,\n\t\t\tSET_ARRAY_START_Y - 37,\n\t\t\t1,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Vertex',\n\t\t\tSET_ARRAY_START_X,\n\t\t\tSET_ARRAY_START_Y - 22,\n\t\t\t1,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Set ID',\n\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\tSET_ARRAY_START_Y - 22,\n\t\t\t1,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current edge:',\n\t\t\tCURRENT_LABEL_X,\n\t\t\tCURRENT_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.createLabel, this.nextIndex++, 'Priority Queue:', PQ_LABEL_X, PQ_LABEL_Y, 0);\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.messageID = [];\n\t\tthis.edgesListLeft = [];\n\t\tthis.edgesListRight = [];\n\t\tthis.edgesListLeftID = [];\n\t\tthis.edgesListRightID = [];\n\t}\n\n\tstartCallback() {\n\t\tthis.implementAction(this.doKruskal.bind(this));\n\t}\n\n\tdoKruskal() {\n\t\tthis.commands = [];\n\n\t\tfor (let k = 0; k < this.edgesListLeftID.length; k++) {\n\t\t\tthis.cmd(act.delete, this.edgesListLeftID[k]);\n\t\t\tthis.cmd(act.delete, this.edgesListRightID[k]);\n\t\t}\n\n\t\tthis.edgesListLeftID = [];\n\t\tthis.edgesListRightID = [];\n\t\tthis.edgesListLeft = [];\n\t\tthis.edgesListRight = [];\n\n\t\tlet i;\n\t\tlet j;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.setData[i] = i + 1;\n\t\t\tthis.cmd(act.setText, this.setID[i], i + 1);\n\t\t\t!this.isLarge && this.cmd(act.setBackgroundColor, this.setID[i], KRUSKALS_DS_COLORS[i]);\n\t\t}\n\n\t\tthis.recolorGraph();\n\n\t\t// Create edge list\n\t\tthis.cmd(act.setText, this.messageLabelID, 'Enqueueing all edges into Priority Queue');\n\t\tlet top;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tfor (j = i + 1; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tthis.edgesListLeftID.push(this.nextIndex++);\n\t\t\t\t\tthis.edgesListRightID.push(this.nextIndex++);\n\t\t\t\t\ttop = this.edgesListLeftID.length - 1;\n\t\t\t\t\tthis.edgesListLeft.push(i);\n\t\t\t\t\tthis.edgesListRight.push(j);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tthis.edgesListLeftID[top],\n\t\t\t\t\t\tthis.toStr(i) + ' ',\n\t\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\t\tMath.floor(top / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\t\tEDGE_LIST_START_Y +\n\t\t\t\t\t\t\t(top % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tthis.edgesListRightID[top],\n\t\t\t\t\t\t' ' + this.toStr(j),\n\t\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\t\tEDGE_LIST_ELEM_WIDTH +\n\t\t\t\t\t\t\tMath.floor(top / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\t\tEDGE_LIST_START_Y +\n\t\t\t\t\t\t\t(top % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\tthis.edgesListLeftID[top],\n\t\t\t\t\t\tthis.edgesListRightID[top],\n\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tthis.adj_matrix[i][j],\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t// Sort edge list based on edge cost\n\t\tconst edgeCount = this.edgesListLeftID.length;\n\t\tlet tmpLeftID;\n\t\tlet tmpRightID;\n\t\tlet tmpLeft;\n\t\tlet tmpRight;\n\t\tfor (i = 1; i < edgeCount; i++) {\n\t\t\ttmpLeftID = this.edgesListLeftID[i];\n\t\t\ttmpRightID = this.edgesListRightID[i];\n\t\t\ttmpLeft = this.edgesListLeft[i];\n\t\t\ttmpRight = this.edgesListRight[i];\n\t\t\tj = i;\n\t\t\twhile (\n\t\t\t\tj > 0 &&\n\t\t\t\tthis.adj_matrix[this.edgesListLeft[j - 1]][this.edgesListRight[j - 1]] >\n\t\t\t\t\tthis.adj_matrix[tmpLeft][tmpRight]\n\t\t\t) {\n\t\t\t\tthis.edgesListLeft[j] = this.edgesListLeft[j - 1];\n\t\t\t\tthis.edgesListRight[j] = this.edgesListRight[j - 1];\n\t\t\t\tthis.edgesListLeftID[j] = this.edgesListLeftID[j - 1];\n\t\t\t\tthis.edgesListRightID[j] = this.edgesListRightID[j - 1];\n\t\t\t\tj = j - 1;\n\t\t\t}\n\t\t\tthis.edgesListLeft[j] = tmpLeft;\n\t\t\tthis.edgesListRight[j] = tmpRight;\n\t\t\tthis.edgesListLeftID[j] = tmpLeftID;\n\t\t\tthis.edgesListRightID[j] = tmpRightID;\n\t\t}\n\t\tfor (i = 0; i < edgeCount; i++) {\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListLeftID[i],\n\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\tMath.floor(i / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\tEDGE_LIST_START_Y + (i % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListRightID[i],\n\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\tEDGE_LIST_ELEM_WIDTH +\n\t\t\t\t\tMath.floor(i / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\tEDGE_LIST_START_Y + (i % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tconst findLabelLeft = this.nextIndex++;\n\t\tconst findLabelRight = this.nextIndex++;\n\t\tconst highlightCircle1 = this.nextIndex++;\n\t\tconst highlightCircle2 = this.nextIndex++;\n\t\tconst highlightCircle3 = this.nextIndex++;\n\n\t\tlet edgesAdded = 0;\n\t\tlet nextListIndex = 0;\n\t\tthis.cmd(act.createLabel, findLabelLeft, '', FIND_LABEL_1_X, FIND_LABEL_1_Y, 0);\n\t\tthis.cmd(act.createLabel, findLabelRight, '', FIND_LABEL_2_X, FIND_LABEL_2_Y, 0);\n\n\t\t// Run algorithm\n\t\twhile (edgesAdded < this.size - 1 && nextListIndex < edgeCount) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.messageLabelID,\n\t\t\t\t'Dequeueing ' +\n\t\t\t\t\tthis.toStr(this.edgesListLeft[nextListIndex]) +\n\t\t\t\t\tthis.toStr(this.edgesListRight[nextListIndex]),\n\t\t\t);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListLeftID[nextListIndex],\n\t\t\t\tCURRENT_LABEL_X + 90,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListRightID[nextListIndex],\n\t\t\t\tCURRENT_LABEL_X + EDGE_LIST_ELEM_WIDTH + 90,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t);\n\n\t\t\tfor (i = nextListIndex + 1; i < edgeCount; i++) {\n\t\t\t\tconst newPos = i - nextListIndex - 1;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.edgesListLeftID[i],\n\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\tMath.floor(newPos / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\tEDGE_LIST_START_Y + (newPos % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.edgesListRightID[i],\n\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\tEDGE_LIST_ELEM_WIDTH +\n\t\t\t\t\t\tMath.floor(newPos / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\tEDGE_LIST_START_Y + (newPos % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.highlightEdge(\n\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t1,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.cmd(act.setText, this.messageLabelID, 'Looking at disjoint set');\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelLeft,\n\t\t\t\t'find(' + this.toStr(this.edgesListLeft[nextListIndex]) + ') = ',\n\t\t\t);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightCircle1,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR_1,\n\t\t\t\tCURRENT_LABEL_X + 88,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t\tHIGHLIGHT_CIRCLE_RADIUS,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tconst left = this.edgesListLeft[nextListIndex];\n\t\t\tconst leftRoot = this.setData[left];\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\thighlightCircle1,\n\t\t\t\tSET_ARRAY_START_X,\n\t\t\t\tSET_ARRAY_START_Y + this.edgesListLeft[nextListIndex] * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelLeft,\n\t\t\t\t'find(' + this.toStr(this.edgesListLeft[nextListIndex]) + ') = ' + leftRoot,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelRight,\n\t\t\t\t'find(' + this.toStr(this.edgesListRight[nextListIndex]) + ') = ',\n\t\t\t);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightCircle2,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR_2,\n\t\t\t\tCURRENT_LABEL_X + EDGE_LIST_ELEM_WIDTH + 91,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t\tHIGHLIGHT_CIRCLE_RADIUS,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tconst right = this.edgesListRight[nextListIndex];\n\t\t\tconst rightRoot = this.setData[right];\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\thighlightCircle2,\n\t\t\t\tSET_ARRAY_START_X,\n\t\t\t\tSET_ARRAY_START_Y + this.edgesListRight[nextListIndex] * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelRight,\n\t\t\t\t'find(' + this.toStr(this.edgesListRight[nextListIndex]) + ') = ' + rightRoot,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (leftRoot !== rightRoot) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.messageLabelID,\n\t\t\t\t\t'Vertices in different sets.  Add edge to MST.',\n\t\t\t\t);\n\t\t\t\tthis.highlightEdge(\n\t\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tedgesAdded++;\n\t\t\t\tthis.setEdgeColor(\n\t\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t\tMST_EDGE_COLOR,\n\t\t\t\t);\n\t\t\t\tthis.setEdgeThickness(\n\t\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t\tMST_EDGE_THICKNESS,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.messageLabelID,\n\t\t\t\t\t'Union sets ' + leftRoot + ' and ' + rightRoot,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tfindLabelLeft, // reusing find label\n\t\t\t\t\t'union(' + this.toStr(left) + ', ' + this.toStr(right) + ')',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setText, findLabelRight, '');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tconst minRoot = Math.min(leftRoot, rightRoot);\n\t\t\t\tconst maxRoot = Math.max(leftRoot, rightRoot);\n\t\t\t\tlet firstMatch = true;\n\t\t\t\tfor (let k = 0; k < this.size; k++) {\n\t\t\t\t\tif (this.setData[k] === maxRoot) {\n\t\t\t\t\t\tif (firstMatch) {\n\t\t\t\t\t\t\tfirstMatch = false;\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\t\thighlightCircle3,\n\t\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR_3,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_Y + k * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_RADIUS,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, highlightCircle3, 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\thighlightCircle3,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_Y + k * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.setData[k] = minRoot;\n\t\t\t\t\t\tthis.cmd(act.setText, this.setID[k], minRoot);\n\t\t\t\t\t\t!this.isLarge &&\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\t\t\tthis.setID[k],\n\t\t\t\t\t\t\t\tKRUSKALS_DS_COLORS[minRoot - 1],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, highlightCircle3);\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setText, this.messageLabelID, 'Vertices in the same set, skip edge');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\n\t\t\tthis.highlightEdge(\n\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t0,\n\t\t\t);\n\n\t\t\tthis.cmd(act.delete, highlightCircle1);\n\t\t\tthis.cmd(act.delete, highlightCircle2);\n\n\t\t\tthis.cmd(act.delete, this.edgesListLeftID[nextListIndex]);\n\t\t\tthis.cmd(act.delete, this.edgesListRightID[nextListIndex]);\n\t\t\tthis.cmd(act.setText, findLabelLeft, '');\n\t\t\tthis.cmd(act.setText, findLabelRight, '');\n\t\t\tnextListIndex++;\n\t\t}\n\t\tthis.cmd(act.delete, findLabelLeft);\n\t\tthis.cmd(act.delete, findLabelRight);\n\n\t\tthis.edgesListLeftID = this.edgesListLeftID.slice(nextListIndex);\n\t\tthis.edgesListRightID = this.edgesListRightID.slice(nextListIndex);\n\n\t\tif (edgesAdded === this.size - 1) {\n\t\t\tthis.cmd(act.setText, this.messageLabelID, 'MST has correct amount of edges, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.messageLabelID, 'Priority queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addLabelToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst INFO_LABEL_X = 75;\nconst INFO_LABEL_Y = 20;\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 70;\n\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst BUCKETS_START_X = 100;\nconst BUCKETS_START_Y = 140;\n\nconst BUCKET_ELEM_WIDTH = 50;\nconst BUCKET_ELEM_HEIGHT = 20;\nconst BUCKET_ELEM_SPACING = 15;\n\nexport default class LSDRadix extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 9 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.arrayDisplay = [];\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\t\tthis.bucketsDisplay = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.infoLabelID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.arrayDisplay = [];\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\t\tthis.bucketsDisplay = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.infoLabelID = this.nextIndex++;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tfor (let i = 0; i < this.bucketsID.length; i++) {\n\t\t\tfor (let j = 0; j < this.bucketsID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.bucketsID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.arrayDisplay = [];\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\t\tthis.bucketsDisplay = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 9);\n\t\tconst length = this.arrayData.length;\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\t// Create data array\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet arrayDisplay = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tarrayDisplay += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.arrayDisplay[i] = arrayDisplay;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tarrayDisplay,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\n\t\t// Create buckets\n\t\tfor (let i = 0; i < 10; i++) {\n\t\t\tthis.bucketsData[i] = [];\n\t\t\tthis.bucketsID[i] = [];\n\t\t\tthis.bucketsDisplay[i] = [];\n\t\t\tthis.bucketsID[i].push(this.nextIndex++);\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + BUCKETS_START_X;\n\t\t\tconst ypos = BUCKETS_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.bucketsID[i][0],\n\t\t\t\ti,\n\t\t\t\tBUCKET_ELEM_WIDTH,\n\t\t\t\tBUCKET_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.bucketsID[i], '#D3D3D3');\n\t\t}\n\n\t\t// Find number of digits\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.infoLabelID,\n\t\t\t'Searching for number with greatest magnitude',\n\t\t\tINFO_LABEL_X,\n\t\t\tINFO_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#FF0000',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\n\t\tlet greatest = 0;\n\t\tfor (let i = 1; i < this.arrayData.length; i++) {\n\t\t\tthis.movePointers(greatest, i);\n\t\t\tif (this.arrayData[i] > this.arrayData[greatest]) {\n\t\t\t\tgreatest = i;\n\t\t\t\tthis.movePointers(greatest, i);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[greatest], '#FFFF00');\n\n\t\tlet digits = Math.floor(Math.log10(this.arrayData[greatest])) + 1;\n\t\tdigits = digits || 1; // If greatest is 0, above returns NaN, so set to 1 if that happens\n\n\t\tconst longData = this.arrayData[greatest];\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\tlongData + ' has greatest magnitude, number of digits is ' + digits,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[greatest], '#FFFFFF');\n\n\t\t// Run algorithm\n\t\tfor (let i = 0; i < digits; i++) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Getting digits at position ' + (i + 1));\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.iPointerID,\n\t\t\t\t'#0000FF',\n\t\t\t\tARRAY_START_X,\n\t\t\t\tARRAY_START_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\t\tfor (let j = 0; j < this.arrayData.length; j++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.iPointerID,\n\t\t\t\t\tARRAY_START_X + j * ARRAY_ELEM_WIDTH,\n\t\t\t\t\tARRAY_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tconst id = this.nextIndex++;\n\t\t\t\tconst data = this.arrayData[j];\n\t\t\t\tconst display = this.arrayDisplay[j];\n\t\t\t\tconst digit = this.nthDigit(data, i);\n\t\t\t\tthis.bucketsID[digit].push(id);\n\t\t\t\tthis.bucketsData[digit].push(data);\n\t\t\t\tthis.bucketsDisplay[digit].push(display);\n\t\t\t\tconst len = this.bucketsData[digit].length;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tid,\n\t\t\t\t\tdisplay,\n\t\t\t\t\tBUCKET_ELEM_WIDTH,\n\t\t\t\t\tBUCKET_ELEM_HEIGHT,\n\t\t\t\t\tBUCKETS_START_X + digit * BUCKET_ELEM_WIDTH,\n\t\t\t\t\tBUCKETS_START_Y + len * BUCKET_ELEM_HEIGHT + len * BUCKET_ELEM_SPACING,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.bucketsID[digit][this.bucketsID[digit].length - 2],\n\t\t\t\t\tid,\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\t1,\n\t\t\t\t\t'',\n\t\t\t\t\t2,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.cmd(act.delete, this.iPointerID);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet index = 0;\n\t\t\tfor (let j = 0; j < 10; j++) {\n\t\t\t\tconst idBucket = this.bucketsID[j];\n\t\t\t\tconst dataBucket = this.bucketsData[j];\n\t\t\t\tconst displayBucket = this.bucketsDisplay[j];\n\t\t\t\twhile (dataBucket.length) {\n\t\t\t\t\tconst labelID = this.nextIndex++;\n\t\t\t\t\tconst nodeID = idBucket.splice(1, 1)[0];\n\t\t\t\t\tconst data = dataBucket.shift();\n\t\t\t\t\tconst display = displayBucket.shift();\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tlabelID,\n\t\t\t\t\t\tdisplay,\n\t\t\t\t\t\tBUCKETS_START_X + j * BUCKET_ELEM_WIDTH,\n\t\t\t\t\t\tBUCKETS_START_Y + BUCKET_ELEM_HEIGHT + BUCKET_ELEM_SPACING,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tlabelID,\n\t\t\t\t\t\tARRAY_START_X + index * ARRAY_ELEM_WIDTH,\n\t\t\t\t\t\tARRAY_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setText, this.arrayID[index], display);\n\t\t\t\t\tthis.cmd(act.delete, labelID);\n\t\t\t\t\tthis.cmd(act.delete, nodeID);\n\t\t\t\t\tif (dataBucket.length) {\n\t\t\t\t\t\tthis.cmd(act.connect, idBucket[0], idBucket[1]);\n\t\t\t\t\t\tfor (let k = 1; k < idBucket.length; k++) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\tidBucket[k],\n\t\t\t\t\t\t\t\tBUCKETS_START_X + j * BUCKET_ELEM_WIDTH,\n\t\t\t\t\t\t\t\tBUCKETS_START_Y + k * BUCKET_ELEM_HEIGHT + k * BUCKET_ELEM_SPACING,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t}\n\t\t\t\t\tthis.arrayData[index] = data;\n\t\t\t\t\tthis.arrayDisplay[index] = display;\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, this.infoLabelID);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t}\n\n\tnthDigit(data, digit) {\n\t\tdata = Math.floor(data / Math.pow(10, digit));\n\t\tdata %= 10;\n\t\treturn data;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class LinkedList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddIndexCallback() {\n\t\tif (this.addValueField.value !== '' && this.addIndexField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tconst index = parseInt(this.addIndexField.value);\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// getCallback()\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tthis.linkedListElemID[index],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t\t0,\n\t\t\t1,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (index === this.size) {\n\t\t\tthis.cmd(act.setNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (this.size !== 0) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t} else if (index === this.size) {\n\t\t\t\tthis.cmd(act.setNull, this.linkedListElemID[index - 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.resetNodePositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\t//TODO: Move head pointer\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setNull, this.linkedListElemID[index - 1], 1);\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[index]);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addLabelToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 120;\nconst ARRAY_START_Y = 50;\nconst ARRAY_LINE_SPACING = 80;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\n// const ARRRAY_ELEMS_PER_LINE = 15;\n\n// const TOP_POS_X = 180;\n// const TOP_POS_Y = 100;\n// const TOP_LABEL_X = 130;\n// const TOP_LABEL_Y = 100;\n\n// const PUSH_LABEL_X = 50;\n// const PUSH_LABEL_Y = 30;\n// const PUSH_ELEMENT_X = 120;\n// const PUSH_ELEMENT_Y = 30;\n\n// const SIZE = 10;\n\nconst LARGE_OFFSET = 15;\nconst SMALL_OFFSET = 7;\n\nexport default class MergeSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\n\t\t// Useful for memory management\n\t\tthis.nextIndex = 0;\n\n\t\t// TODO:  Add any code necessary to set up your own algorithm.  Initialize data\n\t\t// structures, etc.\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 12 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.kPointerID = 0;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.kPointerID = 0;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 12);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst xPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst yPos = ARRAY_START_Y;\n\t\t\tthis.arrayID.push(this.nextIndex);\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txPos,\n\t\t\t\tyPos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tif (this.arrayData.length !== 1) {\n\t\t\tconst mid = Math.ceil((this.arrayData.length - 1) / 2);\n\t\t\tthis.leftHelper(0, mid - 1, -LARGE_OFFSET, 0, 1);\n\t\t\tthis.rightHelper(mid, this.arrayData.length - 1, LARGE_OFFSET, 0, 1);\n\t\t\tthis.merge(\n\t\t\t\t0,\n\t\t\t\tthis.arrayData.length - 1,\n\t\t\t\tmid,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t-LARGE_OFFSET,\n\t\t\t\tLARGE_OFFSET,\n\t\t\t\tthis.arrayID,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[0], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tleftHelper(left, right, offset, prevOffset, row) {\n\t\tif (left > right) return;\n\n\t\tconst tempArrayID = this.drawArrayAndCopy(left, right, offset, prevOffset, row);\n\n\t\tif (left !== right) {\n\t\t\tconst mid = Math.ceil((left + right) / 2);\n\t\t\tconst extraOffset = row < 2 ? 2 * LARGE_OFFSET : 2 * SMALL_OFFSET;\n\t\t\tthis.leftHelper(left, mid - 1, offset - extraOffset, offset, row + 1);\n\t\t\tthis.leftHelper(mid, right, offset, offset, row + 1);\n\t\t\tthis.merge(left, right, mid, row, offset, offset - extraOffset, offset, tempArrayID);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, tempArrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\trightHelper(left, right, offset, prevOffset, row) {\n\t\tif (left > right) return;\n\n\t\tconst tempArrayID = this.drawArrayAndCopy(left, right, offset, prevOffset, row);\n\n\t\tif (left !== right) {\n\t\t\tconst mid = Math.ceil((left + right) / 2);\n\t\t\tconst extraOffset = row < 2 ? 2 * LARGE_OFFSET : 2 * SMALL_OFFSET;\n\t\t\tthis.rightHelper(left, mid - 1, offset, offset, row + 1);\n\t\t\tthis.rightHelper(mid, right, offset + extraOffset, offset, row + 1);\n\t\t\tthis.merge(left, right, mid, row, offset, offset, offset + extraOffset, tempArrayID);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, tempArrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tdrawArrayAndCopy(left, right, offset, prevOffset, row) {\n\t\tconst tempArrayID = [];\n\n\t\t// Display subarray\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tconst xPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X + offset;\n\t\t\tconst yPos = ARRAY_START_Y + row * ARRAY_LINE_SPACING;\n\t\t\ttempArrayID[i] = this.nextIndex;\n\t\t\tthis.arrayID.push(this.nextIndex);\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txPos,\n\t\t\t\tyPos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t// Copy elements from big array to current subarray\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.copyData(\n\t\t\t\ti,\n\t\t\t\ti,\n\t\t\t\tprevOffset,\n\t\t\t\toffset,\n\t\t\t\trow - 1,\n\t\t\t\trow,\n\t\t\t\tthis.displayData[i],\n\t\t\t\ttempArrayID[i],\n\t\t\t\t-1,\n\t\t\t);\n\t\t}\n\n\t\treturn tempArrayID;\n\t}\n\n\tmerge(left, right, mid, row, currOffset, leftOffset, rightOffset, currArrayID) {\n\t\tconst tempArray = new Array(this.arrayData.length); // Temporary array to store data for sorting\n\t\tconst tempDisplay = new Array(this.arrayData.length);\n\n\t\t// Copy data to temporary array\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\ttempArray[i] = this.arrayData[i];\n\t\t\ttempDisplay[i] = this.displayData[i];\n\t\t}\n\n\t\t// Create pointers\n\t\tconst bottomYPos = ARRAY_START_Y + (row + 1) * ARRAY_LINE_SPACING;\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst iXPos = left * ARRAY_ELEM_WIDTH + ARRAY_START_X + leftOffset;\n\t\tthis.cmd(act.createHighlightCircle, iPointerID, '#0000FF', iXPos, bottomYPos);\n\t\tconst jPointerID = this.nextIndex++;\n\t\tconst jXPos = mid * ARRAY_ELEM_WIDTH + ARRAY_START_X + rightOffset;\n\t\tthis.cmd(act.createHighlightCircle, jPointerID, '#0000FF', jXPos, bottomYPos);\n\t\tconst kPointerID = this.nextIndex++;\n\t\tconst kXPos = left * ARRAY_ELEM_WIDTH + ARRAY_START_X + currOffset;\n\t\tconst topYPos = ARRAY_START_Y + row * ARRAY_LINE_SPACING;\n\t\tthis.cmd(act.createHighlightCircle, kPointerID, '#0000FF', kXPos, topYPos);\n\t\tthis.cmd(act.step);\n\n\t\t// Merge data and animate\n\t\tlet i = left;\n\t\tlet j = mid;\n\t\tlet k = left;\n\t\twhile (i < mid && j <= right) {\n\t\t\tif (tempArray[i] <= tempArray[j]) {\n\t\t\t\tthis.copyData(\n\t\t\t\t\ti,\n\t\t\t\t\tk,\n\t\t\t\t\tleftOffset,\n\t\t\t\t\tcurrOffset,\n\t\t\t\t\trow + 1,\n\t\t\t\t\trow,\n\t\t\t\t\ttempDisplay[i],\n\t\t\t\t\tcurrArrayID[k],\n\t\t\t\t\tiPointerID,\n\t\t\t\t);\n\t\t\t\tthis.arrayData[k] = tempArray[i];\n\t\t\t\tthis.displayData[k] = tempDisplay[i];\n\t\t\t\tk++;\n\t\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\t\ti++;\n\t\t\t\tif (i < mid) {\n\t\t\t\t\tthis.movePointer(i, row + 1, leftOffset, iPointerID);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.copyData(\n\t\t\t\t\tj,\n\t\t\t\t\tk,\n\t\t\t\t\trightOffset,\n\t\t\t\t\tcurrOffset,\n\t\t\t\t\trow + 1,\n\t\t\t\t\trow,\n\t\t\t\t\ttempDisplay[j],\n\t\t\t\t\tcurrArrayID[k],\n\t\t\t\t\tjPointerID,\n\t\t\t\t);\n\t\t\t\tthis.arrayData[k] = tempArray[j];\n\t\t\t\tthis.displayData[k] = tempDisplay[j];\n\t\t\t\tk++;\n\t\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\t\tj++;\n\t\t\t\tif (j <= right) {\n\t\t\t\t\tthis.movePointer(j, row + 1, rightOffset, jPointerID);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\twhile (i < mid) {\n\t\t\tthis.copyData(\n\t\t\t\ti,\n\t\t\t\tk,\n\t\t\t\tleftOffset,\n\t\t\t\tcurrOffset,\n\t\t\t\trow + 1,\n\t\t\t\trow,\n\t\t\t\ttempDisplay[i],\n\t\t\t\tcurrArrayID[k],\n\t\t\t\tiPointerID,\n\t\t\t);\n\t\t\tthis.arrayData[k] = tempArray[i];\n\t\t\tthis.displayData[k] = tempDisplay[i];\n\t\t\tk++;\n\t\t\ti++;\n\t\t\tif (k <= right) {\n\t\t\t\tthis.movePointer(i, row + 1, leftOffset, iPointerID);\n\t\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\t}\n\t\t}\n\t\twhile (j <= right) {\n\t\t\tthis.copyData(\n\t\t\t\tj,\n\t\t\t\tk,\n\t\t\t\trightOffset,\n\t\t\t\tcurrOffset,\n\t\t\t\trow + 1,\n\t\t\t\trow,\n\t\t\t\ttempDisplay[j],\n\t\t\t\tcurrArrayID[k],\n\t\t\t\tjPointerID,\n\t\t\t);\n\t\t\tthis.arrayData[k] = tempArray[j];\n\t\t\tthis.displayData[k] = tempDisplay[j];\n\t\t\tj++;\n\t\t\tk++;\n\t\t\tif (k <= right) {\n\t\t\t\tthis.movePointer(j, row + 1, rightOffset, jPointerID);\n\t\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\t}\n\t\t}\n\n\t\t// Delete pointers\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\tthis.cmd(act.delete, kPointerID);\n\t\tthis.cmd(act.step);\n\t}\n\n\tcopyData(fromIndex, toIndex, fromOffset, toOffset, fromRow, toRow, value, cellID, pointerID) {\n\t\tif (pointerID !== -1) {\n\t\t\tthis.cmd(act.setForegroundColor, pointerID, '#FF0000');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst fromXPos = fromIndex * ARRAY_ELEM_WIDTH + ARRAY_START_X + fromOffset;\n\t\tconst fromYPos = ARRAY_START_Y + fromRow * ARRAY_LINE_SPACING;\n\t\tconst labelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, labelID, value, fromXPos, fromYPos);\n\t\tconst toXPos = toIndex * ARRAY_ELEM_WIDTH + ARRAY_START_X + toOffset;\n\t\tconst toYPos = ARRAY_START_Y + toRow * ARRAY_LINE_SPACING;\n\t\tthis.cmd(act.move, labelID, toXPos, toYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, cellID, value);\n\t\tthis.cmd(act.delete, labelID);\n\t\tif (pointerID !== -1) {\n\t\t\tthis.cmd(act.setBackgroundColor, cellID, '#2ECC71');\n\t\t\tthis.cmd(act.setForegroundColor, pointerID, '#0000FF');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tmovePointer(index, row, offset, pointerID) {\n\t\tconst xPos = index * ARRAY_ELEM_WIDTH + ARRAY_START_X + offset;\n\t\tconst yPos = ARRAY_START_Y + row * ARRAY_LINE_SPACING;\n\t\tthis.cmd(act.move, pointerID, xPos, yPos);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Hash from './Hash.js';\nimport { act } from '../anim/AnimationMain';\n\nconst POINTER_ARRAY_ELEM_WIDTH = 70;\nconst POINTER_ARRAY_ELEM_HEIGHT = 30;\nconst POINTER_ARRAY_ELEM_START_X = 50;\n\nconst LINKED_ITEM_HEIGHT = 30;\nconst LINKED_ITEM_WIDTH = 65;\n\nconst LINKED_ITEM_Y_DELTA = 50;\n\nconst HASH_TABLE_SIZE = 13;\n\nconst DEFAULT_LOAD_FACTOR = 0.67;\n\nconst LOAD_LABEL_X = 60;\nconst LOAD_LABEL_Y = 20;\n\nconst INDEX_COLOR = '#0000FF';\n\nexport default class OpenHash extends Hash {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.nextIndex = 0;\n\t\tthis.POINTER_ARRAY_ELEM_Y = h - POINTER_ARRAY_ELEM_WIDTH;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tsuper.addControls();\n\t}\n\n\tinsertElement(elem) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting element: ' + String(elem));\n\t\tconst index = this.doHash(elem);\n\n\t\tconst node = new LinkedListNode(elem, this.nextIndex++, 100, 75);\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tnode.graphicID,\n\t\t\telem,\n\t\t\tLINKED_ITEM_WIDTH,\n\t\t\tLINKED_ITEM_HEIGHT,\n\t\t\t100,\n\t\t\t75,\n\t\t);\n\t\tlet found = false;\n\t\tif (this.hashTableValues[index] != null) {\n\t\t\t// Search for duplicates\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Searching for duplicates of ' + elem);\n\n\t\t\tconst compareIndex = this.nextIndex++;\n\t\t\tlet tmp = this.hashTableValues[index];\n\t\t\tthis.cmd(act.createLabel, compareIndex, '', 10, 40, 0);\n\t\t\twhile (tmp != null && !found) {\n\t\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 1);\n\t\t\t\tif (tmp.data === elem) {\n\t\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.data + '==' + elem);\n\t\t\t\t\tfound = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.data + '!=' + elem);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 0);\n\t\t\t\ttmp = tmp.next;\n\t\t\t}\n\n\t\t\tthis.cmd(act.delete, compareIndex);\n\t\t\tthis.nextIndex--;\n\t\t} else {\n\t\t\tthis.cmd(act.setNull, node.graphicID, 1);\n\t\t\tthis.cmd(act.setNull, this.hashTableVisual[index], 0);\n\t\t}\n\n\t\tif (found) {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Duplicate of  ' + elem + '  found!');\n\t\t\tthis.cmd(act.delete, node.graphicID);\n\t\t\tthis.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Duplicate of  ' + elem + '  not found!');\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (this.hashTableValues[index] != null) {\n\t\t\t\tthis.cmd(act.connect, node.graphicID, this.hashTableValues[index].graphicID);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.hashTableVisual[index],\n\t\t\t\t\tthis.hashTableValues[index].graphicID,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.cmd(act.connect, this.hashTableVisual[index], node.graphicID);\n\t\t\tnode.next = this.hashTableValues[index];\n\t\t\tthis.hashTableValues[index] = node;\n\t\t\tthis.repositionList(index);\n\t\t}\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\n\t\treturn this.commands;\n\t}\n\n\trepositionList(index) {\n\t\tconst startX = POINTER_ARRAY_ELEM_START_X + index * POINTER_ARRAY_ELEM_WIDTH;\n\t\tlet startY = this.POINTER_ARRAY_ELEM_Y - LINKED_ITEM_Y_DELTA;\n\t\tlet tmp = this.hashTableValues[index];\n\t\twhile (tmp != null) {\n\t\t\ttmp.x = startX;\n\t\t\ttmp.y = startY;\n\t\t\tthis.cmd(act.move, tmp.graphicID, tmp.x, tmp.y);\n\t\t\tstartY = startY - LINKED_ITEM_Y_DELTA;\n\t\t\ttmp = tmp.next;\n\t\t}\n\t}\n\n\tdeleteElement(elem) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Deleting element: ' + elem);\n\t\tconst index = this.doHash(elem);\n\t\tif (this.hashTableValues[index] == null) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting element: ' + elem + '  Element not in table',\n\t\t\t);\n\t\t\treturn this.commands;\n\t\t}\n\t\tthis.cmd(act.setHighlight, this.hashTableValues[index].graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.hashTableValues[index].graphicID, 0);\n\t\tif (this.hashTableValues[index].data === elem) {\n\t\t\tif (this.hashTableValues[index].next != null) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.hashTableVisual[index],\n\t\t\t\t\tthis.hashTableValues[index].next.graphicID,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setNull, this.hashTableVisual[index], 1);\n\t\t\t}\n\t\t\tthis.cmd(act.delete, this.hashTableValues[index].graphicID);\n\t\t\tthis.hashTableValues[index] = this.hashTableValues[index].next;\n\t\t\tthis.repositionList(index);\n\t\t\treturn this.commands;\n\t\t}\n\t\tlet tmpPrev = this.hashTableValues[index];\n\t\tlet tmp = this.hashTableValues[index].next;\n\t\tlet found = false;\n\t\twhile (tmp != null && !found) {\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 0);\n\t\t\tif (tmp.data === elem) {\n\t\t\t\tfound = true;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.ExplainLabel,\n\t\t\t\t\t'Deleting element: ' + elem + '  Element deleted',\n\t\t\t\t);\n\t\t\t\tif (tmp.next != null) {\n\t\t\t\t\tthis.cmd(act.connect, tmpPrev.graphicID, tmp.next.graphicID);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setNull, tmpPrev.graphicID, 1);\n\t\t\t\t}\n\t\t\t\ttmpPrev.next = tmpPrev.next.next;\n\t\t\t\tthis.cmd(act.delete, tmp.graphicID);\n\t\t\t\tthis.repositionList(index);\n\t\t\t} else {\n\t\t\t\ttmpPrev = tmp;\n\t\t\t\ttmp = tmp.next;\n\t\t\t}\n\t\t}\n\t\tif (!found) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting element: ' + elem + '  Element not in table',\n\t\t\t);\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tfindElement(elem) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem);\n\n\t\tconst index = this.doHash(elem);\n\t\tconst compareIndex = this.nextIndex++;\n\t\tlet found = false;\n\t\tlet tmp = this.hashTableValues[index];\n\t\tthis.cmd(act.createLabel, compareIndex, '', 10, 40, 0);\n\t\twhile (tmp != null && !found) {\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 1);\n\t\t\tif (tmp.data === elem) {\n\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.data + '==' + elem);\n\t\t\t\tfound = true;\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.data + '!=' + elem);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 0);\n\t\t\ttmp = tmp.next;\n\t\t}\n\t\tif (found) {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem + '  Found!');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Element: ' + elem + '  Not Found!');\n\t\t}\n\t\tthis.cmd(act.delete, compareIndex);\n\t\tthis.nextIndex--;\n\t\treturn this.commands;\n\t}\n\n\tchangeLoadFactor(LF) {\n\t\tthis.commands = [];\n\n\t\tthis.load_factor = LF;\n\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tsetup() {\n\t\tthis.hashTableVisual = new Array(HASH_TABLE_SIZE);\n\t\tthis.hashTableIndices = new Array(HASH_TABLE_SIZE);\n\t\tthis.hashTableValues = new Array(HASH_TABLE_SIZE);\n\n\t\tthis.indexXPos = new Array(HASH_TABLE_SIZE);\n\t\tthis.indexYPos = new Array(HASH_TABLE_SIZE);\n\n\t\tthis.ExplainLabel = this.nextIndex++;\n\n\t\tthis.loadFactorID = this.nextIndex++;\n\n\t\tthis.table_size = HASH_TABLE_SIZE;\n\n\t\tthis.load_factor = DEFAULT_LOAD_FACTOR;\n\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < HASH_TABLE_SIZE; i++) {\n\t\t\tlet nextID = this.nextIndex++;\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tnextID,\n\t\t\t\t'',\n\t\t\t\tPOINTER_ARRAY_ELEM_WIDTH,\n\t\t\t\tPOINTER_ARRAY_ELEM_HEIGHT,\n\t\t\t\tPOINTER_ARRAY_ELEM_START_X + i * POINTER_ARRAY_ELEM_WIDTH,\n\t\t\t\tthis.POINTER_ARRAY_ELEM_Y,\n\t\t\t);\n\t\t\tthis.hashTableVisual[i] = nextID;\n\t\t\tthis.cmd(act.setNull, this.hashTableVisual[i], 1);\n\n\t\t\tnextID = this.nextIndex++;\n\t\t\tthis.hashTableIndices[i] = nextID;\n\t\t\tthis.indexXPos[i] = POINTER_ARRAY_ELEM_START_X + i * POINTER_ARRAY_ELEM_WIDTH;\n\t\t\tthis.indexYPos[i] = this.POINTER_ARRAY_ELEM_Y + POINTER_ARRAY_ELEM_HEIGHT;\n\t\t\tthis.hashTableValues[i] = null;\n\n\t\t\tthis.cmd(act.createLabel, nextID, i, this.indexXPos[i], this.indexYPos[i]);\n\t\t\tthis.cmd(act.setForegroundColor, nextID, INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, this.loadFactorID, `Load Factor: ${this.load_factor}`, LOAD_LABEL_X, LOAD_LABEL_Y);\n\t\tthis.cmd(act.createLabel, this.ExplainLabel, '', 10, 25, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.resetIndex = this.nextIndex;\n\t}\n\n\tresetAll() {\n\t\tlet tmp;\n\t\tthis.commands = super.resetAll();\n\t\tfor (let i = 0; i < this.hashTableValues.length; i++) {\n\t\t\ttmp = this.hashTableValues[i];\n\t\t\tif (tmp != null) {\n\t\t\t\twhile (tmp != null) {\n\t\t\t\t\tthis.cmd(act.delete, tmp.graphicID);\n\t\t\t\t\ttmp = tmp.next;\n\t\t\t\t}\n\t\t\t\tthis.hashTableValues[i] = null;\n\t\t\t\tthis.cmd(act.setNull, this.hashTableVisual[i], 1);\n\t\t\t}\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\t// NEED TO OVERRIDE IN PARENT\n\treset() {\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.hashTableValues[i] = null;\n\t\t}\n\t\tthis.nextIndex = this.resetIndex;\n\t\tsuper.reset();\n\t}\n\n\tresetCallback() {}\n\n\t/*this.nextIndex = 0;\n this.commands = [];\n this.cmd(act.createLabel, 0, \"\", 20, 50, 0);\n this.animationManager.startNewAnimation(this.commands);\n this.animationManager.skipForward();\n this.animationManager.clearHistory(); */\n\n\tdisableUI() {\n\t\tsuper.disableUI();\n\t}\n\n\tenableUI() {\n\t\tsuper.enableUI();\n\t}\n}\n\nclass LinkedListNode {\n\tconstructor(val, id, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.graphicID = id;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\t\tthis.next = null;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport Graph from './Graph.js';\nimport { PRIMS_KRUSKALS_ADJ_LIST } from './util/GraphValues';\nimport PriorityQueue from './util/PriorityQueue';\nimport { act } from '../anim/AnimationMain';\n\nconst PQ_DEQUEUED_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\nconst MST_EDGE_COLOR = '#3399FF';\nconst MST_EDGE_THICKNESS = 4;\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 65;\nconst VISITED_SPACING = 20;\n\nconst CURRENT_EDGE_LABEL_X = 25;\nconst CURRENT_EDGE_LABEL_Y = 90;\nconst CURRENT_VERTEX_X = 110;\nconst CURRENT_VERTEX_Y = 96;\n\nconst PQ_LABEL_X = 25;\nconst PQ_LABEL_Y = 115;\n\nconst PQ_X = 45;\nconst PQ_Y = 143;\nconst PQ_SPACING = 50;\nconst PQ_LINE_SPACING = 25;\nconst PQ_MAX_PER_LINE = 8;\n\nexport default class Prims extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, PRIMS_KRUSKALS_ADJ_LIST, false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.startField.size = 2;\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls(false);\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.commands = [];\n\t\tthis.messageID = null;\n\n\t\tthis.visited = [];\n\t\tthis.visitedID = [];\n\t\tthis.pq = new PriorityQueue();\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current edge:',\n\t\t\tCURRENT_EDGE_LABEL_X,\n\t\t\tCURRENT_EDGE_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.createLabel, this.nextIndex++, 'Priority Queue:', PQ_LABEL_X, PQ_LABEL_Y, 0);\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.highlightCircleL = this.nextIndex++;\n\t\tthis.highlightCircleAL = this.nextIndex++;\n\t\tthis.highlightCircleAM = this.nextIndex++;\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.messageID = [];\n\t\tthis.visitedID = [];\n\t\tthis.pq = new PriorityQueue();\n\t}\n\n\tstartCallback() {\n\t\tif (this.startField.value !== '') {\n\t\t\tlet startvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size)\n\t\t\t\tthis.implementAction(this.doPrim.bind(this), startvalue);\n\t\t}\n\t}\n\n\tdoPrim(startVertex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.visitedID = [];\n\n\t\tthis.visitVertex(startVertex);\n\n\t\tthis.visited[startVertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(startVertex),\n\t\t\tVISITED_START_X,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[startVertex], VISITED_COLOR);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Adding ' + this.toStr(startVertex) + ' to visited set',\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tthis.pq = new PriorityQueue();\n\t\tlet pqIDs = [];\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Enqueuing edges of ' + this.toStr(startVertex));\n\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\tconst weight = this.adj_matrix[startVertex][neighbor];\n\t\t\tif (weight > 0) {\n\t\t\t\tthis.highlightEdge(startVertex, neighbor, 1);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\t'(' + this.toStr(startVertex) + this.toStr(neighbor) + ', ' + weight + ')',\n\t\t\t\t\tPQ_X + (this.pq.size() % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\tPQ_Y + Math.floor(this.pq.size() / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t);\n\t\t\t\tthis.pq.enqueue([startVertex, neighbor], this.nextIndex++, weight);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tconst newPqIDs = this.pq.getIDs();\n\t\t\t\tif (String(pqIDs) !== String(newPqIDs.slice(0, -1))) {\n\t\t\t\t\t// Check if newly enqueued element shifted things\n\t\t\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tnewPqIDs[i],\n\t\t\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tpqIDs = newPqIDs;\n\t\t\t\tthis.highlightEdge(startVertex, neighbor, 0);\n\t\t\t}\n\t\t}\n\n\t\tthis.leaveVertex();\n\n\t\twhile (this.visited.includes(false) && this.pq.size() !== 0) {\n\t\t\tconst [edge, edgeID] = this.pq.dequeue();\n\t\t\tlet edgeStr = this.toStr(edge[0]) + this.toStr(edge[1]);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'Dequeued ' + edgeStr + ', with destination ' + this.toStr(edge[1]),\n\t\t\t);\n\t\t\tthis.cmd(act.move, edgeID, CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\t\tthis.cmd(act.setText, edgeID, this.toStr(edge[0]) + this.toStr(edge[1]));\n\t\t\tthis.cmd(act.setTextColor, edgeID, PQ_DEQUEUED_COLOR);\n\t\t\tpqIDs = this.pq.getIDs();\n\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tpqIDs[i],\n\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.highlightEdge(edge[0], edge[1], 1);\n\t\t\tthis.visitVertex(edge[1]);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (!this.visited[edge[1]]) {\n\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Adding ' + edgeStr + ' to MST');\n\t\t\t\tthis.highlightEdge(edge[0], edge[1], 0);\n\t\t\t\tthis.setEdgeColor(edge[0], edge[1], MST_EDGE_COLOR);\n\t\t\t\tthis.setEdgeThickness(edge[0], edge[1], MST_EDGE_THICKNESS);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.visited[edge[1]] = true;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Adding ' + this.toStr(edge[1]) + ' to visited set',\n\t\t\t\t);\n\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\tthis.toStr(edge[1]),\n\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * VISITED_SPACING,\n\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[edge[1]], VISITED_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Enqueuing edges of ' + this.toStr(edge[1]),\n\t\t\t\t);\n\t\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\t\tif (this.adj_matrix[edge[1]][neighbor] >= 0) {\n\t\t\t\t\t\tthis.highlightEdge(edge[1], neighbor, 1);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.circleID[neighbor], 1);\n\t\t\t\t\t\tif (this.visited[neighbor]) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t'Vertex ' +\n\t\t\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t\t' has already been visited, skipping',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.circleID[neighbor], 0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t'Vertex ' + this.toStr(neighbor) + ' has not yet been visited',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.circleID[neighbor], 0);\n\t\t\t\t\t\t\tedgeStr = this.toStr(edge[1]) + this.toStr(neighbor);\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t'Enqueueing edge ' +\n\t\t\t\t\t\t\t\t\tedgeStr +\n\t\t\t\t\t\t\t\t\t' with weight ' +\n\t\t\t\t\t\t\t\t\tthis.adj_matrix[edge[1]][neighbor],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\t\t\t\t'(' + edgeStr + ', ' + this.adj_matrix[edge[1]][neighbor] + ')',\n\t\t\t\t\t\t\t\tPQ_X + (this.pq.size() % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\tPQ_Y +\n\t\t\t\t\t\t\t\t\tMath.floor(this.pq.size() / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.pq.enqueue(\n\t\t\t\t\t\t\t\t[edge[1], neighbor],\n\t\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\t\tthis.adj_matrix[edge[1]][neighbor],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\tconst newPqIDs = this.pq.getIDs();\n\t\t\t\t\t\t\tif (String(pqIDs) !== String(newPqIDs.slice(0, -1))) {\n\t\t\t\t\t\t\t\t// Check if newly enqueued element shifted things\n\t\t\t\t\t\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\t\tnewPqIDs[i],\n\t\t\t\t\t\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpqIDs = newPqIDs;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.highlightEdge(edge[1], neighbor, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.highlightEdge(edge[0], edge[1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\tthis.toStr(edge[1]) + ' has already been visited, skipping',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.leaveVertex();\n\t\t\tthis.cmd(act.delete, edgeID);\n\t\t}\n\n\t\tif (this.pq.size() > 0) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'MST has correct amount of edges / all vertices have been visited, done',\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Priority queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tthis.recolorGraph();\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.visited[i] = false;\n\t\t}\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tconst pqIDs = this.pq.getIDs();\n\t\tfor (const id of pqIDs) {\n\t\t\tthis.cmd(act.delete, id);\n\t\t}\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst ARRAY_ELEMS_PER_LINE = 14;\nconst ARRAY_LINE_SPACING = 130;\n\nconst FRONT_POS_X = 180;\nconst FRONT_POS_Y = 100;\nconst FRONT_LABEL_X = 130;\nconst FRONT_LABEL_Y = 100;\n\nconst SIZE_POS_X = 280;\nconst SIZE_POS_Y = 100;\nconst SIZE_LABEL_X = 230;\nconst SIZE_LABEL_Y = 100;\n\nconst QUEUE_LABEL_X = 60;\nconst QUEUE_LABEL_Y = 30;\nconst QUEUE_ELEMENT_X = 130;\nconst QUEUE_ELEMENT_Y = 30;\n\nconst QUEUE_INDEX_X = 129;\nconst QUEUE_INDEX_Y = 50;\nconst QUEUE_INDEXVAL_X = 260;\nconst QUEUE_INDEXVAL_Y = 50;\n\nconst RESIZE_ARRAY_START_X = 100;\nconst RESIZE_ARRAY_START_Y = 300;\nconst QUEUE_RESIZE_LABEL_X = 60;\nconst QUEUE_RESIZE_LABEL_Y = 60;\n\nconst INDEX_COLOR = '#0000FF';\n\nconst FRONT_LABEL_OFFSET = -40;\n\nconst SIZE = 7;\nconst MAX_SIZE = 30;\n\nexport default class QueueArray extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.enqueueField = addControlToAlgorithmBar('Text', '');\n\t\tthis.enqueueField.onkeydown = this.returnSubmit(\n\t\t\tthis.enqueueField,\n\t\t\tthis.enqueueCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.enqueueButton = addControlToAlgorithmBar('Button', 'Enqueue');\n\t\tthis.enqueueButton.onclick = this.enqueueCallback.bind(this);\n\t\tthis.controls.push(this.enqueueField);\n\t\tthis.controls.push(this.enqueueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.dequeueButton = addControlToAlgorithmBar('Button', 'Dequeue');\n\t\tthis.dequeueButton.onclick = this.dequeueCallback.bind(this);\n\t\tthis.controls.push(this.dequeueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.frontID = this.nextIndex++;\n\t\tconst frontLabelID = this.nextIndex++;\n\t\tthis.sizeID = this.nextIndex++;\n\t\tconst sizeLabelID = this.nextIndex++;\n\t\tthis.frontPointerID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, frontLabelID, 'Front', FRONT_LABEL_X, FRONT_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.frontID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, sizeLabelID, 'Size', SIZE_LABEL_X, SIZE_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.sizeID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tSIZE_POS_X,\n\t\t\tSIZE_POS_Y,\n\t\t);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.frontPointerID,\n\t\t\t'Front',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + FRONT_LABEL_OFFSET,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.top = 0;\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tthis.arrayData = new Array(SIZE);\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.nextIndex = this.nextIndex + 7;\n\t}\n\n\tenqueueCallback() {\n\t\tif (this.size < this.arrayData.length && this.enqueueField.value !== '') {\n\t\t\tconst pushVal = this.enqueueField.value;\n\t\t\tthis.enqueueField.value = '';\n\t\t\tthis.implementAction(this.enqueue.bind(this), pushVal);\n\t\t} else if (\n\t\t\tthis.size === this.arrayData.length &&\n\t\t\tthis.enqueueField !== '' &&\n\t\t\tthis.size * 2 < MAX_SIZE\n\t\t) {\n\t\t\tconst pushVal = this.enqueueField.value;\n\t\t\tthis.enqueueField.value = '';\n\t\t\tthis.implementAction(this.resize.bind(this), pushVal);\n\t\t}\n\t}\n\n\tdequeueCallback() {\n\t\tif (this.size !== 0) {\n\t\t\tthis.implementAction(this.dequeue.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tenqueue(elemToEnqueue) {\n\t\tthis.commands = [];\n\n\t\tconst labEnqueueID = this.nextIndex++;\n\t\tconst labEnqueueValID = this.nextIndex++;\n\t\tconst labIndexID = this.nextIndex++;\n\t\tconst labIndexValID = this.nextIndex++;\n\n\t\tconst newTail = (this.front + this.size) % this.arrayData.length;\n\t\tthis.arrayData[newTail] = elemToEnqueue;\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labEnqueueID, 'Enqueuing Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labEnqueueValID, elemToEnqueue, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabIndexID,\n\t\t\t'Enqueueing at (front + size) % array.length: ',\n\t\t\tQUEUE_INDEX_X,\n\t\t\tQUEUE_INDEX_Y,\n\t\t);\n\t\tthis.cmd(act.createLabel, labIndexValID, newTail, QUEUE_INDEXVAL_X, QUEUE_INDEXVAL_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (newTail % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(newTail / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, QUEUE_INDEXVAL_X, QUEUE_INDEXVAL_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, labIndexValID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labEnqueueValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[newTail], elemToEnqueue);\n\t\tthis.cmd(act.delete, labEnqueueValID);\n\t\tthis.cmd(act.delete, labIndexValID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.delete, labEnqueueID);\n\t\tthis.cmd(act.delete, labIndexID);\n\n\t\tthis.nextIndex = this.nextIndex - 4;\n\n\t\treturn this.commands;\n\t}\n\n\tdequeue() {\n\t\tthis.commands = [];\n\n\t\tconst labDequeueID = this.nextIndex++;\n\t\tconst labDequeueValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labDequeueID, 'Dequeued Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.front % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.front / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tconst dequeuedVal = this.arrayData[this.front];\n\t\tthis.cmd(act.createLabel, labDequeueValID, dequeuedVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[this.front], '');\n\t\tthis.cmd(act.move, labDequeueValID, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tthis.front = (this.front + 1) % this.arrayData.length;\n\t\tconst frontxpos = (this.front % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst frontypos =\n\t\t\tMath.floor(this.front / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING +\n\t\t\tARRAY_START_Y +\n\t\t\tFRONT_LABEL_OFFSET;\n\t\tthis.cmd(act.move, this.frontPointerID, frontxpos, frontypos);\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 0);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Dequeued Value: ' + dequeuedVal);\n\n\t\tthis.cmd(act.delete, labDequeueID);\n\t\tthis.cmd(act.delete, labDequeueValID);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size - 1;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\tresize(elemToEnqueue) {\n\t\tthis.commands = [];\n\n\t\tconst labEnqueueID = this.nextIndex++;\n\t\tconst labEnqueueValID = this.nextIndex++;\n\t\tconst labEnqueueResizeID = this.nextIndex++;\n\n\t\tthis.arrayIDNew = new Array(this.size * 2);\n\t\tthis.arrayLabelIDNew = new Array(this.size * 2);\n\t\tthis.arrayDataNew = new Array(this.size * 2);\n\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tthis.arrayIDNew[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelIDNew[i] = this.nextIndex++;\n\t\t\tif (i < this.size) {\n\t\t\t\tthis.arrayDataNew[i] = this.arrayData[(this.front + i) % this.arrayData.length];\n\t\t\t}\n\t\t}\n\n\t\tthis.arrayDataNew[this.size] = elemToEnqueue;\n\n\t\tthis.cmd(act.createLabel, labEnqueueID, 'Enqueuing Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labEnqueueValID, elemToEnqueue, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabEnqueueResizeID,\n\t\t\t'(Resize Required)',\n\t\t\tQUEUE_RESIZE_LABEL_X,\n\t\t\tQUEUE_RESIZE_LABEL_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\t//Create new array\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayIDNew[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelIDNew[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelIDNew[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.arrayMoveID = new Array(this.size);\n\n\t\t//Move old elements to new array\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst xposinit =\n\t\t\t\t(((this.front + i) % this.arrayData.length) % ARRAY_ELEMS_PER_LINE) *\n\t\t\t\t\tARRAY_ELEM_WIDTH +\n\t\t\t\tARRAY_START_X;\n\t\t\tconst yposinit =\n\t\t\t\tMath.floor(((this.front + i) % this.arrayData.length) / ARRAY_ELEMS_PER_LINE) *\n\t\t\t\t\tARRAY_LINE_SPACING +\n\t\t\t\tARRAY_START_Y;\n\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.arrayMoveID[i],\n\t\t\t\tthis.arrayData[(this.front + i) % this.arrayData.length],\n\t\t\t\txposinit,\n\t\t\t\typosinit,\n\t\t\t);\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos, ypos);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//Delete movement objects and set text\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\tthis.cmd(act.setText, this.arrayIDNew[i], this.arrayDataNew[i]);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//Delete old array\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t\tthis.cmd(act.delete, this.arrayLabelID[i]);\n\t\t}\n\n\t\t//Move new array\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tthis.cmd(act.move, this.arrayIDNew[i], xpos, ypos);\n\t\t\tthis.cmd(act.move, this.arrayLabelIDNew[i], xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.front = 0;\n\t\tthis.arrayID = this.arrayIDNew;\n\t\tthis.arrayLabelID = this.arrayLabelIDNew;\n\t\tthis.arrayData = this.arrayDataNew;\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.move, this.frontPointerID, ARRAY_START_X, ARRAY_START_Y + FRONT_LABEL_OFFSET);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 0);\n\n\t\t//Delete '(resize required)' text, create circle at the \"size\" object, add enqueue text\n\n\t\tconst newTail = (this.front + this.size) % this.arrayData.length;\n\t\tconst labIndexID = this.nextIndex++;\n\t\tconst labIndexValID = this.nextIndex++;\n\n\t\tthis.cmd(act.delete, labEnqueueResizeID);\n\n\t\t//Just so the element travels over the array instead of underneath it\n\t\tthis.cmd(act.delete, labEnqueueValID);\n\t\tconst labEnqueueValIDNew = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabEnqueueValIDNew,\n\t\t\telemToEnqueue,\n\t\t\tQUEUE_ELEMENT_X,\n\t\t\tQUEUE_ELEMENT_Y,\n\t\t);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabIndexID,\n\t\t\t'Enqueueing at (front + size) % array.length: ',\n\t\t\tQUEUE_INDEX_X,\n\t\t\tQUEUE_INDEX_Y,\n\t\t);\n\t\tthis.cmd(act.createLabel, labIndexValID, newTail, QUEUE_INDEXVAL_X, QUEUE_INDEXVAL_Y);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\t//Enqueue 'elemToEnqueue'\n\t\tconst xpos = (newTail % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(newTail / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, QUEUE_INDEXVAL_X, QUEUE_INDEXVAL_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, labIndexValID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labEnqueueValIDNew, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[newTail], elemToEnqueue);\n\t\tthis.cmd(act.delete, labEnqueueValIDNew);\n\t\tthis.cmd(act.delete, labIndexValID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.delete, labEnqueueID);\n\t\tthis.cmd(act.delete, labIndexID);\n\n\t\tthis.nextIndex = this.nextIndex - this.size;\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t}\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.cmd(act.setText, this.frontID, '0');\n\t\tthis.cmd(act.setText, this.sizeID, '0');\n\t\tthis.cmd(act.setPosition, this.frontPointerID, ARRAY_START_X,\n\t\t\tARRAY_START_Y + FRONT_LABEL_OFFSET);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 250;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst TOP_POS_X = 180;\nconst TOP_POS_Y = 100;\nconst TOP_LABEL_X = 130;\nconst TOP_LABEL_Y = 100;\n\nconst TOP_ELEM_WIDTH = 30;\nconst TOP_ELEM_HEIGHT = 30;\n\nconst TAIL_POS_X = 180;\nconst TAIL_LABEL_X = 130;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class QueueLL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.tail_pos_y = h - LINKED_LIST_ELEM_HEIGHT;\n\t\tthis.tail_label_y = this.tail_pos_y;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.enqueueField = addControlToAlgorithmBar('Text', '');\n\t\tthis.enqueueField.onkeydown = this.returnSubmit(\n\t\t\tthis.enqueueField,\n\t\t\tthis.enqueueCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.enqueueButton = addControlToAlgorithmBar('Button', 'Enqueue');\n\t\tthis.enqueueButton.onclick = this.enqueueCallback.bind(this);\n\t\tthis.controls.push(this.enqueueField);\n\t\tthis.controls.push(this.enqueueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.dequeueButton = addControlToAlgorithmBar('Button', 'Dequeue');\n\t\tthis.dequeueButton.onclick = this.dequeueCallback.bind(this);\n\t\tthis.controls.push(this.dequeueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.linkedListElemID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.headID = this.nextIndex++;\n\t\tthis.headLabelID = this.nextIndex++;\n\n\t\tthis.tailID = this.nextIndex++;\n\t\tthis.tailLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.top = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.headLabelID, 'Head', TOP_LABEL_X, TOP_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.headID,\n\t\t\t'',\n\t\t\tTOP_ELEM_WIDTH,\n\t\t\tTOP_ELEM_HEIGHT,\n\t\t\tTOP_POS_X,\n\t\t\tTOP_POS_Y,\n\t\t);\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\n\t\tthis.cmd(act.createLabel, this.tailLabelID, 'Tail', TAIL_LABEL_X, this.tail_label_y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.tailID,\n\t\t\t'',\n\t\t\tTOP_ELEM_WIDTH,\n\t\t\tTOP_ELEM_HEIGHT,\n\t\t\tTAIL_POS_X,\n\t\t\tthis.tail_pos_y,\n\t\t);\n\t\tthis.cmd(act.setNull, this.tailID, 1);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', 5, PUSH_LABEL_Y, 0);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tresetLinkedListPositions() {\n\t\tfor (let i = this.top - 1; i >= 0; i--) {\n\t\t\tconst nextX =\n\t\t\t\t((this.top - 1 - i) % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\tLINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor((this.top - 1 - i) / LINKED_LIST_ELEMS_PER_LINE) *\n\t\t\t\t\tLINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tenqueueCallback() {\n\t\tif (this.top < SIZE && this.enqueueField.value !== '') {\n\t\t\tconst pushVal = this.enqueueField.value;\n\t\t\tthis.enqueueField.value = '';\n\t\t\tthis.implementAction(this.enqueue.bind(this), pushVal);\n\t\t}\n\t}\n\n\tdequeueCallback() {\n\t\tif (this.top > 0) {\n\t\t\tthis.implementAction(this.dequeue.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tenqueue(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData[this.top] = elemToPush;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tfor (let i = this.top; i > 0; i--) {\n\t\t\tthis.arrayData[i] = this.arrayData[i - 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i - 1];\n\t\t}\n\t\tthis.arrayData[0] = elemToPush;\n\t\tthis.linkedListElemID[0] = this.nextIndex++;\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tthis.linkedListElemID[0],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t\t0,\n\t\t\t1,\n\t\t);\n\n\t\tthis.cmd(act.setNull, this.linkedListElemID[0], 1);\n\t\tthis.cmd(act.createLabel, labPushID, 'Enqueuing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[0], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (this.top === 0) {\n\t\t\tthis.cmd(act.setNull, this.headID, 0);\n\t\t\tthis.cmd(act.setNull, this.tailID, 0);\n\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[this.top]);\n\t\t\tthis.cmd(act.connect, this.tailID, this.linkedListElemID[this.top]);\n\t\t} else {\n\t\t\tthis.cmd(act.setNull, this.linkedListElemID[1], 0);\n\t\t\tthis.cmd(act.connect, this.linkedListElemID[1], this.linkedListElemID[0]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[1]);\n\t\t}\n\t\tthis.cmd(act.connect, this.tailID, this.linkedListElemID[0]);\n\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top + 1;\n\t\tthis.resetLinkedListPositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tdequeue() {\n\t\tthis.commands = [];\n\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPopID, 'Dequeued Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabPopValID,\n\t\t\tthis.arrayData[this.top - 1],\n\t\t\tLINKED_LIST_START_X,\n\t\t\tLINKED_LIST_START_Y,\n\t\t);\n\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.disconnect, this.headID, this.linkedListElemID[this.top - 1]);\n\n\t\tif (this.top === 1) {\n\t\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\t\tthis.cmd(act.setNull, this.tailID, 1);\n\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[this.top - 1]);\n\t\t} else {\n\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[this.top - 2]);\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[this.top - 1]);\n\t\tthis.top = this.top - 1;\n\t\tthis.resetLinkedListPositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Dequeued Value: ' + this.arrayData[this.top]);\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.top = 0;\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\tthis.cmd(act.setNull, this.tailID, 1);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nexport default class QuickSelect extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.runCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\taddLabelToAlgorithmBar('k element (1 indexed)');\n\n\t\t// k text field\n\t\tthis.kField = addControlToAlgorithmBar('Text', '');\n\t\tthis.kField.onkeydown = this.returnSubmit(\n\t\t\tthis.kField,\n\t\t\tthis.runCallback.bind(this),\n\t\t\t2,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.kField);\n\n\t\t// Run button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.findButton.onclick = this.runCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Toggles\n\t\tconst pivotButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Random pivot', 'Min element', 'First element', 'Perfect pivot'],\n\t\t\t'Traversals',\n\t\t);\n\n\t\tthis.randomPivotSelect = pivotButtonList[0];\n\t\tthis.minPivotSelect = pivotButtonList[1];\n\t\tthis.firstPivotSelect = pivotButtonList[2];\n\t\tthis.perfectPivotSelect = pivotButtonList[3];\n\t\tthis.randomPivotSelect.onclick = () => (this.pivotType = 'random');\n\t\tthis.minPivotSelect.onclick = () => (this.pivotType = 'min');\n\t\tthis.firstPivotSelect.onclick = () => (this.pivotType = 'first');\n\t\tthis.perfectPivotSelect.onclick = () => (this.pivotType = 'perfect');\n\t\tthis.randomPivotSelect.checked = true;\n\t\tthis.pivotType = 'random';\n\n\t\taddDivisorToAlgorithmBar();\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\t}\n\n\trunCallback() {\n\t\tif (this.listField.value !== '' && this.kField.value !== '') {\n\t\t\tconst listStr = this.listField.value;\n\t\t\tconst list = listStr\n\t\t\t\t.split(',')\n\t\t\t\t.map(Number)\n\t\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t\t.slice(0, 18);\n\t\t\tconst k = this.kField.value;\n\t\t\tif (k > 0 && k <= list.length) {\n\t\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\t\tthis.listField.value = '';\n\t\t\t\tthis.kField.value = '';\n\t\t\t\tthis.implementAction(this.run.bind(this), listStr, k);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\treturn this.commands;\n\t}\n\n\trun(list, k) {\n\t\tthis.commands = [];\n\n\t\tthis.k = Number(k);\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = list\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.arrayData[i] = parseInt(this.arrayData[i]);\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.pPointerID = this.nextIndex++;\n\t\tthis.helper(0, this.arrayData.length - 1);\n\n\t\treturn this.commands;\n\t}\n\n\thelper(left, right) {\n\t\tif (left > right) return;\n\n\t\t// Hightlight cells in the current sub-array\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#99CCFF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tif (left === right) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t\treturn;\n\t\t}\n\n\t\t// Create pivot pointer and swap with left-most element\n\t\t// To make things more interesting (and clearer), we don't pick the left-most element as pivot\n\t\tlet pivot;\n\t\tif (this.pivotType === 'min') {\n\t\t\tlet min = left;\n\t\t\tfor (let i = left + 1; i <= right; i++) {\n\t\t\t\tif (this.arrayData[i] < this.arrayData[min]) {\n\t\t\t\t\tmin = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpivot = min;\n\t\t} else if (this.pivotType === 'first') {\n\t\t\tpivot = left;\n\t\t} else if (this.pivotType === 'perfect') {\n\t\t\tconst sorted = this.arrayData.slice(left, right + 1);\n\t\t\tsorted.sort((a, b) => a - b);\n\t\t\tconst midIndex = Math.floor(sorted.length / 2);\n\t\t\tpivot = this.arrayData.indexOf(sorted[midIndex]);\n\t\t} else if (this.pivotType === 'random') {\n\t\t\tpivot = Math.floor(Math.random() * (right - left)) + left + 1;\n\t\t}\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.pPointerID, '#FFFF00', pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.swapPivot(pivot, left);\n\n\t\t// Partition\n\t\tlet i = left + 1;\n\t\tlet j = right;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.iPointerID, '#0000FF', iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.createHighlightCircle, this.jPointerID, '#0000FF', jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\twhile (i <= j) {\n\t\t\twhile (i <= j && this.arrayData[left] >= this.arrayData[i]) {\n\t\t\t\ti++;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\twhile (i <= j && this.arrayData[left] <= this.arrayData[j]) {\n\t\t\t\tj--;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.swap(i, j);\n\t\t\t\ti++;\n\t\t\t\tj--;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t}\n\n\t\t// Move pivot back and delete pivot pointer\n\t\tthis.swapPivot(left, j, true);\n\n\t\t// Delete i and j pointers\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.delete, this.pPointerID);\n\t\tthis.cmd(act.step);\n\n\t\t// Un-hightlight cells in sub-array and set pivot cell to green\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#FFFFFF');\n\t\t}\n\t\tif (this.k - 1 === j) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[j], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[j], '#4DA6ff');\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (this.k - 1 < j) {\n\t\t\t\tthis.helper(left, j - 1);\n\t\t\t} else {\n\t\t\t\tthis.helper(j + 1, right);\n\t\t\t}\n\t\t}\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, ARRAY_START_Y);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswapPivot(pivot, other, moveJ) {\n\t\tif (pivot === other) return;\n\t\t// Create temporary labels and remove text in array\n\t\tconst lLabelID = this.nextIndex++;\n\t\tconst lXPos = other * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, lLabelID, this.displayData[other], lXPos, ARRAY_START_Y);\n\t\tconst pLabelID = this.nextIndex++;\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, pLabelID, this.displayData[pivot], pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[other], '');\n\t\tthis.cmd(act.setText, this.arrayID[pivot], '');\n\t\t// Move labels and pivot pointer\n\t\tthis.cmd(act.move, pLabelID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, this.pPointerID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, lLabelID, pXPos, ARRAY_START_Y);\n\t\tmoveJ && this.cmd(act.move, this.jPointerID, pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array, and delete temporary labels and pointer\n\t\tthis.cmd(act.setText, this.arrayID[other], this.displayData[pivot]);\n\t\tthis.cmd(act.setText, this.arrayID[pivot], this.displayData[other]);\n\t\tthis.cmd(act.delete, pLabelID);\n\t\tthis.cmd(act.delete, lLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[pivot];\n\t\tthis.arrayData[pivot] = this.arrayData[other];\n\t\tthis.arrayData[other] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[pivot];\n\t\tthis.displayData[pivot] = this.displayData[other];\n\t\tthis.displayData[other] = temp;\n\t}\n\n\tswap(i, j) {\n\t\t// Create temporary labels and remove text in array\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, ARRAY_START_Y);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\t// Move labels\n\t\tthis.cmd(act.move, iLabelID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, jLabelID, iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array and delete temporary labels\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t\t// Reset pointer colors back to blue\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nexport default class QuickSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.findButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Toggles\n\t\tconst pivotButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Random pivot', 'Min element', 'First element', 'Perfect pivot'],\n\t\t\t'Traversals',\n\t\t);\n\n\t\tthis.randomPivotSelect = pivotButtonList[0];\n\t\tthis.minPivotSelect = pivotButtonList[1];\n\t\tthis.firstPivotSelect = pivotButtonList[2];\n\t\tthis.perfectPivotSelect = pivotButtonList[3];\n\t\tthis.randomPivotSelect.onclick = () => (this.pivotType = 'random');\n\t\tthis.minPivotSelect.onclick = () => (this.pivotType = 'min');\n\t\tthis.firstPivotSelect.onclick = () => (this.pivotType = 'first');\n\t\tthis.perfectPivotSelect.onclick = () => (this.pivotType = 'perfect');\n\t\tthis.randomPivotSelect.checked = true;\n\t\tthis.pivotType = 'random';\n\n\t\taddDivisorToAlgorithmBar();\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => x)\n\t\t\t.slice(0, 18);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.arrayData[i] = parseInt(this.arrayData[i]);\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.pPointerID = this.nextIndex++;\n\t\tthis.helper(0, this.arrayData.length - 1);\n\n\t\treturn this.commands;\n\t}\n\n\thelper(left, right) {\n\t\tif (left > right) return;\n\n\t\t// Hightlight cells in the current sub-array\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#99CCFF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tif (left === right) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t\treturn;\n\t\t}\n\n\t\t// Create pivot pointer and swap with left-most element\n\t\t// To make things more interesting (and clearer), we don't pick the left-most element as pivot\n\t\tlet pivot;\n\t\tif (this.pivotType === 'min') {\n\t\t\tlet min = left;\n\t\t\tfor (let i = left + 1; i <= right; i++) {\n\t\t\t\tif (this.arrayData[i] < this.arrayData[min]) {\n\t\t\t\t\tmin = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpivot = min;\n\t\t} else if (this.pivotType === 'first') {\n\t\t\tpivot = left;\n\t\t} else if (this.pivotType === 'perfect') {\n\t\t\tconst sorted = this.arrayData.slice(left, right + 1);\n\t\t\tsorted.sort((a, b) => a - b);\n\t\t\tconst midIndex = Math.floor(sorted.length / 2);\n\t\t\tpivot = this.arrayData.indexOf(sorted[midIndex]);\n\t\t} else if (this.pivotType === 'random') {\n\t\t\tpivot = Math.floor(Math.random() * (right - left)) + left + 1;\n\t\t}\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.pPointerID, '#FFFF00', pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.swapPivot(pivot, left);\n\n\t\t// Partition\n\t\tlet i = left + 1;\n\t\tlet j = right;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.iPointerID, '#0000FF', iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.createHighlightCircle, this.jPointerID, '#0000FF', jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\twhile (i <= j) {\n\t\t\twhile (i <= j && this.arrayData[left] >= this.arrayData[i]) {\n\t\t\t\ti++;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\twhile (i <= j && this.arrayData[left] <= this.arrayData[j]) {\n\t\t\t\tj--;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.swap(i, j);\n\t\t\t\ti++;\n\t\t\t\tj--;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t}\n\t\t}\n\n\t\t// Move pivot back and delete pivot pointer\n\t\tthis.swapPivot(left, j, true);\n\n\t\t// Delete i and j pointers\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.delete, this.pPointerID);\n\t\tthis.cmd(act.step);\n\n\t\t// Un-hightlight cells in sub-array and set pivot cell to green\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#FFFFFF');\n\t\t}\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[j], '#2ECC71');\n\t\tthis.cmd(act.step);\n\n\t\tthis.helper(left, j - 1);\n\t\tthis.helper(j + 1, right);\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, ARRAY_START_Y);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswapPivot(pivot, other, moveJ) {\n\t\tif (pivot === other) return;\n\t\t// Create temporary labels and remove text in array\n\t\tconst lLabelID = this.nextIndex++;\n\t\tconst lXPos = other * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, lLabelID, this.displayData[other], lXPos, ARRAY_START_Y);\n\t\tconst pLabelID = this.nextIndex++;\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, pLabelID, this.displayData[pivot], pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[other], '');\n\t\tthis.cmd(act.setText, this.arrayID[pivot], '');\n\t\t// Move labels and pivot pointer\n\t\tthis.cmd(act.move, pLabelID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, this.pPointerID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, lLabelID, pXPos, ARRAY_START_Y);\n\t\tmoveJ && this.cmd(act.move, this.jPointerID, pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array, and delete temporary labels and pointer\n\t\tthis.cmd(act.setText, this.arrayID[other], this.displayData[pivot]);\n\t\tthis.cmd(act.setText, this.arrayID[pivot], this.displayData[other]);\n\t\tthis.cmd(act.delete, pLabelID);\n\t\tthis.cmd(act.delete, lLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[pivot];\n\t\tthis.arrayData[pivot] = this.arrayData[other];\n\t\tthis.arrayData[other] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[pivot];\n\t\tthis.displayData[pivot] = this.displayData[other];\n\t\tthis.displayData[other] = temp;\n\t}\n\n\tswap(i, j) {\n\t\t// Create temporary labels and remove text in array\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, ARRAY_START_Y);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\t// Move labels\n\t\tthis.cmd(act.move, iLabelID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, jLabelID, iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array and delete temporary labels\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t\t// Reset pointer colors back to blue\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\t// toggleWorstPivot() {\n\t// \tworstPivotEnabled = !worstPivotEnabled;\n\t// \tif (firstPivotEnabled) {\n\t// \t\tfirstPivotEnabled = false;\n\t// \t\tthis.firstPivotToggle.checked = false;\n\t// \t}\n\t// }\n\n\t// toggleFirstPivot() {\n\t// \tfirstPivotEnabled = !firstPivotEnabled;\n\t// \tif (worstPivotEnabled) {\n\t// \t\tworstPivotEnabled = false;\n\t// \t\tthis.worstPivotToggle.checked = false;\n\t// \t}\n\t// }\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\n// const LOWER_A_CHAR_CODE = 97;\n\nconst BASE_LABEL_Y = 45;\nconst CHARACTER_VALUES_LABEL_Y = 60;\nconst TEXT_HASH_LABEL_START_Y = 100;\nconst PATTERN_HASH_LABEL_START_Y = 115;\n\nexport default class RabinKarp extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t//Base value text field\n\t\tthis.baseField = addControlToAlgorithmBar('Base', '');\n\t\tthis.baseField.onkeydown = this.returnSubmit(\n\t\t\tthis.baseField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.baseField);\n\n\t\t// Base button\n\t\tthis.baseButton = addControlToAlgorithmBar('Button', 'Change Base');\n\t\tthis.baseButton.onclick = this.baseCallback.bind(this);\n\t\tthis.controls.push(this.baseButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.baseLabelID = this.nextIndex++;\n\t\tthis.characterValuesLabelID = this.nextIndex++;\n\t\tthis.textHashLabelID = this.nextIndex++;\n\t\tthis.textHashCalculationID = this.nextIndex++;\n\t\tthis.patternHashLabelID = this.nextIndex++;\n\t\tthis.patternHashCalculationID = this.nextIndex++;\n\n\t\tthis.baseValue = 1;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.baseLabelID = this.nextIndex++;\n\t\tthis.characterValuesLabelID = this.nextIndex++;\n\t\tthis.textHashLabelID = this.nextIndex++;\n\t\tthis.textHashCalculationID = this.nextIndex++;\n\t\tthis.patternHashLabelID = this.nextIndex++;\n\t\tthis.patternHashCalculationID = this.nextIndex++;\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tbaseCallback() {\n\t\tconst val = parseInt(this.baseField.value);\n\t\tif (\n\t\t\tthis.baseField.value !== '' && \n\t\t\tval !== 0\n\t\t) {\n\t\t\tthis.baseField.value = '';\n\t\t\tthis.baseValue = val;\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\t// Filter non-letters from string and make lower case\n\t\ttext = text.replace(/[^a-zA-Z]/g, '').toLowerCase();\n\t\tpattern = pattern.replace(/[^a-zA-Z]/g, '').toLowerCase();\n\n\t\tconst maxRows = text.length - pattern.length + 1;\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tlet xpos, ypos;\n\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\typos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst labelsX = ARRAY_START_X + text.length * this.cellSize + 10;\n\t\tthis.cmd(act.createLabel, this.baseLabelID, `Base constant = ${this.baseValue}`, labelsX, BASE_LABEL_Y, 0);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.characterValuesLabelID,\n\t\t\t'Character values: a = 0, b = 1, ..., z = 25',\n\t\t\tlabelsX,\n\t\t\tCHARACTER_VALUES_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.textHashLabelID,\n\t\t\t'Text hash:',\n\t\t\tlabelsX,\n\t\t\tTEXT_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.patternHashLabelID,\n\t\t\t'Pattern hash:',\n\t\t\tlabelsX,\n\t\t\tPATTERN_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\n\t\tlet textCalculation = '';\n\t\tlet textHash = 0;\n\t\tlet patternCalculation = '';\n\t\tlet patternHash = 0;\n\t\tconst base = Math.pow(this.baseValue, pattern.length - 1);\n\t\tlet runningBase = base;\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\ttextHash += text.charCodeAt(i) * runningBase - 97;\n\t\t\ttextCalculation += `(${text.charAt(i)} * ${runningBase}) + `;\n\t\t\tpatternHash += pattern.charCodeAt(i) * runningBase - 97;\n\t\t\tpatternCalculation += `(${pattern.charAt(i)} * ${runningBase}) + `;\n\t\t\trunningBase /= this.baseValue;\n\t\t}\n\t\ttextCalculation =\n\t\t\ttextCalculation.substring(0, textCalculation.length - 2) + ' = ' + textHash;\n\t\tpatternCalculation =\n\t\t\tpatternCalculation.substring(0, patternCalculation.length - 2) + ' = ' + patternHash;\n\t\tconst calculationsX = ARRAY_START_X + text.length * this.cellSize + 100;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.textHashCalculationID,\n\t\t\ttextCalculation,\n\t\t\tcalculationsX,\n\t\t\tTEXT_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.patternHashCalculationID,\n\t\t\tpatternCalculation,\n\t\t\tcalculationsX,\n\t\t\tPATTERN_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\n\t\tlet row = 0;\n\t\tfor (let i = 0; i <= text.length - pattern.length; i++) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tif (patternHash === textHash) {\n\t\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.createHighlightCircle, iPointerID, '#0000FF', xpos, ARRAY_START_Y);\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.createHighlightCircle, jPointerID, '#0000FF', xpos, ypos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tlet j = 0;\n\t\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\tthis.comparisonMatrixID[row][i + j],\n\t\t\t\t\t\t'#2ECC71',\n\t\t\t\t\t);\n\t\t\t\t\tj++;\n\t\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\t\txpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\tthis.comparisonMatrixID[row][i + j],\n\t\t\t\t\t\t'#E74C3C',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, iPointerID);\n\t\t\t\tthis.cmd(act.delete, jPointerID);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t} else {\n\t\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][k], '#FFFF4D');\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tif (i < text.length - pattern.length) {\n\t\t\t\ttextHash =\n\t\t\t\t\ttextHash -\n\t\t\t\t\t(base * (text.charCodeAt(i) - 97)) +\n\t\t\t\t\t(text.charCodeAt(i + pattern.length) - 97);\n\t\t\t\ttextCalculation = '';\n\t\t\t\trunningBase = base;\n\t\t\t\tfor (let k = 0; k < pattern.length; k++) {\n\t\t\t\t\ttextCalculation += `(${text.charAt(k + i + 1)} * ${runningBase}) + `; //text.charAt(k + i + 1) + ' + ';\n\t\t\t\t\trunningBase /= this.baseValue;\n\t\t\t\t}\n\t\t\t\ttextCalculation =\n\t\t\t\t\ttextCalculation.substring(0, textCalculation.length - 2) + ' = ' + textHash;\n\t\t\t\tthis.cmd(act.setText, this.textHashCalculationID, textCalculation);\n\t\t\t}\n\t\t\trow++;\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tif (this.textRowID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.baseLabelID);\n\t\t\tthis.cmd(act.delete, this.characterValuesLabelID);\n\t\t\tthis.cmd(act.delete, this.textHashLabelID);\n\t\t\tthis.cmd(act.delete, this.textHashCalculationID);\n\t\t\tthis.cmd(act.delete, this.patternHashLabelID);\n\t\t\tthis.cmd(act.delete, this.patternHashCalculationID);\n\t\t}\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\n// const ARRRAY_ELEMS_PER_LINE = 15;\n// const ARRAY_LINE_SPACING = 130;\n\n// const TOP_POS_X = 180;\n// const TOP_POS_Y = 100;\n// const TOP_LABEL_X = 130;\n// const TOP_LABEL_Y = 100;\n\n// const PUSH_LABEL_X = 50;\n// const PUSH_LABEL_Y = 30;\n// const PUSH_ELEMENT_X = 120;\n// const PUSH_ELEMENT_Y = 30;\n\n// const SIZE = 10;\n\nexport default class SelectionSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Comma separated list (e.g. \"3,1,2\", max 18 elements)');\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '');\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.sortButton = addControlToAlgorithmBar('Button', 'Sort');\n\t\tthis.sortButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.sortButton);\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\t//Min & Max selection button\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst minMaxButtonList = addRadioButtonGroupToAlgorithmBar(['Min', 'Max'], 'Min/Max');\n\n\t\tthis.minButton = minMaxButtonList[0];\n\t\tthis.minButton.onclick = this.minCallback.bind(this);\n\t\tthis.minButton.checked = true;\n\t\tthis.maxButton = minMaxButtonList[1];\n\t\tthis.maxButton.onclick = this.maxCallback.bind(this);\n\t\tthis.isMin = true;\n\t}\n\n\tsetup() {\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation();\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t}\n\n\tminCallback() {\n\t\tif (!this.isMin) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.isMin = true;\n\t\t}\n\t}\n\n\tmaxCallback() {\n\t\tif (this.isMin) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.isMin = false;\n\t\t}\n\t}\n\n\tsortCallback() {\n\t\tif (this.listField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst list = this.listField.value;\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.split(',')\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tconst length = this.arrayData.length;\n\t\tthis.displayData = new Array(length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tlet circleShift = 0;\n\t\tif (!this.isMin) {\n\t\t\tcircleShift = ARRAY_ELEM_WIDTH * (this.arrayData.length - 1);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#FF0000',\n\t\t\tARRAY_START_X + circleShift,\n\t\t\tARRAY_START_Y,\n\t\t);\n\n\t\tcircleShift = ARRAY_ELEM_WIDTH;\n\t\tif (!this.isMin) {\n\t\t\tcircleShift = ARRAY_ELEM_WIDTH * (this.arrayData.length - 2);\n\t\t}\n\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + circleShift,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.arrayData.length - 1; i++) {\n\t\t\tlet k = i;\n\t\t\tif (!this.isMin) {\n\t\t\t\tk = this.arrayData.length - 1 - i;\n\t\t\t}\n\n\t\t\tlet toSwap = k;\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[toSwap], '#FFFF00');\n\n\t\t\tfor (let j = i + 1; j < this.arrayData.length; j++) {\n\t\t\t\tlet w = j;\n\t\t\t\tif (!this.isMin) {\n\t\t\t\t\tw = this.arrayData.length - 1 - j;\n\t\t\t\t}\n\n\t\t\t\tthis.movePointers(toSwap, w);\n\t\t\t\tif (this.compare(this.arrayData[w], this.arrayData[toSwap])) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[toSwap], '#FFFFFF');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\ttoSwap = w;\n\t\t\t\t\tthis.movePointers(toSwap, w);\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[toSwap], '#FFFF00');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.swap(k, toSwap);\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[toSwap], '#FFFFFF');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[k], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\tlet lastIndex = this.arrayID.length - 1;\n\t\tif (!this.isMin) {\n\t\t\tlastIndex = 0;\n\t\t}\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[lastIndex], '#2ECC71');\n\n\t\treturn this.commands;\n\t}\n\n\tcompare(i, j) {\n\t\tif (this.isMin) {\n\t\t\treturn i < j;\n\t\t} else {\n\t\t\treturn i > j;\n\t\t}\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst SKIP_LIST_START_X = 100;\nconst SKIP_LIST_START_Y = 400;\nconst SKIP_LIST_ELEM_SIZE = 40;\n\nconst SKIP_LIST_SPACING = 80;\n\nconst VALUE_LABEL_X = 50;\nconst VALUE_LABEL_Y = 23;\nconst VALUE_STRING_X = 120;\nconst VALUE_STRING_Y = 23;\n\nconst CF_LABEL_X = 50;\nconst CF_LABEL_Y = 37;\nconst CF_STRING_X = 120;\nconst CF_STRING_Y = 37;\n\nconst NINF = '\\u2212\\u221E'; // Negative infinity\nconst PINF = '\\u221E'; // Positive infinity\n\nexport default class SkipList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\t// add w/ heads groups\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst topHorizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\t\tconst bottomHorizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// add w/ random heads groups\n\t\tconst verticalGroupRandom = addGroupToAlgorithmBar(false);\n\t\tconst topHorizontalGroupRandom = addGroupToAlgorithmBar(true, verticalGroupRandom);\n\t\tconst bottomHorizontalGroupRandom = addGroupToAlgorithmBar(true, verticalGroupRandom);\n\n\t\t// Add w/ heads section\n\t\taddLabelToAlgorithmBar('Add', topHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', topHorizontalGroup);\n\t\tthis.addValueField.setAttribute('placeholder', 'Value');\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\tthis.addWithHeadsCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('with', topHorizontalGroup);\n\n\t\t// Heads' text field\n\t\tthis.headsField = addControlToAlgorithmBar('Text', '', topHorizontalGroup);\n\t\tthis.headsField.setAttribute('placeholder', '#');\n\t\tthis.headsField.onkeydown = this.returnSubmit(\n\t\t\tthis.headsField,\n\t\t\tthis.addWithHeadsCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.headsField);\n\n\t\taddLabelToAlgorithmBar('heads', topHorizontalGroup);\n\n\t\t// Add with heads button\n\t\tthis.addWithHeadsButton = addControlToAlgorithmBar('Button', 'Add', bottomHorizontalGroup);\n\t\tthis.addWithHeadsButton.onclick = this.addWithHeadsCallback.bind(this);\n\t\tthis.controls.push(this.addWithHeadsButton);\n\n\t\t// Add w/ random heads section\n\t\taddLabelToAlgorithmBar('Add', topHorizontalGroupRandom);\n\n\t\t// Add's value text field\n\t\tthis.addValueFieldRandom = addControlToAlgorithmBar('Text', '', topHorizontalGroupRandom);\n\t\tthis.addValueFieldRandom.setAttribute('placeholder', 'Value');\n\t\tthis.addValueFieldRandom.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueFieldRandom,\n\t\t\tthis.addRandomlyCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueFieldRandom);\n\n\t\taddLabelToAlgorithmBar('with random coin flip', topHorizontalGroupRandom);\n\n\t\t// Add randomly button\n\t\tthis.addRandomlyButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add',\n\t\t\tbottomHorizontalGroupRandom,\n\t\t);\n\t\tthis.addRandomlyButton.onclick = this.addRandomlyCallback.bind(this);\n\t\tthis.controls.push(this.addRandomlyButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Remove's text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '');\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\tthis.removeCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove button\n\t\tthis.removeButton = addControlToAlgorithmBar('Button', 'Remove');\n\t\tthis.removeButton.onclick = this.removeCallback.bind(this);\n\t\tthis.controls.push(this.removeButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Get's index text field\n\t\tthis.getField = addControlToAlgorithmBar('Text', '');\n\t\tthis.getField.onkeydown = this.returnSubmit(\n\t\t\tthis.getField,\n\t\t\tthis.getCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.getField);\n\n\t\t// Get button\n\t\tthis.getButton = addControlToAlgorithmBar('Button', 'Get');\n\t\tthis.getButton.onclick = this.getCallback.bind(this);\n\t\tthis.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\n\t\tthis.nodeID = [[this.nextIndex++], [this.nextIndex++]];\n\t\tthis.data = [[Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY]];\n\t\tthis.size = 0;\n\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[0][0],\n\t\t\tNINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[1][0],\n\t\t\tPINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(act.connectSkipList, this.nodeID[0][0], this.nodeID[1][0], 3);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.nodeID = [[this.nextIndex++], [this.nextIndex++]];\n\t\tthis.data = [[Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY]];\n\t\tthis.size = 0;\n\t}\n\n\taddRandomlyCallback() {\n\t\tif (this.addValueFieldRandom.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueFieldRandom.value);\n\t\t\tthis.addValueFieldRandom.value = '';\n\t\t\tthis.headsField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal);\n\t\t}\n\t}\n\n\taddWithHeadsCallback() {\n\t\tif (this.addValueField.value !== '' && this.headsField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tconst heads = parseInt(this.headsField.value);\n\t\t\tthis.headsField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, heads);\n\t\t}\n\t}\n\n\tremoveCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst value = parseInt(this.removeField.value);\n\t\t\tthis.removeField.value = '';\n\t\t\tthis.implementAction(this.remove.bind(this), value);\n\t\t}\n\t}\n\n\tgetCallback() {\n\t\tif (this.getField.value !== '') {\n\t\t\tconst value = parseInt(this.getField.value);\n\t\t\tthis.getField.value = '';\n\t\t\tthis.implementAction(this.get.bind(this), value);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(value, heads) {\n\t\tthis.commands = [];\n\n\t\tif (heads === undefined) {\n\t\t\theads = Math.floor(Math.random() * (this.size + 1));\n\t\t}\n\t\theads = Math.min(heads, 4);\n\n\t\tconst valueLabelId = this.nextIndex++;\n\t\tconst valueStringId = this.nextIndex++;\n\n\t\tconst cfLabelId = this.nextIndex++;\n\t\tconst cfStringId = this.nextIndex++;\n\n\t\tlet headsString = '';\n\t\tfor (let i = 0; i < heads; i++) {\n\t\t\theadsString += 'H';\n\t\t}\n\t\theadsString += 'T';\n\n\t\tthis.cmd(act.createLabel, valueLabelId, 'Value to add:', VALUE_LABEL_X, VALUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, valueStringId, value, VALUE_STRING_X, VALUE_STRING_Y);\n\t\tthis.cmd(act.createLabel, cfLabelId, 'Coin Flipper:', CF_LABEL_X, CF_LABEL_Y);\n\t\tthis.cmd(act.createLabel, cfStringId, headsString, CF_STRING_X, CF_STRING_Y);\n\t\tthis.cmd(act.step);\n\n\t\t// Add levels\n\t\tfor (let row = this.nodeID[0].length; row <= heads; row++) {\n\t\t\tconst rightPhantomsCol = this.nodeID.length - 1;\n\t\t\tthis.data[0][row] = Number.NEGATIVE_INFINITY;\n\t\t\tthis.nodeID[0][row] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createSkipListNode,\n\t\t\t\tthis.nodeID[0][row],\n\t\t\t\tNINF,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_START_X,\n\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t);\n\t\t\tthis.data[rightPhantomsCol][row] = Number.POSITIVE_INFINITY;\n\t\t\tthis.nodeID[rightPhantomsCol][row] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createSkipListNode,\n\t\t\t\tthis.nodeID[rightPhantomsCol][row],\n\t\t\t\tPINF,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * rightPhantomsCol,\n\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.connectSkipList,\n\t\t\t\tthis.nodeID[0][row],\n\t\t\t\tthis.nodeID[rightPhantomsCol][row],\n\t\t\t\t3,\n\t\t\t);\n\t\t\tthis.cmd(act.connectSkipList, this.nodeID[0][row - 1], this.nodeID[0][row], 0);\n\t\t\tthis.cmd(\n\t\t\t\tact.connectSkipList,\n\t\t\t\tthis.nodeID[rightPhantomsCol][row - 1],\n\t\t\t\tthis.nodeID[rightPhantomsCol][row],\n\t\t\t\t0,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\t// Find column where new element will be inserted\n\t\tlet newCol = 1;\n\t\twhile (value > this.data[newCol][0]) {\n\t\t\tnewCol++;\n\t\t}\n\n\t\t// Move IDs and data in next columns to the right\n\t\tfor (let col = this.nodeID.length - 1; col >= newCol; col--) {\n\t\t\tthis.nodeID[col + 1] = this.nodeID[col];\n\t\t\tthis.data[col + 1] = this.data[col];\n\t\t}\n\t\tthis.nodeID[newCol] = [];\n\t\tthis.data[newCol] = [];\n\n\t\t// Traverse and add\n\t\tlet col = 0;\n\t\tlet row = this.nodeID[0].length - 1;\n\n\t\tconst highlightID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\thighlightID,\n\t\t\t'#FF0000',\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t);\n\t\tthis.cmd(act.setHighlight, highlightID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tlet foundDuplicate = false;\n\t\twhile (row >= 0) {\n\t\t\t// Move right until next element is greater or equal\n\t\t\tlet nextCol = this.getNextCol(col, row);\n\t\t\tif (value === this.data[nextCol][row]) {\n\t\t\t\tfoundDuplicate = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\twhile (value > this.data[nextCol][row]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * nextCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tcol = nextCol;\n\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t}\n\n\t\t\t// Move highlight circle downward\n\t\t\trow--;\n\t\t\tif (row >= 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\n\t\t// Add nodes bottom-up to the new column if no duplicate has been found\n\t\tif (!foundDuplicate) {\n\t\t\tthis.shiftColumns(newCol);\n\t\t\trow++;\n\t\t\t// Having a highlight circle in the previous ID causes an object to look weird (this\n\t\t\t// seems to be an already existing bug) Creating a random object before it is a workaround\n\t\t\tthis.cmd(act.createCircle, this.nextIndex++, '', -100, -100, 0);\n\n\t\t\twhile (row <= heads) {\n\t\t\t\tthis.data[newCol][row] = value;\n\t\t\t\tthis.nodeID[newCol][row] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createSkipListNode,\n\t\t\t\t\tthis.nodeID[newCol][row],\n\t\t\t\t\tvalue,\n\t\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * newCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tconst prevCol = this.getPrevCol(newCol, row);\n\t\t\t\tconst nextCol = this.getNextCol(newCol, row);\n\t\t\t\tthis.cmd(act.disconnect, this.nodeID[prevCol][row], this.nodeID[nextCol][row]);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectSkipList,\n\t\t\t\t\tthis.nodeID[prevCol][row],\n\t\t\t\t\tthis.nodeID[newCol][row],\n\t\t\t\t\t3,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectSkipList,\n\t\t\t\t\tthis.nodeID[newCol][row],\n\t\t\t\t\tthis.nodeID[nextCol][row],\n\t\t\t\t\t3,\n\t\t\t\t);\n\t\t\t\tif (row !== 0) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectSkipList,\n\t\t\t\t\t\tthis.nodeID[newCol][row - 1],\n\t\t\t\t\t\tthis.nodeID[newCol][row],\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * newCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\trow++;\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, valueLabelId);\n\t\tthis.cmd(act.delete, valueStringId);\n\t\tthis.cmd(act.delete, cfLabelId);\n\t\tthis.cmd(act.delete, cfStringId);\n\t\tthis.cmd(act.delete, highlightID);\n\n\t\tthis.size++;\n\n\t\treturn this.commands;\n\t}\n\n\tremove(params) {\n\t\tthis.commands = [];\n\n\t\tconst value = parseInt(params);\n\n\t\tconst valueLabelId = this.nextIndex++;\n\t\tconst valueStringId = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, valueLabelId, 'Value to remove:', VALUE_LABEL_X, VALUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, valueStringId, value, VALUE_STRING_X, VALUE_STRING_Y);\n\t\tthis.cmd(act.step);\n\n\t\t// Traverse and remove\n\t\tlet col = 0;\n\t\tlet row = this.nodeID[0].length - 1;\n\t\tlet removedCol = -1;\n\n\t\tconst highlightID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\thighlightID,\n\t\t\t'#FF0000',\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\twhile (row >= 0) {\n\t\t\t// Move right until next element is greater or equal\n\t\t\tlet nextCol = this.getNextCol(col, row);\n\t\t\twhile (value > this.data[nextCol][row]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * nextCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tcol = nextCol;\n\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t}\n\n\t\t\tif (value === this.data[nextCol][row]) {\n\t\t\t\tremovedCol = nextCol;\n\t\t\t\tcol = nextCol;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\twhile (row >= 0) {\n\t\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t\t\tconst prevCol = this.getPrevCol(col, row);\n\t\t\t\t\tthis.cmd(act.disconnect, this.nodeID[prevCol][row], this.nodeID[col][row]);\n\t\t\t\t\tthis.cmd(act.disconnect, this.nodeID[col][row], this.nodeID[nextCol][row]);\n\t\t\t\t\tif (this.nodeID[col][row + 1] != null) {\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.nodeID[col][row + 1], this.nodeID[col][row]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectSkipList,\n\t\t\t\t\t\tthis.nodeID[prevCol][row],\n\t\t\t\t\t\tthis.nodeID[nextCol][row],\n\t\t\t\t\t\t3,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.delete, this.nodeID[col][row]);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\trow--;\n\t\t\t\t\tif (row !== -1) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\thighlightID,\n\t\t\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\trow--;\n\t\t\t\tif (row !== -1) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\thighlightID,\n\t\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, valueLabelId);\n\t\tthis.cmd(act.delete, valueStringId);\n\t\tthis.cmd(act.delete, highlightID);\n\n\t\tif (removedCol !== -1) {\n\t\t\t// Shift ID and data columns to the left (already erases last column)\n\t\t\tfor (let col = removedCol; col < this.nodeID.length - 1; col++) {\n\t\t\t\tthis.nodeID[col] = this.nodeID[col + 1];\n\t\t\t\tthis.data[col] = this.data[col + 1];\n\t\t\t}\n\t\t\tthis.nodeID.pop();\n\t\t\tthis.data.pop();\n\n\t\t\tthis.shiftColumns(removedCol);\n\t\t}\n\n\t\t// Remove empty rows\n\t\t// Find tallest column of actual values (not phantoms)\n\t\tlet maxHeight = 1;\n\t\tfor (let col = 1; col < this.nodeID.length - 1; col++) {\n\t\t\tmaxHeight = Math.max(maxHeight, this.nodeID[col].length);\n\t\t}\n\t\t// Remove rows above tallest column (so empty rows)\n\t\tfor (let row = this.nodeID[0].length - 1; row >= maxHeight; row--) {\n\t\t\tthis.data[0].pop();\n\t\t\tconst leftPhantomID = this.nodeID[0].pop();\n\t\t\tthis.cmd(act.delete, leftPhantomID);\n\t\t\tconst rightPhantomsCol = this.nodeID.length - 1;\n\t\t\tthis.data[rightPhantomsCol].pop();\n\t\t\tconst rightPhantomID = this.nodeID[rightPhantomsCol].pop();\n\t\t\tthis.cmd(act.delete, rightPhantomID);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.size--;\n\n\t\treturn this.commands;\n\t}\n\n\tget(params) {\n\t\tthis.commands = [];\n\n\t\tconst value = parseInt(params);\n\n\t\tlet col = 0;\n\t\tlet row = this.nodeID[0].length - 1;\n\t\t// let nextCol = this.getNextCol(col, row);\n\n\t\tconst highlightID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\thighlightID,\n\t\t\t'#FF0000',\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t);\n\t\tthis.cmd(act.setHighlight, highlightID, 1);\n\t\tthis.cmd(act.step);\n\n\t\twhile (row >= 0 && value !== this.data[col][row]) {\n\t\t\t// Move right until next element is greater or equal\n\t\t\tlet nextCol = this.getNextCol(col, row);\n\t\t\twhile (value >= this.data[nextCol][row]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * nextCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tcol = nextCol;\n\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t}\n\n\t\t\t// Move highlight circle downward if data has not been found\n\t\t\tif (value !== this.data[col][row]) {\n\t\t\t\trow--;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, highlightID);\n\n\t\treturn this.commands;\n\t}\n\n\t// Shifts columns on screen\n\tshiftColumns(col) {\n\t\tfor (; col < this.nodeID.length; col++) {\n\t\t\tfor (let row = 0; row < this.nodeID[col].length; row++) {\n\t\t\t\tif (this.nodeID[col][row] != null) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tthis.nodeID[col][row],\n\t\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t}\n\n\t// Gets the column of the next node (\"right pointer\")\n\tgetNextCol(col, row) {\n\t\tcol++;\n\t\twhile (this.data[col][row] == null) {\n\t\t\tcol++;\n\t\t}\n\t\treturn col;\n\t}\n\n\t// Gets the column of the previous node (\"left pointer\")\n\tgetPrevCol(col, row) {\n\t\tcol--;\n\t\twhile (this.data[col][row] == null) {\n\t\t\tcol--;\n\t\t}\n\t\treturn col;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\n\t\tfor (let col = 0; col < this.nodeID.length; col++) {\n\t\t\tfor (let row = 0; row < this.nodeID[col].length; row++) {\n\t\t\t\tthis.cmd(act.delete, this.nodeID[col][row]);\n\t\t\t}\n\t\t}\n\n\t\tthis.nodeID = [[this.nextIndex++], [this.nextIndex++]];\n\t\tthis.data = [[Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY]];\n\t\tthis.size = 0;\n\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[0][0],\n\t\t\tNINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[1][0],\n\t\t\tPINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(act.connectSkipList, this.nodeID[0][0], this.nodeID[1][0], 3);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINK_COLOR = '#007700';\nconst HIGHLIGHT_CIRCLE_COLOR = '#007700';\nconst FOREGROUND_COLOR = '#007700';\nconst BACKGROUND_COLOR = '#EEFFEE';\nconst PRINT_COLOR = FOREGROUND_COLOR;\n\nconst WIDTH_DELTA = 50;\nconst HEIGHT_DELTA = 50;\nconst STARTING_Y = 50;\n\nconst FIRST_PRINT_POS_X = 50;\nconst PRINT_VERTICAL_GAP = 20;\nconst PRINT_HORIZONTAL_GAP = 50;\n\nexport default class SplayTree extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.startingX = w / 2;\n\t\tthis.first_print_pos_y = h - 2 * PRINT_VERTICAL_GAP;\n\t\tthis.print_max = w - 10;\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.cmd(act.createLabel, 0, '', 20, 10, 0);\n\t\tthis.nextIndex = 1;\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.printButton = addControlToAlgorithmBar('Button', 'Print');\n\t\tthis.printButton.onclick = this.printCallback.bind(this);\n\t\tthis.controls.push(this.printButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 1;\n\t\tthis.treeRoot = null;\n\t}\n\n\tinsertCallback() {\n\t\tlet insertedValue = this.insertField.value;\n\t\t// Get text value\n\t\tinsertedValue = this.normalizeNumber(insertedValue, 4);\n\t\tif (insertedValue !== '') {\n\t\t\t// set text value\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tlet deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tdeletedValue = this.normalizeNumber(deletedValue, 4);\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.deleteElement.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\t//  TODO:  This top-down version is broken.  Don't use\n\tsplay(value) {\n\t\tif (this.treeRoot == null) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.treeRoot.data === value) {\n\t\t\treturn true;\n\t\t}\n\t\tif (value < this.treeRoot.data) {\n\t\t\tif (this.treeRoot.left == null) {\n\t\t\t\treturn false;\n\t\t\t} else if (this.treeRoot.left.data === value) {\n\t\t\t\tthis.singleRotateRight(this.treeRoot);\n\t\t\t\treturn true;\n\t\t\t} else if (value < this.treeRoot.left.data) {\n\t\t\t\tif (this.treeRoot.left.left == null) {\n\t\t\t\t\tthis.singleRotateRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.zigZigRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.treeRoot.left.right == null) {\n\t\t\t\t\tthis.singleRotateRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.doubleRotateRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.treeRoot.right == null) {\n\t\t\t\treturn false;\n\t\t\t} else if (this.treeRoot.right.data === value) {\n\t\t\t\tthis.singleRotateLeft(this.treeRoot);\n\t\t\t\treturn true;\n\t\t\t} else if (value > this.treeRoot.right.data) {\n\t\t\t\tif (this.treeRoot.right.right == null) {\n\t\t\t\t\tthis.singleRotateLeft(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.zigZigLeft(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.treeRoot.right.left == null) {\n\t\t\t\t\tthis.singleRotateLeft(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.doubleRotateLeft(this.treeRot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprintCallback() {\n\t\tthis.implementAction(this.printTree.bind(this));\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\n\t\tif (this.treeRoot != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tconst firstLabel = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\tthis.treeRoot.x,\n\t\t\t\tthis.treeRoot.y,\n\t\t\t);\n\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\t\t\tthis.printTreeRec(this.treeRoot);\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tfor (let i = firstLabel; i < this.nextIndex; i++) {\n\t\t\t\tthis.cmd(act.delete, i);\n\t\t\t}\n\t\t\tthis.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.printTreeRec(tree.left);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += PRINT_VERTICAL_GAP;\n\t\t}\n\t\tif (tree.right != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.printTreeRec(tree.right);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\treturn;\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.recClear(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\treturn this.commands;\n\t}\n\n\trecClear(curr) {\n\t\tif (curr != null) {\n\t\t\tthis.cmd(act.delete, curr.graphicID);\n\t\t\tthis.recClear(curr.left);\n\t\t\tthis.recClear(curr.right);\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.normalizeNumber(this.findField.value, 4);\n\t\tthis.findField.value = '';\n\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tconst found = this.doFind(this.treeRoot, findValue);\n\n\t\tif (found) {\n\t\t\tthis.cmd(act.setText, 0, 'Element ' + findValue + ' found.');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, 'Element ' + findValue + ' not found.');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tdoFind(tree, value) {\n\t\tthis.cmd(act.setText, 0, 'Searching for ' + value);\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tif (tree.data === value) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Searching for ' + value + ' : ' + value + ' = ' + value + ' (Element found!)',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Splaying found node to root of tree');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\tthis.splayUp(tree);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (tree.data > value) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to left subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.left != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t\treturn this.doFind(tree.left, value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.splayUp(tree);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' > ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to right subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.right != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t\treturn this.doFind(tree.right, value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.splayUp(tree);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\t'Searching for ' + value + ' : < Empty Tree > (Element not found)',\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, 'Searching for ' + value + ' :  (Element not found)');\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tinsertElement(insertedValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, 'Inserting ' + insertedValue);\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tif (this.treeRoot == null) {\n\t\t\tthis.cmd(act.createCircle, this.nextIndex, insertedValue, this.startingX, STARTING_Y);\n\t\t\tthis.cmd(act.setForegroundColor, this.nextIndex, FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex, BACKGROUND_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.treeRoot = new BSTNode(insertedValue, this.nextIndex, this.startingX, STARTING_Y);\n\t\t\tthis.nextIndex += 1;\n\t\t} else {\n\t\t\tthis.cmd(act.createCircle, this.nextIndex, insertedValue, 100, 100);\n\t\t\tthis.cmd(act.setForegroundColor, this.nextIndex, FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex, BACKGROUND_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tconst insertElem = new BSTNode(insertedValue, this.nextIndex, 100, 100);\n\n\t\t\tthis.nextIndex += 1;\n\t\t\tthis.cmd(act.setHighlight, insertElem.graphicID, 1);\n\t\t\tthis.insert(insertElem, this.treeRoot);\n\t\t\tthis.resizeTree();\n\t\t\tthis.cmd(act.setText, 0, 'Splay inserted element to root of tree');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.splayUp(insertElem);\n\t\t}\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn this.commands;\n\t}\n\n\tinsert(elem, tree) {\n\t\tlet foundDuplicate = false;\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.setHighlight, elem.graphicID, 1);\n\n\t\tif (elem.data < tree.data) {\n\t\t\tthis.cmd(act.setText, 0, elem.data + ' < ' + tree.data + '.  Looking at left subtree');\n\t\t} else if (elem.data > tree.data) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\telem.data + ' >= ' + tree.data + '.  Looking at right subtree',\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, elem.data + ' = ' + tree.data + '. Ignoring duplicate');\n\t\t\tfoundDuplicate = true;\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, elem.graphicID, 0);\n\n\t\tif (foundDuplicate) {\n\t\t\tthis.cmd(act.delete, elem.graphicID, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif (elem.data < tree.data) {\n\t\t\tif (tree.left == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Found null tree, inserting element');\n\n\t\t\t\tthis.cmd(act.setHighlight, elem.graphicID, 0);\n\t\t\t\ttree.left = elem;\n\t\t\t\telem.parent = tree;\n\t\t\t\tthis.cmd(act.connect, tree.graphicID, elem.graphicID, LINK_COLOR);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\tthis.highlightID,\n\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\ttree.x,\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\tthis.insert(elem, tree.left);\n\t\t\t}\n\t\t} else {\n\t\t\tif (tree.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Found null tree, inserting element');\n\t\t\t\tthis.cmd(act.setHighlight, elem.graphicID, 0);\n\t\t\t\ttree.right = elem;\n\t\t\t\telem.parent = tree;\n\t\t\t\tthis.cmd(act.connect, tree.graphicID, elem.graphicID, LINK_COLOR);\n\t\t\t\telem.x = tree.x + WIDTH_DELTA / 2;\n\t\t\t\telem.y = tree.y + HEIGHT_DELTA;\n\t\t\t\tthis.cmd(act.move, elem.graphicID, elem.x, elem.y);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\tthis.highlightID,\n\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\ttree.x,\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\tthis.insert(elem, tree.right);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteElement(deletedValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, 'Deleting ' + deletedValue);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.treeDelete(this.treeRoot, deletedValue);\n\t\tthis.cmd(act.setText, 0, '');\n\t\t// Do delete\n\t\treturn this.commands;\n\t}\n\n\ttreeDelete(tree, valueToDelete) {\n\t\tthis.cmd(act.setText, 0, 'Finding ' + valueToDelete + ' and splaying to rooot');\n\t\tthis.cmd(act.step);\n\n\t\tconst inTree = this.doFind(this.treeRoot, valueToDelete);\n\t\tthis.cmd(act.setText, 0, 'Removing root, leaving left and right trees');\n\t\tthis.cmd(act.step);\n\t\tif (inTree) {\n\t\t\tif (this.treeRoot.right == null) {\n\t\t\t\tthis.cmd(act.delete, this.treeRoot.graphicID);\n\t\t\t\tthis.cmd(act.setText, 0, 'No right tree, make left tree the root.');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.treeRoot = this.treeRoot.left;\n\t\t\t\tthis.treeRoot.parent = null;\n\t\t\t\tthis.resizeTree();\n\t\t\t} else if (this.treeRoot.left == null) {\n\t\t\t\tthis.cmd(act.delete, this.treeRoot.graphicID);\n\t\t\t\tthis.cmd(act.setText, 0, 'No left tree, make right tree the root.');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.treeRoot = this.treeRoot.right;\n\t\t\t\tthis.treeRoot.parent = null;\n\t\t\t\tthis.resizeTree();\n\t\t\t} else {\n\t\t\t\tconst right = this.treeRoot.right;\n\t\t\t\tconst left = this.treeRoot.left;\n\t\t\t\tconst oldGraphicID = this.treeRoot.graphicID;\n\t\t\t\tthis.cmd(act.disconnect, this.treeRoot.graphicID, left.graphicID);\n\t\t\t\tthis.cmd(act.disconnect, this.treeRoot.graphicID, right.graphicID);\n\t\t\t\tthis.cmd(act.setAlpha, this.treeRoot.graphicID, 0);\n\t\t\t\tthis.cmd(act.setText, 0, 'Splay largest element in left tree to root');\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tleft.parent = null;\n\t\t\t\tconst largestLeft = this.findMax(left);\n\t\t\t\tthis.splayUp(largestLeft);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Left tree now has no right subtree, connect left and right trees',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.connect, largestLeft.graphicID, right.graphicID, LINK_COLOR);\n\t\t\t\tlargestLeft.parent = null;\n\t\t\t\tlargestLeft.right = right;\n\t\t\t\tright.parent = largestLeft;\n\t\t\t\tthis.treeRoot = largestLeft;\n\t\t\t\tthis.cmd(act.delete, oldGraphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t}\n\t}\n\n\tsingleRotateRight(tree) {\n\t\tconst B = tree;\n\t\t// const t3 = B.right;\n\t\tconst A = tree.left;\n\t\t// const t1 = A.left;\n\t\tconst t2 = A.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig Right');\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, A.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, B.graphicID, A.graphicID);\n\t\tthis.cmd(act.connect, A.graphicID, B.graphicID, LINK_COLOR);\n\t\tA.parent = B.parent;\n\t\tif (B.parent == null) {\n\t\t\tthis.treeRoot = A;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, B.parent.graphicID, B.graphicID, LINK_COLOR);\n\t\t\tthis.cmd(act.connect, B.parent.graphicID, A.graphicID, LINK_COLOR);\n\t\t\tif (B.isLeftChild()) {\n\t\t\t\tB.parent.left = A;\n\t\t\t} else {\n\t\t\t\tB.parent.right = A;\n\t\t\t}\n\t\t}\n\t\tA.right = B;\n\t\tB.parent = A;\n\t\tB.left = t2;\n\t\tthis.resizeTree();\n\t}\n\n\tzigZigRight(tree) {\n\t\tconst C = tree;\n\t\tconst B = tree.left;\n\t\tconst A = tree.left.left;\n\t\t// const t1 = A.left;\n\t\tconst t2 = A.right;\n\t\tconst t3 = B.right;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig-Zig Right');\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, B.graphicID, 0);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 0);\n\n\t\tif (C.parent != null) {\n\t\t\tthis.cmd(act.disconnect, C.parent.graphicID, C.graphicID);\n\t\t\tthis.cmd(act.connect, C.parent.graphicID, A.graphicID, LINK_COLOR);\n\t\t\tif (C.isLeftChild()) {\n\t\t\t\tC.parent.left = A;\n\t\t\t} else {\n\t\t\t\tC.parent.right = A;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.treeRoot = A;\n\t\t}\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, A.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = B;\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t3.graphicID);\n\t\t\tthis.cmd(act.connect, C.graphicID, t3.graphicID, LINK_COLOR);\n\t\t\tt3.parent = C;\n\t\t}\n\t\tthis.cmd(act.disconnect, B.graphicID, A.graphicID);\n\t\tthis.cmd(act.connect, A.graphicID, B.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.disconnect, C.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, C.graphicID, LINK_COLOR);\n\n\t\tA.right = B;\n\t\tA.parent = C.parent;\n\t\tB.parent = A;\n\t\tB.left = t2;\n\t\tB.right = C;\n\t\tC.parent = B;\n\t\tC.left = t3;\n\t\tthis.resizeTree();\n\t}\n\n\tzigZigLeft(tree) {\n\t\tconst A = tree;\n\t\tconst B = tree.right;\n\t\tconst C = tree.right.right;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\tconst t3 = C.left;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig-Zig Left');\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, C.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 0);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, C.graphicID, 0);\n\n\t\tif (A.parent != null) {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, C.graphicID, LINK_COLOR);\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = C;\n\t\t\t} else {\n\t\t\t\tA.parent.right = C;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.treeRoot = C;\n\t\t}\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = A;\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, C.graphicID, t3.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t3.graphicID, LINK_COLOR);\n\t\t\tt3.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.disconnect, B.graphicID, C.graphicID);\n\t\tthis.cmd(act.connect, C.graphicID, B.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tC.parent = A.parent;\n\t\tA.right = t2;\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tB.right = t3;\n\t\tC.left = B;\n\t\tB.parent = C;\n\n\t\tthis.resizeTree();\n\t}\n\n\tsingleRotateLeft(tree) {\n\t\tconst A = tree;\n\t\tconst B = tree.right;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\t// const t3 = B.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig Left');\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = A;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tB.parent = A.parent;\n\t\tif (A.parent == null) {\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID, LINK_COLOR);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, B.graphicID, LINK_COLOR);\n\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = B;\n\t\t\t} else {\n\t\t\t\tA.parent.right = B;\n\t\t\t}\n\t\t}\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tA.right = t2;\n\n\t\tthis.resizeTree();\n\t}\n\n\tsplayUp(tree) {\n\t\tif (tree.parent == null) {\n\t\t\treturn;\n\t\t} else if (tree.parent.parent == null) {\n\t\t\tif (tree.isLeftChild()) {\n\t\t\t\tthis.singleRotateRight(tree.parent);\n\t\t\t} else {\n\t\t\t\tthis.singleRotateLeft(tree.parent);\n\t\t\t}\n\t\t} else if (tree.isLeftChild() && !tree.parent.isLeftChild()) {\n\t\t\tthis.doubleRotateLeft(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t} else if (!tree.isLeftChild() && tree.parent.isLeftChild()) {\n\t\t\tthis.doubleRotateRight(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t} else if (tree.isLeftChild()) {\n\t\t\tthis.zigZigRight(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t} else {\n\t\t\tthis.zigZigLeft(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t}\n\t}\n\n\tfindMax(tree) {\n\t\tif (tree.right != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\ttree.x,\n\t\t\t\ttree.y,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (tree.right != null) {\n\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\ttree = tree.right;\n\t\t\t}\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\treturn tree;\n\t\t} else {\n\t\t\treturn tree;\n\t\t}\n\t}\n\n\tdoubleRotateRight(tree) {\n\t\tthis.cmd(act.setText, 0, 'Zig-Zag Right');\n\t\tconst A = tree.left;\n\t\tconst B = tree.left.right;\n\t\tconst C = tree;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\tconst t3 = B.right;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tt2.parent = A;\n\t\t\tA.right = t2;\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t3.graphicID);\n\t\t\tt3.parent = C;\n\t\t\tC.left = t2;\n\t\t\tthis.cmd(act.connect, C.graphicID, t3.graphicID, LINK_COLOR);\n\t\t}\n\t\tif (C.parent == null) {\n\t\t\tB.parent = null;\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, C.parent.graphicID, C.graphicID);\n\t\t\tthis.cmd(act.connect, C.parent.graphicID, B.graphicID, LINK_COLOR);\n\t\t\tif (C.isLeftChild()) {\n\t\t\t\tC.parent.left = B;\n\t\t\t} else {\n\t\t\t\tC.parent.right = B;\n\t\t\t}\n\t\t\tB.parent = C.parent;\n\t\t\tC.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, C.graphicID, A.graphicID);\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.connect, B.graphicID, C.graphicID, LINK_COLOR);\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tB.right = C;\n\t\tC.parent = B;\n\t\tA.right = t2;\n\t\tC.left = t3;\n\n\t\tthis.resizeTree();\n\t}\n\n\tdoubleRotateLeft(tree) {\n\t\tthis.cmd(act.setText, 0, 'Zig-Zag Left');\n\t\tconst A = tree;\n\t\tconst B = tree.right.left;\n\t\tconst C = tree.right;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\tconst t3 = B.right;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, C.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, B.graphicID, 1);\n\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tt2.parent = A;\n\t\t\tA.right = t2;\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t3.graphicID);\n\t\t\tt3.parent = C;\n\t\t\tC.left = t2;\n\t\t\tthis.cmd(act.connect, C.graphicID, t3.graphicID, LINK_COLOR);\n\t\t}\n\n\t\tif (A.parent == null) {\n\t\t\tB.parent = null;\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, B.graphicID, LINK_COLOR);\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = B;\n\t\t\t} else {\n\t\t\t\tA.parent.right = B;\n\t\t\t}\n\t\t\tB.parent = A.parent;\n\t\t\tA.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, C.graphicID);\n\t\tthis.cmd(act.disconnect, C.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.connect, B.graphicID, C.graphicID, LINK_COLOR);\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tB.right = C;\n\t\tC.parent = B;\n\t\tA.right = t2;\n\t\tC.left = t3;\n\n\t\tthis.resizeTree();\n\t}\n\n\tresizeTree() {\n\t\tlet startingPoint = this.startingX;\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tif (this.treeRoot != null) {\n\t\t\tif (this.treeRoot.leftWidth > startingPoint) {\n\t\t\t\tstartingPoint = this.treeRoot.leftWidth;\n\t\t\t} else if (this.treeRoot.rightWidth > startingPoint) {\n\t\t\t\tstartingPoint = Math.max(\n\t\t\t\t\tthis.treeRoot.leftWidth,\n\t\t\t\t\t2 * startingPoint - this.treeRoot.rightWidth,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.setNewPositions(this.treeRoot, startingPoint, STARTING_Y, 0);\n\t\t\tthis.animateNewPositions(this.treeRoot);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition, side) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\tif (side === -1) {\n\t\t\t\txPosition = xPosition - tree.rightWidth;\n\t\t\t} else if (side === 1) {\n\t\t\t\txPosition = xPosition + tree.leftWidth;\n\t\t\t}\n\t\t\ttree.x = xPosition;\n\t\t\tthis.setNewPositions(tree.left, xPosition, yPosition + HEIGHT_DELTA, -1);\n\t\t\tthis.setNewPositions(tree.right, xPosition, yPosition + HEIGHT_DELTA, 1);\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t\t\tthis.animateNewPositions(tree.left);\n\t\t\tthis.animateNewPositions(tree.right);\n\t\t}\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\ttree.leftWidth = Math.max(this.resizeWidths(tree.left), WIDTH_DELTA / 2);\n\t\ttree.rightWidth = Math.max(this.resizeWidths(tree.right), WIDTH_DELTA / 2);\n\t\treturn tree.leftWidth + tree.rightWidth;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n\nclass BSTNode {\n\tconstructor(val, id, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\t\tthis.graphicID = id;\n\t\tthis.left = null;\n\t\tthis.right = null;\n\t\tthis.parent = null;\n\t}\n\n\tisLeftChild() {\n\t\tif (this.parent == null) {\n\t\t\treturn true;\n\t\t}\n\t\treturn this.parent.left === this;\n\t}\n}\n","import * as algos from './algo';\n\n// After adding the export in algos/index.js, add new algorithms in the following format:\n// AlgorithmName: ['Menu Display Name', algos.ClassName, 'Verbose Display Name (optional)']\nexport const algoMap = {\n\tArrayList: ['ArrayList', algos.ArrayList],\n\tLinkedList: ['Singly LinkedList', algos.LinkedList],\n\tDoublyLinkedList: ['Doubly LinkedList', algos.DoublyLinkedList],\n\tCircularlyLinkedList: ['Circularly LinkedList', algos.CircularlyLinkedList],\n\tStackArray: ['Stack (Array)', algos.StackArray],\n\tStackLL: ['Stack (LinkedList)', algos.StackLL],\n\tQueueArray: ['Queue (Array)', algos.QueueArray],\n\tQueueLL: ['Queue (LinkedList)', algos.QueueLL],\n\tDequeArray: ['Deque (Array)', algos.DequeArray],\n\tDequeLL: ['Deque (LinkedList)', algos.DequeLL],\n\tBST: ['Binary Search Tree', algos.BST],\n\tHeap: ['Heaps / PQs', algos.Heap],\n\tSkipList: ['SkipList', algos.SkipList],\n\tClosedHash: ['HashMap (Probing)', algos.ClosedHash],\n\tOpenHash: ['HashMap (Chaining)', algos.OpenHash],\n\tSplayTree: ['SplayTree', algos.SplayTree],\n\tAVL: ['AVL', algos.AVL],\n\tBTree: ['2-4 Tree', algos.BTree],\n\tBubbleSort: ['Bubble Sort', algos.BubbleSort],\n\tCocktailSort: ['Cocktail Shaker Sort', algos.CocktailSort],\n\tInsertionSort: ['Insertion Sort', algos.InsertionSort],\n\tSelectionSort: ['Selection Sort', algos.SelectionSort],\n\tQuickSort: ['QuickSort', algos.QuickSort],\n\tQuickSelect: ['QuickSelect / k Select', algos.QuickSelect],\n\tMergeSort: ['MergeSort', algos.MergeSort],\n\tLSDRadix: ['LSD Radix Sort', algos.LSDRadix],\n\tBruteForce: ['Brute Force', algos.BruteForce],\n\tBoyerMoore: ['Boyer-Moore', algos.BoyerMoore],\n\tKMP: ['KMP', algos.KMP],\n\tRabinKarp: ['Rabin-Karp', algos.RabinKarp],\n\tBFS: ['Breadth-First Search', algos.BFS],\n\tDFS: ['Depth-First Search', algos.DFS],\n\tDijkstra: [\"Dijkstra's\", algos.Dijkstras],\n\tPrim: [\"Prim's\", algos.Prims],\n\tKruskal: [\"Kruskal's\", algos.Kruskals],\n\tLCS: ['LCS', algos.LCS, 'Longest Common Subsequence'],\n\tFloyd: ['Floyd-Warshall', algos.Floyd],\n};\n\nexport const algoList = [\n\t'Lists',\n\t'ArrayList',\n\t'LinkedList',\n\t'DoublyLinkedList',\n\t'CircularlyLinkedList',\n\t'Stacks, Queues and Deques',\n\t'StackArray',\n\t'StackLL',\n\t'QueueArray',\n\t'QueueLL',\n\t'DequeArray',\n\t'DequeLL',\n\t'Trees and SkipList',\n\t'BST',\n\t'Heap',\n\t'AVL',\n\t'BTree',\n\t'SplayTree',\n\t'SkipList',\n\t'HashMaps',\n\t'ClosedHash',\n\t'OpenHash',\n\t'Sorting and QuickSelect',\n\t'BubbleSort',\n\t'CocktailSort',\n\t'InsertionSort',\n\t'SelectionSort',\n\t'QuickSort',\n\t'QuickSelect',\n\t'MergeSort',\n\t'LSDRadix',\n\t'String Searching',\n\t'BruteForce',\n\t'BoyerMoore',\n\t'KMP',\n\t'RabinKarp',\n\t'Graph Algorithms',\n\t'BFS',\n\t'DFS',\n\t'Dijkstra',\n\t'Prim',\n\t'Kruskal',\n\t'Dynamic Programming',\n\t'LCS',\n\t'Floyd',\n];\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\nconst RESIZE_ARRAY_START_X = 100;\nconst RESIZE_ARRAY_START_Y = 300;\n\nconst ARRAY_ELEMS_PER_LINE = 14;\nconst ARRAY_LINE_SPACING = 130;\n\nconst TOP_POS_X = 180;\nconst TOP_POS_Y = 100;\nconst TOP_LABEL_X = 130;\nconst TOP_LABEL_Y = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\nconst PUSH_RESIZE_LABEL_X = 60;\nconst PUSH_RESIZE_LABEL_Y = 60;\n\nconst SIZE = 7;\nconst MAX_SIZE = 30;\n\nexport default class StackArray extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.pushField = addControlToAlgorithmBar('Text', '');\n\t\tthis.pushField.onkeydown = this.returnSubmit(\n\t\t\tthis.pushField,\n\t\t\tthis.pushCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.pushButton = addControlToAlgorithmBar('Button', 'Push');\n\t\tthis.pushButton.onclick = this.pushCallback.bind(this);\n\t\tthis.controls.push(this.pushField);\n\t\tthis.controls.push(this.pushButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.popButton = addControlToAlgorithmBar('Button', 'Pop');\n\t\tthis.popButton.onclick = this.popCallback.bind(this);\n\t\tthis.controls.push(this.popButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tthis.arrayData = new Array(SIZE);\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.topID = this.nextIndex++;\n\t\tthis.topLabelID = this.nextIndex++;\n\n\t\tthis.top = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.createLabel, this.topLabelID, 'Size', TOP_LABEL_X, TOP_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.topID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tTOP_POS_X,\n\t\t\tTOP_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.highlight2ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.nextIndex = 0;\n\t\tthis.length = SIZE;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tthis.arrayData = new Array(SIZE);\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.nextIndex = this.nextIndex + 3;\n\t\t//^ To keep nextIndex in the same place relative to setup()\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.highlight2ID = this.nextIndex++;\n\t}\n\n\tpushCallback() {\n\t\tif (this.top < this.arrayData.length && this.pushField.value !== '') {\n\t\t\tconst pushVal = this.pushField.value;\n\t\t\tthis.pushField.value = '';\n\t\t\tthis.implementAction(this.push.bind(this), pushVal);\n\t\t} else if (this.top === this.arrayData.length && this.top * 2 < MAX_SIZE) {\n\t\t\tconst pushVal = this.pushField.value;\n\t\t\tthis.pushField.value = '';\n\t\t\tthis.implementAction(this.resize.bind(this), pushVal);\n\t\t}\n\t}\n\n\tpopCallback() {\n\t\tif (this.top > 0) {\n\t\t\tthis.implementAction(this.pop.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearData.bind(this));\n\t}\n\n\tclearData() {\n\t\tthis.commands = [];\n\t\tthis.clearAll();\n\t\treturn this.commands;\n\t}\n\n\tpush(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData[this.top] = elemToPush;\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Pushing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, '#0000FF', TOP_POS_X, TOP_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.top % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.top / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[this.top], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.topID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top + 1;\n\t\tthis.cmd(act.setText, this.topID, this.top);\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.topID, 0);\n\n\t\tif (elemToPush != null) {\n\t\t\tthis.nextIndex = this.nextIndex - 2;\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tpop() {\n\t\tthis.commands = [];\n\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPopID, 'Popped Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.cmd(act.setHighlight, this.topID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top - 1;\n\n\t\tconst popVal = this.arrayData[this.top];\n\t\tthis.arrayData[this.top] = '';\n\n\t\tthis.cmd(act.setText, this.topID, this.top);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.topID, 0);\n\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, '#0000FF', TOP_POS_X, TOP_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.top % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.top / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.createLabel, labPopValID, popVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[this.top], '');\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Popped Value: ' + popVal);\n\t\tthis.cmd(act.delete, labPopValID);\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\tresize(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tconst labPushResizeID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Pushing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabPushResizeID,\n\t\t\t'(Resize Required)',\n\t\t\tPUSH_RESIZE_LABEL_X,\n\t\t\tPUSH_RESIZE_LABEL_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tthis.arrayIDNew = new Array(this.top * 2);\n\t\tthis.arrayLabelIDNew = new Array(this.top * 2);\n\t\tthis.arrayDataNew = new Array(this.top * 2);\n\n\t\tfor (let i = 0; i < this.top * 2; i++) {\n\t\t\tthis.arrayIDNew[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelIDNew[i] = this.nextIndex++;\n\t\t\tif (i < this.top) {\n\t\t\t\tthis.arrayDataNew[i] = this.arrayData[i];\n\t\t\t}\n\t\t}\n\t\tthis.arrayDataNew[this.top] = elemToPush;\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\t//Create new array\n\t\tfor (let i = 0; i < this.top * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayIDNew[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelIDNew[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelIDNew[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.arrayMoveID = new Array(this.top);\n\n\t\t//Move old array elements to the new array\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tconst xposinit = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst yposinit =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\n\t\t\t// const display = this.animationManager.objectManager.getText(this.arrayID[i]);\n\t\t\tconst display = this.arrayData[i];\n\n\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i], display, xposinit, yposinit);\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos, ypos);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//delete movement id objects and set text\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\t// const display = this.animationManager.objectManager.getText(this.arrayID[i]);\n\t\t\tconst display = this.arrayData[i];\n\n\t\t\tthis.cmd(act.setText, this.arrayIDNew[i], display);\n\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//Add elemToPush at the index\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\t'#0000FF',\n\t\t\tPUSH_ELEMENT_X,\n\t\t\tPUSH_ELEMENT_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos =\n\t\t\t(parseInt(this.top) % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(parseInt(this.top) / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING +\n\t\t\tRESIZE_ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos);\n\t\tthis.cmd(act.move, labPushValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayIDNew[this.top], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t\tthis.cmd(act.delete, this.arrayLabelID[i]);\n\t\t}\n\n\t\tfor (let i = 0; i < this.top * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tthis.cmd(act.move, this.arrayIDNew[i], xpos, ypos);\n\t\t\tthis.cmd(act.move, this.arrayLabelIDNew[i], xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.topID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tthis.top = this.top + 1;\n\t\tthis.cmd(act.setText, this.topID, this.top);\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.delete, labPushResizeID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.topID, 0);\n\n\t\tthis.arrayID = this.arrayIDNew;\n\t\tthis.arrayLabelID = this.arrayLabelIDNew;\n\t\tthis.arrayData = this.arrayDataNew;\n\n\t\tthis.nextIndex = this.nextIndex - this.top + 1;\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t}\n\t\tthis.top = 0;\n\t\tthis.cmd(act.setText, this.topID, '0');\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 250;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst TOP_POS_X = 180;\nconst TOP_POS_Y = 100;\nconst TOP_LABEL_X = 130;\nconst TOP_LABEL_Y = 100;\n\nconst TOP_ELEM_WIDTH = 30;\nconst TOP_ELEM_HEIGHT = 30;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class StackLL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.pushField = addControlToAlgorithmBar('Text', '');\n\t\tthis.pushField.onkeydown = this.returnSubmit(\n\t\t\tthis.pushField,\n\t\t\tthis.pushCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.pushButton = addControlToAlgorithmBar('Button', 'Push');\n\t\tthis.pushButton.onclick = this.pushCallback.bind(this);\n\t\tthis.controls.push(this.pushField);\n\t\tthis.controls.push(this.pushButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.popButton = addControlToAlgorithmBar('Button', 'Pop');\n\t\tthis.popButton.onclick = this.popCallback.bind(this);\n\t\tthis.controls.push(this.popButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.linkedListElemID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.topID = this.nextIndex++;\n\t\tthis.topLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.top = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.topLabelID, 'Head', TOP_LABEL_X, TOP_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.topID,\n\t\t\t'',\n\t\t\tTOP_ELEM_WIDTH,\n\t\t\tTOP_ELEM_HEIGHT,\n\t\t\tTOP_POS_X,\n\t\t\tTOP_POS_Y,\n\t\t);\n\t\tthis.cmd(act.setNull, this.topID, 1);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tresetLinkedListPositions() {\n\t\tfor (let i = this.top - 1; i >= 0; i--) {\n\t\t\tconst nextX =\n\t\t\t\t((this.top - 1 - i) % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\tLINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor((this.top - 1 - i) / LINKED_LIST_ELEMS_PER_LINE) *\n\t\t\t\t\tLINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tpushCallback() {\n\t\tif (this.top < SIZE && this.pushField.value !== '') {\n\t\t\tconst pushVal = this.pushField.value;\n\t\t\tthis.pushField.value = '';\n\t\t\tthis.implementAction(this.push.bind(this), pushVal);\n\t\t}\n\t}\n\n\tpopCallback() {\n\t\tif (this.top > 0) {\n\t\t\tthis.implementAction(this.pop.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tpush(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tthis.arrayData[this.top] = elemToPush;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tthis.linkedListElemID[this.top],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t\t0,\n\t\t\t1,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Pushing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[this.top], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (this.top === 0) {\n\t\t\tthis.cmd(act.setNull, this.topID, 0);\n\t\t\tthis.cmd(act.setNull, this.linkedListElemID[this.top], 1);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.linkedListElemID[this.top],\n\t\t\t\tthis.linkedListElemID[this.top - 1],\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.disconnect, this.topID, this.linkedListElemID[this.top - 1]);\n\t\t}\n\t\tthis.cmd(act.connect, this.topID, this.linkedListElemID[this.top]);\n\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top + 1;\n\t\tthis.resetLinkedListPositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tpop() {\n\t\tthis.commands = [];\n\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPopID, 'Popped Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabPopValID,\n\t\t\tthis.arrayData[this.top - 1],\n\t\t\tLINKED_LIST_START_X,\n\t\t\tLINKED_LIST_START_Y,\n\t\t);\n\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.disconnect, this.topID, this.linkedListElemID[this.top - 1]);\n\n\t\tif (this.top === 1) {\n\t\t\tthis.cmd(act.setNull, this.topID, 1);\n\t\t} else {\n\t\t\tthis.cmd(act.connect, this.topID, this.linkedListElemID[this.top - 2]);\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[this.top - 1]);\n\t\tthis.top = this.top - 1;\n\t\tthis.resetLinkedListPositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Popped Value: ' + this.arrayData[this.top]);\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.top = 0;\n\t\tthis.cmd(act.setNull, this.topID, 1);\n\t\treturn this.commands;\n\t}\n}\n","import React from 'react';\n\n// Include the ClassName of algorithms that should have an example modal\nexport default {\n\tAVL: (\n\t\t<ul>\n\t\t\t<li>To cause a left rotation, add 1, 2 and 3, in that order</li>\n\t\t\t<li>To cause a right rotation, add 3, 2 and 1, in that order</li>\n\t\t\t<li>To cause a left-right rotation, add 3, 1 and 2, in that order</li>\n\t\t\t<li>To cause a right-left rotation, add 1, 3 and 2, in that order</li>\n\t\t</ul>\n\t),\n\tBoyerMoore: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a text with only one letter and a pattern with that\n\t\t\t\tsame letter, but a different first letter (for example, &quot;aaaaaaaaa&quot; for\n\t\t\t\ttext and &quot;baaaa&quot; for pattern), since we will only mismatch on the last\n\t\t\t\tcomparison\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tBruteForce: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a text with only one letter and a pattern with that\n\t\t\t\tsame letter, but a different last letter (for example, &quot;aaaaaaaaa&quot; for\n\t\t\t\ttext and &quot;aaaab&quot; for pattern), since we will only mismatch on the last\n\t\t\t\tcomparison\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tBST: (\n\t\t<ul>\n\t\t\t<li>To get a degenerate BST, you can add ascending data, such as 1, 2, 3, ...</li>\n\t\t\t<li>To get a full BST, you can add 2, 1, 4, 3, 5, in that order</li>\n\t\t\t<li>To get a complete BST, you can add 3, 2, 4, 1, in that order</li>\n\t\t\t<li>To get a full and complete BST, you can add 4, 2, 5, 1, 3, in that order</li>\n\t\t</ul>\n\t),\n\tBTree: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tTo cause overflow and trigger a promotion, add more than 3 data (for example 1, 2, 3\n\t\t\t\tand 4)\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTo remove from a leaf node, add 1, 2, 3 and 4, in that order, then remove 3 or 4\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTo remove from an inner node and use the predecessor, add 1, 3, 4, 5 and 2, in that\n\t\t\t\torder, then remove 3\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTo cause underflow and trigger a rotation/transfer, add 1, 2, 3 and 4, in that\n\t\t\t\torder, then remove 1\n\t\t\t</li>\n\t\t\t<li>To cause underflow and trigger a fusion, follow the steps above then remove 2</li>\n\t\t</ul>\n\t),\n\tBubbleSort: (\n\t\t<ul>\n\t\t\t<li>The best case is when we have a sorted array (terminates if no swaps are made)</li>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a reverse sorted array (we perform\n\t\t\t\t<p className=\"equation\">\n\t\t\t\t\tn + (n - 1) + (n - 2) + ... = n<sup>2</sup>\n\t\t\t\t</p>\n\t\t\t\tcomparisons)\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tCocktailSort: (\n\t\t<ul>\n\t\t\t<li>The best case is when we have a sorted array (terminates if no swaps are made)</li>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a reverse sorted array (we perform\n\t\t\t\t<p className=\"equation\">\n\t\t\t\t\tn + (n - 1) + (n - 2) + ... = n<sup>2</sup>\n\t\t\t\t</p>\n\t\t\t\tcomparisons)\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tEven though Cocktail Shaker Sort has the same big-O as Bubble Sort, it is still\n\t\t\t\tfaster; one case where it significantly outperforms Bubble Sort is when we have a\n\t\t\t\tsorted array, except for the last element which is the smallest, for example [2, 3,\n\t\t\t\t4, 5, 6, 7, 8, 9, 1]\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tInsertionSort: (\n\t\t<ul>\n\t\t\t<li>The best case is when we have a sorted array (terminates if no swaps are made)</li>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a reverse sorted array (we perform\n\t\t\t\t<p className=\"equation\">\n\t\t\t\t\tn + (n - 1) + (n - 2) + ... = n<sup>2</sup>\n\t\t\t\t</p>\n\t\t\t\tcomparisons)\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tQuickSelect: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case occurs when we pick a bad pivot everytime (for example, the smallest\n\t\t\t\tor largest element), since we can no longer subvide the array\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tQuickSort: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case occurs when we pick a bad pivot everytime (for example, the smallest\n\t\t\t\tor largest element), since we can no longer subvide the array and the algorithms\n\t\t\t\tbecomes similar to Selection Sort\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tSkipList: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tYou can get a degenerate SkipList by always adding with a constant amount of heads,\n\t\t\t\tfor example 0 or 4.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tNote that in a real SkipList, you would have an{' '}\n\t\t\t\t<span className=\"inline-eq\">O(log n) </span>\n\t\t\t\tcap to the number of levels, so we wouldn't be able to add the first element with 4\n\t\t\t\theads, for example.\n\t\t\t</li>\n\t\t</ul>\n\t),\n};\n","import '../css/AlgoScreen.css';\nimport '../css/App.css';\nimport AnimationManager from '../anim/AnimationMain';\nimport Footer from '../components/Footer';\nimport Header from '../components/Header';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactGA from 'react-ga';\nimport { algoMap } from '../AlgoList';\nimport modals from '../examples/ExampleModals';\n\nclass AlgoScreen extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tconst algoName = props.location.pathname.slice(1);\n\t\tthis.canvasRef = React.createRef();\n\t\tthis.animBarRef = React.createRef();\n\n\t\tthis.state = {\n\t\t\talgoName: algoName,\n\t\t\texamplesEnabled: false,\n\t\t\twidth: 0,\n\t\t};\n\t\tReactGA.pageview(algoName);\n\t}\n\n\tcomponentDidMount() {\n\t\tif (algoMap[this.state.algoName]) {\n\t\t\tthis.animManag = new AnimationManager(this.canvasRef, this.animBarRef);\n\n\t\t\tthis.currentAlg = new algoMap[this.state.algoName][1](\n\t\t\t\tthis.animManag,\n\t\t\t\tthis.canvasRef.current.width,\n\t\t\t\tthis.canvasRef.current.height,\n\t\t\t);\n\t\t\twindow.addEventListener('resize', this.updateDimensions);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tupdateDimensions = () => {\n\t\tthis.animManag.changeSize(document.body.clientWidth);\n\t};\n\n\trender() {\n\t\tconst algoName = this.state.algoName;\n\t\tif (!algoMap[algoName]) {\n\t\t\treturn (\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<Header />\n\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t<div className=\"four-o-four\">\n\t\t\t\t\t\t\t<h1>404!</h1>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\tAlgorithm not found! Click <Link to=\"/\">here</Link> to return to the\n\t\t\t\t\t\t\t\thome screen and choose another algorithm.\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Footer />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst header = algoMap[algoName][2] ? algoMap[algoName][2] : algoMap[algoName][0];\n\t\treturn (\n\t\t\t<div className=\"VisualizationMainPage\">\n\t\t\t\t<div id=\"container\">\n\t\t\t\t\t<div id=\"header\">\n\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t<Link to=\"/\">&#x3008;</Link>&nbsp;&nbsp;{header}\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div id=\"mainContent\">\n\t\t\t\t\t\t<div id=\"algoControlSection\">\n\t\t\t\t\t\t\t<table id=\"AlgorithmSpecificControls\"></table>\n\t\t\t\t\t\t\t{modals[algoName] && (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={this.state.examplesEnabled ? 'selected' : ''}\n\t\t\t\t\t\t\t\t\tid=\"examplesButton\"\n\t\t\t\t\t\t\t\t\tonClick={this.toggleExamples}\n\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"viewport\">\n\t\t\t\t\t\t\t<canvas\n\t\t\t\t\t\t\t\tid=\"canvas\"\n\t\t\t\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\t\t\t\theight=\"505\"\n\t\t\t\t\t\t\t\tref={this.canvasRef}\n\t\t\t\t\t\t\t></canvas>\n\t\t\t\t\t\t\t{this.state.examplesEnabled && (\n\t\t\t\t\t\t\t\t<div className=\"modal\">\n\t\t\t\t\t\t\t\t\t<div className=\"modal-content\">{modals[algoName]}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div id=\"generalAnimationControlSection\">\n\t\t\t\t\t\t\t<table id=\"GeneralAnimationControls\" ref={this.animBarRef}></table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div id=\"footer\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<Link to=\"/\">Return to Home Page</Link>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\ttoggleExamples = () => this.setState(state => ({ examplesEnabled: !state.examplesEnabled }));\n}\n\nAlgoScreen.propTypes = {\n\tlocation: PropTypes.object,\n};\n\nexport default AlgoScreen;\n","import React from 'react';\n\nconst AboutScreen = () => (\n\t<div className=\"about\">\n\t\t<p>\n\t\t\tThis is a tool to help you visualize and understand the data structures and algorithms\n\t\t\tcovered in Georgia Tech's CS1332 course. It is based on the{' '}\n\t\t\t<a href=\"https://www.cs.usfca.edu/~galles/visualization/about.html\">\n\t\t\t\tData Structures Visualizations website\n\t\t\t</a>{' '}\n\t\t\tby David Gales.\n\t\t</p>\n\t\t<p>\n\t\t\tThe CS1332 Visualization Tool was adapted and expanded by{' '}\n\t\t\t<a href=\"https://rodrigodlpontes.github.io/website/\">Rodrigo Pontes</a>, under the\n\t\t\tsupervision of Prof. Mary Hudachek-Buswell, to include data structures and algorithms\n\t\t\tcovered in the course. It has since received many additions and revisions from{' '}\n\t\t\t<a href=\"https://github.com/RodrigoDLPontes/visualization-tool#contributors-\">\n\t\t\t\tmany other wonderful contributors\n\t\t\t</a>\n\t\t\t.\n\t\t</p>\n\t\t<p>\n\t\t\tIt also includes icons from{' '}\n\t\t\t<a href=\"https://material.io/resources/icons/?style=baseline\">\n\t\t\t\tGoogle&#39;s Material Icons\n\t\t\t</a>\n\t\t\t, and components from <a href=\"https://material-ui.com/\">Material UI</a>.\n\t\t</p>\n\t</div>\n);\n\nexport default AboutScreen;\n","import '../css/App.css';\nimport { Link, Route, Switch } from 'react-router-dom';\nimport { algoList, algoMap } from '../AlgoList';\nimport AboutScreen from './AboutScreen';\nimport Footer from '../components/Footer';\nimport Header from '../components/Header';\nimport React from 'react';\n\nconst HomeScreen = () => (\n\t<div className=\"container\">\n\t\t<Header />\n\t\t<div className=\"content\">\n\t\t\t<Switch>\n\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t<div className=\"outer-flex\">\n\t\t\t\t\t\t<div className=\"inner-flex\">\n\t\t\t\t\t\t\t{algoList.map((name, idx) =>\n\t\t\t\t\t\t\t\talgoMap[name] ? (\n\t\t\t\t\t\t\t\t\t<Link to={`/${name}`} key={idx}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"button\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={algoMap[name][0]}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div key={idx} className=\"divider\">\n\t\t\t\t\t\t\t\t\t\t<span>{name}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/about\">\n\t\t\t\t\t<AboutScreen />\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</div>\n\t\t<Footer />\n\t</div>\n);\n\nexport default HomeScreen;\n","import './css/App.css';\nimport { Route, BrowserRouter as Router, Switch } from 'react-router-dom';\nimport AlgoScreen from './screens/AlgoScreen';\nimport HomeScreen from './screens/HomeScreen';\nimport React from 'react';\nimport ReactGA from 'react-ga';\n\nconst App = () => {\n\tReactGA.initialize('UA-164374852-1');\n\tReactGA.pageview('home');\n\n\treturn (\n\t\t<Router basename={process.env.PUBLIC_URL + '/'}>\n\t\t\t<Switch>\n\t\t\t\t<Route exact path={['/', '/about']} component={HomeScreen} />\n\t\t\t\t<Route component={AlgoScreen} />\n\t\t\t</Switch>\n\t\t</Router>\n\t);\n};\n\nexport default App;\n","import App from './App';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}