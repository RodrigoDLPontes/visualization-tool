{"version":3,"sources":["anim/SingleAnimation.js","anim/UndoFunctions.js","anim/AnimatedObject.js","anim/AnimatedBTreeNode.js","anim/AnimatedCircle.js","anim/AnimatedCircularlyLinkedListNode.js","anim/AnimatedDoublyLinkedListNode.js","anim/AnimatedHighlightCircle.js","anim/AnimatedLabel.js","anim/AnimatedLine.js","anim/AnimatedLinkedListNode.js","anim/AnimatedRectangle.js","anim/AnimatedSkipListNode.js","anim/ObjectManager.js","anim/AnimationMain.js","anim/CustomEvents.js","components/Footer.js","components/Header.js","algo/Algorithm.js","algo/AVL.js","algo/util/GraphValues.js","algo/Graph.js","algo/BST.js","algo/BTree.js","algo/BoyerMoore.js","algo/BubbleSort.js","algo/Hash.js","algo/ClosedHash.js","algo/CocktailSort.js","algo/util/PriorityQueue.js","algo/Heap.js","algo/OpenHash.js","algo/SplayTree.js","algo/HeapSort.js","AlgoList.js","algo/ArrayList.js","algo/LinkedList.js","algo/DoublyLinkedList.js","algo/CircularlyLinkedList.js","algo/StackArray.js","algo/StackLL.js","algo/QueueArray.js","algo/QueueLL.js","algo/DequeArray.js","algo/DequeLL.js","algo/SkipList.js","algo/InsertionSort.js","algo/SelectionSort.js","algo/QuickSort.js","algo/QuickSelect.js","algo/MergeSort.js","algo/LSDRadix.js","algo/BruteForce.js","algo/KMP.js","algo/RabinKarp.js","algo/BFS.js","algo/DFS.js","algo/Dijkstras.js","algo/Prims.js","algo/Kruskals.js","algo/LCS.js","algo/Floyd.js","examples/ExampleModals.js","screens/AlgoScreen.js","screens/AboutScreen.js","screens/HomeScreen.js","App.js","index.js"],"names":["SingleAnimation","constructor","id","fromX","fromY","toX","toY","this","objectID","UndoBlock","addUndoAnimation","undoInitialStep","UndoMove","fmX","fmy","tx","ty","super","animationList","nextAnim","push","UndoCreate","world","removeObject","UndoHighlight","val","color","highlightValue","setHighlight","UndoSetHeight","height","setHeight","UndoSetWidth","width","setWidth","UndoSetNumElements","obj","newNumElems","sizeBeforeChange","getNumElements","sizeAfterChange","labels","Array","colors","i","getText","getTextColor","setNumElements","setText","setTextColor","UndoSetAlpha","alph","alphaVal","setAlpha","UndoSetNull","nv","nullVal","setNull","UndoSetPrevNull","setPrevNull","UndoSetNextNull","setNextNull","UndoSetForegroundColor","setForegroundColor","UndoSetBackgroundColor","setBackgroundColor","UndoSetHighlightIndex","index","setHighlightIndex","UndoSetText","str","newText","labelIndex","UndoSetTextColor","UndoHighlightEdge","from","to","fromID","toID","setEdgeHighlight","UndoSetEdgeThickness","thickness","setEdgeThickness","UndoSetEdgeColor","oldColor","setEdgeColor","UndoSetEdgeAlpha","oldAplha","alpha","setEdgeAlpha","UndoSetPosition","x","y","setNodePosition","UndoSetAlwaysOnTop","onTop","setAlwaysOnTop","UndoSetRectangleEdgeThickness","thicknessArray","setRectangleEdgeThickness","AnimatedObject","backgroundColor","foregroundColor","highlighted","label","labelColor","layer","minHeightDiff","range","highlightIndex","highlightIndexDirty","addedToScene","newColor","getNull","newAlpha","getAlpha","getHighlight","getWidth","getHeight","value","highlightColor","centerX","Error","centerY","getAlignLeftPos","otherObject","right","getAlignRightPos","left","getAlignTopPos","top","getAlignBottomPos","bottom","alignLeft","alignRight","alignTop","alignBottom","getClosestCardinalPoint","xDelta","yDelta","xPos","yPos","centered","pulseHighlight","frameNum","frameMod","delta","Math","abs","highlightDiff","getTailPointerAttachPos","getHeadPointerAttachPos","identifier","hlIndex","getHighlightIndex","AnimatedBTreeNode","widthPerElement","h","numLabels","labelColors","newNumElements","draw","context","startX","isNaN","startY","strokeStyle","fillStyle","beginPath","moveTo","lineTo","closePath","stroke","fill","textAlign","textBaseline","labelX","labelY","fillText","anchor","textIndex","createUndoDelete","UndoDeleteBTreeNode","addBTreeNode","setLayer","AnimatedCircle","radius","newWidth","xVec","yVec","len","sqrt","globalAlpha","arc","PI","lineWidth","font","strList","split","length","leftWidth","measureText","substring","centerWidth","textWidth","startingXForHighlight","leftStr","highlightStr","rightStr","mid","UndoDeleteCircle","addCircleObject","AnimatedCircularlyLinkedListNode","w","linkPercent","nullPointer","labelPosX","labelPosY","np","resetTextPosition","UndoDeleteCircularlyLinkedList","addCircularlyLinkedListObject","AnimatedDoublyLinkedListNode","prevNullPointer","nextNullPointer","getLeftNull","getRightNull","closest","UndoDeleteDoublyLinkedList","pnp","nnp","addDoublyLinkedListObject","AnimatedHighlightCircle","UndoDeleteHighlightCircle","addHighlightCircleObject","AnimatedLabel","initialWidth","strokeText","offset","indexOf","UndoDeleteLabel","addLabelObject","AnimatedLine","curve","directed","edgeLabel","anchorPoint","dirty","arrowHeight","arrowWidth","setColor","highlightVal","setThickness","LINE_MAX_HEIGHT_DIFF","hasNode","n","sign","drawArrow","fromPos","toPos","deltaX","deltaY","midX","midY","controlX","controlY","quadraticCurveTo","midLen","createUndoConnect","UndoConnect","createConnection","connectEdge","disconnect","AnimatedLinkedListNode","vertical","linkPosEnd","UndoDeleteLinkedList","addLinkedListObject","AnimatedRectangle","xJustify","yJustify","textColor","getEdgeThickness","UndoDeleteRectangle","addRectangleObject","AnimatedSkipListNode","UndoDeleteSkipList","addSkipListObject","ObjectManager","canvasRef","nodes","edges","backEdges","activeLayers","ctx","current","getContext","framenum","statusReport","j","clearRect","alwaysOnTop","update","setLayers","shown","layers","resetLayers","objectColor","undefined","String","newNode","oldAlpha","nodeID","setAllLayers","nextEdge","clearAllObjects","objectIDfrom","objectIDto","deleted","undo","pop","deleteIncident","undoStack","node2ID","len2","node1ID","oldObject","getObject","objectLabel","getNodeX","getTextWidth","text","max","getNodeY","lab","connectionPoint","fromObj","toObj","l","id1","id2","oldTop","oldHighlight","oldThickness","oldEdgeThickness","centering","newLabel","nodeLabel","linkPer","verticalOrientation","numElems","widthPerElem","newX","newY","getCookie","cookieName","cookies","document","cookie","substr","replace","unescape","setCookie","expireDays","exDate","Date","setDate","getDate","addControlToAnimationBar","animBarRef","type","name","callback","element","createElement","setAttribute","onclick","onkeydown","tableEntry","appendChild","addDivisorToAnimationBar","divisorLeft","divisorRight","AnimationManager","events","removeListener","kind","scope","func","scopeFunctions","functions","splice","addListener","fireEvent","event","objects","functs","call","objectManager","animatedObjects","animationPaused","awaitingStep","currentlyAnimating","animationSteps","currentAnimation","previousAnimationSteps","currFrame","animationBlockLength","currentBlock","doingUndo","undoAnimationStepIndices","undoAnimationStepIndicesStack","paused","canvas","skipBackButton","skipBack","stepBackButton","stepBack","playPauseBackButton","doPlayPause","stepForwardButton","step","skipForwardButton","skipForward","speed","parseInt","CustomSlider","withStyles","root","padding","track","borderRadius","Slider","slider","defaultValue","onChange","e","setSpeed","controlBar","getElementById","newTable","midLevel","bottomLevel","ReactDOM","render","align","txtNode","createTextNode","heightEntry","returnSubmit","field","changeSize","documentElement","clientWidth","intOnly","maxSize","size","keyASCII","window","keyCode","which","controlKey","sizeButton","animStarted","animEnded","animWaiting","animUndoUnavailable","lerp","percent","setPaused","pausedValue","parseBool","uppercase","toUpperCase","parseColor","clr","charAt","newSpeed","floor","startNextBlock","undoBlock","stopTimer","foundBreak","anyAnimations","act","params","startNewAnimation","commands","startTimer","undoLastBlock","clearHistory","keepUndoing","finishUndoBlock","resetAll","runFast","animateNext","disabled","timeout","timer","setTimeout","clearInterval","move","delete","removedEdges","concat","connect","connectNext","connectPrev","connectCurve","connectSkipList","undoConnect","createCircle","createHighlightCircle","createRectangle","createLabel","createLinkedListNode","isArray","map","createDoublyLinkedListNode","createCircularlyLinkedListNode","createSkipListNode","createBTreeNode","oldText","oldThicknessArray","oldHeight","oldWidth","oldNull","oldElem","setPosition","oldX","oldY","oldIndex","bringToTop","moveToAlignRight","newXY","Footer","className","href","Header","React","Component","state","menuVisible","toggleMenu","setState","Fragment","onClick","null","true","false","addLabelToAlgorithmBar","labelName","group","addCheckboxToAlgorithmBar","boxLabel","checked","span","addRadioButtonGroupToAlgorithmBar","buttonNames","groupName","buttonList","button","topLevelTableEntry","addControlToAlgorithmBar","addDivisorToAlgorithmBar","addGroupToAlgorithmBar","horizontal","parentGroup","Algorithm","am","animationManager","disableUI","enableUI","canvasWidth","canvasHeight","actionHistory","recordAnimation","addCodeToCanvasBase","code","start_x","start_y","line_height","standard_color","codeID","nextIndex","cmd","highlight","ind1","ind2","unhighlight","removeCode","setCodeAlpha","reset","implementAction","args","next","retVal","normalizeNumber","input","maxLen","test","funct","maxsize","sizeChanged","newHeight","prototype","returnSubmitFloat","addReturnSubmit","action","AVL","first_print_pos_y","PRINT_VERTICAL_GAP","print_max","startingX","addControls","EXPLANITORY_TEXT_X","EXPLANITORY_TEXT_Y","controls","insertField","insertCallback","bind","insertButton","deleteField","deleteCallback","deleteButton","findField","findCallback","findButton","printButton","printCallback","clearButton","clearCallback","predSuccButtonList","predButton","succButton","predSucc","treeRoot","insertedValue","add","deletedValue","remove","findValue","findElement","printTree","clear","highlightID","firstLabel","HIGHLIGHT_COLOR","xPosOfNextLabel","FIRST_PRINT_POS_X","yPosOfNextLabel","printTreeRec","tree","nextLabelID","data","PRINT_COLOR","PRINT_HORIZONTAL_GAP","doFind","graphicID","remakeTree","curr","LINK_COLOR","addH","resizeTree","treeNodeID","heightLabelID","bfLabelID","STARTING_Y","FOREGROUND_COLOR","BACKGROUND_COLOR","HEIGHT_LABEL_COLOR","AVLNode","parent","connectSmart","balance","some","LINK_OPACITY","updateHeightAndBF","bf","HIGHLIGHT_LABEL_COLOR","singleRotateRight","singleRotateLeft","B","A","t2","isLeftChild","resetHeight","deleteNode","removeH","dummy","removeSucc","removePred","startingPoint","resizeWidths","rightWidth","setNewPositions","animateNewPositions","xPosition","yPosition","side","heightLabelX","bfLabelX","heightLabelY","bfLabelY","HEIGHT_DELTA","WIDTH_DELTA","recClear","hid","bfid","initialX","initialY","node","r","HIGHLIGHT_LINK_COLOR","HIGHLIGHT_CIRCLE_COLOR","LARGE_ALLOWED","LARGE_CURVE","LARGE_X_POS_LOGICAL","LARGE_Y_POS_LOGICAL","SMALL_ALLLOWED","SMALL_CURVE","SMALL_X_POS_LOGICAL","SMALL_Y_POS_LOGICAL","BFS_DFS_ADJ_LIST","row","DIJKSTRAS_ADJ_LIST","Number","PRIMS_KRUSKALS_ADJ_LIST","KRUSKALS_DS_COLORS","Graph","defaultEdges","dir","dag","costs","currentLayer","isDAG","showEdgeCosts","setup_small","addDirection","verticalGroup","newGraphButton","newGraphCallback","defaultGraphButton","defaultGraphCallback","radioButtonList","undirectedGraphButton","directedGraphCallback","directedGraphButton","smallGraphButton","smallGraphCallback","largeGraphButton","largeGraphCallback","logicalButton","graphRepChangedCallback","adjacencyListButton","adjacencyMatrixButton","newDirected","setup","setup_large","newLayer","recolorGraph","adj_matrix","highlightEdge","adj_list_edges","adj_matrixID","circleID","visitVertex","highlightCircleL","x_pos_logical","y_pos_logical","highlightCircleAL","adj_list_x_start","adj_list_width","adj_list_y_start","adj_list_height","highlightCircleAM","adj_matrix_x_start","adj_matrix_width","adj_matrix_y_start","adj_matrix_height","leaveVertex","clearEdges","rebuildEdges","buildEdges","adjustCurveForDirectedEdges","allowed","adj_list_elem_width","adj_list_elem_height","adj_list_spacing_after_list","adj_list_spacing_between_nodes","isLarge","bidirectional","toStr","edgePercent","random","buildAdjList","buildAdjMatrix","adj_matrix_index_x","adj_matrix_index_y","removeAdjList","adj_list_list","adj_list_index","lastElem","nextXPos","hasEdges","vertex","fromCharCode","control","PRE_CODE","IN_CODE","POST_CODE","LEVEL_CODE","BST","toClear","traversalButtonList","preOrderSelect","inOrderSelect","postOrderSelect","levelOrderSelect","traversal","traverseButton","traverseCallback","traverse","preOrderRec","passedCodeID","levelOrder","queue","queueLabelId","queueID","QUEUE_START_X","QUEUE_START_Y","shift","currId","clearOldObjects","postOrderRec","forEach","BSTNode","BTreeNode","widths","keys","children","numKeys","isLeaf","galilRuleEnabled","lastSwapEnabled","Hash","hashingIntegers","keyField","valueField","loadField","changeLoadFactor","loadButton","loadFactorCallBack","hashIntegerButton","changeHashTypeCallback","hashStringButton","rightVerticalGroup","rightVerticalTop","rightVerticalBottom","initialCapacityLabel","initialCapacityField","restartButton","newHashingIntegers","changeHashType","newHashingIntegerValue","doHash","labelID1","labelID2","table_size","currHash","HASH_LABEL_X","indexXPos","indexYPos","label1","wordToHashID","wordToHash","digits","hashValue","nextByte","nextByteID","resultDigits","floatingDigits","floatingVals","operatorID","barID","nextChar","charCodeAt","carry","HASH_NUMBER_START_X","label2","HASH_NUMBER_START_Y","insertedKey","insertElement","deleteElement","newLF","MapEntry","key","elem","PriorityQueue","backingArray","enqueue","priority","sort","a","b","dequeue","getIDs","HEAP_X_POSITIONS","HEAP_Y_POSITIONS","LinkedListNode","algoMap","ArrayList","addVerticalGroup","addTopHorizontalGroup","addBottomHorizontalGroup","addValueField","addIndexCallback","addIndexField","addFrontButton","addFrontCallback","addBackButton","addBackCallback","addIndexButton","removeVerticalGroup","removeTopHorizontalGroup","removeBottomHorizontalGroup","removeField","removeIndexCallback","removeIndexButton","removeFrontButton","removeFrontCallback","removeBackButton","removeBackCallback","arrayID","arrayLabelID","arrayData","xpos","ypos","highlight1ID","addVal","resize","clearAll","elemToAdd","labPushID","labPushValID","arrayMoveID","labPopValID","labPushResizeID","arrayIDNew","arrayLabelIDNew","arrayDataNew","xposinit","yposinit","LinkedList","initialIndex","linkedListElemID","topID","topLabelID","leftoverLabelID","resetNodePositions","labPopID","nodePosX","LINKED_LIST_START_Y","nextX","nextY","DoublyLinkedList","tail_pos_y","tail_label_y","headID","headLabelID","tailID","tailLabelID","indexToTraverseTo","CircularlyLinkedList","labCopiedValID","copiedData","firstNodeID","lastX","lastY","LINKED_LIST_ELEM_HEIGHT","secondNodeX","LINKED_LIST_START_X","secondNodeY","removedNodeIndex","StackArray","pushField","pushCallback","pushButton","popButton","popCallback","highlight2ID","pushVal","clearData","elemToPush","popVal","display","StackLL","resetLinkedListPositions","QueueArray","enqueueField","enqueueCallback","enqueueButton","dequeueButton","dequeueCallback","frontID","frontLabelID","sizeID","sizeLabelID","frontPointerID","front","ARRAY_START_Y","elemToEnqueue","labEnqueueID","labEnqueueValID","labIndexID","labIndexValID","newTail","labDequeueID","labDequeueValID","dequeuedVal","frontxpos","frontypos","labEnqueueResizeID","labEnqueueValIDNew","QueueLL","DequeArray","addField","addFirstButton","addFirstCallBack","addLastButton","addLastCallback","removeFirstButton","removeFirstCallback","removeLastButton","removeLastCallback","addLast","removeFirst","removeLast","addFirst","elemToAddLast","labAddLastID","labAddLastValID","addIndex","QUEUE_LABEL_X","labelAddID","labelAddIDVal","labremoveFirstID","labremoveFirstValID","removeFirstdVal","remLabelID","remLabelValID","remIndex","removedVal","isFront","frontOffset","extra","QUEUE_RESIZE_LABEL_X","DequeLL","addFirstCallback","algos","Heap","array_size","order","removeButton","removeCallback","horizontalGroup","buildHeapField","buildHeapCallback","buildHeapButton","minMaxButtonList","minHeapButton","minHeapCallback","maxHeapButton","maxHeapCallback","isMinHeap","createArray","arrayLabels","arrayRects","circleObjs","arrayXPositions","currentHeapSize","swapLabel1","swapLabel2","swapLabel3","swapLabel4","descriptLabel1","descriptLabel2","descriptLabel3","resetIndex","list","filter","buildHeap","swap","index1","index2","tmp","setIndexHighlight","pushDown","childIndex","downheapCheckRightChild","downheapCompare","slice","unshift","min","nextElem","MAX_SIZE","currentIndex","parentIndex","upheapCompare","resizeLabelID","oldSize","newArrayData","newArrayLabels","newArrayRects","newCircleObjs","newArrayXPositions","SkipList","topHorizontalGroup","bottomHorizontalGroup","verticalGroupRandom","topHorizontalGroupRandom","bottomHorizontalGroupRandom","addWithHeadsCallback","headsField","addWithHeadsButton","addValueFieldRandom","addRandomlyCallback","addRandomlyButton","getField","getCallback","getButton","NEGATIVE_INFINITY","POSITIVE_INFINITY","SKIP_LIST_START_X","heads","get","valueLabelId","valueStringId","cfLabelId","cfStringId","expLabelID","headsString","rightPhantomsCol","newCol","col","foundDuplicate","nextCol","getNextCol","shiftColumns","prevCol","getPrevCol","removedCol","maxHeight","leftPhantomID","rightPhantomID","ClosedHash","elements_per_row","linearProblingButton","linearProbeCallback","quadraticProbingButton","quadraticProbeCallback","doubleHashingButton","doubleHashingCallback","currentHashingTypeButtonState","changeProbeType","newProbingType","skipDist","entry","load_factor","ExplainLabel","getEmptyIndex","hashTableValues","labID","hashTableVisual","empty","DelIndexLabel","resetSkipDist","labelID","skipVal","nextLowestPrime","HashID","probes","removedIndex","start","HashIndexID","getElemIndex","foundIndex","candidateIndex","fromCycle","resizeLabel","loadFactorID","oldHashTableVisual","oldHashTableValues","oldskipDist","oldempty","olddeleted","oldIndexXPos","oldIndexYPos","oldindexLabelID","indexLabelID","nextYPos","elementsMoved","oldElement","LF","HASH2_LABEL_X","HASH2_LABEL_Y","newHashTableVisual","newIndexLabelID","resetCallback","OpenHash","POINTER_ARRAY_ELEM_Y","resizeInitialTableCall","hashTableIndices","nextID","POINTER_ARRAY_ELEM_START_X","resizeInitialTable","oldHashTableIndices","old","found","prev","compareIndex","EXPLAIN_LABEL_Y","repositionList","repositionResizeList","RESIZE_POINTER_ARRAY_ELEM_START_X","tmpPrev","SplayTree","splay","zigZigRight","doubleRotateRight","zigZigLeft","doubleRotateLeft","treeRot","splayUp","insertElem","insert","treeDelete","valueToDelete","inTree","oldGraphicID","largestLeft","findMax","C","t3","BTree","starting_x","preemptiveSplit","max_keys","min_keys","split_index","max_degree","messageID","moveLabel1ID","moveLabel2ID","splitIndexButtonList","splitSecondSelect","splitThirdSelect","predCallback","succCallback","ignoreInputs","maxDegreeChangedHandler","newMaxDegree","changeDegree","clearTree","premtiveSplitCallback","premptiveSplitBox","changePreemtiveSplit","newValue","getLabelX","deleteTree","degree","newDegree","maxDegreeRadioButtons","findInTree","insertNotFull","insertValue","includes","findIndex","insertIndex","newTree","insertRepair","rightNode","risingNode","currentParent","leftNode","doDeleteNotEmpty","doDelete","nextNode","stealFromLeft","mergeRight","stealFromRight","maxNode","minNode","repairAfterDelete","parentNode","rightSib","fromParentIndex","tmpLabel1","tmpLabel2","leftSib","WIDTH_PER_ELEM","leftEdge","priorWidth","treeWidth","BubbleSort","listField","sortCallback","sortButton","lastSwapCheckbox","toggleLastSwap","displayData","iPointerID","jPointerID","comparisonCountID","compCount","console","log","elemCounts","Map","letterMap","count","has","set","toString","currChar","ARRAY_START_X","sorted","end","lastSwapped","movePointers","iXPos","jXPos","iLabelID","jLabelID","temp","CocktailSort","InsertionSort","SelectionSort","minButton","minCallback","maxButton","maxCallback","isMin","circleShift","k","toSwap","compare","lastIndex","QuickSort","pivotButtonList","randomPivotSelect","minPivotSelect","firstPivotSelect","perfectPivotSelect","pivotType","pPointerID","helper","pivot","midIndex","pXPos","swapPivot","other","moveJ","lLabelID","lXPos","pLabelID","QuickSelect","runCallback","kField","run","MergeSort","kPointerID","ceil","leftHelper","rightHelper","merge","prevOffset","tempArrayID","drawArrayAndCopy","extraOffset","copyData","currOffset","leftOffset","rightOffset","currArrayID","tempArray","tempDisplay","bottomYPos","kXPos","topYPos","movePointer","fromIndex","toIndex","fromOffset","toOffset","fromRow","toRow","cellID","pointerID","fromXPos","fromYPos","toXPos","toYPos","LSDRadix","arrayDisplay","bucketsData","bucketsID","bucketsDisplay","infoLabelID","greatest","log10","longData","digit","nthDigit","idBucket","dataBucket","displayBucket","BUCKETS_START_Y","pow","HeapSort","heapArrayData","heapArrayID","heapArrayLabelID","heapTreeObj","displayDataTemp","createHeap","heapArrayXPositions","remData","removedElementID","ARRAY_INITIAL_Y","compareWithLetters","num1","num2","BruteForce","textField","patternField","textRowID","comparisonMatrixID","pattern","find","maxRows","cellSize","labelsX","BoyerMoore","blotButton","buildLastOccurrenceTableCallback","galilButton","toggleGalilRule","patternTableLabelID","patternTableCharacterID","patternTableIndexID","lastTableLabelID","lastTableCharacterID","lastTableValueID","periodLabelID","lastTableCode","failureTableCode","BMCode","GalilCode","period","onlyBuildLastOccurrenceTable","getMaxRows","lastTable","buildLastTable","buildFailureTable","gr","failureTable","textLength","PATTERN_START_Y","LAST_TABLE_START_Y","patternTableStartX","lotStartX","lotPointerID","Object","char","startIndex","failureTableLabelID","failureTableCharacterID","failureTableValueID","FAILURE_TABLE_START_Y","tableStartX","ftPeriodLabel","KMP","bftButton","buildFailureTableCallback","KMPCode","onlyBuildFailureTable","fjPointerID","f0PointerID","f1PointerID","nextAlignment","RabinKarp","baseField","baseButton","baseCallback","baseLabelID","characterValuesLabelID","textHashLabelID","textHashCalculationID","patternHashLabelID","patternHashCalculationID","baseValue","toLowerCase","textCalculation","textHash","patternCalculation","patternHash","base","runningBase","calculationsX","BFS","startField","startCallback","startButton","adjMatrix","visited","listID","visitedID","VISITED_START_X","VISITED_START_Y","LIST_START_X","LIST_START_Y","startvalue","doBFS","startVetex","neighbor","DFS","physicalStack","recursiveStackButton","stackCallback","physicalStackButton","stackID","stackLabelID","recCode","itCode","physical","doDFSStack","doDFSRecursive","startVertex","stack","stackStartY","stackSpacing","vertexID","recursionSpacingX","recursionSpacingY","currentID","dfsVisit","currVertex","messageX","nextMessage","Dijkstra","distance","distanceID","pq","tableEntryHeight","TABLE_START_X","TABLE_START_Y","comparisonMessageID","doDijkstra","pqIDs","curDist","edgDist","newDist","oldDist","oldDistStr","newPqIDs","Prim","doPrim","weight","edge","edgeID","edgeStr","Kruskal","setID","setIndexID","setData","edgesListLeftID","edgesListRightID","SET_ARRAY_START_X","messageLabelID","SET_ARRAY_START_Y","edgesListLeft","edgesListRight","doKruskal","EDGE_LIST_START_X","edgeCount","tmpLeftID","tmpRightID","tmpLeft","tmpRight","findLabelLeft","findLabelRight","highlightCircle1","highlightCircle2","highlightCircle3","edgesAdded","nextListIndex","CURRENT_LABEL_X","CURRENT_LABEL_Y","newPos","leftRoot","rightRoot","minRoot","maxRoot","firstMatch","LCS","S1Field","S2Field","tableButton","oldIDs","string1","string2","str1","str2","clearOldIDs","buildTable","moveID","tableID","tableVals","S1TableID","S2TableID","tableXPos","tableYPos","buildLCSFromTable","currX","currY","sequence","header","SEQUENCE_START_Y","topThick","leftThick","nextSequenceID","Floyd","costTable","pathTable","getCostLabel","alwaysUseINF","cost_table_width","cost_table_height","cost_table_start_x","cost_table_start_y","path_table_width","path_table_height","path_table_start_x","path_table_start_y","node_1_x_pos","node_1_y_pos","node_2_x_pos","node_2_y_pos","node_3_x_pos","node_3_y_pos","message_x","message_y","costTableID","pathTableID","pathIndexXID","pathIndexYID","costIndexXID","costIndexYID","node3ID","costTableHeader","pathTableHeader","doFloydWarshall","algoList","AlgoScreen","props","updateDimensions","animManag","body","toggleExamples","examplesEnabled","algoName","location","pathname","createRef","ReactGA","pageview","componentDidMount","currentAlg","addEventListener","componentWillUnmount","removeEventListener","modals","ref","AboutScreen","HomeScreen","exact","path","idx","App","initialize","basename","component","createRoot","options","theme","save"],"mappings":"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Q,KACbvH,KAAKypB,OAAS,KAGfK,oBACC,MAAMxgB,EAAI0iB,GAAiB,MAARA,GAAgB,EAAIA,EAAKzqB,OACtCoT,EAAIrL,EAAEtJ,KAAKyH,MACXwkB,EAAI3iB,EAAEtJ,KAAKuH,OACjBvH,KAAKuB,OAASqH,KAAKyL,IAAIM,EAAGsX,GAAK,EAC/BjsB,KAAK+pB,GAAKpV,EAAIsX,EAGf3B,cACC,OAAmB,MAAftqB,KAAKypB,QAGFzpB,KAAKypB,OAAOhiB,OAASzH,MAM9B0lB,GAAIsE,sBAAwB,UAC5BtE,GAAIwG,qBAAuB,UAE3BxG,GAAIsC,gBAAkB,UACtBtC,GAAI6D,mBAAqB,UAEzB7D,GAAIoD,WAAa,UACjBpD,GAAImE,aAAe,IACnBnE,GAAIyG,uBAAyB,UAC7BzG,GAAI2D,iBAAmB,UACvB3D,GAAI4D,iBAAmB,UACvB5D,GAAI8C,YAAc9C,GAAI2D,iBAEtB3D,GAAIgG,YAAc,GAClBhG,GAAI+F,aAAe,GACnB/F,GAAI0D,WAAa,GAEjB1D,GAAIwC,kBAAoB,GACxBxC,GAAIE,mBAAqB,GACzBF,GAAI+C,qBAAuB,GAC3B/C,GAAIM,mBAAqB,GACzBN,GAAIO,mBAAqB,GCp1BzB,MAAMmG,GAAgB,CACrB,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAED,EACC,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA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KAAKypB,OAAOhiB,OAASzH,MC76B9B,MAqBMo4B,GAAmB,CACxB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAGKC,GAAmB,CACxB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KCtHM,MAAME,GAAU,CACtBC,UAAW,CAAC,YCkDE,cAAwBvV,GACtCvjB,YAAYwjB,EAAIpW,EAAGxD,GAClB5I,MAAMwiB,EAAIpW,EAAGxD,GACbtJ,KAAK+lB,cACL/lB,KAAKikB,UAAY,EACjBjkB,KAAK8uB,QAGN/I,cACC/lB,KAAKkmB,SAAW,GAEhB,MAAMuS,EAAmB3V,IAAuB,GAC1C4V,EAAwB5V,IAAuB,EAAM2V,GACrDE,EAA2B7V,IAAuB,EAAM2V,GAE9D1W,GAAuB,MAAO2W,GAG9B14B,KAAK44B,cAAgBhW,GAAyB,OAAQ,GAAI8V,GAC1D14B,KAAK44B,cAAc1hB,UAAYlX,KAAK0b,aACnC1b,KAAK44B,cACL,IAAM54B,KAAK64B,mBACX,GAED74B,KAAKkmB,SAASrlB,KAAKb,KAAK44B,eAExB7W,GAAuB,WAAY2W,GAGnC14B,KAAK84B,cAAgBlW,GAAyB,OAAQ,GAAI8V,GAC1D14B,KAAK84B,cAAc5hB,UAAYlX,KAAK0b,aACnC1b,KAAK84B,cACL,IAAM94B,KAAK64B,mBACX,GACA,GAED74B,KAAKkmB,SAASrlB,KAAKb,KAAK84B,eAGxB94B,KAAK+4B,eAAiBnW,GACrB,SACA,eACA+V,GAED34B,KAAK+4B,eAAe9hB,QAAUjX,KAAKg5B,iBAAiB3S,KAAKrmB,MACzDA,KAAKkmB,SAASrlB,KAAKb,KAAK+4B,gBAGxB/4B,KAAKi5B,cAAgBrW,GACpB,SACA,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","file":"static/js/main.889f8cae.chunk.js","sourcesContent":["export default class SingleAnimation {\n\tconstructor(id, fromX, fromY, toX, toY) {\n\t\tthis.objectID = id;\n\t\tthis.fromX = fromX;\n\t\tthis.fromY = fromY;\n\t\tthis.toX = toX;\n\t\tthis.toY = toY;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Base \"class\": UndoBlock\n\nimport SingleAnimation from './SingleAnimation';\n\nexport class UndoBlock {\n\taddUndoAnimation() {\n\t\treturn false;\n\t}\n\n\tundoInitialStep() {}\n}\n\nexport class UndoMove extends UndoBlock {\n\tconstructor(id, fmX, fmy, tx, ty) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.fromX = fmX;\n\t\tthis.fromY = fmy;\n\t\tthis.toX = tx;\n\t\tthis.toY = ty;\n\t}\n\n\taddUndoAnimation(animationList) {\n\t\tconst nextAnim = new SingleAnimation(\n\t\t\tthis.objectID,\n\t\t\tthis.fromX,\n\t\t\tthis.fromY,\n\t\t\tthis.toX,\n\t\t\tthis.toY,\n\t\t);\n\t\tanimationList.push(nextAnim);\n\t\treturn true;\n\t}\n}\n\nexport class UndoCreate extends UndoBlock {\n\tconstructor(id) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.removeObject(this.objectID);\n\t}\n}\n\nexport class UndoHighlight extends UndoBlock {\n\tconstructor(id, val, color) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.highlightValue = val;\n\t\tthis.color = color;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setHighlight(this.objectID, this.highlightValue, this.color);\n\t}\n}\n\nexport class UndoSetHeight extends UndoBlock {\n\tconstructor(id, val) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.height = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setHeight(this.objectID, this.height);\n\t}\n}\n\nexport class UndoSetWidth extends UndoBlock {\n\tconstructor(id, val) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.width = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setWidth(this.objectID, this.width);\n\t}\n}\n\nexport class UndoSetNumElements extends UndoBlock {\n\tconstructor(obj, newNumElems) {\n\t\tsuper();\n\t\tthis.objectID = obj.objectID;\n\t\tthis.sizeBeforeChange = obj.getNumElements();\n\t\tthis.sizeAfterChange = newNumElems;\n\t\tif (this.sizeBeforeChange > this.sizeAfterChange) {\n\t\t\tthis.labels = new Array(this.sizeBeforeChange - this.sizeAfterChange);\n\t\t\tthis.colors = new Array(this.sizeBeforeChange - this.sizeAfterChange);\n\t\t\tfor (let i = 0; i < this.sizeBeforeChange - this.sizeAfterChange; i++) {\n\t\t\t\tthis.labels[i] = obj.getText(i + this.sizeAfterChange);\n\t\t\t\tthis.colors[i] = obj.getTextColor(i + this.sizeAfterChange);\n\t\t\t}\n\t\t}\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNumElements(this.objectID, this.sizeBeforeChange);\n\t\tif (this.sizeBeforeChange > this.sizeAfterChange) {\n\t\t\tfor (let i = 0; i < this.sizeBeforeChange - this.sizeAfterChange; i++) {\n\t\t\t\tworld.setText(this.objectID, this.labels[i], i + this.sizeAfterChange);\n\t\t\t\tworld.setTextColor(this.objectID, this.colors[i], i + this.sizeAfterChange);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class UndoSetAlpha extends UndoBlock {\n\tconstructor(id, alph) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.alphaVal = alph;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setAlpha(this.objectID, this.alphaVal);\n\t}\n}\n\nexport class UndoSetNull extends UndoBlock {\n\tconstructor(id, nv) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.nullVal = nv;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNull(this.objectID, this.nullVal);\n\t}\n}\n\nexport class UndoSetPrevNull extends UndoBlock {\n\tconstructor(id, nv) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.nullVal = nv;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setPrevNull(this.objectID, this.nullVal);\n\t}\n}\n\nexport class UndoSetNextNull extends UndoBlock {\n\tconstructor(id, nv) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.nullVal = nv;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNextNull(this.objectID, this.nullVal);\n\t}\n}\n\nexport class UndoSetForegroundColor extends UndoBlock {\n\tconstructor(id, color) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.color = color;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setForegroundColor(this.objectID, this.color);\n\t}\n}\n\nexport class UndoSetBackgroundColor extends UndoBlock {\n\tconstructor(id, color) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.color = color;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setBackgroundColor(this.objectID, this.color);\n\t}\n}\n\nexport class UndoSetHighlightIndex extends UndoBlock {\n\tconstructor(id, index) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.index = index;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setHighlightIndex(this.objectID, this.index);\n\t}\n}\n\nexport class UndoSetText extends UndoBlock {\n\tconstructor(id, str, index) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.newText = str;\n\t\tthis.labelIndex = index;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setText(this.objectID, this.newText, this.labelIndex);\n\t}\n}\n\nexport class UndoSetTextColor extends UndoBlock {\n\tconstructor(id, color, index) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.color = color;\n\t\tthis.index = index;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setTextColor(this.objectID, this.color, this.index);\n\t}\n}\n\nexport class UndoHighlightEdge extends UndoBlock {\n\tconstructor(from, to, val) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.highlightValue = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeHighlight(this.fromID, this.toID, this.highlightValue);\n\t}\n}\n\nexport class UndoSetEdgeThickness extends UndoBlock {\n\tconstructor(from, to, val) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.thickness = val;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeThickness(this.fromID, this.toID, this.thickness);\n\t}\n}\n\nexport class UndoSetEdgeColor extends UndoBlock {\n\tconstructor(from, to, oldColor) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.color = oldColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeColor(this.fromID, this.toID, this.color);\n\t}\n}\n\nexport class UndoSetEdgeAlpha extends UndoBlock {\n\tconstructor(from, to, oldAplha) {\n\t\tsuper();\n\t\tthis.fromID = from;\n\t\tthis.toID = to;\n\t\tthis.alpha = oldAplha;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setEdgeAlpha(this.fromID, this.toID, this.alpha);\n\t}\n}\n\nexport class UndoSetPosition extends UndoBlock {\n\tconstructor(id, x, y) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t}\n}\n\nexport class UndoSetAlwaysOnTop extends UndoBlock {\n\tconstructor(id, onTop) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.onTop = onTop;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setAlwaysOnTop(this.objectID, this.onTop);\n\t}\n}\n\nexport class UndoSetRectangleEdgeThickness extends UndoBlock {\n\tconstructor(id, thicknessArray) {\n\t\tsuper();\n\t\tthis.objectID = id;\n\t\tthis.thicknessArray = thicknessArray;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.setRectangleEdgeThickness(this.objectID, this.thicknessArray);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nexport default class AnimatedObject {\n\tconstructor() {\n\t\tthis.objectID = -1;\n\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\n\t\tthis.backgroundColor = '#FFFFFF';\n\t\tthis.foregroundColor = '#000000';\n\t\tthis.highlighted = false;\n\n\t\tthis.label = '';\n\t\tthis.labelColor = '#000000';\n\n\t\tthis.layer = 0;\n\t\tthis.alpha = 1.0;\n\t\tthis.minHeightDiff = 3;\n\t\tthis.range = 5;\n\n\t\tthis.highlightIndex = -1;\n\t\tthis.highlightIndexDirty = true;\n\n\t\tthis.addedToScene = true;\n\t}\n\n\tsetBackgroundColor(newColor) {\n\t\tthis.backgroundColor = newColor;\n\t}\n\n\tsetNull() {}\n\n\tgetNull() {\n\t\treturn false;\n\t}\n\n\tsetAlpha(newAlpha) {\n\t\tthis.alpha = newAlpha;\n\t}\n\n\tgetAlpha() {\n\t\treturn this.alpha;\n\t}\n\n\tsetForegroundColor(newColor) {\n\t\tthis.foregroundColor = newColor;\n\t\tthis.labelColor = newColor;\n\t}\n\n\tgetHighlight() {\n\t\treturn this.highlighted;\n\t}\n\n\tgetWidth() {\n\t\t// TODO:  Do we want to throw here?  Should always override this ...\n\t\treturn 0;\n\t}\n\n\tgetHeight() {\n\t\t// TODO:  Do we want to throw here?  Should always override this ...\n\t\treturn 0;\n\t}\n\n\tsetHighlight(value, color) {\n\t\tthis.highlighted = value;\n\t\tthis.highlightColor = color || '#ff0000';\n\t}\n\n\tcenterX() {\n\t\treturn this.x;\n\t}\n\n\tsetWidth() {\n\t\tthrow new Error('setWidth() should be implemented in a base class');\n\t}\n\n\tcenterY() {\n\t\treturn this.y;\n\t}\n\n\tgetAlignLeftPos(otherObject) {\n\t\treturn [otherObject.right() + this.getWidth() / 2, otherObject.centerY()];\n\t}\n\n\tgetAlignRightPos(otherObject) {\n\t\treturn [otherObject.left() - this.getWidth() / 2, otherObject.centerY()];\n\t}\n\n\tgetAlignTopPos(otherObject) {\n\t\treturn [otherObject.centerX(), otherObject.top() - this.getHeight() / 2];\n\t}\n\n\tgetAlignBottomPos(otherObject) {\n\t\treturn [otherObject.centerX(), otherObject.bottom() + this.getHeight() / 2];\n\t}\n\n\talignLeft(otherObject) {\n\t\t// Assuming centering.  Overridden method could modify if not centered\n\t\t//  (See AnimatedLabel, for instance)\n\t\tthis.y = otherObject.centerY();\n\t\tthis.x = otherObject.right() + this.getWidth() / 2;\n\t}\n\n\talignRight(otherObject) {\n\t\t// Assuming centering.  Overridden method could modify if not centered\n\t\t//  (See AnimatedLabel, for instance)\n\t\tthis.y = otherObject.centerY();\n\t\tthis.x = otherObject.left() - this.getWidth() / 2;\n\t}\n\n\talignTop(otherObject) {\n\t\t// Assuming centering.  Overridden method could modify if not centered\n\t\tthis.x = otherObject.centerX();\n\t\tthis.y = otherObject.top() - this.getHeight() / 2;\n\t}\n\n\talignBottom(otherObject) {\n\t\tthis.x = otherObject.centerX();\n\t\tthis.y = otherObject.bottom() + this.getHeight() / 2;\n\t}\n\n\tgetClosestCardinalPoint(fromX, fromY) {\n\t\tlet xDelta;\n\t\tlet yDelta;\n\t\tlet xPos;\n\t\tlet yPos;\n\n\t\tif (fromX < this.left()) {\n\t\t\txDelta = this.left() - fromX;\n\t\t\txPos = this.left();\n\t\t} else if (fromX > this.right()) {\n\t\t\txDelta = fromX - this.right();\n\t\t\txPos = this.right();\n\t\t} else {\n\t\t\txDelta = 0;\n\t\t\txPos = this.centerX();\n\t\t}\n\n\t\tif (fromY < this.top()) {\n\t\t\tyDelta = this.top() - fromY;\n\t\t\tyPos = this.top();\n\t\t} else if (fromY > this.bottom()) {\n\t\t\tyDelta = fromY - this.bottom();\n\t\t\tyPos = this.bottom();\n\t\t} else {\n\t\t\tyDelta = 0;\n\t\t\tyPos = this.centerY();\n\t\t}\n\n\t\tif (yDelta > xDelta) {\n\t\t\txPos = this.centerX();\n\t\t} else {\n\t\t\tyPos = this.centerY();\n\t\t}\n\n\t\treturn [xPos, yPos];\n\t}\n\n\tcentered() {\n\t\treturn false;\n\t}\n\n\tpulseHighlight(frameNum) {\n\t\tif (this.highlighted) {\n\t\t\tconst frameMod = frameNum / 7.0;\n\t\t\tconst delta = Math.abs((frameMod % (2 * this.range - 2)) - this.range + 1);\n\t\t\tthis.highlightDiff = delta + this.minHeightDiff;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos() {\n\t\treturn [this.x, this.y];\n\t}\n\n\tgetHeadPointerAttachPos() {\n\t\treturn [this.x, this.y];\n\t}\n\n\tidentifier() {\n\t\treturn this.objectID;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColor;\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColor = color;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t}\n\n\tsetHighlightIndex(hlIndex) {\n\t\tthis.highlightIndex = hlIndex;\n\t\tthis.highlightIndexDirty = true;\n\t}\n\n\tgetHighlightIndex() {\n\t\treturn this.highlightIndex;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nconst MIN_WIDTH = 10;\nconst EDGE_POINTER_DISPLACEMENT = 5;\n\nexport default class AnimatedBTreeNode extends AnimatedObject {\n\tconstructor(objectID, widthPerElement, h, numLabels, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\n\t\tthis.widthPerElement = widthPerElement;\n\t\tthis.h = h;\n\t\tthis.numLabels = numLabels;\n\t\tthis.labels = [];\n\t\tthis.labelColors = [];\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tthis.labelColors[i] = this.foregroundColor;\n\t\t}\n\t}\n\n\tgetNumElements() {\n\t\treturn this.numLabels;\n\t}\n\n\tgetWidth() {\n\t\tif (this.numLabels > 0) {\n\t\t\treturn this.widthPerElement * this.numLabels;\n\t\t} else {\n\t\t\treturn MIN_WIDTH;\n\t\t}\n\t}\n\n\tsetNumElements(newNumElements) {\n\t\tif (this.numLabels < newNumElements) {\n\t\t\tfor (let i = this.numLabels; i < newNumElements; i++) {\n\t\t\t\tthis.labels[i] = '';\n\t\t\t\tthis.labelColors[i] = this.foregroundColor;\n\t\t\t}\n\t\t\tthis.numLabels = newNumElements;\n\t\t} else if (this.numLabels > newNumElements) {\n\t\t\tfor (let i = newNumElements; i < this.numLabels; i++) {\n\t\t\t\tthis.labels[i] = null;\n\t\t\t}\n\t\t\tthis.numLabels = newNumElements;\n\t\t}\n\t}\n\n\tleft() {\n\t\treturn this.x - this.getWidth() / 2.0;\n\t}\n\n\tright() {\n\t\treturn this.x + this.getWidth() / 2.0;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2.0;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2.0;\n\t}\n\n\tdraw(context) {\n\t\tlet startX;\n\n\t\tstartX = this.left();\n\t\tif (isNaN(startX)) {\n\t\t\tstartX = 0;\n\t\t}\n\t\tconst startY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\tcontext.fillStyle = '#FF0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.getWidth() + this.highlightDiff,\n\t\t\t\tstartY - this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.getWidth() + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.getWidth(), startY);\n\t\tcontext.lineTo(startX + this.getWidth(), startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.textBaseline = 'middle';\n\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tconst labelX =\n\t\t\t\tthis.x -\n\t\t\t\t(this.widthPerElement * this.numLabels) / 2 +\n\t\t\t\tthis.widthPerElement / 2 +\n\t\t\t\ti * this.widthPerElement;\n\t\t\tconst labelY = this.y;\n\n\t\t\tcontext.fillStyle = this.labelColors[i];\n\t\t\tcontext.fillText(this.labels[i], labelX, labelY);\n\t\t}\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tsetForegroundColor(newColor) {\n\t\tthis.foregroundColor = newColor;\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tthis.labelColor[i] = newColor;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tif (anchor === 0) {\n\t\t\treturn [this.left() + EDGE_POINTER_DISPLACEMENT, this.y];\n\t\t} else if (anchor === this.numLabels) {\n\t\t\treturn [this.right() - EDGE_POINTER_DISPLACEMENT, this.y];\n\t\t} else {\n\t\t\treturn [this.left() + anchor * this.widthPerElement, this.y];\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tif (fromY < this.y - this.h / 2) {\n\t\t\treturn [this.x, this.y - this.h / 2];\n\t\t} else if (this.fromY > this.y + this.h / 2) {\n\t\t\treturn [this.x, this.y + this.h / 2];\n\t\t} else if (fromX < this.x - this.getWidth() / 2) {\n\t\t\treturn [this.x - this.getWidth() / 2, this.y];\n\t\t} else {\n\t\t\treturn [this.x + this.getWidth() / 2, this.y];\n\t\t}\n\t}\n\n\tgetTextColor(textIndex) {\n\t\ttextIndex = textIndex || 0;\n\t\treturn this.labelColors[textIndex];\n\t}\n\n\tgetText(index) {\n\t\tindex = index || 0;\n\t\treturn this.labels[index];\n\t}\n\n\tsetTextColor(color, textIndex) {\n\t\ttextIndex = textIndex || 0;\n\t\tthis.labelColors[textIndex] = color;\n\t}\n\n\tsetText(newText, textIndex) {\n\t\ttextIndex = textIndex || 0;\n\t\tthis.labels[textIndex] = newText;\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteBTreeNode(\n\t\t\tthis.objectID,\n\t\t\tthis.numLabels,\n\t\t\tthis.labels,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.widthPerElement,\n\t\t\tthis.h,\n\t\t\tthis.labelColors,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteBTreeNode extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tnumLabels,\n\t\tlabels,\n\t\tx,\n\t\ty,\n\t\twidthPerElement,\n\t\th,\n\t\tlabelColors,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlayer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.numLabels = numLabels;\n\t\tthis.labels = labels;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.widthPerElement = widthPerElement;\n\t\tthis.h = h;\n\t\tthis.labelColors = labelColors;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.layer = layer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addBTreeNode(\n\t\t\tthis.objectID,\n\t\t\tthis.widthPerElement,\n\t\t\tthis.h,\n\t\t\tthis.numLabels,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tfor (let i = 0; i < this.numLabels; i++) {\n\t\t\tworld.setText(this.objectID, this.labels[i], i);\n\t\t\tworld.setTextColor(this.objectID, this.labelColors[i], i);\n\t\t}\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject';\nimport { UndoBlock } from './UndoFunctions';\n\nexport default class AnimatedCircle extends AnimatedObject {\n\tconstructor(objectID, label) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.label = label;\n\n\t\tthis.radius = 20;\n\t\tthis.thickness = 3;\n\t\tthis.highlightIndex = -1;\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY) {\n\t\treturn this.getHeadPointerAttachPos(fromX, fromY);\n\t}\n\n\tgetWidth() {\n\t\treturn this.radius * 2;\n\t}\n\n\tsetWidth(newWidth) {\n\t\tthis.radius = newWidth / 2;\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tconst xVec = fromX - this.x;\n\t\tconst yVec = fromY - this.y;\n\t\tconst len = Math.sqrt(xVec * xVec + yVec * yVec);\n\t\tif (len === 0) return [this.x, this.y];\n\t\treturn [this.x + (xVec / len) * this.radius, this.y + (yVec / len) * this.radius];\n\t}\n\n\tsetHighlightIndex(hlIndex) {\n\t\tthis.highlightIndex = hlIndex;\n\t\tthis.highlightIndexDirty = true;\n\t}\n\n\tdraw(context) {\n\t\tcontext.globalAlpha = this.alpha;\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.fillStyle = this.highlightColor;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.arc(this.x, this.y, this.radius + this.highlightDiff, 0, Math.PI * 2, true);\n\t\t\tcontext.closePath();\n\t\t\tcontext.fill();\n\t\t}\n\n\t\tcontext.fillStyle = this.backgroundColor;\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.lineWidth = 1.2;\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);\n\t\tcontext.closePath();\n\t\tcontext.fill();\n\t\tcontext.stroke();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\t\tcontext.fillStyle = this.foregroundColor;\n\t\tconst strList = this.label.split('\\n');\n\t\tif (strList.length === 1) {\n\t\t\tif (this.highlightIndexDirty && this.highlightIndex !== -1) {\n\t\t\t\tthis.leftWidth = context.measureText(\n\t\t\t\t\tthis.label.substring(0, this.highlightIndex),\n\t\t\t\t).width;\n\t\t\t\tthis.centerWidth = context.measureText(\n\t\t\t\t\tthis.label.substring(this.highlightIndex, this.highlightIndex + 1),\n\t\t\t\t).width;\n\t\t\t\tthis.textWidth = context.measureText(this.label).width;\n\t\t\t\tthis.highlightIndexDirty = false;\n\t\t\t}\n\t\t\tif (this.highlightIndex !== -1 && this.highlightIndex < this.label.length) {\n\t\t\t\tconst startingXForHighlight = this.x - this.textWidth / 2;\n\t\t\t\tcontext.textAlign = 'left';\n\t\t\t\tconst leftStr = this.label.substring(0, this.highlightIndex);\n\t\t\t\tconst highlightStr = this.label.substring(\n\t\t\t\t\tthis.highlightIndex,\n\t\t\t\t\tthis.highlightIndex + 1,\n\t\t\t\t);\n\t\t\t\tconst rightStr = this.label.substring(this.highlightIndex + 1);\n\t\t\t\tcontext.fillText(leftStr, startingXForHighlight, this.y);\n\t\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\t\tcontext.fillStyle = '#FF0000';\n\t\t\t\tcontext.fillText(highlightStr, startingXForHighlight + this.leftWidth, this.y);\n\n\t\t\t\tcontext.strokeStyle = this.labelColor;\n\t\t\t\tcontext.fillStyle = this.labelColor;\n\t\t\t\tcontext.fillText(\n\t\t\t\t\trightStr,\n\t\t\t\t\tstartingXForHighlight + this.leftWidth + this.centerWidth,\n\t\t\t\t\tthis.y,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcontext.fillText(this.label, this.x, this.y);\n\t\t\t}\n\t\t} else if (strList.length % 2 === 0) {\n\t\t\tconst mid = strList.length / 2;\n\t\t\tfor (let i = 0; i < strList.length / 2; i++) {\n\t\t\t\tcontext.fillText(strList[mid - i - 1], this.x, this.y - (i + 0.5) * 12);\n\t\t\t\tcontext.fillText(strList[mid + i], this.x, this.y + (i + 0.5) * 12);\n\t\t\t}\n\t\t} else {\n\t\t\tconst mid = (strList.length - 1) / 2;\n\t\t\tcontext.fillText(strList[mid], this.x, this.y);\n\t\t\tfor (let i = 0; i < mid; i++) {\n\t\t\t\tcontext.fillText(strList[mid - (i + 1)], this.x, this.y - (i + 1) * 12);\n\t\t\t\tcontext.fillText(strList[mid + (i + 1)], this.x, this.y + (i + 1) * 12);\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteCircle(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.radius,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteCircle extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tx,\n\t\ty,\n\t\tforegroundColor,\n\t\tbackgroundColor,\n\t\tlayer,\n\t\tradius,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.layer = layer;\n\t\tthis.radius = radius;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addCircleObject(this.objectID, this.label);\n\t\tworld.setWidth(this.objectID, this.radius * 2);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setForegroundColor(this.objectID, this.foregroundColor);\n\t\tworld.setBackgroundColor(this.objectID, this.backgroundColor);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedCircularlyLinkedListNode extends AnimatedObject {\n\tconstructor(objectID, label, w, h, linkPercent, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.nullPointer = false;\n\n\t\tthis.label = label;\n\t\tthis.labelPosX = 0;\n\t\tthis.labelPosY = 0;\n\t\tthis.labelColor = foregroundColor;\n\t}\n\n\tsetNull(np) {\n\t\tif (this.nullPointer !== np) {\n\t\t\tthis.nullPointer = np;\n\t\t}\n\t}\n\n\tgetNull() {\n\t\treturn this.nullPointer;\n\t}\n\n\tleft() {\n\t\treturn this.x - (this.w * (1 - this.linkPercent)) / 2;\n\t}\n\n\tright() {\n\t\treturn this.x + (this.w * (this.linkPercent + 1)) / 2;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2.0;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2.0;\n\t}\n\n\tresetTextPosition() {\n\t\tthis.labelPosX = this.x;\n\t\tthis.labelPosY = this.y;\n\t}\n\n\tgetTailPointerAttachPos() {\n\t\treturn [this.x + this.w / 2.0, this.y];\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tif (fromX < this.x) {\n\t\t\treturn this.getClosestCardinalPoint(fromX, fromY); // Normal anchor\n\t\t} else {\n\t\t\treturn [this.x, this.bottom()]; // Curved pointer coming from the right, connect to bottom\n\t\t}\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t\tthis.resetTextPosition();\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tstartX = this.left();\n\t\tstartY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\tcontext.fillStyle = '#FF0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tstartX = this.right() - this.w * this.linkPercent;\n\t\tstartY = this.top();\n\n\t\tcontext.lineWidth = 1;\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tif (this.nullPointer) {\n\t\t\tcontext.lineTo(this.right(), startY + this.h);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\n\t\tthis.resetTextPosition();\n\t\tcontext.fillStyle = this.labelColor;\n\t\tcontext.fillText(this.label, this.labelPosX, this.labelPosY);\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColor = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColor;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteCircularlyLinkedList(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.labelColor,\n\t\t\tthis.layer,\n\t\t\tthis.nullPointer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteCircularlyLinkedList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlinkPercent,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlabelColor,\n\t\tlayer,\n\t\tnullPointer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.labelColor = labelColor;\n\t\tthis.layer = layer;\n\t\tthis.nullPointer = nullPointer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addCircularlyLinkedListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setNull(this.objectID, this.nullPointer);\n\t\tworld.setTextColor(this.objectID, this.labelColor);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedDoublyLinkedListNode extends AnimatedObject {\n\tconstructor(objectID, label, w, h, linkPercent, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.prevNullPointer = false;\n\t\tthis.nextNullPointer = false;\n\n\t\tthis.label = label;\n\t\tthis.labelPosX = 0;\n\t\tthis.labelPosY = 0;\n\t\tthis.labelColor = foregroundColor;\n\t}\n\n\tsetPrevNull(np) {\n\t\tif (this.prevNullPointer !== np) {\n\t\t\tthis.prevNullPointer = np;\n\t\t}\n\t}\n\n\tsetNextNull(np) {\n\t\tif (this.nextNullPointer !== np) {\n\t\t\tthis.nextNullPointer = np;\n\t\t}\n\t}\n\n\tgetLeftNull() {\n\t\treturn this.prevNullPointer;\n\t}\n\n\tgetRightNull() {\n\t\treturn this.nextNullPointer;\n\t}\n\n\tleft() {\n\t\treturn this.x - (this.w * (1 - this.linkPercent)) / 2;\n\t}\n\n\tright() {\n\t\treturn this.x + (this.w * (this.linkPercent + 1)) / 2;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2.0;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2.0;\n\t}\n\n\tresetTextPosition() {\n\t\tthis.labelPosY = this.y;\n\t\tthis.labelPosX = this.left() + this.w * (this.linkPercent * 2);\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tif (anchor === 0) {\n\t\t\treturn [this.x + this.w / 2.0, this.y - this.h * 0.2];\n\t\t} else {\n\t\t\treturn [this.left() + (this.w * this.linkPercent) / 2, this.y + this.h * 0.2];\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\tconst closest = this.getClosestCardinalPoint(fromX, fromY);\n\t\tif (closest[1] === this.y) {\n\t\t\tif (closest[0] === this.left()) {\n\t\t\t\treturn [closest[0], this.y - this.h * 0.2];\n\t\t\t} else {\n\t\t\t\treturn [closest[0], this.y + this.h * 0.2];\n\t\t\t}\n\t\t} else {\n\t\t\treturn [closest[0], closest[1]];\n\t\t}\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t\tthis.resetTextPosition();\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tstartX = this.left();\n\t\tstartY = this.top();\n\n\t\t// Highlighted edges\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\tcontext.fillStyle = '#FF0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\n\t\t// Node edges\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tcontext.lineWidth = 1;\n\t\t// Left inner line between node and pointer area\n\t\tstartX = this.left() + this.w * this.linkPercent;\n\t\tstartY = this.top();\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tif (this.prevNullPointer) {\n\t\t\t// Left null marker\n\t\t\tcontext.moveTo(this.left(), startY);\n\t\t\tcontext.lineTo(this.left() + this.w * this.linkPercent, startY + this.h);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\n\t\t// Right inner line between node and pointer area\n\t\tstartX = this.right() - this.w * this.linkPercent;\n\t\tstartY = this.top();\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tif (this.nextNullPointer) {\n\t\t\t// Right null marker\n\t\t\tcontext.moveTo(this.right() - this.w * this.linkPercent, startY);\n\t\t\tcontext.lineTo(this.right(), startY + this.h);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\n\t\t// Label\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\t\tthis.resetTextPosition();\n\t\tcontext.fillStyle = this.labelColor;\n\t\tcontext.fillText(this.label, this.labelPosX, this.labelPosY);\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColors = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColors;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteDoublyLinkedList(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.labelColor,\n\t\t\tthis.layer,\n\t\t\tthis.prevNullPointer,\n\t\t\tthis.nextNullPointer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteDoublyLinkedList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlinkPercent,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlabelColor,\n\t\tlayer,\n\t\tpnp,\n\t\tnnp,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.labelColors = labelColor;\n\t\tthis.layer = layer;\n\t\tthis.prevNullPointer = pnp;\n\t\tthis.nextNullPointer = nnp;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addDoublyLinkedListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.linkPercent,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setPrevNull(this.objectID, this.prevNullPointer);\n\t\tworld.setNextNull(this.objectID, this.nextNullPointer);\n\t\tworld.setTextColor(this.objectID, this.labelColor);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// \"Class\" animatedCircle\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedHighlightCircle extends AnimatedObject {\n\tconstructor(objectID, foregroundColor, radius) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.radius = radius;\n\t\tthis.thickness = 4;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\tdraw(context) {\n\t\tcontext.globalAlpha = this.alpha;\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.lineWidth = this.thickness;\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteHighlightCircle(\n\t\t\tthis.objectID,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.radius,\n\t\t\tthis.layer,\n\t\t\tthis.alpha,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteHighlightCircle extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tx,\n\t\ty,\n\t\tforegroundColor,\n\t\tradius,\n\t\tlayer,\n\t\talpha,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.radius = radius;\n\t\tthis.layer = layer;\n\t\tthis.alpha = alpha;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addHighlightCircleObject(this.objectID, this.foregroundColor, this.radius);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setAlpha(this.objectID, this.alpha);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedLabel extends AnimatedObject {\n\tconstructor(objectID, label, centered, initialWidth) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.textWidth = initialWidth || 0;\n\n\t\tthis.label = label;\n\t\tthis.labelColor = '#000000';\n\t\tthis.highlighted = false;\n\t\tthis.centered = centered;\n\n\t\tthis.leftWidth = -1;\n\t\tthis.centerWidth = -1;\n\t\tthis.highlightIndex = -1;\n\t}\n\n\tcentered() {\n\t\treturn this.centered;\n\t}\n\n\tdraw(context) {\n\t\tif (!this.addedToScene) return;\n\n\t\tcontext.globalAlpha = this.alpha;\n\t\tcontext.font = '12px Arial';\n\n\t\tlet startingXForHighlight = this.x;\n\n\t\tif (this.highlightIndex >= this.label.length) {\n\t\t\tthis.highlightIndex = -1;\n\t\t}\n\t\tif (this.highlightIndexDirty && this.highlightIndex !== -1) {\n\t\t\tthis.leftWidth = context.measureText(\n\t\t\t\tthis.label.substring(0, this.highlightIndex),\n\t\t\t).width;\n\t\t\tthis.centerWidth = context.measureText(\n\t\t\t\tthis.label.substring(this.highlightIndex, this.highlightIndex + 1),\n\t\t\t).width;\n\t\t\tthis.highlightIndexDirty = false;\n\t\t}\n\n\t\tif (this.centered) {\n\t\t\tif (this.highlightIndex !== -1) {\n\t\t\t\tstartingXForHighlight = this.x - this.width / 2;\n\t\t\t\tcontext.textAlign = 'left';\n\t\t\t\tcontext.textBaseline = 'middle';\n\t\t\t} else {\n\t\t\t\tcontext.textAlign = 'center';\n\t\t\t\tcontext.textBaseline = 'middle';\n\t\t\t}\n\t\t} else {\n\t\t\tcontext.textAlign = 'left';\n\t\t\tcontext.textBaseline = 'top';\n\t\t}\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#FFAAAA';\n\t\t\tcontext.fillStyle = '#FF0000';\n\t\t\tcontext.lineWidth = this.highlightDiff;\n\t\t\tcontext.strokeText(this.label, this.x, this.y);\n\t\t}\n\t\tcontext.strokeStyle = this.labelColor;\n\t\tcontext.fillStyle = this.labelColor;\n\t\tcontext.lineWidth = 2;\n\t\tconst strList = this.label.split('\\n');\n\t\tif (strList.length === 1) {\n\t\t\tif (this.highlightIndex === -1) {\n\t\t\t\tcontext.fillText(this.label, this.x, this.y);\n\t\t\t} else {\n\t\t\t\tconst leftStr = this.label.substring(0, this.highlightIndex);\n\t\t\t\tconst highlightStr = this.label.substring(\n\t\t\t\t\tthis.highlightIndex,\n\t\t\t\t\tthis.highlightIndex + 1,\n\t\t\t\t);\n\t\t\t\tconst rightStr = this.label.substring(this.highlightIndex + 1);\n\t\t\t\tcontext.fillText(leftStr, startingXForHighlight, this.y);\n\t\t\t\tcontext.strokeStyle = '#FF0000';\n\t\t\t\tcontext.fillStyle = '#FF0000';\n\t\t\t\tcontext.fillText(highlightStr, startingXForHighlight + this.leftWidth, this.y);\n\n\t\t\t\tcontext.strokeStyle = this.labelColor;\n\t\t\t\tcontext.fillStyle = this.labelColor;\n\t\t\t\tcontext.fillText(\n\t\t\t\t\trightStr,\n\t\t\t\t\tstartingXForHighlight + this.leftWidth + this.centerWidth,\n\t\t\t\t\tthis.y,\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tconst offset = this.centered ? (1.0 - strList.length) / 2.0 : 0;\n\t\t\tfor (let i = 0; i < strList.length; i++) {\n\t\t\t\tcontext.fillText(strList[i], this.x, this.y + offset + i * 12);\n\t\t\t}\n\t\t}\n\t\tcontext.closePath();\n\t}\n\n\tgetAlignLeftPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.left() - this.textWidth / 2, (this.y = otherObject.centerY())];\n\t\t} else {\n\t\t\treturn [otherObject.left() - this.textWidth, otherObject.centerY() - 5];\n\t\t}\n\t}\n\n\talignLeft(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.centerY();\n\t\t\tthis.x = otherObject.left() - this.textWidth / 2;\n\t\t} else {\n\t\t\tthis.y = otherObject.centerY() - 5;\n\t\t\tthis.x = otherObject.left() - this.textWidth;\n\t\t}\n\t}\n\n\talignRight(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.centerY();\n\t\t\tthis.x = otherObject.right() + this.textWidth / 2;\n\t\t} else {\n\t\t\tthis.y = otherObject.centerY() - 5;\n\t\t\tthis.x = otherObject.right();\n\t\t}\n\t}\n\n\tgetAlignRightPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.right() + this.textWidth / 2, otherObject.centerY()];\n\t\t} else {\n\t\t\treturn [otherObject.right(), otherObject.centerY() - 5];\n\t\t}\n\t}\n\n\talignTop(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.top() - 5;\n\t\t\tthis.x = otherObject.centerX();\n\t\t} else {\n\t\t\tthis.y = otherObject.top() - 10;\n\t\t\tthis.x = otherObject.centerX() - this.textWidth / 2;\n\t\t}\n\t}\n\n\tgetAlignTopPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.centerX(), otherObject.top() - 5];\n\t\t} else {\n\t\t\treturn [otherObject.centerX() - this.textWidth / 2, otherObject.top() - 10];\n\t\t}\n\t}\n\n\talignBottom(otherObject) {\n\t\tif (this.centered) {\n\t\t\tthis.y = otherObject.bottom() + 5;\n\t\t\tthis.x = otherObject.centerX();\n\t\t} else {\n\t\t\tthis.y = otherObject.bottom();\n\t\t\tthis.x = otherObject.centerX() - this.textWidth / 2;\n\t\t}\n\t}\n\n\tgetAlignBottomPos(otherObject) {\n\t\tif (this.centered) {\n\t\t\treturn [otherObject.centerX(), otherObject.bottom() + 5];\n\t\t} else {\n\t\t\treturn [otherObject.centerX() - this.textWidth / 2, otherObject.bottom()];\n\t\t}\n\t}\n\n\tgetWidth() {\n\t\treturn this.textWidth;\n\t}\n\n\tgetHeight() {\n\t\treturn 10; // HACK!  HACK!  HACK!  HACK!\n\t}\n\n\tsetHighlight(value) {\n\t\tthis.highlighted = value;\n\t}\n\n\tcenterX() {\n\t\tif (this.centered) {\n\t\t\treturn this.x;\n\t\t} else {\n\t\t\treturn this.x + this.textWidth;\n\t\t}\n\t}\n\n\tcenterY() {\n\t\tif (this.centered) {\n\t\t\treturn this.y;\n\t\t} else {\n\t\t\treturn this.y + 5;\n\t\t}\n\t}\n\n\ttop() {\n\t\tif (this.centered) {\n\t\t\treturn this.y - 5; //TODO: Un-Hardwire\n\t\t} else {\n\t\t\treturn this.y;\n\t\t}\n\t}\n\n\tbottom() {\n\t\tif (this.centered) {\n\t\t\treturn this.y + 5; // TODO: + height / 2;\n\t\t} else {\n\t\t\treturn this.y + 10; // TODO: + hieght;\n\t\t}\n\t}\n\n\tright() {\n\t\tif (this.centered) {\n\t\t\treturn this.x + this.textWidth / 2; // TODO: + width / 2;\n\t\t} else {\n\t\t\treturn this.x + this.textWidth; // TODO: + width;\n\t\t}\n\t}\n\n\tleft() {\n\t\tif (this.centered) {\n\t\t\treturn this.x - this.textWidth / 2;\n\t\t} else {\n\t\t\treturn this.x; // TODO:  - a little?\n\t\t}\n\t}\n\n\tsetHighlightIndex(hlIndex) {\n\t\t// Only allow highlight index for labels that don't have End-Of-Line\n\t\tif (this.label.indexOf('\\n') === -1 && this.label.length > hlIndex) {\n\t\t\tthis.highlightIndex = hlIndex;\n\t\t\tthis.highlightIndexDirty = true;\n\t\t} else {\n\t\t\tthis.highlightIndex = -1;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tsetText(newText, textIndex, initialWidth) {\n\t\tthis.label = newText;\n\t\tif (initialWidth != null) {\n\t\t\tthis.textWidth = initialWidth;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteLabel(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.centered,\n\t\t\tthis.labelColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlightIndex,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteLabel extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tx,\n\t\ty,\n\t\tcentered,\n\t\tlabelColor,\n\t\tlayer,\n\t\thighlightIndex,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.centered = centered;\n\t\tthis.labelColor = labelColor;\n\t\tthis.layer = layer;\n\t\tthis.highlightIndex = highlightIndex;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addLabelObject(this.objectID, this.label, this.centered);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setForegroundColor(this.objectID, this.labelColor);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// This class handles links between vertices in graphs, pointers in linked lists, and so on.\n\nconst LINE_MAX_HEIGHT_DIFF = 5;\nconst LINE_MIN_HEIGHT_DIFF = 3;\nconst LINE_RANGE = LINE_MAX_HEIGHT_DIFF - LINE_MIN_HEIGHT_DIFF + 1;\n\nexport default class AnimatedLine {\n\tconstructor(fromID, toID, color, curve, directed, edgeLabel, anchorPoint, thickness) {\n\t\tthis.fromID = fromID;\n\t\tthis.toID = toID;\n\n\t\tthis.foregroundColor = color;\n\t\tthis.edgeLabel = edgeLabel;\n\t\tthis.highlighted = false;\n\t\tthis.highlightDiff = 0;\n\n\t\tthis.dirty = false;\n\t\tthis.directed = directed;\n\t\tthis.anchorPoint = anchorPoint;\n\n\t\tthis.alpha = 1.0;\n\t\tthis.thickness = thickness;\n\t\tthis.arrowHeight = 8;\n\t\tthis.arrowWidth = 4;\n\t\tthis.curve = curve;\n\t}\n\n\tcolor() {\n\t\treturn this.foregroundColor;\n\t}\n\n\tsetColor(newColor) {\n\t\tthis.foregroundColor = newColor;\n\t\tthis.dirty = true;\n\t}\n\n\tsetHighlight(highlightVal, color) {\n\t\tthis.highlighted = highlightVal;\n\t\tthis.highlightColor = color || '#FF0000';\n\t}\n\n\tsetThickness(thickness) {\n\t\tthis.thickness = thickness;\n\t}\n\n\tpulseHighlight(frameNum) {\n\t\tif (this.highlighted) {\n\t\t\tconst frameMod = frameNum / 14.0;\n\t\t\tconst delta = Math.abs((frameMod % (2 * LINE_RANGE - 2)) - LINE_RANGE + 1);\n\t\t\tthis.highlightDiff = delta + this.thickness + LINE_MIN_HEIGHT_DIFF;\n\t\t\tthis.dirty = true;\n\t\t}\n\t}\n\n\thasNode(n) {\n\t\treturn this.fromID === n || this.toID === n;\n\t}\n\n\tsign(n) {\n\t\tif (n > 0) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tdrawArrow(thickness, color, context) {\n\t\tcontext.strokeStyle = color;\n\t\tcontext.fillStyle = color;\n\t\tcontext.lineWidth = thickness;\n\n\t\tconst fromPos = this.fromID.getTailPointerAttachPos(\n\t\t\tthis.toID.x,\n\t\t\tthis.toID.y,\n\t\t\tthis.anchorPoint,\n\t\t);\n\t\tconst toPos = this.toID.getHeadPointerAttachPos(this.fromID.x, this.fromID.y);\n\n\t\tconst deltaX = toPos[0] - fromPos[0];\n\t\tconst deltaY = toPos[1] - fromPos[1];\n\t\tconst midX = deltaX / 2.0 + fromPos[0];\n\t\tconst midY = deltaY / 2.0 + fromPos[1];\n\t\tconst controlX = midX - deltaY * this.curve;\n\n\t\tconst controlY = midY + deltaX * this.curve;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(fromPos[0], fromPos[1]);\n\t\tcontext.quadraticCurveTo(controlX, controlY, toPos[0], toPos[1]);\n\t\tcontext.stroke();\n\n\t\t// Position of the edge label:  First, we will place it right along the\n\t\t// middle of the curve (or the middle of the line, for curve == 0)\n\t\tlet labelPosX = 0.25 * fromPos[0] + 0.5 * controlX + 0.25 * toPos[0];\n\t\tlet labelPosY = 0.25 * fromPos[1] + 0.5 * controlY + 0.25 * toPos[1];\n\n\t\t// Next, we push the edge position label out just a little in the direction of\n\t\t// the curve, so that the label doesn't intersect the cuve (as long as the label\n\t\t// is only a few characters, that is)\n\t\tconst midLen = Math.sqrt(deltaY * deltaY + deltaX * deltaX);\n\t\tif (midLen !== 0) {\n\t\t\tlabelPosX += ((-deltaY * this.sign(this.curve)) / midLen) * 10;\n\t\t\tlabelPosY += ((deltaX * this.sign(this.curve)) / midLen) * 10;\n\t\t}\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.fillText(this.edgeLabel, labelPosX, labelPosY);\n\n\t\tif (this.directed) {\n\t\t\tlet xVec = controlX - toPos[0];\n\t\t\tlet yVec = controlY - toPos[1];\n\t\t\tconst len = Math.sqrt(xVec * xVec + yVec * yVec);\n\n\t\t\tif (len > 0) {\n\t\t\t\txVec = xVec / len;\n\t\t\t\tyVec = yVec / len;\n\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(toPos[0], toPos[1]);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\ttoPos[0] + xVec * this.arrowHeight - yVec * this.arrowWidth,\n\t\t\t\t\ttoPos[1] + yVec * this.arrowHeight + xVec * this.arrowWidth,\n\t\t\t\t);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\ttoPos[0] + xVec * this.arrowHeight + yVec * this.arrowWidth,\n\t\t\t\t\ttoPos[1] + yVec * this.arrowHeight - xVec * this.arrowWidth,\n\t\t\t\t);\n\t\t\t\tcontext.lineTo(toPos[0], toPos[1]);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t\tcontext.fill();\n\t\t\t}\n\t\t}\n\t}\n\n\tdraw(context) {\n\t\tcontext.globalAlpha = this.alpha;\n\n\t\tif (this.highlighted) this.drawArrow(this.highlightDiff, this.highlightColor, context);\n\t\tthis.drawArrow(this.thickness, this.foregroundColor, context);\n\t}\n\n\tcreateUndoConnect() {\n\t\treturn new UndoConnect(\n\t\t\tthis.fromID.objectID,\n\t\t\tthis.toID.objectID,\n\t\t\ttrue,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.curve,\n\t\t\tthis.directed,\n\t\t\tthis.edgeLabel,\n\t\t\tthis.anchorPoint,\n\t\t\tthis.thickness,\n\t\t\tthis.highlighted,\n\t\t);\n\t}\n}\n\nexport class UndoConnect {\n\tconstructor(\n\t\tfromID,\n\t\ttoID,\n\t\tcreateConnection,\n\t\tcolor,\n\t\tcurve,\n\t\tdirected,\n\t\tedgeLabel,\n\t\tanchorPoint,\n\t\tthickness,\n\t\thighlighted,\n\t) {\n\t\tthis.fromID = fromID;\n\t\tthis.toID = toID;\n\t\tthis.createConnection = createConnection;\n\t\tthis.color = color;\n\t\tthis.curve = curve;\n\t\tthis.directed = directed;\n\t\tthis.edgeLabel = edgeLabel;\n\t\tthis.anchorPoint = anchorPoint;\n\t\tthis.thickness = thickness;\n\t\tthis.highlighted = highlighted;\n\t}\n\n\tundoInitialStep(world) {\n\t\tif (this.createConnection) {\n\t\t\tworld.connectEdge(\n\t\t\t\tthis.fromID,\n\t\t\t\tthis.toID,\n\t\t\t\tthis.color,\n\t\t\t\tthis.curve,\n\t\t\t\tthis.directed,\n\t\t\t\tthis.edgeLabel,\n\t\t\t\tthis.anchorPoint,\n\t\t\t\tthis.thickness,\n\t\t\t);\n\t\t\tworld.setEdgeHighlight(this.fromID, this.toID, this.highlighted);\n\t\t} else {\n\t\t\tworld.disconnect(this.fromID, this.toID);\n\t\t}\n\t}\n\n\taddUndoAnimation() {\n\t\treturn false;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedLinkedListNode extends AnimatedObject {\n\tconstructor(\n\t\tobjectID,\n\t\tlabels,\n\t\tw,\n\t\th,\n\t\tlinkPercent,\n\t\tvertical,\n\t\tlinkPosEnd,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.vertical = vertical;\n\t\tthis.linkPosEnd = linkPosEnd;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.nullPointer = false;\n\n\t\tthis.labels = labels;\n\t\tthis.labelPosX = [0];\n\t\tthis.labelPosY = [0];\n\t\tthis.labelColors = [foregroundColor];\n\t}\n\n\tleft() {\n\t\tif (this.vertical) {\n\t\t\treturn this.x - this.w / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.x - (this.w * (1 - this.linkPercent)) / 2;\n\t\t} else {\n\t\t\treturn this.x - (this.w * (this.linkPercent + 1)) / 2;\n\t\t}\n\t}\n\n\tsetNull(np) {\n\t\tif (this.nullPointer !== np) {\n\t\t\tthis.nullPointer = np;\n\t\t}\n\t}\n\n\tgetNull() {\n\t\treturn this.nullPointer;\n\t}\n\n\tright() {\n\t\tif (this.vertical) {\n\t\t\treturn this.x + this.w / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.x + (this.w * (this.linkPercent + 1)) / 2;\n\t\t} else {\n\t\t\treturn this.x + (this.w * (1 - this.linkPercent)) / 2;\n\t\t}\n\t}\n\n\ttop() {\n\t\tif (!this.vertical) {\n\t\t\treturn this.y - this.h / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.y - (this.h * (1 - this.linkPercent)) / 2;\n\t\t} else {\n\t\t\treturn this.y - (this.h * (1 + this.linkPercent)) / 2;\n\t\t}\n\t}\n\n\tbottom() {\n\t\tif (!this.vertical) {\n\t\t\treturn this.y + this.h / 2.0;\n\t\t} else if (this.linkPosEnd) {\n\t\t\treturn this.y + (this.h * (1 + this.linkPercent)) / 2;\n\t\t} else {\n\t\t\treturn this.y + (this.h * (1 - this.linkPercent)) / 2;\n\t\t}\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tif (this.vertical && this.linkPosEnd) {\n\t\t\treturn [this.x, this.y + this.h / 2.0];\n\t\t} else if (this.vertical && !this.linkPosEnd) {\n\t\t\treturn [this.x, this.y - this.h / 2.0];\n\t\t} else if (!this.vertical && this.linkPosEnd) {\n\t\t\treturn [this.x + this.w / 2.0, this.y];\n\t\t} else {\n\t\t\t// !this.vertical && !this.linkPosEnd\n\t\t\treturn [this.x - this.w / 2.0, this.y];\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tstartX = this.left();\n\t\tstartY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#ff0000';\n\t\t\tcontext.fillStyle = '#ff0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tif (this.vertical) {\n\t\t\tstartX = this.left();\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tstartY = this.y + this.h * (1 - this.linkPercent) * (i / this.labels.length - 0.5);\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(startX, startY);\n\t\t\t\tcontext.lineTo(startX + this.w, startY);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t} else {\n\t\t\tstartY = this.top();\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tstartX = this.x + this.w * (1 - this.linkPercent) * (i / this.labels.length - 0.5);\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(startX, startY);\n\t\t\t\tcontext.lineTo(startX, startY + this.h);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t}\n\n\t\tcontext.lineWidth = 1;\n\t\tif (this.vertical && this.linkPosEnd) {\n\t\t\tstartX = this.left();\n\t\t\tstartY = this.bottom() - this.h * this.linkPercent;\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(this.startX + this.w, this.bottom());\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t} else if (this.vertical && !this.linkPosEnd) {\n\t\t\tstartX = this.left();\n\t\t\tstartY = this.top() + this.h * this.linkPercent;\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(startX + this.w, this.top());\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t} else if (!this.vertical && this.linkPosEnd) {\n\t\t\tstartX = this.right() - this.w * this.linkPercent;\n\t\t\tstartY = this.top();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(this.right(), startY + this.h);\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t} else {\n\t\t\t// !vertical && !linkPosEnd\n\t\t\tstartX = this.left() + this.w * this.linkPercent;\n\t\t\tstartY = this.top();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tif (this.nullPointer) {\n\t\t\t\tcontext.lineTo(this.left(), startY);\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t}\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\n\t\tif (this.vertical) {\n\t\t\tthis.labelPosX[0] = this.x;\n\t\t\tthis.labelPosY[0] =\n\t\t\t\tthis.y + ((this.h * (1 - this.linkPercent)) / 2) * (1 / this.labels.length - 1);\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tthis.labelPosX[i] = this.x;\n\t\t\t\tthis.labelPosY[i] =\n\t\t\t\t\tthis.labelPosY[i - 1] + (this.h * (1 - this.linkPercent)) / this.labels.length;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.labelPosY[0] = this.y;\n\t\t\tthis.labelPosX[0] =\n\t\t\t\tthis.x + ((this.w * (1 - this.linkPercent)) / 2) * (1 / this.labels.length - 1);\n\t\t\tfor (let i = 1; i < this.labels.length; i++) {\n\t\t\t\tthis.labelPosY[i] = this.y;\n\t\t\t\tthis.labelPosX[i] =\n\t\t\t\t\tthis.labelPosX[i - 1] + (this.w * (1 - this.linkPercent)) / this.labels.length;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < this.labels.length; i++) {\n\t\t\tcontext.fillStyle = this.labelColors[i];\n\t\t\tcontext.fillText(this.labels[i], this.labelPosX[i], this.labelPosY[i]);\n\t\t}\n\t}\n\n\tsetTextColor(color, index) {\n\t\tthis.labelColors[index] = color;\n\t}\n\n\tgetTextColor(index) {\n\t\treturn this.labelColors[index];\n\t}\n\n\tgetText(index) {\n\t\treturn this.labels[index];\n\t}\n\n\tsetText(newText, index) {\n\t\tthis.labels[index] = newText;\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteLinkedList(\n\t\t\tthis.objectID,\n\t\t\tthis.labels,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.linkPercent,\n\t\t\tthis.vertical,\n\t\t\tthis.linkPosEnd,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.labelColors,\n\t\t\tthis.layer,\n\t\t\tthis.nullPointer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteLinkedList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabels,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlinkPercent,\n\t\tvertical,\n\t\tlinkPosEnd,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlabelColors,\n\t\tlayer,\n\t\tnullPointer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.labels = labels;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.linkPercent = linkPercent;\n\t\tthis.vertical = vertical;\n\t\tthis.linkPosEnd = linkPosEnd;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.labelColors = labelColors;\n\t\tthis.layer = layer;\n\t\tthis.nullPointer = nullPointer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addLinkedListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.labels,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.linkPercent,\n\t\t\tthis.vertical,\n\t\t\tthis.linkPosEnd,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setNull(this.objectID, this.nullPointer);\n\t\tfor (let i = 0; i < this.labels.length; i++) {\n\t\t\tworld.setTextColor(this.objectID, this.labelColors[i], i);\n\t\t}\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.a\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Values for xJust / yJust:  \"center\", \"left\", \"right\", \"top\", \"bottom\"\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nexport default class AnimatedRectangle extends AnimatedObject {\n\tconstructor(objectID, label, w, h, xJustify, yJustify, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.xJustify = xJustify;\n\t\tthis.yJustify = yJustify;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.textColor = foregroundColor;\n\t\tthis.highlighted = false;\n\t\tthis.thicknessArray = [false, false, false, false];\n\n\t\tthis.label = label;\n\n\t\tthis.nullPointer = false;\n\t}\n\n\tsetNull(np) {\n\t\tthis.nullPointer = np;\n\t}\n\n\tgetNull() {\n\t\treturn this.nullPointer;\n\t}\n\n\tleft() {\n\t\tif (this.xJustify === 'left') {\n\t\t\treturn this.x;\n\t\t} else if (this.xJustify === 'center') {\n\t\t\treturn this.x - this.w / 2.0;\n\t\t} else {\n\t\t\t// right\n\t\t\treturn this.x - this.w;\n\t\t}\n\t}\n\n\tcenterX() {\n\t\tif (this.xJustify === 'center') {\n\t\t\treturn this.x;\n\t\t} else if (this.xJustify === 'left') {\n\t\t\treturn this.x + this.w / 2.0;\n\t\t} else {\n\t\t\t// right\n\t\t\treturn this.x - this.w / 2.0;\n\t\t}\n\t}\n\n\tcenterY() {\n\t\tif (this.yJustify === 'center') {\n\t\t\treturn this.y;\n\t\t} else if (this.yJustify === 'top') {\n\t\t\treturn this.y + this.h / 2.0;\n\t\t} else {\n\t\t\t// bottom\n\t\t\treturn this.y - this.w / 2.0;\n\t\t}\n\t}\n\n\ttop() {\n\t\tif (this.yJustify === 'top') {\n\t\t\treturn this.y;\n\t\t} else if (this.yJustify === 'center') {\n\t\t\treturn this.y - this.h / 2.0;\n\t\t} else {\n\t\t\t// bottom\n\t\t\treturn this.y - this.h;\n\t\t}\n\t}\n\n\tbottom() {\n\t\tif (this.yJustify === 'top') {\n\t\t\treturn this.y + this.h;\n\t\t} else if (this.yJustify === 'center') {\n\t\t\treturn this.y + this.h / 2.0;\n\t\t} else {\n\t\t\t// bottom\n\t\t\treturn this.y;\n\t\t}\n\t}\n\n\tright() {\n\t\tif (this.xJustify === 'left') {\n\t\t\treturn this.x + this.w;\n\t\t} else if (this.xJustify === 'center') {\n\t\t\treturn this.x + this.w / 2.0;\n\t\t} else {\n\t\t\t// right\n\t\t\treturn this.x;\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tswitch (anchor) {\n\t\t\tcase 0: // Default\n\t\t\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t\t\tcase 1: // Top\n\t\t\t\treturn [this.x, this.top()];\n\t\t\tcase 2: // Bottom\n\t\t\t\treturn [this.x, this.bottom()];\n\t\t\tcase 3: // Left\n\t\t\t\treturn [this.left(), this.y];\n\t\t\tcase 4: // Right\n\t\t\t\treturn [this.right(), this.y];\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tif (!this.addedToScene) return;\n\n\t\tcontext.globalAlpha = this.alpha;\n\t\tcontext.lineWidth = 2;\n\n\t\tlet startX;\n\t\tlet startY;\n\n\t\tif (this.xJustify === 'left') {\n\t\t\tstartX = this.x;\n\t\t} else if (this.xJustify === 'center') {\n\t\t\tstartX = this.x - this.w / 2.0;\n\t\t} else if (this.xJustify === 'right') {\n\t\t\tstartX = this.x - this.w;\n\t\t}\n\t\tif (this.yJustify === 'top') {\n\t\t\tstartY = this.y;\n\t\t} else if (this.yJustify === 'center') {\n\t\t\tstartY = this.y - this.h / 2.0;\n\t\t} else if (this.yJustify === 'bottom') {\n\t\t\tstartY = this.y - this.h;\n\t\t}\n\n\t\tcontext.lineWidth = 2;\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#ff0000';\n\t\t\tcontext.fillStyle = '#ff0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\t// Thick edges\n\t\t// Top edge\n\t\tif (this.thicknessArray[0]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY);\n\t\t\tcontext.lineTo(startX + this.w, startY);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\t\t// Right edge\n\t\tif (this.thicknessArray[1]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY);\n\t\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\t\t// Bottom edge\n\t\tif (this.thicknessArray[2]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX + this.w, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY + this.h);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\t\t// Left edge\n\t\tif (this.thicknessArray[3]) {\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY + this.h);\n\t\t\tcontext.lineTo(startX, startY);\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\n\t\tcontext.lineWidth = 1.2;\n\t\tif (this.nullPointer) {\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX, startY);\n\t\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t}\n\n\t\tcontext.fillStyle = this.textColor;\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\t\tcontext.fillText(this.label, this.x, this.y);\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.textColor = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.textColor;\n\t}\n\n\tsetHighlight(value) {\n\t\tthis.highlighted = value;\n\t}\n\n\tsetEdgeThickness(thicknessArray) {\n\t\tthis.thicknessArray = thicknessArray;\n\t}\n\n\tgetEdgeThickness() {\n\t\treturn this.thicknessArray;\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteRectangle(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.xJustify,\n\t\t\tthis.yJustify,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteRectangle extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tx,\n\t\ty,\n\t\tw,\n\t\th,\n\t\txJustify,\n\t\tyJustify,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlayer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.xJustify = xJustify;\n\t\tthis.yJustify = yJustify;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.layer = layer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addRectangleObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.xJustify,\n\t\t\tthis.yJustify,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport AnimatedObject from './AnimatedObject.js';\nimport { UndoBlock } from './UndoFunctions.js';\n\nconst NINF = '\\u2212\\u221E'; // Negative infinity\nconst PINF = '\\u221E'; // Positive infinity\n\nexport default class AnimatedSkipListNode extends AnimatedObject {\n\tconstructor(objectID, label, w, h, backgroundColor, foregroundColor) {\n\t\tsuper();\n\n\t\tthis.objectID = objectID;\n\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.highlighted = false;\n\n\t\tthis.label = label;\n\t\tthis.labelPosX = 0;\n\t\tthis.labelPosY = 0;\n\t\tthis.labelColor = foregroundColor;\n\t}\n\n\tleft() {\n\t\treturn this.x - this.w / 2;\n\t}\n\n\tright() {\n\t\treturn this.x + this.w / 2;\n\t}\n\n\ttop() {\n\t\treturn this.y - this.h / 2;\n\t}\n\n\tbottom() {\n\t\treturn this.y + this.h / 2;\n\t}\n\n\tresetTextPosition() {\n\t\tthis.labelPosY = this.y;\n\t\tthis.labelPosX = this.x;\n\t}\n\n\tgetTailPointerAttachPos(fromX, fromY, anchor) {\n\t\tswitch (anchor) {\n\t\t\tcase 0: // Top\n\t\t\t\treturn [this.x, this.top()];\n\t\t\tcase 1: // Bottom\n\t\t\t\treturn [this.x, this.bottom()];\n\t\t\tcase 2: // Left\n\t\t\t\treturn [this.left(), this.y];\n\t\t\tcase 3: // Right\n\t\t\t\treturn [this.right(), this.y];\n\t\t\tdefault:\n\t\t\t\treturn this.getClosestCardinalPoint(fromX, fromY);\n\t\t}\n\t}\n\n\tgetHeadPointerAttachPos(fromX, fromY) {\n\t\treturn this.getClosestCardinalPoint(fromX, fromY); // Normal anchor\n\t}\n\n\tsetWidth(w) {\n\t\tthis.w = w;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHeight(h) {\n\t\tthis.h = h;\n\t\tthis.resetTextPosition();\n\t}\n\n\tgetWidth() {\n\t\treturn this.w;\n\t}\n\n\tgetHeight() {\n\t\treturn this.h;\n\t}\n\n\tdraw(context) {\n\t\tconst startX = this.left();\n\t\tconst startY = this.top();\n\n\t\tif (this.highlighted) {\n\t\t\tcontext.strokeStyle = '#ff0000';\n\t\t\tcontext.fillStyle = '#ff0000';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(startX + this.w + this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.lineTo(\n\t\t\t\tstartX + this.w + this.highlightDiff,\n\t\t\t\tstartY + this.h + this.highlightDiff,\n\t\t\t);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY + this.h + this.highlightDiff);\n\t\t\tcontext.lineTo(startX - this.highlightDiff, startY - this.highlightDiff);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t\tcontext.fill();\n\t\t}\n\t\tcontext.strokeStyle = this.foregroundColor;\n\t\tcontext.fillStyle = this.backgroundColor;\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(startX, startY);\n\t\tcontext.lineTo(startX + this.w, startY);\n\t\tcontext.lineTo(startX + this.w, startY + this.h);\n\t\tcontext.lineTo(startX, startY + this.h);\n\t\tcontext.lineTo(startX, startY);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\tcontext.fill();\n\n\t\tcontext.textAlign = 'center';\n\t\tcontext.font = '12px Arial';\n\t\tcontext.textBaseline = 'middle';\n\t\tcontext.lineWidth = 2;\n\n\t\tthis.resetTextPosition();\n\t\tcontext.fillStyle = this.labelColor;\n\t\tif (this.label === NINF || this.label === PINF) {\n\t\t\tcontext.font = '18px sans-serif';\n\t\t}\n\t\tcontext.fillText(this.label, this.labelPosX, this.labelPosY);\n\t}\n\n\tsetTextColor(color) {\n\t\tthis.labelColor = color;\n\t}\n\n\tgetTextColor() {\n\t\treturn this.labelColor;\n\t}\n\n\tgetText() {\n\t\treturn this.label;\n\t}\n\n\tsetText(newText) {\n\t\tthis.label = newText;\n\t\tthis.resetTextPosition();\n\t}\n\n\tsetHighlight(value) {\n\t\tif (value !== this.highlighted) {\n\t\t\tthis.highlighted = value;\n\t\t}\n\t}\n\n\tcreateUndoDelete() {\n\t\treturn new UndoDeleteSkipList(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.labelColor,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t\tthis.layer,\n\t\t\tthis.highlighted,\n\t\t\tthis.highlightColor,\n\t\t);\n\t}\n}\n\nclass UndoDeleteSkipList extends UndoBlock {\n\tconstructor(\n\t\tobjectID,\n\t\tlabel,\n\t\tw,\n\t\th,\n\t\tx,\n\t\ty,\n\t\tlabelColor,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t\tlayer,\n\t\thighlighted,\n\t\thighlightColor,\n\t) {\n\t\tsuper();\n\t\tthis.objectID = objectID;\n\t\tthis.label = label;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.labelColor = labelColor;\n\t\tthis.backgroundColor = backgroundColor;\n\t\tthis.foregroundColor = foregroundColor;\n\t\tthis.layer = layer;\n\t\tthis.highlighted = highlighted;\n\t\tthis.highlightColor = highlightColor;\n\t}\n\n\tundoInitialStep(world) {\n\t\tworld.addSkipListObject(\n\t\t\tthis.objectID,\n\t\t\tthis.label,\n\t\t\tthis.w,\n\t\t\tthis.h,\n\t\t\tthis.backgroundColor,\n\t\t\tthis.foregroundColor,\n\t\t);\n\t\tworld.setTextColor(this.objectID, this.labelColor);\n\t\tworld.setNodePosition(this.objectID, this.x, this.y);\n\t\tworld.setLayer(this.objectID, this.layer);\n\t\tworld.setHighlight(this.objectID, this.highlighted, this.highlightColor);\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Object Manager\n//\n// Manage all of our animated objects.  Control any animated object should occur through\n// this interface (not language enforced, because enforcing such things in Javascript is\n// problematic.)\n//\n// This class is only accessed through:\n//\n//  AnimationMain\n//  Undo objects (which are themselves controlled by AnimationMain)\n\nimport AnimatedBTreeNode from './AnimatedBTreeNode';\nimport AnimatedCircle from './AnimatedCircle';\nimport AnimatedCircularlyLinkedListNode from './AnimatedCircularlyLinkedListNode';\nimport AnimatedDoublyLinkedListNode from './AnimatedDoublyLinkedListNode';\nimport AnimatedHighlightCircle from './AnimatedHighlightCircle';\nimport AnimatedLabel from './AnimatedLabel';\nimport AnimatedLine from './AnimatedLine';\nimport AnimatedLinkedListNode from './AnimatedLinkedListNode';\nimport AnimatedRectangle from './AnimatedRectangle';\nimport AnimatedSkipListNode from './AnimatedSkipListNode';\n\nexport default class ObjectManager {\n\tconstructor(canvasRef) {\n\t\tthis.nodes = [];\n\t\tthis.edges = [];\n\t\tthis.backEdges = [];\n\t\tthis.activeLayers = [];\n\t\tthis.activeLayers[0] = true;\n\t\tthis.ctx = canvasRef.current.getContext('2d');\n\t\tthis.framenum = 0;\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.statusReport = new AnimatedLabel(-1, 'XXX', false, 30);\n\t\tthis.statusReport.x = 30;\n\t}\n\n\tdraw() {\n\t\tthis.framenum++;\n\t\tif (this.framenum > 1000) this.framenum = 0;\n\n\t\tthis.ctx.clearRect(0, 0, this.width, this.height); // clear canvas\n\t\tthis.statusReport.y = this.height - 15;\n\n\t\tlet i;\n\t\tlet j;\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\t!this.nodes[i].highlighted &&\n\t\t\t\tthis.nodes[i].addedToScene &&\n\t\t\t\t!this.nodes[i].alwaysOnTop\n\t\t\t) {\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\tthis.nodes[i].highlighted &&\n\t\t\t\t!this.nodes[i].alwaysOnTop &&\n\t\t\t\tthis.nodes[i].addedToScene\n\t\t\t) {\n\t\t\t\tthis.nodes[i].pulseHighlight(this.framenum);\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\t!this.nodes[i].highlighted &&\n\t\t\t\tthis.nodes[i].alwaysOnTop &&\n\t\t\t\tthis.nodes[i].addedToScene\n\t\t\t) {\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (\n\t\t\t\tthis.nodes[i] != null &&\n\t\t\t\tthis.nodes[i].highlighted &&\n\t\t\t\tthis.nodes[i].alwaysOnTop &&\n\t\t\t\tthis.nodes[i].addedToScene\n\t\t\t) {\n\t\t\t\tthis.nodes[i].pulseHighlight(this.framenum);\n\t\t\t\tthis.nodes[i].draw(this.ctx);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this.edges.length; i++) {\n\t\t\tif (this.edges[i] != null) {\n\t\t\t\tfor (j = 0; j < this.edges[i].length; j++) {\n\t\t\t\t\tif (this.edges[i][j].addedToScene) {\n\t\t\t\t\t\tthis.edges[i][j].pulseHighlight(this.framenum);\n\t\t\t\t\t\tthis.edges[i][j].draw(this.ctx);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.statusReport.draw(this.ctx);\n\t}\n\n\tupdate() {}\n\n\tsetLayers(shown, layers) {\n\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\tthis.activeLayers[layers[i]] = shown;\n\t\t}\n\t\tthis.resetLayers();\n\t}\n\n\taddHighlightCircleObject(objectID, objectColor, radius) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'addHighlightCircleObject: object with same ID (' +\n\t\t\t\t\tString(objectID) +\n\t\t\t\t\t') already exists!',\n\t\t\t);\n\t\t}\n\t\tconst newNode = new AnimatedHighlightCircle(objectID, objectColor, radius);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tsetEdgeAlpha(fromID, toID, alphaVal) {\n\t\tlet oldAlpha = 1.0;\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldAlpha = this.edges[fromID][i].alpha;\n\t\t\t\t\tthis.edges[fromID][i].alpha = alphaVal;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldAlpha;\n\t}\n\n\tsetAlpha(nodeID, alphaVal) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tthis.nodes[nodeID].setAlpha(alphaVal);\n\t\t}\n\t}\n\n\tgetAlpha(nodeID) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\treturn this.nodes[nodeID].getAlpha();\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tgetTextColor(nodeID, index) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\treturn this.nodes[nodeID].getTextColor(index);\n\t\t} else {\n\t\t\treturn '#000000';\n\t\t}\n\t}\n\n\tsetTextColor(nodeID, color, index) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tthis.nodes[nodeID].setTextColor(color, index);\n\t\t}\n\t}\n\n\tsetHighlightIndex(nodeID, index) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tthis.nodes[nodeID].setHighlightIndex(index);\n\t\t}\n\t}\n\n\tsetAllLayers(layers) {\n\t\tthis.activeLayers = [];\n\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\tthis.activeLayers[layers[i]] = true;\n\t\t}\n\t\tthis.resetLayers();\n\t}\n\n\tresetLayers() {\n\t\tlet i;\n\t\tfor (i = 0; i < this.nodes.length; i++) {\n\t\t\tif (this.nodes[i] != null && this.nodes[i] !== undefined) {\n\t\t\t\tthis.nodes[i].addedToScene = this.activeLayers[this.nodes[i].layer] === true;\n\t\t\t}\n\t\t}\n\t\tfor (i = this.edges.length - 1; i >= 0; i--) {\n\t\t\tif (this.edges[i] != null && this.edges[i] !== undefined) {\n\t\t\t\tfor (let j = 0; j < this.edges[i].length; j++) {\n\t\t\t\t\tif (this.edges[i][j] != null && this.edges[i][j] !== undefined) {\n\t\t\t\t\t\tthis.edges[i][j].addedToScene =\n\t\t\t\t\t\t\tthis.activeLayers[this.edges[i][j].fromID.layer] === true &&\n\t\t\t\t\t\t\tthis.activeLayers[this.edges[i][j].toID.layer] === true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetLayer(objectID, layer) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].layer = layer;\n\t\t\tif (this.activeLayers[layer]) {\n\t\t\t\tthis.nodes[objectID].addedToScene = true;\n\t\t\t} else {\n\t\t\t\tthis.nodes[objectID].addedToScene = false;\n\t\t\t}\n\t\t\tif (this.edges[objectID] != null && this.edges[objectID] !== undefined) {\n\t\t\t\tfor (let i = 0; i < this.edges[objectID].length; i++) {\n\t\t\t\t\tconst nextEdge = this.edges[objectID][i];\n\t\t\t\t\tif (nextEdge != null && nextEdge !== undefined) {\n\t\t\t\t\t\tnextEdge.addedToScene =\n\t\t\t\t\t\t\tnextEdge.fromID.addedToScene && nextEdge.toID.addedToScene;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.backEdges[objectID] != null && this.backEdges[objectID] !== undefined) {\n\t\t\t\tfor (let i = 0; i < this.backEdges[objectID].length; i++) {\n\t\t\t\t\tconst nextEdge = this.backEdges[objectID][i];\n\t\t\t\t\tif (nextEdge != null && nextEdge !== undefined) {\n\t\t\t\t\t\tnextEdge.addedToScene =\n\t\t\t\t\t\t\tnextEdge.fromID.addedToScene && nextEdge.toID.addedToScene;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tclearAllObjects() {\n\t\tthis.nodes = [];\n\t\tthis.edges = [];\n\t\tthis.backEdges = [];\n\t}\n\n\tsetForegroundColor(objectID, color) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setForegroundColor(color);\n\t\t}\n\t}\n\n\tsetBackgroundColor(objectID, color) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthis.nodes[objectID].setBackgroundColor(color);\n\t\t}\n\t}\n\n\tsetHighlight(nodeID, val, color) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].setHighlight(val, color);\n\t}\n\n\tgetHighlight(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn false;\n\t\t}\n\t\treturn this.nodes[nodeID].getHighlight();\n\t}\n\n\tgetHighlightIndex(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn false;\n\t\t}\n\t\treturn this.nodes[nodeID].getHighlightIndex();\n\t}\n\n\tsetWidth(nodeID, val) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].setWidth(val);\n\t}\n\n\tsetHeight(nodeID, val) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].setHeight(val);\n\t}\n\n\tgetHeight(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn -1;\n\t\t}\n\t\treturn this.nodes[nodeID].getHeight();\n\t}\n\n\tgetWidth(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn -1;\n\t\t}\n\t\treturn this.nodes[nodeID].getWidth();\n\t}\n\n\tbackgroundColor(objectID) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\treturn this.nodes[objectID].backgroundColor;\n\t\t} else {\n\t\t\treturn '#000000';\n\t\t}\n\t}\n\n\tforegroundColor(objectID) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\treturn this.nodes[objectID].foregroundColor;\n\t\t} else {\n\t\t\treturn '#000000';\n\t\t}\n\t}\n\n\tdisconnect(objectIDfrom, objectIDto) {\n\t\tlet undo = null;\n\t\tlet len;\n\t\tlet deleted;\n\t\tif (this.edges[objectIDfrom] != null) {\n\t\t\tlen = this.edges[objectIDfrom].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[objectIDfrom][i] != null &&\n\t\t\t\t\tthis.edges[objectIDfrom][i].toID === this.nodes[objectIDto]\n\t\t\t\t) {\n\t\t\t\t\tdeleted = this.edges[objectIDfrom][i];\n\t\t\t\t\tundo = deleted.createUndoConnect();\n\t\t\t\t\tthis.edges[objectIDfrom][i] = this.edges[objectIDfrom][len - 1];\n\t\t\t\t\tlen -= 1;\n\t\t\t\t\tthis.edges[objectIDfrom].pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.backEdges[objectIDto] != null) {\n\t\t\tlen = this.backEdges[objectIDto].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.backEdges[objectIDto][i] != null &&\n\t\t\t\t\tthis.backEdges[objectIDto][i].fromID === this.nodes[objectIDfrom]\n\t\t\t\t) {\n\t\t\t\t\tdeleted = this.backEdges[objectIDto][i];\n\t\t\t\t\t// Note:  Don't need to remove this child, did it above on the regular edge\n\t\t\t\t\tthis.backEdges[objectIDto][i] = this.backEdges[objectIDto][len - 1];\n\t\t\t\t\tlen -= 1;\n\t\t\t\t\tthis.backEdges[objectIDto].pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undo;\n\t}\n\n\tdeleteIncident(objectID) {\n\t\tconst undoStack = [];\n\t\tlet len;\n\t\tlet deleted;\n\t\tif (this.edges[objectID] != null) {\n\t\t\tlen = this.edges[objectID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tdeleted = this.edges[objectID][i];\n\t\t\t\tconst node2ID = deleted.toID.identifier();\n\t\t\t\tundoStack.push(deleted.createUndoConnect());\n\n\t\t\t\tlet len2 = this.backEdges[node2ID].length;\n\t\t\t\tfor (let j = len2 - 1; j >= 0; j--) {\n\t\t\t\t\tif (this.backEdges[node2ID][j] === deleted) {\n\t\t\t\t\t\tthis.backEdges[node2ID][j] = this.backEdges[node2ID][len2 - 1];\n\t\t\t\t\t\tlen2 -= 1;\n\t\t\t\t\t\tthis.backEdges[node2ID].pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.edges[objectID] = null;\n\t\t}\n\t\tif (this.backEdges[objectID] != null) {\n\t\t\tlen = this.backEdges[objectID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tdeleted = this.backEdges[objectID][i];\n\t\t\t\tconst node1ID = deleted.fromID.identifier();\n\t\t\t\tundoStack.push(deleted.createUndoConnect());\n\n\t\t\t\tlet len2 = this.edges[node1ID].length;\n\t\t\t\tfor (let j = len2 - 1; j >= 0; j--) {\n\t\t\t\t\tif (this.edges[node1ID][j] === deleted) {\n\t\t\t\t\t\tthis.edges[node1ID][j] = this.edges[node1ID][len2 - 1];\n\t\t\t\t\t\tlen2 -= 1;\n\t\t\t\t\t\tthis.edges[node1ID].pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.backEdges[objectID] = null;\n\t\t}\n\t\treturn undoStack;\n\t}\n\n\tremoveObject(objectID) {\n\t\tconst oldObject = this.nodes[objectID];\n\t\tif (objectID === this.nodes.length - 1) {\n\t\t\tthis.nodes.pop();\n\t\t} else {\n\t\t\tthis.nodes[objectID] = null;\n\t\t}\n\t\treturn oldObject;\n\t}\n\n\tgetObject(objectID) {\n\t\tif (this.nodes[objectID] == null || this.nodes[objectID] === undefined) {\n\t\t\tthrow new Error('getObject:Object with ID (' + String(objectID) + ') does not exist');\n\t\t}\n\t\treturn this.nodes[objectID];\n\t}\n\n\taddCircleObject(objectID, objectLabel) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'addCircleObject: object with same ID (' + String(objectID) + ') already exists!',\n\t\t\t);\n\t\t}\n\t\tconst newNode = new AnimatedCircle(objectID, objectLabel);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tgetNodeX(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('Getting x position of an object that does not exist');\n\t\t}\n\t\treturn this.nodes[nodeID].x;\n\t}\n\n\tgetTextWidth(text) {\n\t\t// TODO:  Need to make fonts more flexible, and less hardwired.\n\t\tthis.ctx.font = '12px Arial';\n\t\tconst strList = text.split('\\n');\n\t\tlet width = 0;\n\t\tif (strList.length === 1) {\n\t\t\twidth = this.ctx.measureText(text).width;\n\t\t} else {\n\t\t\tfor (let i = 0; i < strList.length; i++) {\n\t\t\t\twidth = Math.max(width, this.ctx.measureText(strList[i]).width);\n\t\t\t}\n\t\t}\n\n\t\treturn width;\n\t}\n\n\tsetText(nodeID, text, index) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('setting text of an object that does not exist');\n\t\t}\n\t\tthis.nodes[nodeID].setText(text, index, this.getTextWidth(text));\n\t}\n\n\tgetText(nodeID, index) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('getting text of an object that does not exist');\n\t\t}\n\t\treturn this.nodes[nodeID].getText(index);\n\t}\n\n\tgetNodeY(nodeID) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\tthrow new Error('getting y position of an object that does not exist');\n\t\t}\n\t\treturn this.nodes[nodeID].y;\n\t}\n\n\tconnectEdge(objectIDfrom, objectIDto, color, curve, directed, lab, connectionPoint, thickness) {\n\t\tconst fromObj = this.nodes[objectIDfrom];\n\t\tconst toObj = this.nodes[objectIDto];\n\t\tif (fromObj == null || toObj == null) {\n\t\t\tthrow new Error(\"Tried to connect two nodes, one didn't exist!\");\n\t\t}\n\t\tconst l = new AnimatedLine(\n\t\t\tfromObj,\n\t\t\ttoObj,\n\t\t\tcolor,\n\t\t\tcurve,\n\t\t\tdirected,\n\t\t\tlab,\n\t\t\tconnectionPoint,\n\t\t\tthickness,\n\t\t);\n\t\tif (this.edges[objectIDfrom] == null) {\n\t\t\tthis.edges[objectIDfrom] = [];\n\t\t}\n\t\tif (this.backEdges[objectIDto] == null) {\n\t\t\tthis.backEdges[objectIDto] = [];\n\t\t}\n\t\tl.addedToScene = fromObj.addedToScene && toObj.addedToScene;\n\t\tthis.edges[objectIDfrom].push(l);\n\t\tthis.backEdges[objectIDto].push(l);\n\t}\n\n\tsetNull(objectID, nullVal) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setNull(nullVal);\n\t\t}\n\t}\n\n\tsetPrevNull(objectID, nullVal) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setPrevNull(nullVal);\n\t\t}\n\t}\n\n\tsetNextNull(objectID, nullVal) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthis.nodes[objectID].setNextNull(nullVal);\n\t\t}\n\t}\n\n\tgetNull(objectID) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\treturn this.nodes[objectID].getNull();\n\t\t}\n\t\treturn false; // TODO:  Error here?\n\t}\n\n\tgetLeftNull(objectID) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\treturn this.nodes[objectID].getLeftNull();\n\t\t}\n\t\treturn false; // TODO:  Error here?\n\t}\n\n\tgetRightNull(objectID) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\treturn this.nodes[objectID].getRightNull();\n\t\t}\n\t\treturn false; // TODO:  Error here?\n\t}\n\n\tsetEdgeColor(\n\t\tfromID,\n\t\ttoID,\n\t\tcolor, // returns old color\n\t) {\n\t\tlet oldColor = '#000000';\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldColor = this.edges[fromID][i].color();\n\t\t\t\t\tthis.edges[fromID][i].setColor(color);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldColor;\n\t}\n\n\talignTop(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignTop(this.nodes[id2]);\n\t}\n\n\talignLeft(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignLeft(this.nodes[id2]);\n\t}\n\n\talignRight(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignRight(this.nodes[id2]);\n\t}\n\n\tgetAlignRightPos(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\treturn this.nodes[id1].getAlignRightPos(this.nodes[id2]);\n\t}\n\n\tgetAlignLeftPos(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\treturn this.nodes[id1].getAlignLeftPos(this.nodes[id2]);\n\t}\n\n\talignBottom(id1, id2) {\n\t\tif (\n\t\t\tthis.nodes[id1] == null ||\n\t\t\tthis.nodes[id1] === undefined ||\n\t\t\tthis.nodes[id2] == null ||\n\t\t\tthis.nodes[id2] === undefined\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Trying to align two nodes, one doesn't exist: \" + String(id1) + ',' + String(id2),\n\t\t\t);\n\t\t}\n\t\tthis.nodes[id1].alignBottom(this.nodes[id2]);\n\t}\n\n\tsetAlwaysOnTop(nodeID, onTop) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tconst oldTop = this.nodes[nodeID].alwaysOnTop;\n\t\t\tthis.nodes[nodeID].alwaysOnTop = onTop;\n\t\t\treturn oldTop;\n\t\t} else {\n\t\t\tthrow new Error(\"Trying to bring node that doesn't exist to top\");\n\t\t}\n\t}\n\n\tsetEdgeHighlight(fromID, toID, val, color) {\n\t\tlet oldHighlight = false;\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldHighlight = this.edges[fromID][i].highlighted;\n\t\t\t\t\tthis.edges[fromID][i].setHighlight(val, color);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldHighlight;\n\t}\n\n\tsetEdgeThickness(fromID, toID, val) {\n\t\tlet oldThickness = 1;\n\t\tif (this.edges[fromID] != null && this.edges[fromID] !== undefined) {\n\t\t\tconst len = this.edges[fromID].length;\n\t\t\tfor (let i = len - 1; i >= 0; i--) {\n\t\t\t\tif (\n\t\t\t\t\tthis.edges[fromID][i] != null &&\n\t\t\t\t\tthis.edges[fromID][i] !== undefined &&\n\t\t\t\t\tthis.edges[fromID][i].toID === this.nodes[toID]\n\t\t\t\t) {\n\t\t\t\t\toldThickness = this.edges[fromID][i].thickness;\n\t\t\t\t\tthis.edges[fromID][i].setThickness(val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oldThickness;\n\t}\n\n\tsetRectangleEdgeThickness(nodeID, thicknessArray) {\n\t\tif (this.nodes[nodeID] != null && this.nodes[nodeID] !== undefined) {\n\t\t\tconst oldEdgeThickness = this.nodes[nodeID].getEdgeThickness();\n\t\t\tthis.nodes[nodeID].setEdgeThickness(thicknessArray);\n\t\t\treturn oldEdgeThickness;\n\t\t} else {\n\t\t\tthrow new Error(\"Trying to bring node that doesn't exist to top\");\n\t\t}\n\t}\n\n\taddLabelObject(objectID, objectLabel, centering) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error('addLabelObject: object already exists!');\n\t\t}\n\n\t\tconst newLabel = new AnimatedLabel(\n\t\t\tobjectID,\n\t\t\tobjectLabel,\n\t\t\tcentering,\n\t\t\tthis.getTextWidth(objectLabel),\n\t\t);\n\t\tthis.nodes[objectID] = newLabel;\n\t}\n\n\taddLinkedListObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\tlinkPer,\n\t\tverticalOrientation,\n\t\tlinkPosEnd,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addLinkedListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedLinkedListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tlinkPer,\n\t\t\tverticalOrientation,\n\t\t\tlinkPosEnd,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddDoublyLinkedListObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\tlinkPer,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addDoublyLinkedListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedDoublyLinkedListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tlinkPer,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddCircularlyLinkedListObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\tlinkPer,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addCircularlyLinkedListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedCircularlyLinkedListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tlinkPer,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddSkipListObject(objectID, nodeLabel, width, height, backgroundColor, foregroundColor) {\n\t\tif (this.nodes[objectID] != null) {\n\t\t\tthrow new Error('addSkipListObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedSkipListNode(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tgetNumElements(objectID) {\n\t\treturn this.nodes[objectID].getNumElements();\n\t}\n\n\tsetNumElements(objectID, numElems) {\n\t\tthis.nodes[objectID].setNumElements(numElems);\n\t}\n\n\taddBTreeNode(objectID, widthPerElem, height, numElems, backgroundColor, foregroundColor) {\n\t\tbackgroundColor = backgroundColor === undefined ? '#FFFFFF' : backgroundColor;\n\t\tforegroundColor = foregroundColor === undefined ? '#FFFFFF' : foregroundColor;\n\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error('addBTreeNode: object with same ID already exists!');\n\t\t}\n\n\t\tconst newNode = new AnimatedBTreeNode(\n\t\t\tobjectID,\n\t\t\twidthPerElem,\n\t\t\theight,\n\t\t\tnumElems,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\taddRectangleObject(\n\t\tobjectID,\n\t\tnodeLabel,\n\t\twidth,\n\t\theight,\n\t\txJustify,\n\t\tyJustify,\n\t\tbackgroundColor,\n\t\tforegroundColor,\n\t) {\n\t\tif (this.nodes[objectID] != null && this.nodes[objectID] !== undefined) {\n\t\t\tthrow new Error('addRectangleObject: object with same ID already exists!');\n\t\t}\n\t\tconst newNode = new AnimatedRectangle(\n\t\t\tobjectID,\n\t\t\tnodeLabel,\n\t\t\twidth,\n\t\t\theight,\n\t\t\txJustify,\n\t\t\tyJustify,\n\t\t\tbackgroundColor,\n\t\t\tforegroundColor,\n\t\t);\n\t\tthis.nodes[objectID] = newNode;\n\t}\n\n\tsetNodePosition(nodeID, newX, newY) {\n\t\tif (this.nodes[nodeID] == null || this.nodes[nodeID] === undefined) {\n\t\t\t// TODO:  Error here?\n\t\t\treturn;\n\t\t}\n\t\tif (newX === undefined || newY === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tthis.nodes[nodeID].x = newX;\n\t\tthis.nodes[nodeID].y = newY;\n\t\t/* Don't need to dirty anything, since we repaint everything every frame\n\t\t (TODO:  Revisit if we do conditional redraws) */\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// Global timer used for doing animation callbacks.\n//  TODO:  Make this an instance variable of Animation Manager.\n\n/* global canvas */\n\nimport {\n\tUndoCreate,\n\tUndoHighlight,\n\tUndoHighlightEdge,\n\tUndoMove,\n\tUndoSetAlpha,\n\tUndoSetAlwaysOnTop,\n\tUndoSetBackgroundColor,\n\tUndoSetEdgeAlpha,\n\tUndoSetEdgeColor,\n\tUndoSetEdgeThickness,\n\tUndoSetForegroundColor,\n\tUndoSetHeight,\n\tUndoSetHighlightIndex,\n\tUndoSetNextNull,\n\tUndoSetNull,\n\tUndoSetNumElements,\n\tUndoSetPosition,\n\tUndoSetPrevNull,\n\tUndoSetRectangleEdgeThickness,\n\tUndoSetText,\n\tUndoSetTextColor,\n\tUndoSetWidth,\n} from './UndoFunctions.js';\nimport EventListener from './CustomEvents.js';\nimport ObjectManager from './ObjectManager.js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport SingleAnimation from './SingleAnimation.js';\nimport { Slider, withStyles } from '@material-ui/core';\nimport { UndoConnect } from './AnimatedLine.js';\n\n// Utility function to read a cookie\nfunction getCookie(cookieName) {\n\tlet i, x, y;\n\tconst cookies = document.cookie.split(';');\n\tfor (i = 0; i < cookies.length; i++) {\n\t\tx = cookies[i].substr(0, cookies[i].indexOf('='));\n\t\ty = cookies[i].substr(cookies[i].indexOf('=') + 1);\n\t\tx = x.replace(/^\\s+|\\s+$/g, '');\n\t\tif (x === cookieName) {\n\t\t\treturn unescape(y);\n\t\t}\n\t}\n}\n\n// Utility function to write a cookie\nfunction setCookie(cookieName, value, expireDays) {\n\tconst exDate = new Date();\n\texDate.setDate(exDate.getDate() + expireDays);\n\tdocument.cookie = cookieName + '=' + value;\n}\n\nconst ANIMATION_SPEED_DEFAULT = 75;\n\n// TODO:  Move these out of global space into animation manager?\n\nfunction controlKey(keyASCII) {\n\treturn (\n\t\tkeyASCII === 8 ||\n\t\tkeyASCII === 9 ||\n\t\tkeyASCII === 37 ||\n\t\tkeyASCII === 38 ||\n\t\tkeyASCII === 39 ||\n\t\tkeyASCII === 40 ||\n\t\tkeyASCII === 46\n\t);\n}\n\nfunction returnSubmit(field, func, maxSize, intOnly) {\n\tif (maxSize !== undefined) {\n\t\tfield.size = maxSize;\n\t}\n\treturn function (event) {\n\t\tlet keyASCII = 0;\n\t\tif (window.event) {\n\t\t\t// IE\n\t\t\tkeyASCII = event.keyCode;\n\t\t} else if (event.which) {\n\t\t\t// Netscape/Firefox/Opera\n\t\t\tkeyASCII = event.which;\n\t\t}\n\n\t\tif (keyASCII === 13) {\n\t\t\tfunc();\n\t\t\treturn false;\n\t\t} else if (\n\t\t\tkeyASCII === 59 ||\n\t\t\tkeyASCII === 45 ||\n\t\t\tkeyASCII === 46 ||\n\t\t\tkeyASCII === 190 ||\n\t\t\tkeyASCII === 173\n\t\t) {\n\t\t\treturn false;\n\t\t} else if (\n\t\t\t(maxSize !== undefined && field.value.length >= maxSize) ||\n\t\t\t(intOnly && (keyASCII < 48 || keyASCII > 57))\n\t\t) {\n\t\t\tif (!controlKey(keyASCII)) return false;\n\t\t}\n\t\treturn true;\n\t};\n}\n\nfunction addControlToAnimationBar(animBarRef, type, name, callback) {\n\tconst element = document.createElement('input');\n\n\telement.setAttribute('type', type);\n\telement.setAttribute('value', name);\n\tif (type === 'Button') {\n\t\telement.onclick = callback;\n\t} else if (type === 'Text') {\n\t\telement.onkeydown = callback;\n\t}\n\n\tconst tableEntry = document.createElement('td');\n\n\ttableEntry.appendChild(element);\n\n\tanimBarRef.current.appendChild(tableEntry);\n\treturn element;\n}\n\nfunction addDivisorToAnimationBar(animBarRef) {\n\tconst divisorLeft = document.createElement('td');\n\tdivisorLeft.setAttribute('class', 'divisorLeft');\n\n\tconst divisorRight = document.createElement('td');\n\tdivisorRight.setAttribute('class', 'divisorRight');\n\n\tanimBarRef.current.appendChild(divisorLeft);\n\tanimBarRef.current.appendChild(divisorRight);\n}\n\nexport default class AnimationManager extends EventListener {\n\tconstructor(canvasRef, animBarRef) {\n\t\tsuper();\n\n\t\tthis.objectManager = new ObjectManager(canvasRef);\n\t\t// Holder for all animated objects.\n\t\t// All animation is done by manipulating objects in\n\t\t// this container\n\t\tthis.animatedObjects = this.objectManager;\n\n\t\t// Control variables for stopping / starting animation\n\t\tthis.animationPaused = false;\n\t\tthis.awaitingStep = false;\n\t\tthis.currentlyAnimating = false;\n\n\t\t// Array holding the code for the animation.  This is\n\t\t// an array of strings, each of which is an animation command\n\t\t// currentAnimation is an index into this array\n\t\tthis.animationSteps = [];\n\t\tthis.currentAnimation = 0;\n\n\t\tthis.previousAnimationSteps = [];\n\n\t\t// Control variables for where we are in the current animation block.\n\t\t// currFrame holds the frame number of the current animation block,\n\t\t// while animationBlockLength holds the length of the current animation\n\t\t// block (in frame numbers).\n\t\tthis.currFrame = 0;\n\t\tthis.animationBlockLength = 0;\n\n\t\t//  The animation block that is currently running.  Array of singleAnimations\n\t\tthis.currentBlock = null;\n\n\t\t////////////////////////////////////\n\t\t// Variables for handling undo.\n\t\t////////////////////////////////////\n\t\t//  A stack of UndoBlock objects (subclassed, UndoBlock is an abstract base class)\n\t\t//  each of which can undo a single animation element\n\t\tthis.undoStack = [];\n\t\tthis.doingUndo = false;\n\n\t\t// A stack containing the beginning of each animation block, as an index\n\t\t// into the animationSteps array\n\t\tthis.undoAnimationStepIndices = [];\n\t\tthis.undoAnimationStepIndicesStack = [];\n\n\t\tthis.animationBlockLength = 10;\n\n\t\tthis.paused = false;\n\n\t\tthis.canvas = canvasRef;\n\n\t\tthis.skipBackButton = addControlToAnimationBar(animBarRef, 'Button', 'Skip Back', () =>\n\t\t\tthis.skipBack(),\n\t\t);\n\t\tthis.stepBackButton = addControlToAnimationBar(animBarRef, 'Button', 'Step Back', () =>\n\t\t\tthis.stepBack(),\n\t\t);\n\t\tthis.playPauseBackButton = addControlToAnimationBar(animBarRef, 'Button', 'Pause', () =>\n\t\t\tthis.doPlayPause(),\n\t\t);\n\t\tthis.playPauseBackButton.setAttribute('style', 'width: 80px');\n\t\tthis.stepForwardButton = addControlToAnimationBar(\n\t\t\tanimBarRef,\n\t\t\t'Button',\n\t\t\t'Step Forward',\n\t\t\t() => this.step(),\n\t\t);\n\t\tthis.skipForwardButton = addControlToAnimationBar(\n\t\t\tanimBarRef,\n\t\t\t'Button',\n\t\t\t'Skip Forward',\n\t\t\t() => this.skipForward(),\n\t\t);\n\n\t\taddDivisorToAnimationBar(animBarRef);\n\n\t\tconst element = document.createElement('div');\n\t\telement.setAttribute('display', 'inline-block');\n\t\telement.setAttribute('float', 'left');\n\n\t\tlet speed = getCookie('VisualizationSpeed');\n\t\tif (speed == null || speed === '') {\n\t\t\tspeed = ANIMATION_SPEED_DEFAULT;\n\t\t} else {\n\t\t\tspeed = parseInt(speed);\n\t\t}\n\n\t\tconst CustomSlider = withStyles({\n\t\t\troot: {\n\t\t\t\tcolor: \"#F9C333\",\n\t\t\t\theight: 3,\n\t\t\t\tpadding: \"13px 0\",\n\t\t\t},\n\t\t\ttrack: {\n\t\t\t\theight: 4,\n\t\t\t\tborderRadius: 2,\n\t\t\t}\n\t\t})(Slider);\n\t\t\n\t\tconst slider = (\n\t\t\t<CustomSlider\n\t\t\t\tdefaultValue={speed}\n\t\t\t\tonChange={(e, val) => {\n\t\t\t\t\tthis.setSpeed(val);\n\t\t\t\t\tsetCookie('VisualizationSpeed', String(val), 30);\n\t\t\t\t}}\n\n\t\t\t/>\n\t\t);\n\n\t\tlet tableEntry = document.createElement('td');\n\n\t\tconst controlBar = document.getElementById('GeneralAnimationControls');\n\n\t\tconst newTable = document.createElement('table');\n\n\t\tlet midLevel = document.createElement('tr');\n\t\tlet bottomLevel = document.createElement('td');\n\t\tmidLevel.appendChild(bottomLevel);\n\t\tReactDOM.render(slider, bottomLevel);\n\t\tnewTable.appendChild(midLevel);\n\n\t\tmidLevel = document.createElement('tr');\n\t\tbottomLevel = document.createElement('td');\n\t\tbottomLevel.align = 'center';\n\t\tlet txtNode = document.createTextNode('Animation Speed');\n\t\tmidLevel.appendChild(bottomLevel);\n\t\tbottomLevel.appendChild(txtNode);\n\t\tnewTable.appendChild(midLevel);\n\n\t\ttableEntry.appendChild(newTable);\n\n\t\t// Append the element in page (in span)\n\t\tcontrolBar.appendChild(tableEntry);\n\n\t\tthis.setSpeed(speed);\n\n\t\telement.setAttribute('style', 'width:200px');\n\n\t\taddDivisorToAnimationBar(animBarRef);\n\n\t\tlet width = getCookie('VisualizationWidth');\n\t\twidth = width == null || width === '' ? 1500 : parseInt(width);\n\n\t\tlet height = getCookie('VisualizationHeight');\n\t\theight = height == null || height === '' ? 505 : parseInt(height);\n\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\n\t\ttableEntry = document.createElement('td');\n\t\ttxtNode = document.createTextNode('h:');\n\t\ttableEntry.appendChild(txtNode);\n\t\tcontrolBar.appendChild(tableEntry);\n\n\t\tthis.heightEntry = addControlToAnimationBar(animBarRef, 'Text', canvas.height, () =>\n\t\t\treturnSubmit(\n\t\t\t\tthis.heightEntry,\n\t\t\t\t() =>\n\t\t\t\t\tthis.changeSize(\n\t\t\t\t\t\tdocument.documentElement.clientWidth,\n\t\t\t\t\t\tparseInt(this.heightEntry.value),\n\t\t\t\t\t),\n\t\t\t\t4,\n\t\t\t\ttrue,\n\t\t\t),\n\t\t);\n\n\t\tthis.heightEntry.size = 4;\n\t\tthis.sizeButton = addControlToAnimationBar(animBarRef, 'Button', 'Change Canvas Size', () =>\n\t\t\tthis.changeSize(),\n\t\t);\n\n\t\tthis.addListener('AnimationStarted', this, this.animStarted);\n\t\tthis.addListener('AnimationEnded', this, this.animEnded);\n\t\tthis.addListener('AnimationWaiting', this, this.animWaiting);\n\t\tthis.addListener('AnimationUndoUnavailable', this, this.animUndoUnavailable);\n\t\tthis.objectManager.width = canvas.width;\n\t\tthis.objectManager.height = canvas.height;\n\t}\n\n\tlerp(from, to, percent) {\n\t\treturn (to - from) * percent + from;\n\t}\n\n\t// Pause / unpause animation\n\tsetPaused(pausedValue) {\n\t\tthis.animationPaused = pausedValue;\n\t\tif (!this.animationPaused) {\n\t\t\tthis.step();\n\t\t}\n\t}\n\n\tparseBool(str) {\n\t\tconst uppercase = str.toUpperCase();\n\t\tconst returnVal = !(\n\t\t\tuppercase === 'False' ||\n\t\t\tuppercase === 'f' ||\n\t\t\tuppercase === ' 0' ||\n\t\t\tuppercase === '0' ||\n\t\t\tuppercase === ''\n\t\t);\n\t\treturn returnVal;\n\t}\n\n\tparseColor(clr) {\n\t\tif (clr.charAt(0) === '#') {\n\t\t\treturn clr;\n\t\t} else if (clr.substring(0, 2) === '0x') {\n\t\t\treturn '#' + clr.substring(2);\n\t\t}\n\t}\n\n\t// Set the speed of the animation, from 0 (slow) to 100 (fast)\n\tsetSpeed(newSpeed) {\n\t\tthis.animationBlockLength = Math.floor((100 - newSpeed) / 2);\n\t}\n\n\tchangeSize(\n\t\twidth = document.documentElement.clientWidth,\n\t\theight = parseInt(this.heightEntry.value),\n\t) {\n\t\tif (width > 100) {\n\t\t\tcanvas.width = width;\n\t\t\tthis.animatedObjects.width = width;\n\t\t\tsetCookie('VisualizationWidth', String(width), 30);\n\t\t}\n\t\tif (height > 100) {\n\t\t\tcanvas.height = height;\n\t\t\tthis.animatedObjects.height = height;\n\t\t\tsetCookie('VisualizationHeight', String(height), 30);\n\t\t}\n\t\tthis.heightEntry.value = canvas.height;\n\n\t\tthis.animatedObjects.draw();\n\t\tthis.fireEvent('CanvasSizeChanged', { width: canvas.width, height: canvas.height });\n\t}\n\n\tstartNextBlock() {\n\t\tthis.awaitingStep = false;\n\t\tthis.currentBlock = [];\n\t\tthis.undoBlock = [];\n\t\tif (this.currentAnimation === this.animationSteps.length) {\n\t\t\tthis.currentlyAnimating = false;\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.fireEvent('AnimationEnded', 'NoData');\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\t\t\treturn;\n\t\t}\n\t\tthis.undoAnimationStepIndices.push(this.currentAnimation);\n\n\t\tthis.foundBreak = false;\n\t\tthis.anyAnimations = false;\n\n\t\twhile (this.currentAnimation < this.animationSteps.length && !this.foundBreak) {\n\t\t\tconst [act, params] = this.animationSteps[this.currentAnimation];\n\t\t\tact.call(this, params);\n\t\t\tthis.currentAnimation++;\n\t\t}\n\t\tthis.currFrame = 0;\n\n\t\t// Hack:  If there are not any animations, and we are currently paused,\n\t\t// then set the current frame to the end of the animation, so that we will\n\t\t// advance immediately upon the next step button.  If we are not paused, then\n\t\t// animate as normal.\n\t\tif (\n\t\t\t(!this.anyAnimations && this.animationPaused) ||\n\t\t\t(!this.anyAnimations && this.currentAnimation === this.animationSteps.length)\n\t\t) {\n\t\t\tthis.currFrame = this.animationBlockLength;\n\t\t}\n\n\t\tthis.undoStack.push(this.undoBlock);\n\t}\n\n\t//  Start a new animation.  The input parameter commands is an array of strings,\n\t//  which represents the animation to start\n\tstartNewAnimation(commands) {\n\t\tthis.stopTimer();\n\t\tif (this.animationSteps !== null) {\n\t\t\tthis.previousAnimationSteps.push(this.animationSteps);\n\t\t\tthis.undoAnimationStepIndicesStack.push(this.undoAnimationStepIndices);\n\t\t}\n\t\tif (commands === undefined || commands.length === 0) {\n\t\t\tthis.animationSteps = [[act.step, []]];\n\t\t} else {\n\t\t\tthis.animationSteps = commands;\n\t\t}\n\t\tthis.undoAnimationStepIndices = [];\n\t\tthis.currentAnimation = 0;\n\t\tthis.startNextBlock();\n\t\tthis.currentlyAnimating = true;\n\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\tthis.startTimer();\n\t}\n\n\t// Step backwards one step.  A no-op if the animation is not currently paused\n\tstepBack() {\n\t\tif (this.awaitingStep && this.undoStack !== null && this.undoStack.length !== 0) {\n\t\t\t//  TODO:  Get events working correctly!\n\t\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\t\tthis.stopTimer();\n\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.undoLastBlock();\n\t\t\t// Re-kick the timer.  The timer may or may not be running at this point,\n\t\t\t// so to be safe we'll kill it and start it again.\n\t\t\tthis.stopTimer();\n\t\t\tthis.startTimer();\n\t\t} else if (\n\t\t\t!this.currentlyAnimating &&\n\t\t\tthis.animationPaused &&\n\t\t\tthis.undoAnimationStepIndices !== null\n\t\t) {\n\t\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\t\tthis.currentlyAnimating = true;\n\t\t\tthis.undoLastBlock();\n\t\t\t// Re-kick the timer.  The timer may or may not be running at this point,\n\t\t\t// so to be safe we'll kill it and start it again.\n\t\t\tthis.stopTimer();\n\t\t\tthis.startTimer();\n\t\t}\n\t}\n\n\t// Step forwards one step.  A no-op if the animation is not currently paused\n\tstep() {\n\t\tif (this.awaitingStep) {\n\t\t\tthis.startNextBlock();\n\t\t\tthis.fireEvent('AnimationStarted', 'NoData');\n\t\t\tthis.currentlyAnimating = true;\n\t\t\t// Re-kick the timer.  The timer should be going now, but we've had some difficulty with\n\t\t\t// it timing itself out, so we'll be safe and kick it now.\n\t\t\tthis.stopTimer();\n\t\t\tthis.startTimer();\n\t\t}\n\t}\n\n\t/// WARNING:  Could be dangerous to call while an animation is running ...\n\tclearHistory() {\n\t\tthis.undoStack = [];\n\t\tthis.undoAnimationStepIndices = null;\n\t\tthis.previousAnimationSteps = [];\n\t\tthis.undoAnimationStepIndicesStack = [];\n\t\tthis.animationSteps = null;\n\t\tthis.fireEvent('AnimationUndoUnavailable', 'NoData');\n\t\tthis.stopTimer();\n\t\tthis.animatedObjects.update();\n\t\tthis.animatedObjects.draw();\n\t}\n\n\tskipBack() {\n\t\tlet keepUndoing =\n\t\t\tthis.undoAnimationStepIndices !== null && this.undoAnimationStepIndices.length !== 0;\n\t\tif (keepUndoing) {\n\t\t\tlet i;\n\t\t\tfor (i = 0; this.currentBlock !== null && i < this.currentBlock.length; i++) {\n\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\tobjectID,\n\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.doingUndo) {\n\t\t\t\tthis.finishUndoBlock(this.undoStack.pop());\n\t\t\t}\n\t\t\twhile (keepUndoing) {\n\t\t\t\tthis.undoLastBlock();\n\t\t\t\tfor (i = 0; i < this.currentBlock.length; i++) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tobjectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tkeepUndoing = this.finishUndoBlock(this.undoStack.pop());\n\t\t\t}\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\t\t\tif (this.undoStack == null || this.undoStack.length === 0) {\n\t\t\t\tthis.fireEvent('AnimationUndoUnavailable', 'NoData');\n\t\t\t}\n\t\t}\n\t}\n\n\tresetAll() {\n\t\tthis.clearHistory();\n\t\tthis.animatedObjects.clearAllObjects();\n\t\tthis.animatedObjects.draw();\n\t\tthis.stopTimer();\n\t}\n\n\tskipForward() {\n\t\tif (this.currentlyAnimating) {\n\t\t\tthis.animatedObjects.runFast = true;\n\t\t\twhile (\n\t\t\t\tthis.animationSteps !== null &&\n\t\t\t\tthis.currentAnimation < this.animationSteps.length\n\t\t\t) {\n\t\t\t\tfor (let i = 0; this.currentBlock !== null && i < this.currentBlock.length; i++) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tobjectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (this.doingUndo) {\n\t\t\t\t\tthis.finishUndoBlock(this.undoStack.pop());\n\t\t\t\t}\n\t\t\t\tthis.startNextBlock();\n\t\t\t\tfor (let i = 0; i < this.currentBlock.length; i++) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tobjectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.currentlyAnimating = false;\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.doingUndo = false;\n\n\t\t\tthis.animatedObjects.runFast = false;\n\t\t\tthis.fireEvent('AnimationEnded', 'NoData');\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\t\t}\n\t}\n\n\tfinishUndoBlock(undoBlock) {\n\t\tfor (let i = undoBlock.length - 1; i >= 0; i--) {\n\t\t\tundoBlock[i].undoInitialStep(this.animatedObjects);\n\t\t}\n\t\tthis.doingUndo = false;\n\n\t\t// If we are at the final end of the animation ...\n\t\tif (this.undoAnimationStepIndices.length === 0) {\n\t\t\tthis.awaitingStep = false;\n\t\t\tthis.currentlyAnimating = false;\n\t\t\tthis.undoAnimationStepIndices = this.undoAnimationStepIndicesStack.pop();\n\t\t\tthis.animationSteps = this.previousAnimationSteps.pop();\n\t\t\tthis.fireEvent('AnimationEnded', 'NoData');\n\t\t\tthis.fireEvent('AnimationUndo', 'NoData');\n\t\t\tthis.currentBlock = [];\n\t\t\tif (this.undoStack == null || this.undoStack.length === 0) {\n\t\t\t\tthis.currentlyAnimating = false;\n\t\t\t\tthis.awaitingStep = false;\n\t\t\t\tthis.fireEvent('AnimationUndoUnavailable', 'NoData');\n\t\t\t}\n\n\t\t\tthis.stopTimer();\n\t\t\tthis.animatedObjects.update();\n\t\t\tthis.animatedObjects.draw();\n\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tundoLastBlock() {\n\t\tif (this.undoAnimationStepIndices.length === 0) {\n\t\t\t// Nothing on the undo stack.  Return\n\t\t\treturn;\n\t\t}\n\t\tif (this.undoAnimationStepIndices.length > 0) {\n\t\t\tthis.doingUndo = true;\n\t\t\tlet anyAnimations = false;\n\t\t\tthis.currentAnimation = this.undoAnimationStepIndices.pop();\n\t\t\tthis.currentBlock = [];\n\t\t\tconst undo = this.undoStack[this.undoStack.length - 1];\n\t\t\tlet i;\n\t\t\tfor (i = undo.length - 1; i >= 0; i--) {\n\t\t\t\tconst animateNext = undo[i].addUndoAnimation(this.currentBlock);\n\t\t\t\tanyAnimations = anyAnimations || animateNext;\n\t\t\t}\n\t\t\tthis.currFrame = 0;\n\n\t\t\t// Hack:  If there are not any animations, and we are currently paused,\n\t\t\t// then set the current frame to the end of the animation, so that we will\n\t\t\t// advance immediately upon the next step button.  If we are not paused, then\n\t\t\t// animate as normal.\n\t\t\tif (!anyAnimations && this.animationPaused) {\n\t\t\t\tthis.currFrame = this.animationBlockLength;\n\t\t\t}\n\t\t\tthis.currentlyAnimating = true;\n\t\t}\n\t}\n\n\tsetLayer(shown, layers) {\n\t\tthis.animatedObjects.setLayer(shown, layers);\n\t\t// Drop in an extra draw call here, just in case we are not\n\t\t// in the middle of an update loop when this changes\n\t\tthis.animatedObjects.draw();\n\t}\n\n\tsetAllLayers(layers) {\n\t\tthis.animatedObjects.setAllLayers(layers);\n\t\t// Drop in an extra draw call here, just in case we are not\n\t\t// in the middle of an update loop when this changes\n\t\tthis.animatedObjects.draw();\n\t}\n\n\tupdate() {\n\t\tif (this.currentlyAnimating) {\n\t\t\tthis.currFrame = this.currFrame + 1;\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < this.currentBlock.length; i++) {\n\t\t\t\tif (\n\t\t\t\t\tthis.currFrame === this.animationBlockLength ||\n\t\t\t\t\t(this.currFrame === 1 && this.animationBlockLength === 0)\n\t\t\t\t) {\n\t\t\t\t\tthis.animatedObjects.setNodePosition(\n\t\t\t\t\t\tthis.currentBlock[i].objectID,\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t);\n\t\t\t\t} else if (this.currFrame < this.animationBlockLength) {\n\t\t\t\t\tconst objectID = this.currentBlock[i].objectID;\n\t\t\t\t\tconst percent = 1 / (this.animationBlockLength - this.currFrame);\n\t\t\t\t\tconst newX = this.lerp(\n\t\t\t\t\t\tthis.animatedObjects.getNodeX(objectID),\n\t\t\t\t\t\tthis.currentBlock[i].toX,\n\t\t\t\t\t\tpercent,\n\t\t\t\t\t);\n\t\t\t\t\tconst newY = this.lerp(\n\t\t\t\t\t\tthis.animatedObjects.getNodeY(objectID),\n\t\t\t\t\t\tthis.currentBlock[i].toY,\n\t\t\t\t\t\tpercent,\n\t\t\t\t\t);\n\t\t\t\t\tthis.animatedObjects.setNodePosition(objectID, newX, newY);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.currFrame >= this.animationBlockLength) {\n\t\t\t\tif (this.doingUndo) {\n\t\t\t\t\tif (this.finishUndoBlock(this.undoStack.pop())) {\n\t\t\t\t\t\tthis.awaitingStep = true;\n\t\t\t\t\t\tthis.fireEvent('AnimationWaiting', 'NoData');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.animationPaused &&\n\t\t\t\t\t\tthis.currentAnimation < this.animationSteps.length\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.awaitingStep = true;\n\t\t\t\t\t\tthis.fireEvent('AnimationWaiting', 'NoData');\n\t\t\t\t\t\tthis.currentBlock = [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.startNextBlock();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.animatedObjects.update();\n\t\t}\n\t}\n\n\tanimWaiting() {\n\t\tthis.stepForwardButton.disabled = false;\n\t\tif (this.skipBackButton.disabled === false) {\n\t\t\tthis.stepBackButton.disabled = false;\n\t\t}\n\t\tthis.objectManager.statusReport.setText('Animation Paused');\n\t\tthis.objectManager.statusReport.setForegroundColor('#FF0000');\n\t}\n\n\tanimStarted() {\n\t\tthis.skipForwardButton.disabled = false;\n\t\tthis.skipBackButton.disabled = false;\n\t\tthis.stepForwardButton.disabled = true;\n\t\tthis.stepBackButton.disabled = true;\n\t\tthis.objectManager.statusReport.setText('Animation Running');\n\t\tthis.objectManager.statusReport.setForegroundColor('#009900');\n\t}\n\n\tanimEnded() {\n\t\tthis.skipForwardButton.disabled = true;\n\t\tthis.stepForwardButton.disabled = true;\n\t\tif (this.skipBackButton.disabled === false && this.paused) {\n\t\t\tthis.stepBackButton.disabled = false;\n\t\t}\n\t\tthis.objectManager.statusReport.setText('Animation Completed');\n\t\tthis.objectManager.statusReport.setForegroundColor('#000000');\n\t}\n\n\tanimUndoUnavailable() {\n\t\tthis.skipBackButton.disabled = true;\n\t\tthis.stepBackButton.disabled = true;\n\t}\n\n\ttimeout() {\n\t\t// We need to set the timeout *first*, otherwise if we\n\t\t// try to clear it later, we get behavior we don't want ...\n\t\tthis.timer = setTimeout(() => this.timeout(), 30);\n\t\tthis.update();\n\t\tthis.objectManager.draw();\n\t}\n\n\tdoPlayPause() {\n\t\tthis.paused = !this.paused;\n\t\tif (this.paused) {\n\t\t\tthis.playPauseBackButton.setAttribute('value', 'Play');\n\t\t\tif (this.skipBackButton.disabled === false) {\n\t\t\t\tthis.stepBackButton.disabled = false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.playPauseBackButton.setAttribute('value', 'Pause');\n\t\t}\n\t\tthis.setPaused(this.paused);\n\t}\n\n\tstartTimer() {\n\t\tthis.timer = setTimeout(() => this.timeout(), 30);\n\t}\n\n\tstopTimer() {\n\t\tclearInterval(this.timer);\n\t}\n}\n\nexport const act = {\n\tstep() {\n\t\tthis.foundBreak = true;\n\t},\n\tmove(params) {\n\t\t// id, x, y\n\t\tconst nextAnim = new SingleAnimation(\n\t\t\tparams[0],\n\t\t\tthis.animatedObjects.getNodeX(params[0]),\n\t\t\tthis.animatedObjects.getNodeY(params[0]),\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t);\n\t\tthis.currentBlock.push(nextAnim);\n\t\tthis.undoBlock.push(\n\t\t\tnew UndoMove(\n\t\t\t\tnextAnim.objectID,\n\t\t\t\tnextAnim.toX,\n\t\t\t\tnextAnim.toY,\n\t\t\t\tnextAnim.fromX,\n\t\t\t\tnextAnim.fromY,\n\t\t\t),\n\t\t);\n\t\tthis.anyAnimations = true;\n\t},\n\tdelete(params) {\n\t\t// id\n\t\tconst removedEdges = this.animatedObjects.deleteIncident(params[0]);\n\t\tif (removedEdges.length > 0) {\n\t\t\tthis.undoBlock = this.undoBlock.concat(removedEdges);\n\t\t}\n\t\tconst obj = this.animatedObjects.getObject(params[0]);\n\t\tif (obj !== null) {\n\t\t\tthis.undoBlock.push(obj.createUndoDelete());\n\t\t\tthis.animatedObjects.removeObject(params[0]);\n\t\t}\n\t},\n\tconnect(params) {\n\t\t// fromID, toID | color, curve, directed, label, anchorPos, thickness\n\t\tparams[2] = params[2] || '#000000';\n\t\tparams[3] = params[3] || 0.0;\n\t\tparams[4] = params[4] !== false && params[4] !== 0;\n\t\tparams[5] = params[5] === undefined ? '' : params[5];\n\t\tparams[6] = params[6] || 0;\n\t\tparams[7] = params[7] === undefined ? 1 : params[7];\n\t\tthis.animatedObjects.connectEdge(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[4],\n\t\t\tString(params[5]),\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectNext(params) {\n\t\t// fromID, toID\n\t\tthis.animatedObjects.connectEdge(params[0], params[1], '#000000', 0.0, true, '', 0);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectPrev(params) {\n\t\t// fromID, toID\n\t\tthis.animatedObjects.connectEdge(params[0], params[1], '#000000', 0.0, true, '', 1);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectCurve(params) {\n\t\t// fromID, toID, curve\n\t\tthis.animatedObjects.connectEdge(params[0], params[1], '#000000', params[2], true, '', 1);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tconnectSkipList(params) {\n\t\t// fromID, toID, anchorPos\n\t\tthis.animatedObjects.connectEdge(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\t'#000000',\n\t\t\t0.0,\n\t\t\tfalse,\n\t\t\t'',\n\t\t\tparams[2],\n\t\t);\n\t\tthis.undoBlock.push(new UndoConnect(params[0], params[1], false));\n\t},\n\tdisconnect(params) {\n\t\t// fromID, toID\n\t\tconst undoConnect = this.animatedObjects.disconnect(params[0], params[1]);\n\t\tif (undoConnect !== null) this.undoBlock.push(undoConnect);\n\t},\n\tcreateCircle(params) {\n\t\t// id, label | x, y\n\t\tparams[2] = params[2] || 0;\n\t\tparams[3] = params[3] || 0;\n\t\tthis.animatedObjects.addCircleObject(params[0], String(params[1]));\n\t\tthis.animatedObjects.setNodePosition(\n\t\t\tparseInt(params[0]),\n\t\t\tparseInt(params[2]),\n\t\t\tparseInt(params[3]),\n\t\t);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateHighlightCircle(params) {\n\t\t// id, color | x, y, radius\n\t\tparams[2] = params[2] || 0;\n\t\tparams[3] = params[3] || 0;\n\t\tparams[4] = params[4] === undefined ? 20 : params[4];\n\t\tthis.animatedObjects.addHighlightCircleObject(params[0], params[1], params[4]);\n\t\tthis.animatedObjects.setNodePosition(\n\t\t\tparseInt(params[0]),\n\t\t\tparseInt(params[2]),\n\t\t\tparseInt(params[3]),\n\t\t);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateRectangle(params) {\n\t\t// id, label, w, h | x, y, xJustify, yJustify, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] || 'center';\n\t\tparams[7] = params[7] || 'center';\n\t\tparams[8] = params[8] || '#FFFFFF';\n\t\tparams[9] = params[9] || '#000000';\n\t\tthis.animatedObjects.addRectangleObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t\tparams[9],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateLabel(params) {\n\t\t// id, label | x, y, centered\n\t\tparams[2] = params[2] || 0;\n\t\tparams[3] = params[3] || 0;\n\t\tparams[4] = params[4] !== false && params[4] !== 0;\n\t\tthis.animatedObjects.addLabelObject(params[0], String(params[1]), params[4]);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[2], params[3]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateLinkedListNode(params) {\n\t\t// id, label, w, h | x, y, linkPercent, vertical, linkPosEnd, bgColor, fgColor\n\t\tparams[1] = Array.isArray(params[1]) ? params[1].map(x => String(x)) : [String(params[1])];\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] === undefined ? 0.25 : params[6];\n\t\tparams[7] = params[7] !== false && params[7] !== 0;\n\t\tparams[8] = params[8] || false;\n\t\tparams[9] = params[9] || '#FFFFFF';\n\t\tparams[10] = params[10] || '#000000';\n\t\tthis.animatedObjects.addLinkedListObject(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t\tparams[9],\n\t\t\tparams[10],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateDoublyLinkedListNode(params) {\n\t\t// id, label, w, h | x, y, linkPercent, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] === undefined ? 0.25 : params[6];\n\t\tparams[7] = params[7] || '#FFFFFF';\n\t\tparams[8] = params[8] || '#000000';\n\t\tthis.animatedObjects.addDoublyLinkedListObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateCircularlyLinkedListNode(params) {\n\t\t// id, label, w, h | x, y, linkPercent, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] === undefined ? 0.25 : params[6];\n\t\tparams[7] = params[7] || '#FFFFFF';\n\t\tparams[8] = params[8] || '#000000';\n\t\tthis.animatedObjects.addCircularlyLinkedListObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t\tparams[8],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateSkipListNode(params) {\n\t\t// id, label, w, h | x, y, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] || '#FFFFFF';\n\t\tparams[7] = params[7] || '#000000';\n\t\tthis.animatedObjects.addSkipListObject(\n\t\t\tparams[0],\n\t\t\tString(params[1]),\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tcreateBTreeNode(params) {\n\t\t// id, widthPerElement, height, numLabels, x, y, bgColor, fgColor\n\t\tparams[4] = params[4] || 0;\n\t\tparams[5] = params[5] || 0;\n\t\tparams[6] = params[6] || '#FFFFFF';\n\t\tparams[7] = params[7] || '#000000';\n\t\tthis.animatedObjects.addBTreeNode(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t\tparams[6],\n\t\t\tparams[7],\n\t\t);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[4], params[5]);\n\t\tthis.undoBlock.push(new UndoCreate(params[0]));\n\t},\n\tsetText(params) {\n\t\t// id, text | textIndex\n\t\tparams[2] = params[2] || 0;\n\t\tconst oldText = this.animatedObjects.getText(params[0], params[2]);\n\t\tthis.animatedObjects.setText(params[0], String(params[1]), params[2]);\n\t\tif (oldText !== undefined) {\n\t\t\tthis.undoBlock.push(new UndoSetText(params[0], oldText, params[2]));\n\t\t}\n\t},\n\tsetTextColor(params) {\n\t\t// id, color, textIndex\n\t\tparams[2] = params[2] || 0;\n\t\tconst oldColor = this.animatedObjects.getTextColor(params[0], params[2]);\n\t\tthis.animatedObjects.setTextColor(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetTextColor(params[0], oldColor, params[2]));\n\t},\n\tsetForegroundColor(params) {\n\t\t// id, color\n\t\tconst oldColor = this.animatedObjects.foregroundColor(params[0]);\n\t\tthis.animatedObjects.setForegroundColor(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetForegroundColor(params[0], oldColor));\n\t},\n\tsetBackgroundColor(params) {\n\t\t// id, color\n\t\tconst oldColor = this.animatedObjects.backgroundColor(params[0]);\n\t\tthis.animatedObjects.setBackgroundColor(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetBackgroundColor(params[0], oldColor));\n\t},\n\tsetHighlight(params) {\n\t\t// id, highlight, color\n\t\tthis.animatedObjects.setHighlight(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoHighlight(params[0], !params[1], params[2]));\n\t},\n\tsetAlpha(params) {\n\t\t// id, alpha\n\t\tconst oldAlpha = this.animatedObjects.getAlpha(params[0]);\n\t\tthis.animatedObjects.setAlpha(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetAlpha(params[0], oldAlpha));\n\t},\n\tsetEdgeColor(params) {\n\t\t// fromID, toID, newColor\n\t\tconst oldColor = this.animatedObjects.setEdgeColor(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetEdgeColor(params[0], params[1], oldColor));\n\t},\n\tsetEdgeAlpha(params) {\n\t\t// fromID, toID, alpha\n\t\tconst oldAlpha = this.animatedObjects.setEdgeAlpha(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetEdgeAlpha(params[0], params[1], oldAlpha));\n\t},\n\tsetEdgeHighlight(params) {\n\t\t// fromID, toID, highlight\n\t\tconst oldHighlight = this.animatedObjects.setEdgeHighlight(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t\tparams[2],\n\t\t\tparams[3],\n\t\t);\n\t\tthis.undoBlock.push(new UndoHighlightEdge(params[0], params[1], oldHighlight));\n\t},\n\tsetEdgeThickness(params) {\n\t\t// fromID, toID, thickness\n\t\tconst oldThickness = this.animatedObjects.setEdgeThickness(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetEdgeThickness(params[0], params[1], oldThickness));\n\t},\n\tsetRectangleEdgeThickness(params) {\n\t\t//id, thicknessArray\n\t\tconst oldThicknessArray = this.animatedObjects.setRectangleEdgeThickness(\n\t\t\tparams[0],\n\t\t\tparams[1],\n\t\t);\n\t\tthis.undoBlock.push(new UndoSetRectangleEdgeThickness(params[0], oldThicknessArray));\n\t},\n\tsetHeight(params) {\n\t\t// id, height\n\t\tconst oldHeight = this.animatedObjects.getHeight(params[0]);\n\t\tthis.animatedObjects.setHeight(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetHeight(params[0], oldHeight));\n\t},\n\tsetWidth(params) {\n\t\t// id, width\n\t\tconst oldWidth = this.animatedObjects.getWidth(params[0]);\n\t\tthis.animatedObjects.setWidth(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetWidth(params[0], oldWidth));\n\t},\n\tsetLayer(params) {\n\t\t// id, height\n\t\tthis.animatedObjects.setLayer(params[0], params[1]);\n\t\t//TODO: Add undo information here\n\t},\n\tsetNull(params) {\n\t\t// id, null\n\t\tconst oldNull = this.animatedObjects.getNull(params[0]);\n\t\tthis.animatedObjects.setNull(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetNull(params[0], oldNull));\n\t},\n\tsetPrevNull(params) {\n\t\t// id, null\n\t\tconst oldNull = this.animatedObjects.getLeftNull(params[0]);\n\t\tthis.animatedObjects.setPrevNull(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPrevNull(params[0], oldNull));\n\t},\n\tsetNextNull(params) {\n\t\t// id, null\n\t\tconst oldNull = this.animatedObjects.getRightNull(params[0]);\n\t\tthis.animatedObjects.setNextNull(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetNextNull(params[0], oldNull));\n\t},\n\tsetNumElements(params) {\n\t\t// id, numElements\n\t\tconst oldElem = this.animatedObjects.getObject(params[0]);\n\t\tthis.undoBlock.push(new UndoSetNumElements(oldElem, params[1]));\n\t\tthis.animatedObjects.setNumElements(params[0], params[1]);\n\t},\n\tsetPosition(params) {\n\t\t// id, x, y\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.setNodePosition(params[0], params[1], params[2]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\tsetHighlightIndex(params) {\n\t\tconst oldIndex = this.animatedObjects.getHighlightIndex(params[0]);\n\t\tthis.undoBlock.push(new UndoSetHighlightIndex(params[0], oldIndex));\n\t\tthis.animatedObjects.setHighlightIndex(params[0], params[1]);\n\t},\n\talignRight(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignRight(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\talignLeft(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignLeft(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\talignTop(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignTop(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\talignBottom(params) {\n\t\t// id, otherID\n\t\tconst oldX = this.animatedObjects.getNodeX(params[0]);\n\t\tconst oldY = this.animatedObjects.getNodeY(params[0]);\n\t\tthis.animatedObjects.alignBottom(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetPosition(params[0], oldX, oldY));\n\t},\n\tbringToTop(params) {\n\t\tconst oldTop = this.animatedObjects.setAlwaysOnTop(params[0], params[1]);\n\t\tthis.undoBlock.push(new UndoSetAlwaysOnTop(params[0], oldTop));\n\t},\n\tmoveToAlignRight(params) {\n\t\t// id, otherID\n\t\tconst newXY = this.animatedObjects.getAlignRightPos(params[0], params[1]);\n\t\tconst nextAnim = new SingleAnimation(\n\t\t\tparams[0],\n\t\t\tthis.animatedObjects.getNodeX(params[0]),\n\t\t\tthis.animatedObjects.getNodeY(params[0]),\n\t\t\tnewXY[0],\n\t\t\tnewXY[1],\n\t\t);\n\t\tthis.currentBlock.push(nextAnim);\n\t\tthis.undoBlock.push(\n\t\t\tnew UndoMove(\n\t\t\t\tnextAnim.objectID,\n\t\t\t\tnextAnim.toX,\n\t\t\t\tnextAnim.toY,\n\t\t\t\tnextAnim.fromX,\n\t\t\t\tnextAnim.fromY,\n\t\t\t),\n\t\t);\n\t\tthis.anyAnimations = true;\n\t},\n};\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nexport default class EventListener {\n\tconstructor() {\n\t\tthis.events = [];\n\t}\n\n\tremoveListener(kind, scope, func) {\n\t\tif (this.events[kind] == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet scopeFunctions = null;\n\t\tlet i;\n\t\tfor (i = 0; i < this.events[kind].length; i++) {\n\t\t\tif (this.events[kind][i].scope === scope) {\n\t\t\t\tscopeFunctions = this.events[kind][i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (scopeFunctions == null) {\n\t\t\treturn;\n\t\t}\n\t\tfor (i = 0; i < scopeFunctions.functions.length; i++) {\n\t\t\tif (scopeFunctions.functions[i] === func) {\n\t\t\t\tscopeFunctions.functions.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\taddListener(kind, scope, func) {\n\t\tif (this.events[kind] === undefined) {\n\t\t\tthis.events[kind] = [];\n\t\t}\n\t\tlet i;\n\t\tlet scopeFunctions = null;\n\t\tfor (i = 0; i < this.events[kind].length; i++) {\n\t\t\tif (this.events[kind][i].scope === scope) {\n\t\t\t\tscopeFunctions = this.events[kind][i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (scopeFunctions === null) {\n\t\t\tthis.events[kind].push({ scope: scope, functions: [] });\n\t\t\tscopeFunctions = this.events[kind][this.events[kind].length - 1];\n\t\t}\n\t\tfor (i = 0; i < scopeFunctions.functions.length; i++) {\n\t\t\tif (scopeFunctions.functions[i] === func) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tscopeFunctions.functions.push(func);\n\t}\n\n\tfireEvent(kind, event) {\n\t\t// TODO:  Should add a deep clone here ...\n\t\tif (this.events[kind] !== undefined) {\n\t\t\tfor (let i = 0; i < this.events[kind].length; i++) {\n\t\t\t\tconst objects = this.events[kind][i];\n\t\t\t\tconst functs = objects.functions;\n\t\t\t\tconst scope = objects.scope;\n\t\t\t\tfor (let j = 0; j < functs.length; j++) {\n\t\t\t\t\tconst func = functs[j];\n\t\t\t\t\tfunc.call(scope, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import React from 'react';\n\nconst Footer = () => (\n\t<div className=\"footer\">\n\t\t&copy; Copyright 2019 <a href=\"https://rodrigodlpontes.github.io/website/\">Rodrigo Pontes</a>,\n\t\tunder the direction of Mary Hudachek-Buswell, &copy; Copyright 2011&nbsp;\n\t\t<a href=\"http://www.cs.usfca.edu/galles\">David Galles</a>\n\t</div>\n);\n\nexport default Footer;\n","import { Link } from 'react-router-dom';\nimport React from 'react';\nimport { Toggle } from 'react-hook-theme';\nimport 'react-hook-theme/dist/styles/style.css';\n\nclass Header extends React.Component {\n\tstate = { menuVisible: null };\n\n\trender() {\n\t\tconst menuClass = { null: '', true: 'show', false: 'hide' };\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"header\">\n\t\t\t\t\t<div id=\"left\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={this.state.menuVisible ? 'selected' : ''}\n\t\t\t\t\t\t\tonClick={this.toggleMenu}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"center\">\n\t\t\t\t\t\t<h1>CS 1332 Data Structures and Algorithms Visualizations</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"right\">\n\t\t\t\t\t\t<Toggle />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={`menu ${menuClass[this.state.menuVisible]}`}>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/\" onClick={this.toggleMenu}>\n\t\t\t\t\t\t\t\tHome\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/about\" onClick={this.toggleMenu}>\n\t\t\t\t\t\t\t\tAbout\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"https://github.com/RodrigoDLPontes/visualization-tool\">\n\t\t\t\t\t\t\t\tSource Code\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\ttoggleMenu = () => this.setState(state => ({ menuVisible: !state.menuVisible }));\n}\n\nexport default Header;\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport { act } from '../anim/AnimationMain';\n\nexport function addLabelToAlgorithmBar(labelName, group) {\n\tconst element = document.createElement('p');\n\telement.appendChild(document.createTextNode(labelName));\n\n\tif (!group) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(element);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\t// Append the element in page (in span)\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tgroup.appendChild(element);\n\t\telement.setAttribute('class', 'groupChild');\n\t}\n\n\treturn element;\n}\n\nexport function addCheckboxToAlgorithmBar(boxLabel, checked, group) {\n\tconst element = document.createElement('input');\n\n\telement.setAttribute('type', 'checkbox');\n\telement.setAttribute('id', boxLabel);\n\telement.setAttribute('name', boxLabel);\n\telement.setAttribute('value', boxLabel);\n\tchecked && element.setAttribute('checked', 'true');\n\n\tconst label = document.createElement('label');\n\tlabel.setAttribute('for', boxLabel);\n\tconst txtNode = document.createTextNode(boxLabel);\n\tlabel.appendChild(txtNode);\n\n\tif (!group) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(element);\n\t\ttableEntry.appendChild(label);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tconst span = document.createElement('span');\n\t\tspan.appendChild(element);\n\t\tspan.appendChild(label);\n\n\t\tgroup.appendChild(span);\n\t\tspan.setAttribute('class', 'groupChild');\n\t}\n\n\treturn element;\n}\n\nexport function addRadioButtonGroupToAlgorithmBar(buttonNames, groupName, group) {\n\tconst buttonList = [];\n\tconst newTable = document.createElement('table');\n\n\tfor (let i = 0; i < buttonNames.length; i++) {\n\t\tconst midLevel = document.createElement('tr');\n\t\tconst bottomLevel = document.createElement('td');\n\n\t\tconst button = document.createElement('input');\n\t\tbutton.setAttribute('type', 'radio');\n\t\tbutton.setAttribute('name', groupName);\n\t\tbutton.setAttribute('id', buttonNames[i]);\n\t\tbutton.setAttribute('value', buttonNames[i]);\n\t\tbottomLevel.appendChild(button);\n\t\tmidLevel.appendChild(bottomLevel);\n\t\tconst label = document.createElement('label');\n\t\tlabel.setAttribute('for', buttonNames[i]);\n\t\tconst txtNode = document.createTextNode(' ' + buttonNames[i]);\n\t\tlabel.appendChild(txtNode);\n\t\tbottomLevel.appendChild(label);\n\t\tnewTable.appendChild(midLevel);\n\t\tbuttonList.push(button);\n\t}\n\n\tif (!group) {\n\t\tconst topLevelTableEntry = document.createElement('td');\n\t\ttopLevelTableEntry.appendChild(newTable);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(topLevelTableEntry);\n\t} else {\n\t\tgroup.appendChild(newTable);\n\t\tnewTable.setAttribute('class', 'groupChild');\n\t}\n\n\treturn buttonList;\n}\n\nexport function addControlToAlgorithmBar(type, value, group) {\n\tconst element = document.createElement('input');\n\n\telement.setAttribute('type', type);\n\telement.setAttribute('value', value);\n\n\tif (!group) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(element);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tgroup.appendChild(element);\n\t\telement.setAttribute('class', 'groupChild');\n\t}\n\n\treturn element;\n}\n\nexport function addDivisorToAlgorithmBar() {\n\tconst divisorLeft = document.createElement('td');\n\tdivisorLeft.setAttribute('class', 'divisorLeft');\n\n\tconst divisorRight = document.createElement('td');\n\tdivisorRight.setAttribute('class', 'divisorRight');\n\n\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\tcontrolBar.appendChild(divisorLeft);\n\tcontrolBar.appendChild(divisorRight);\n}\n\nexport function addGroupToAlgorithmBar(horizontal, parentGroup) {\n\tconst group = document.createElement('div');\n\n\tgroup.setAttribute('class', horizontal ? 'hgroup' : 'vgroup');\n\n\tif (!parentGroup) {\n\t\tconst tableEntry = document.createElement('td');\n\t\ttableEntry.appendChild(group);\n\n\t\tconst controlBar = document.getElementById('AlgorithmSpecificControls');\n\t\tcontrolBar.appendChild(tableEntry);\n\t} else {\n\t\tparentGroup.appendChild(group);\n\t}\n\n\treturn group;\n}\n\nconst CODE_LINE_HEIGHT = 14;\nconst CODE_HIGHLIGHT_COLOR = '#FF0000';\nconst CODE_STANDARD_COLOR = '#000000';\n\nexport default class Algorithm {\n\tconstructor(am, w, h) {\n\t\tif (am == null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.animationManager = am;\n\t\tam.addListener('AnimationStarted', this, this.disableUI);\n\t\tam.addListener('AnimationEnded', this, this.enableUI);\n\t\tam.addListener('AnimationUndo', this, this.undo);\n\t\tthis.canvasWidth = w;\n\t\tthis.canvasHeight = h;\n\n\t\tthis.actionHistory = [];\n\t\tthis.recordAnimation = true;\n\t\tthis.commands = [];\n\t}\n\n\taddCodeToCanvasBase(code, start_x, start_y, line_height, standard_color, layer) {\n\t\tline_height = typeof line_height !== 'undefined' ? line_height : CODE_LINE_HEIGHT;\n\t\tstandard_color =\n\t\t\ttypeof standard_color !== 'undefined' ? standard_color : CODE_STANDARD_COLOR;\n\t\tlayer = typeof layer !== 'undefined' ? layer : 0;\n\t\tconst codeID = Array(code.length);\n\t\t//console.log(this.nextIndex);\n\t\tlet i, j;\n\t\tfor (i = 0; i < code.length; i++) {\n\t\t\tcodeID[i] = new Array(code[i].length);\n\t\t\tfor (j = 0; j < code[i].length; j++) {\n\t\t\t\tcodeID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tcodeID[i][j],\n\t\t\t\t\tcode[i][j],\n\t\t\t\t\tstart_x,\n\t\t\t\t\tstart_y + i * line_height,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, codeID[i][j], standard_color);\n\t\t\t\tthis.cmd(act.setLayer, codeID[i][j], layer);\n\t\t\t\tif (j > 0) {\n\t\t\t\t\tthis.cmd(act.alignRight, codeID[i][j], codeID[i][j - 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn codeID;\n\t}\n\n\thighlight(ind1, ind2) {\n\t\tthis.cmd(act.setForegroundColor, this.codeID[ind1][ind2], CODE_HIGHLIGHT_COLOR);\n\t}\n\n\tunhighlight(ind1, ind2) {\n\t\tthis.cmd(act.setForegroundColor, this.codeID[ind1][ind2], CODE_STANDARD_COLOR);\n\t}\n\n\tremoveCode(codeID) {\n\t\tfor (let i = 0; i < codeID.length; i++) {\n\t\t\tfor (let j = 0; j < codeID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, codeID[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetCodeAlpha(code, newAlpha) {\n\t\tfor (let i = 0; i < code.length; i++) {\n\t\t\tfor (let j = 0; j < code[i].length; j++) {\n\t\t\t\tthis.cmd(act.setAlpha, code[i][j], newAlpha);\n\t\t\t}\n\t\t}\n\t}\n\n\tcmd(act, ...params) {\n\t\t// Helper method to add command to stack\n\t\tif (this.recordAnimation) {\n\t\t\tthis.commands.push([act, params]);\n\t\t}\n\t}\n\n\tclearHistory() {\n\t\tthis.actionHistory = [];\n\t}\n\n\tundo() {\n\t\t// Remove the last action (the one that we are going to undo)\n\t\tthis.actionHistory.pop();\n\t\t// Clear out our data structure.  Be sure to implement reset in\n\t\t// every AlgorithmAnimation subclass!\n\t\tthis.reset();\n\t\t//  Redo all actions from the beginning, throwing out the animation\n\t\t//  commands (the animation manager will update the animation on its own).\n\t\t//  Note that if you do something non-deterministic, you might cause problems!\n\t\t//  Be sure if you do anything non-deterministic (that is, calls to a random\n\t\t//  number generator) you clear out the undo stack here and in the animation\n\t\t//  manager.\n\n\t\t//  If this seems horribly inefficient -- it is! However, it seems to work well\n\t\t//  in practice, and you get undo for free for all algorithms, which is a non-trivial\n\t\t//  gain.\n\t\tconst len = this.actionHistory.length;\n\t\tthis.recordAnimation = false;\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tthis.actionHistory[i][0](...this.actionHistory[i][1]);\n\t\t}\n\t\tthis.recordAnimation = true;\n\t}\n\n\timplementAction(func, ...args) {\n\t\tconst next = [func, args];\n\t\tthis.actionHistory.push(next);\n\t\tconst retVal = func(...args);\n\t\tthis.animationManager.startNewAnimation(retVal);\n\t}\n\n\tnormalizeNumber(input, maxLen) {\n\t\tconst isAllDigits = str => !/\\D/.test(str);\n\t\tif (!isAllDigits(input) || input === '') {\n\t\t\treturn input;\n\t\t}\n\t\treturn input.substr(-maxLen);\n\t}\n\n\treturnSubmit(field, funct, maxsize, intOnly) {\n\t\tif (maxsize !== undefined) {\n\t\t\tfield.size = maxsize;\n\t\t}\n\t\treturn function (event) {\n\t\t\tlet keyASCII = 0;\n\t\t\tif (window.event) {\n\t\t\t\t// IE\n\t\t\t\tkeyASCII = event.keyCode;\n\t\t\t} else if (event.which) {\n\t\t\t\t// Netscape/Firefox/Opera\n\t\t\t\tkeyASCII = event.which;\n\t\t\t}\n\n\t\t\tif (keyASCII === 13 && funct != null) {\n\t\t\t\tfunct();\n\t\t\t} else if (\n\t\t\t\tkeyASCII === 190 ||\n\t\t\t\tkeyASCII === 59 ||\n\t\t\t\tkeyASCII === 173 ||\n\t\t\t\tkeyASCII === 189\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t} else if (\n\t\t\t\t(maxsize !== undefined && field.value.length >= maxsize) ||\n\t\t\t\t(intOnly && (keyASCII < 48 || keyASCII > 57))\n\t\t\t) {\n\t\t\t\tif (!controlKey(keyASCII)) return false;\n\t\t\t}\n\t\t};\n\t}\n\n\t// Abstract methods - these should be implemented in the base class\n\n\t// eslint-disable-next-line no-unused-vars\n\tsizeChanged(newWidth, newHeight) {\n\t\tthrow new Error('sizeChanged() should be implemented in base class');\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tdisableUI(event) {\n\t\tthrow new Error('disableUI() should be implemented in base class');\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tenableUI(event) {\n\t\tthrow new Error('enableUI() should be implemented in base class');\n\t}\n\n\treset() {\n\t\tthrow new Error('reset() should be implemented in base class');\n\t}\n}\n\nexport function controlKey(keyASCII) {\n\treturn (\n\t\tkeyASCII === 8 ||\n\t\tkeyASCII === 9 ||\n\t\tkeyASCII === 37 ||\n\t\tkeyASCII === 38 ||\n\t\tkeyASCII === 39 ||\n\t\tkeyASCII === 40 ||\n\t\tkeyASCII === 46\n\t);\n}\n\nAlgorithm.prototype.returnSubmitFloat = function (field, funct, maxsize) {\n\tif (maxsize !== undefined) {\n\t\tfield.size = maxsize;\n\t}\n\treturn function (event) {\n\t\tlet keyASCII = 0;\n\t\tif (window.event) {\n\t\t\t// IE\n\t\t\tkeyASCII = event.keyCode;\n\t\t} else if (event.which) {\n\t\t\t// Netscape/Firefox/Opera\n\t\t\tkeyASCII = event.which;\n\t\t}\n\t\t// Submit on return\n\t\tif (keyASCII === 13) {\n\t\t\tfunct();\n\t\t}\n\t\t// Control keys (arrows, del, etc) are always OK\n\t\telse if (controlKey(keyASCII)) {\n\t\t\treturn;\n\t\t}\n\t\t// - (minus sign) only OK at beginning of number\n\t\t//  (For now we will allow anywhere -- hard to see where the beginning of the\n\t\t//   number is ...)\n\t\t//else if (keyASCII == 109 && field.value.length  == 0)\n\t\telse if (keyASCII === 109) {\n\t\t\treturn;\n\t\t}\n\t\t// Digis are OK if we have enough space\n\t\telse if (\n\t\t\t(maxsize !== undefined || field.value.length < maxsize) &&\n\t\t\tkeyASCII >= 48 &&\n\t\t\tkeyASCII <= 57\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// . (Decimal point) is OK if we haven't had one yet, and there is space\n\t\telse if (\n\t\t\t(maxsize !== undefined || field.value.length < maxsize) &&\n\t\t\tkeyASCII === 190 &&\n\t\t\tfield.value.indexOf('.') === -1\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// Nothing else is OK\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t};\n};\n\nAlgorithm.prototype.addReturnSubmit = function (field, action) {\n\tfield.onkeydown = this.returnSubmit(field, action, 4, false);\n};\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nexport default class AVL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.first_print_pos_y = h - 2 * AVL.PRINT_VERTICAL_GAP;\n\t\tthis.print_max = w - 10;\n\t\tthis.startingX = w / 2;\n\t\tthis.addControls();\n\t\tthis.nextIndex = 1;\n\t\tthis.commands = [];\n\t\tthis.edges = [];\n\t\tthis.cmd(act.createLabel, 0, '', AVL.EXPLANITORY_TEXT_X, AVL.EXPLANITORY_TEXT_Y, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.printButton = addControlToAlgorithmBar('Button', 'Print');\n\t\tthis.printButton.onclick = this.printCallback.bind(this);\n\t\tthis.controls.push(this.printButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst predSuccButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Predecessor', 'Successor'],\n\t\t\t'Predecessor/Successor',\n\t\t);\n\n\t\tthis.predButton = predSuccButtonList[0];\n\t\tthis.succButton = predSuccButtonList[1];\n\t\tthis.predButton.onclick = () => (this.predSucc = 'pred');\n\t\tthis.succButton.onclick = () => (this.predSucc = 'succ');\n\t\tthis.succButton.checked = true;\n\t\tthis.predSucc = 'succ';\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 1;\n\t\tthis.treeRoot = null;\n\t\tthis.edges = [];\n\t}\n\n\tinsertCallback() {\n\t\tlet insertedValue = this.insertField.value;\n\t\t// Get text value\n\t\tinsertedValue = this.normalizeNumber(insertedValue, 4);\n\t\tif (insertedValue !== '') {\n\t\t\t// set text value\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tlet deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tdeletedValue = this.normalizeNumber(deletedValue, 4);\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.remove.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tlet findValue = this.findField.value;\n\t\tif (findValue !== '') {\n\t\t\tfindValue = this.normalizeNumber(findValue, 4);\n\t\t\tthis.findField.value = '';\n\t\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t\t}\n\t}\n\n\tprintCallback() {\n\t\tthis.implementAction(this.printTree.bind(this));\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tsizeChanged(newWidth) {\n\t\tthis.startingX = newWidth / 2;\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\n\t\tif (this.treeRoot != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tconst firstLabel = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tAVL.HIGHLIGHT_COLOR,\n\t\t\t\tthis.treeRoot.x,\n\t\t\t\tthis.treeRoot.y,\n\t\t\t);\n\t\t\tthis.xPosOfNextLabel = AVL.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\t\t\tthis.printTreeRec(this.treeRoot);\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let i = firstLabel; i < this.nextIndex; i++) this.cmd(act.delete, i);\n\t\t\tthis.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.printTreeRec(tree.left);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, AVL.PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += AVL.PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = AVL.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += AVL.PRINT_VERTICAL_GAP;\n\t\t}\n\t\tif (tree.right != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.printTreeRec(tree.right);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\treturn;\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tthis.doFind(this.treeRoot, findValue);\n\n\t\treturn this.commands;\n\t}\n\n\tdoFind(tree, value) {\n\t\tthis.cmd(act.setText, 0, 'Searchiing for ' + value);\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tif (tree.data === value) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Searching for ' + value + ' : ' + value + ' = ' + value + ' (Element found!)',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Found:' + value);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t} else {\n\t\t\t\tif (tree.data > value) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to left subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.left != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tAVL.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.left, value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t' Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' > ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to right subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.right != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tAVL.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.right, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\t' Searching for ' + value + ' : < Empty Tree > (Element not found)',\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, ' Searching for ' + value + ' :  (Element not found)');\n\t\t}\n\t}\n\n\tremakeTree(curr) {\n\t\tif (curr == null) return;\n\t\tif (curr.left != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.left.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.left);\n\t\t}\n\t\tif (curr.right != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.right.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.right);\n\t\t}\n\t}\n\n\tadd(data) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, ' Inserting ' + data);\n\t\tthis.treeRoot = this.addH(data, this.treeRoot);\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\taddH(data, curr) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, 'Null found, inserting new node');\n\t\t\tconst treeNodeID = this.nextIndex++;\n\t\t\tconst heightLabelID = this.nextIndex++;\n\t\t\tconst bfLabelID = this.nextIndex++;\n\t\t\tthis.cmd(act.createCircle, treeNodeID, data, 30, AVL.STARTING_Y);\n\n\t\t\tthis.cmd(act.setForegroundColor, treeNodeID, AVL.FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, treeNodeID, AVL.BACKGROUND_COLOR);\n\t\t\tthis.cmd(act.createLabel, heightLabelID, 0, 30 - 20, AVL.STARTING_Y - 20);\n\t\t\tthis.cmd(act.setForegroundColor, heightLabelID, AVL.HEIGHT_LABEL_COLOR);\n\n\t\t\tthis.cmd(act.createLabel, bfLabelID, 0, 30 + 20, AVL.STARTING_Y - 20);\n\t\t\tthis.cmd(act.setForegroundColor, bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn new AVLNode(data, treeNodeID, heightLabelID, bfLabelID, 0, 0);\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking at left subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.addH(data, curr.left);\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking at right subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.addH(data, curr.right);\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, `${data} == ${curr.data}. Ignoring duplicate!`);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tconnectSmart(id1, id2) {\n\t\tif (!this.edges.some(e => e[0] === id1 && e[1] === id2)) {\n\t\t\tthis.cmd(act.connect, id1, id2, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.setEdgeAlpha, id1, id2, AVL.LINK_OPACITY);\n\t\t\tthis.edges.push([id1, id2]);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tbalance(curr) {\n\t\tcurr.updateHeightAndBF();\n\t\tthis.cmd(act.setText, curr.heightLabelID, curr.height);\n\t\tthis.cmd(act.setText, curr.bfLabelID, curr.bf);\n\t\tthis.cmd(act.setText, 0, 'Adjusting height and balance factor after recursive call');\n\t\tthis.cmd(act.step);\n\n\t\tif (curr.bf < -1) {\n\t\t\tthis.cmd(act.setText, 0, 'Balance factor < -1');\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tif (curr.right != null && curr.right.bf > 0) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Right child balance factor > 0');\n\t\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Right-left rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\t\tcurr.right = this.singleRotateRight(curr.right);\n\t\t\t} else {\n\t\t\t\tif (curr.right != null) {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'Right child balance factor <= 0');\n\t\t\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'No right child');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setText, 0, 'Left rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.setTextColor, curr.right.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tcurr = this.singleRotateLeft(curr);\n\t\t} else if (curr.bf > 1) {\n\t\t\tthis.cmd(act.setText, 0, 'Balance factor > 1');\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tif (curr.left != null && curr.left.bf < 0) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Left child balance factor < 0');\n\t\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Left-right rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\t\tcurr.left = this.singleRotateLeft(curr.left);\n\t\t\t} else {\n\t\t\t\tif (curr.left != null) {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'Left child balance factor >= 0');\n\t\t\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HIGHLIGHT_LABEL_COLOR);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, 'No left child');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setText, 0, 'Right rotation');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\t}\n\t\t\tthis.cmd(act.setTextColor, curr.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tthis.cmd(act.setTextColor, curr.left.bfLabelID, AVL.HEIGHT_LABEL_COLOR);\n\t\t\tcurr = this.singleRotateRight(curr);\n\t\t}\n\t\treturn curr;\n\t}\n\n\tsingleRotateRight(tree) {\n\t\tconst B = tree;\n\t\tconst A = tree.left;\n\t\tconst t2 = A.right;\n\n\t\t// this.cmd(act.setText, 0, 'Single Rotate Right');\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, A.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t2.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.setEdgeAlpha, B.graphicID, t2.graphicID, AVL.LINK_OPACITY);\n\t\t\tt2.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, B.graphicID, A.graphicID);\n\t\tthis.cmd(act.connect, A.graphicID, B.graphicID, AVL.LINK_COLOR);\n\t\tthis.cmd(act.setEdgeAlpha, A.graphicID, B.graphicID, AVL.LINK_OPACITY);\n\t\tA.parent = B.parent;\n\t\tif (this.treeRoot === B) {\n\t\t\tthis.treeRoot = A;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, B.parent.graphicID, B.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.connect, B.parent.graphicID, A.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.setEdgeAlpha, B.parent.graphicID, A.graphicID, AVL.LINK_OPACITY);\n\n\t\t\tif (B.isLeftChild()) {\n\t\t\t\tB.parent.left = A;\n\t\t\t} else {\n\t\t\t\tB.parent.right = A;\n\t\t\t}\n\t\t}\n\t\tA.right = B;\n\t\tB.parent = A;\n\t\tB.left = t2;\n\t\tthis.cmd(act.setHighlight, A.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, B.graphicID, 0);\n\t\tB.updateHeightAndBF();\n\t\tthis.cmd(act.setText, B.heightLabelID, B.height);\n\t\tthis.cmd(act.setText, B.bfLabelID, B.bf);\n\t\tA.updateHeightAndBF();\n\t\tthis.cmd(act.setText, A.heightLabelID, A.height);\n\t\tthis.cmd(act.setText, A.bfLabelID, A.bf);\n\t\tthis.resizeTree();\n\t\treturn A;\n\t}\n\n\tsingleRotateLeft(tree) {\n\t\tconst A = tree;\n\t\tconst B = tree.right;\n\t\tconst t2 = B.left;\n\n\t\t// this.cmd(act.setText, 0, 'Single Rotate Left');\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.setEdgeAlpha, A.graphicID, t2.graphicID, AVL.LINK_OPACITY);\n\n\t\t\tt2.parent = A;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, AVL.LINK_COLOR);\n\t\tthis.cmd(act.setEdgeAlpha, B.graphicID, A.graphicID, AVL.LINK_OPACITY);\n\n\t\tB.parent = A.parent;\n\t\tif (this.treeRoot === A) {\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, B.graphicID, AVL.LINK_COLOR);\n\t\t\tthis.cmd(act.setEdgeAlpha, A.parent.graphicID, B.graphicID, AVL.LINK_OPACITY);\n\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = B;\n\t\t\t} else {\n\t\t\t\tA.parent.right = B;\n\t\t\t}\n\t\t}\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tA.right = t2;\n\t\tthis.cmd(act.setHighlight, A.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, B.graphicID, 0);\n\t\tA.updateHeightAndBF();\n\t\tthis.cmd(act.setText, A.heightLabelID, A.height);\n\t\tthis.cmd(act.setText, A.bfLabelID, A.bf);\n\t\tB.updateHeightAndBF();\n\t\tthis.cmd(act.setText, B.heightLabelID, B.height);\n\t\tthis.cmd(act.setText, B.bfLabelID, B.bf);\n\n\t\tthis.resizeTree();\n\t\treturn B;\n\t}\n\n\tgetHeight(tree) {\n\t\tif (tree == null) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn tree.height;\n\t}\n\n\tresetHeight(tree) {\n\t\tif (tree != null) {\n\t\t\tconst newHeight = Math.max(this.getHeight(tree.left), this.getHeight(tree.right)) + 1;\n\t\t\tif (tree.height !== newHeight) {\n\t\t\t\ttree.height = Math.max(this.getHeight(tree.left), this.getHeight(tree.right)) + 1;\n\t\t\t\tthis.cmd(act.setText, tree.heightLabelID, newHeight);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteNode(curr) {\n\t\tthis.cmd(act.delete, curr.graphicID);\n\t\tthis.cmd(act.delete, curr.heightLabelID);\n\t\tthis.cmd(act.delete, curr.bfLabelID);\n\t}\n\n\tremove(data) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, 0, `Deleting ${data}`);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, ' ');\n\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.treeRoot = this.removeH(this.treeRoot, data);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\tremoveH(curr, data) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, `${data} not found in the tree`);\n\t\t\treturn;\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking left`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.removeH(curr.left, data);\n\t\t\tif (curr.left != null) {\n\t\t\t\tcurr.left.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking right`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.removeH(curr.right, data);\n\t\t\tif (curr.right != null) {\n\t\t\t\tcurr.right.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else {\n\t\t\tif (curr.left == null && curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Element to delete is a leaf node');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn null;\n\t\t\t} else if (curr.left == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with right child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.right;\n\t\t\t} else if (curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with left child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.left;\n\t\t\t} else {\n\t\t\t\tconst dummy = [];\n\t\t\t\tif (this.predSucc === 'succ') {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with successor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.right = this.removeSucc(curr.right, dummy);\n\t\t\t\t\tcurr.right && this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with predecessor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.left = this.removePred(curr.left, dummy);\n\t\t\t\t\tcurr.left && this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\t}\n\t\t\t\tthis.resizeTree();\n\t\t\t\tcurr.data = dummy[0];\n\t\t\t\tthis.cmd(act.setText, curr.graphicID, curr.data);\n\t\t\t}\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tremoveSucc(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.left == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No left child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.right;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Left child exists, look left');\n\t\tthis.cmd(act.step);\n\t\tcurr.left = this.removeSucc(curr.left, dummy);\n\t\tif (curr.left != null) {\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\treturn curr;\n\t}\n\n\tremovePred(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.right == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No right child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.left;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Right child exists, look right');\n\t\tthis.cmd(act.step);\n\t\tcurr.right = this.removePred(curr.right, dummy);\n\t\tif (curr.right != null) {\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tcurr = this.balance(curr);\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\treturn curr;\n\t}\n\n\tresizeTree() {\n\t\tif (this.treeRoot == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet startingPoint = this.startingX;\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tif (this.treeRoot != null) {\n\t\t\tif (this.treeRoot.leftWidth > startingPoint) {\n\t\t\t\tstartingPoint = this.treeRoot.leftWidth;\n\t\t\t} else if (this.treeRoot.rightWidth > startingPoint) {\n\t\t\t\tstartingPoint = Math.max(\n\t\t\t\t\tthis.treeRoot.leftWidth,\n\t\t\t\t\t2 * startingPoint - this.treeRoot.rightWidth,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.setNewPositions(this.treeRoot, startingPoint, AVL.STARTING_Y, 0);\n\t\t\tthis.animateNewPositions(this.treeRoot);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition, side) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\tif (side === -1) {\n\t\t\t\txPosition = xPosition - tree.rightWidth;\n\t\t\t\ttree.heightLabelX = xPosition - 20;\n\t\t\t\ttree.bfLabelX = xPosition + 20;\n\t\t\t} else if (side === 1) {\n\t\t\t\txPosition = xPosition + tree.leftWidth;\n\t\t\t\ttree.heightLabelX = xPosition - 20;\n\t\t\t\ttree.bfLabelX = xPosition + 20;\n\t\t\t} else {\n\t\t\t\ttree.heightLabelX = xPosition - 20;\n\t\t\t\ttree.bfLabelX = xPosition + 20;\n\t\t\t}\n\t\t\ttree.x = xPosition;\n\t\t\ttree.heightLabelY = tree.y - 20;\n\t\t\ttree.bfLabelY = tree.y - 20;\n\t\t\tthis.setNewPositions(tree.left, xPosition, yPosition + AVL.HEIGHT_DELTA, -1);\n\t\t\tthis.setNewPositions(tree.right, xPosition, yPosition + AVL.HEIGHT_DELTA, 1);\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t\t\tthis.cmd(act.move, tree.heightLabelID, tree.heightLabelX, tree.heightLabelY);\n\t\t\tthis.cmd(act.move, tree.bfLabelID, tree.bfLabelX, tree.bfLabelY);\n\t\t\tthis.animateNewPositions(tree.left);\n\t\t\tthis.animateNewPositions(tree.right);\n\t\t}\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\ttree.leftWidth = Math.max(this.resizeWidths(tree.left), AVL.WIDTH_DELTA / 2);\n\t\ttree.rightWidth = Math.max(this.resizeWidths(tree.right), AVL.WIDTH_DELTA / 2);\n\t\treturn tree.leftWidth + tree.rightWidth;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.recClear(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\treturn this.commands;\n\t}\n\n\trecClear(curr) {\n\t\tif (curr != null) {\n\t\t\tthis.cmd(act.delete, curr.graphicID);\n\t\t\tthis.cmd(act.delete, curr.heightLabelID);\n\t\t\tthis.cmd(act.delete, curr.bfLabelID);\n\t\t\tthis.recClear(curr.left);\n\t\t\tthis.recClear(curr.right);\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n\nclass AVLNode {\n\tconstructor(val, id, hid, bfid, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\t\tthis.heightLabelID = hid;\n\t\tthis.bfLabelID = bfid;\n\t\tthis.height = 0;\n\t\tthis.bf = 0;\n\n\t\tthis.graphicID = id;\n\t\tthis.left = null;\n\t\tthis.right = null;\n\t\tthis.parent = null;\n\t}\n\n\tupdateHeightAndBF() {\n\t\tconst h = node => (node == null ? -1 : node.height);\n\t\tconst l = h(this.left);\n\t\tconst r = h(this.right);\n\t\tthis.height = Math.max(l, r) + 1;\n\t\tthis.bf = l - r;\n\t}\n\n\tisLeftChild() {\n\t\tif (this.parent == null) {\n\t\t\treturn true;\n\t\t}\n\t\treturn this.parent.left === this;\n\t}\n}\n\n// Various constants\n\nAVL.HIGHLIGHT_LABEL_COLOR = '#FF0000';\nAVL.HIGHLIGHT_LINK_COLOR = '#FF0000';\n\nAVL.HIGHLIGHT_COLOR = '#007700';\nAVL.HEIGHT_LABEL_COLOR = '#065e9d';\n\nAVL.LINK_COLOR = '#00B000';\nAVL.LINK_OPACITY = 0.25;\nAVL.HIGHLIGHT_CIRCLE_COLOR = '#007700';\nAVL.FOREGROUND_COLOR = '#007700';\nAVL.BACKGROUND_COLOR = '#DDFFDD';\nAVL.PRINT_COLOR = AVL.FOREGROUND_COLOR;\n\nAVL.WIDTH_DELTA = 50;\nAVL.HEIGHT_DELTA = 50;\nAVL.STARTING_Y = 50;\n\nAVL.FIRST_PRINT_POS_X = 50;\nAVL.PRINT_VERTICAL_GAP = 20;\nAVL.PRINT_HORIZONTAL_GAP = 50;\nAVL.EXPLANITORY_TEXT_X = 10;\nAVL.EXPLANITORY_TEXT_Y = 10;\n","// General\n\nconst LARGE_ALLOWED = [\n\t[\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t],\n\t[\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t],\n\t[\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\tfalse,\n\t\ttrue,\n\t\tfalse,\n\t\ttrue,\n\t\ttrue,\n\t\tfalse,\n\t],\n];\n\nconst LARGE_CURVE = [\n\t[0, 0, -0.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.25, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.25],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[-0.25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.4],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.4, 0, 0],\n];\n\nconst LARGE_X_POS_LOGICAL = [\n\t600,\n\t700,\n\t800,\n\t900,\n\t650,\n\t750,\n\t850,\n\t600,\n\t700,\n\t800,\n\t900,\n\t650,\n\t750,\n\t850,\n\t600,\n\t700,\n\t800,\n\t900,\n];\n\nconst LARGE_Y_POS_LOGICAL = [\n\t50,\n\t50,\n\t50,\n\t50,\n\t150,\n\t150,\n\t150,\n\t250,\n\t250,\n\t250,\n\t250,\n\t350,\n\t350,\n\t350,\n\t450,\n\t450,\n\t450,\n\t450,\n];\n\nconst SMALL_ALLLOWED = [\n\t[false, true, true, true, true, false, false, false],\n\t[true, false, true, true, false, true, true, false],\n\t[true, true, false, false, true, true, true, false],\n\t[true, true, false, false, false, true, false, true],\n\t[true, false, true, false, false, false, true, true],\n\t[false, true, true, true, false, false, true, true],\n\t[false, true, true, false, true, true, false, true],\n\t[false, false, false, true, true, true, true, false],\n];\n\nconst SMALL_CURVE = [\n\t[0, 0.001, 0, 0.5, -0.5, 0, 0, 0],\n\t[0, 0, 0, 0.001, 0, 0.001, -0.2, 0],\n\t[0, 0.001, 0, 0, 0, 0.2, 0, 0],\n\t[-0.5, 0, 0, 0, 0, 0.001, 0, 0.5],\n\t[0.5, 0, 0, 0, 0, 0, 0, -0.5],\n\t[0, 0, -0.2, 0, 0, 0, 0.001, 0.001],\n\t[0, 0.2, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, -0.5, 0.5, 0, 0, 0],\n];\n\nconst SMALL_X_POS_LOGICAL = [800, 725, 875, 650, 950, 725, 875, 800];\nconst SMALL_Y_POS_LOGICAL = [25, 125, 125, 225, 225, 325, 325, 425];\n\n// BFS / DFS\n\nconst BFS_DFS_ADJ_LIST =\n\t//A     B      C     D      E     F      G      H\n\t/*A*/ [\n\t\t[0, 1, 1, 1, 1, 0, 0, 0],\n\t\t/*B*/ [1, 0, 0, 0, 0, 0, 1, 0],\n\t\t/*C*/ [1, 0, 0, 0, 0, 0, 0, 0],\n\t\t/*D*/ [1, 0, 0, 0, 0, 1, 0, 0],\n\t\t/*E*/ [1, 0, 0, 0, 0, 0, 1, 0],\n\t\t/*F*/ [0, 0, 0, 1, 0, 0, 1, 0],\n\t\t/*G*/ [0, 1, 0, 0, 1, 1, 0, 1],\n\t\t/*H*/ [0, 0, 0, 0, 0, 0, 1, 0],\n\t].map(row => row.map(x => x || -1)); // Turn 0s to -1s\n\n// Dijkstra's\n\nconst DIJKSTRAS_ADJ_LIST =\n\t//A     B      C     D      E     F      G      H\n\t/*A*/ [\n\t\t[0, 8, 2, 5, 0, 0, 0, 0],\n\t\t/*B*/ [8, 0, 1, 1, 0, 0, 7, 0],\n\t\t/*C*/ [2, 1, 0, 0, 3, 0, 0, 0],\n\t\t/*D*/ [5, 1, 0, 0, 0, 4, 0, 0],\n\t\t/*E*/ [0, 0, 3, 0, 0, 0, 2, 0],\n\t\t/*F*/ [0, 0, 0, 4, 0, 0, '0', 1], // Hacky way to get actual 0 in final matrix\n\t\t/*G*/ [0, 7, 0, 0, 2, '0', 0, 1],\n\t\t/*H*/ [0, 0, 0, 0, 0, 1, 1, 0],\n\t].map(row => row.map(x => Number(x || -1))); // '0' is truthy, so we can cast it after the ||\n\n// Prim's / Kruskal's\n\nconst PRIMS_KRUSKALS_ADJ_LIST =\n\t//A     B      C     D      E     F      G      H\n\t/*A*/ [\n\t\t[0, 1, 5, 0, 0, 0, 0, 0],\n\t\t/*B*/ [1, 0, 7, 9, 0, 0, 1, 0],\n\t\t/*C*/ [5, 7, 0, 0, 0, 0, 13, 0],\n\t\t/*D*/ [0, 9, 0, 0, 0, 4, 0, 0],\n\t\t/*E*/ [0, 0, 0, 0, 0, 0, 10, 0],\n\t\t/*F*/ [0, 0, 0, 4, 0, 0, 2, '0'],\n\t\t/*G*/ [0, 1, 13, 0, 10, 2, 0, 3],\n\t\t/*H*/ [0, 0, 0, 0, 0, '0', 3, 0],\n\t].map(row => row.map(x => Number(x || -1)));\n\n// Color coding for Disjoint Set in Kruskal's\n\nconst KRUSKALS_DS_COLORS = [\n\t'#9b9bd4',\n\t'#6aaf6a',\n\t'#f07575',\n\t'#ffe866',\n\t'#b8f9b8',\n\t'#ff99ff',\n\t'#99ffff',\n\t'#ffccd4',\n];\n\nexport {\n\tLARGE_ALLOWED,\n\tLARGE_CURVE,\n\tLARGE_X_POS_LOGICAL,\n\tLARGE_Y_POS_LOGICAL,\n\tSMALL_X_POS_LOGICAL,\n\tSMALL_Y_POS_LOGICAL,\n\tSMALL_ALLLOWED,\n\tSMALL_CURVE,\n\tBFS_DFS_ADJ_LIST,\n\tDIJKSTRAS_ADJ_LIST,\n\tPRIMS_KRUSKALS_ADJ_LIST,\n\tKRUSKALS_DS_COLORS,\n};\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\n// TODO:  UNDO (all the way) is BROKEN.  Redo reset ...\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport {\n\tLARGE_ALLOWED,\n\tLARGE_CURVE,\n\tLARGE_X_POS_LOGICAL,\n\tLARGE_Y_POS_LOGICAL,\n\tSMALL_ALLLOWED,\n\tSMALL_CURVE,\n\tSMALL_X_POS_LOGICAL,\n\tSMALL_Y_POS_LOGICAL,\n} from './util/GraphValues.js';\nimport { act } from '../anim/AnimationMain';\n\nconst SMALL_ADJ_MATRIX_X_START = 700;\nconst SMALL_ADJ_MATRIX_Y_START = 45;\nconst SMALL_ADJ_MATRIX_WIDTH = 30;\nconst SMALL_ADJ_MATRIX_HEIGHT = 30;\n\nconst SMALL_ADJ_LIST_X_START = 600;\nconst SMALL_ADJ_LIST_Y_START = 30;\n\nconst SMALL_ADJ_LIST_ELEM_WIDTH = 80;\nconst SMALL_ADJ_LIST_ELEM_HEIGHT = 30;\n\nconst SMALL_ADJ_LIST_HEIGHT = 36;\nconst SMALL_ADJ_LIST_WIDTH = 36;\n\nconst SMALL_ADJ_LIST_SPACING_AFTER_LIST = 15;\nconst SMALL_ADJ_LIST_SPACING_BETWEEN_NODES = 15;\n\nconst LARGE_ADJ_MATRIX_X_START = 575;\nconst LARGE_ADJ_MATRIX_Y_START = 40;\nconst LARGE_ADJ_MATRIX_WIDTH = 23;\nconst LARGE_ADJ_MATRIX_HEIGHT = 23;\n\nconst LARGE_ADJ_LIST_X_START = 550;\nconst LARGE_ADJ_LIST_Y_START = 30;\n\nconst LARGE_ADJ_LIST_ELEM_WIDTH = 80;\nconst LARGE_ADJ_LIST_ELEM_HEIGHT = 20;\n\nconst LARGE_ADJ_LIST_HEIGHT = 25;\nconst LARGE_ADJ_LIST_WIDTH = 20;\n\nconst LARGE_ADJ_LIST_SPACING_AFTER_LIST = 25;\nconst LARGE_ADJ_LIST_SPACING_BETWEEN_NODES = 15;\n\nexport const VERTEX_INDEX_COLOR = '#0000FF';\nexport const EDGE_COLOR = '#000000';\n\nconst HIGHLIGHT_CIRCLE_COLOR = '#000000';\n\nexport const SMALL_SIZE = 8;\nexport const LARGE_SIZE = 18;\n\nexport default class Graph extends Algorithm {\n\tconstructor(am, w, h, defaultEdges, dir, dag, costs) {\n\t\tsuper(am, w, h);\n\t\tthis.controls = [];\n\t\tdefaultEdges = defaultEdges === [] ? undefined : defaultEdges;\n\t\tdir = dir === undefined ? false : dir;\n\t\tdag = dag === undefined ? false : dag;\n\t\tcosts = costs === undefined ? false : costs;\n\n\t\tthis.nextIndex = 0;\n\n\t\tthis.currentLayer = 1;\n\t\tthis.defaultEdges = defaultEdges;\n\t\tthis.directed = dir;\n\t\tthis.isDAG = dag;\n\t\tthis.showEdgeCosts = costs;\n\t\tthis.currentLayer = 1;\n\n\t\tthis.setup_small(this.defaultEdges);\n\t}\n\n\taddControls(addDirection) {\n\t\tif (addDirection == null) {\n\t\t\taddDirection = true;\n\t\t}\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\t\tthis.newGraphButton = addControlToAlgorithmBar('Button', 'New Graph', verticalGroup);\n\t\tthis.newGraphButton.onclick = this.newGraphCallback.bind(this);\n\t\tthis.controls.push(this.newGraphButton);\n\t\tthis.defaultGraphButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Default Graph',\n\t\t\tverticalGroup,\n\t\t);\n\t\tthis.defaultGraphButton.onclick = this.defaultGraphCallback.bind(this);\n\t\tthis.defaultGraphButton.disabled = true;\n\t\tthis.controls.push(this.defaultGraphButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tif (addDirection) {\n\t\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t\t['Undirected Graph', 'Directed Graph'],\n\t\t\t\t'GraphType',\n\t\t\t);\n\n\t\t\tthis.undirectedGraphButton = radioButtonList[0];\n\t\t\tthis.undirectedGraphButton.onclick = this.directedGraphCallback.bind(this, false);\n\t\t\tthis.undirectedGraphButton.checked = !this.directed;\n\t\t\tthis.controls.push(this.undirectedGraphButton);\n\n\t\t\tthis.directedGraphButton = radioButtonList[1];\n\t\t\tthis.directedGraphButton.onclick = this.directedGraphCallback.bind(this, true);\n\t\t\tthis.directedGraphButton.checked = this.directed;\n\t\t\tthis.controls.push(this.directedGraphButton);\n\n\t\t\taddDivisorToAlgorithmBar();\n\t\t}\n\n\t\tlet radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Small Graph', 'Large Graph'],\n\t\t\t'GraphSize',\n\t\t);\n\n\t\tthis.smallGraphButton = radioButtonList[0];\n\t\tthis.smallGraphButton.onclick = this.smallGraphCallback.bind(this);\n\t\tthis.smallGraphButton.checked = true;\n\t\tthis.controls.push(this.smallGraphButton);\n\n\t\tthis.largeGraphButton = radioButtonList[1];\n\t\tthis.largeGraphButton.onclick = this.largeGraphCallback.bind(this);\n\t\tthis.controls.push(this.largeGraphButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// We are explicitly not adding the buttons below to this.controls\n\t\t// since we don't want them to be disabled\n\t\tradioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t[\n\t\t\t\t'Logical Representation',\n\t\t\t\t'Adjacency List Representation',\n\t\t\t\t'Adjacency Matrix Representation',\n\t\t\t],\n\t\t\t'GraphRepresentation',\n\t\t);\n\n\t\tthis.logicalButton = radioButtonList[0];\n\t\tthis.logicalButton.onclick = this.graphRepChangedCallback.bind(this, 1);\n\n\t\tthis.adjacencyListButton = radioButtonList[1];\n\t\tthis.adjacencyListButton.onclick = this.graphRepChangedCallback.bind(this, 2);\n\n\t\tthis.adjacencyMatrixButton = radioButtonList[2];\n\t\tthis.adjacencyMatrixButton.onclick = this.graphRepChangedCallback.bind(this, 3);\n\t\tthis.logicalButton.checked = true;\n\t}\n\n\tdirectedGraphCallback(newDirected) {\n\t\tif (newDirected !== this.directed) {\n\t\t\tthis.defaultGraphButton.disabled = newDirected;\n\t\t\tthis.directed = newDirected;\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup();\n\t\t}\n\t}\n\n\tsmallGraphCallback() {\n\t\tif (this.size !== SMALL_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup_small();\n\t\t}\n\t}\n\n\tlargeGraphCallback() {\n\t\tif (this.size !== LARGE_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup_large();\n\t\t}\n\t}\n\n\tnewGraphCallback() {\n\t\tthis.animationManager.resetAll();\n\t\tthis.setup();\n\t}\n\n\tdefaultGraphCallback() {\n\t\tthis.animationManager.resetAll();\n\t\tthis.setup(this.defaultEdges);\n\t}\n\n\tgraphRepChangedCallback(newLayer) {\n\t\tthis.animationManager.setAllLayers([0, newLayer]);\n\t\tthis.currentLayer = newLayer;\n\t}\n\n\trecolorGraph() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tthis.setEdgeColor(i, j, EDGE_COLOR);\n\t\t\t\t\tthis.setEdgeThickness(i, j, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thighlightEdge(i, j, highlightVal, color) {\n\t\tthis.cmd(act.setHighlight, this.adj_list_edges[i][j], highlightVal, color);\n\t\tthis.cmd(act.setHighlight, this.adj_matrixID[i][j], highlightVal, color);\n\t\tthis.cmd(act.setEdgeHighlight, this.circleID[i], this.circleID[j], highlightVal, color);\n\t\tif (!this.directed) {\n\t\t\tthis.cmd(act.setEdgeHighlight, this.circleID[j], this.circleID[i], highlightVal, color);\n\t\t}\n\t}\n\n\tvisitVertex(i) {\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightCircleL,\n\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\tthis.x_pos_logical[i],\n\t\t\tthis.y_pos_logical[i],\n\t\t);\n\t\tthis.cmd(act.setLayer, this.highlightCircleL, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightCircleAL,\n\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\tthis.adj_list_x_start - this.adj_list_width,\n\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t);\n\t\tthis.cmd(act.setLayer, this.highlightCircleAL, 2);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightCircleAM,\n\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\tthis.adj_matrix_x_start - this.adj_matrix_width,\n\t\t\tthis.adj_matrix_y_start + i * this.adj_matrix_height,\n\t\t);\n\t\tthis.cmd(act.setLayer, this.highlightCircleAM, 3);\n\t}\n\n\tleaveVertex() {\n\t\tthis.cmd(act.delete, this.highlightCircleL);\n\t\tthis.cmd(act.delete, this.highlightCircleAM);\n\t\tthis.cmd(act.delete, this.highlightCircleAL);\n\t}\n\n\tsetEdgeColor(i, j, color) {\n\t\tthis.cmd(act.setForegroundColor, this.adj_list_edges[i][j], color);\n\t\tthis.cmd(act.setTextColor, this.adj_matrixID[i][j], color);\n\t\tthis.cmd(act.setEdgeColor, this.circleID[i], this.circleID[j], color);\n\t\tif (!this.directed) {\n\t\t\tthis.cmd(act.setEdgeColor, this.circleID[j], this.circleID[i], color);\n\t\t}\n\t}\n\n\tsetEdgeThickness(i, j, thickness) {\n\t\tthis.cmd(act.setEdgeThickness, this.circleID[i], this.circleID[j], thickness);\n\t\tif (!this.directed) {\n\t\t\tthis.cmd(act.setEdgeThickness, this.circleID[j], this.circleID[i], thickness);\n\t\t}\n\t}\n\n\tclearEdges() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tthis.cmd(act.disconnect, this.circleID[i], this.circleID[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trebuildEdges() {\n\t\tthis.clearEdges();\n\t\tthis.buildEdges();\n\t}\n\n\tbuildEdges() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tconst edgeLabel = this.showEdgeCosts ? String(this.adj_matrix[i][j]) : '';\n\t\t\t\t\tif (this.directed) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.circleID[i],\n\t\t\t\t\t\t\tthis.circleID[j],\n\t\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t\tthis.adjustCurveForDirectedEdges(\n\t\t\t\t\t\t\t\tthis.curve[i][j],\n\t\t\t\t\t\t\t\tthis.adj_matrix[j][i] >= 0,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tedgeLabel,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (i < j) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.circleID[i],\n\t\t\t\t\t\t\tthis.circleID[j],\n\t\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t\tthis.curve[i][j],\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tedgeLabel,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetup_small(adj_matrix) {\n\t\tthis.allowed = SMALL_ALLLOWED;\n\t\tthis.curve = SMALL_CURVE;\n\t\tthis.x_pos_logical = SMALL_X_POS_LOGICAL;\n\t\tthis.y_pos_logical = SMALL_Y_POS_LOGICAL;\n\t\tthis.adj_matrix_x_start = SMALL_ADJ_MATRIX_X_START;\n\t\tthis.adj_matrix_y_start = SMALL_ADJ_MATRIX_Y_START;\n\t\tthis.adj_matrix_width = SMALL_ADJ_MATRIX_WIDTH;\n\t\tthis.adj_matrix_height = SMALL_ADJ_MATRIX_HEIGHT;\n\t\tthis.adj_list_x_start = SMALL_ADJ_LIST_X_START;\n\t\tthis.adj_list_y_start = SMALL_ADJ_LIST_Y_START;\n\t\tthis.adj_list_elem_width = SMALL_ADJ_LIST_ELEM_WIDTH;\n\t\tthis.adj_list_elem_height = SMALL_ADJ_LIST_ELEM_HEIGHT;\n\t\tthis.adj_list_height = SMALL_ADJ_LIST_HEIGHT;\n\t\tthis.adj_list_width = SMALL_ADJ_LIST_WIDTH;\n\t\tthis.adj_list_spacing_after_list = SMALL_ADJ_LIST_SPACING_AFTER_LIST;\n\t\tthis.adj_list_spacing_between_nodes = SMALL_ADJ_LIST_SPACING_BETWEEN_NODES;\n\t\tthis.size = SMALL_SIZE;\n\t\tthis.isLarge = false;\n\t\tthis.highlightCircleL = this.nextIndex++;\n\t\tthis.highlightCircleAL = this.nextIndex++;\n\t\tthis.highlightCircleAM = this.nextIndex++;\n\t\tthis.setup(adj_matrix);\n\t}\n\n\tsetup_large() {\n\t\tthis.allowed = LARGE_ALLOWED;\n\t\tthis.curve = LARGE_CURVE;\n\t\tthis.x_pos_logical = LARGE_X_POS_LOGICAL;\n\t\tthis.y_pos_logical = LARGE_Y_POS_LOGICAL;\n\t\tthis.adj_matrix_x_start = LARGE_ADJ_MATRIX_X_START;\n\t\tthis.adj_matrix_y_start = LARGE_ADJ_MATRIX_Y_START;\n\t\tthis.adj_matrix_width = LARGE_ADJ_MATRIX_WIDTH;\n\t\tthis.adj_matrix_height = LARGE_ADJ_MATRIX_HEIGHT;\n\t\tthis.adj_list_x_start = LARGE_ADJ_LIST_X_START;\n\t\tthis.adj_list_y_start = LARGE_ADJ_LIST_Y_START;\n\t\tthis.adj_list_elem_width = LARGE_ADJ_LIST_ELEM_WIDTH;\n\t\tthis.adj_list_elem_height = LARGE_ADJ_LIST_ELEM_HEIGHT;\n\t\tthis.adj_list_height = LARGE_ADJ_LIST_HEIGHT;\n\t\tthis.adj_list_width = LARGE_ADJ_LIST_WIDTH;\n\t\tthis.adj_list_spacing_after_list = LARGE_ADJ_LIST_SPACING_AFTER_LIST;\n\t\tthis.adj_list_spacing_between_nodes = LARGE_ADJ_LIST_SPACING_BETWEEN_NODES;\n\t\tthis.size = LARGE_SIZE;\n\t\tthis.isLarge = true;\n\t\tthis.highlightCircleL = this.nextIndex++;\n\t\tthis.highlightCircleAL = this.nextIndex++;\n\t\tthis.highlightCircleAM = this.nextIndex++;\n\t\tthis.setup();\n\t}\n\n\tadjustCurveForDirectedEdges(curve, bidirectional) {\n\t\tif (!this.directed || !bidirectional || Math.abs(curve) > 0.01) {\n\t\t\treturn curve;\n\t\t} else {\n\t\t\treturn 0.1;\n\t\t}\n\t}\n\n\tsetup(adj_matrix) {\n\t\tthis.commands = [];\n\t\tthis.circleID = new Array(this.size);\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.circleID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircle,\n\t\t\t\tthis.circleID[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.x_pos_logical[i],\n\t\t\t\tthis.y_pos_logical[i],\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.circleID[i], VERTEX_INDEX_COLOR, 0);\n\n\t\t\tthis.cmd(act.setLayer, this.circleID[i], 1);\n\t\t}\n\n\t\tif (adj_matrix) {\n\t\t\tthis.adj_matrix = adj_matrix;\n\t\t\tthis.adj_matrixID = new Array(this.size);\n\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\tthis.adj_matrixID[i] = new Array(this.size);\n\t\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.buildEdges();\n\t\t} else {\n\t\t\tthis.adj_matrix = new Array(this.size);\n\t\t\tthis.adj_matrixID = new Array(this.size);\n\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\tthis.adj_matrix[i] = new Array(this.size);\n\t\t\t\tthis.adj_matrixID[i] = new Array(this.size);\n\t\t\t}\n\n\t\t\tlet edgePercent;\n\t\t\tif (this.size === SMALL_SIZE) {\n\t\t\t\tif (this.directed) {\n\t\t\t\t\tedgePercent = 0.4;\n\t\t\t\t} else {\n\t\t\t\t\tedgePercent = 0.5;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.directed) {\n\t\t\t\t\tedgePercent = 0.35;\n\t\t\t\t} else {\n\t\t\t\t\tedgePercent = 0.6;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.directed) {\n\t\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.allowed[i][j] &&\n\t\t\t\t\t\t\tMath.random() <= edgePercent &&\n\t\t\t\t\t\t\t(i < j ||\n\t\t\t\t\t\t\t\tMath.abs(this.curve[i][j]) < 0.01 ||\n\t\t\t\t\t\t\t\tthis.adj_matrixID[j][i] === -1) &&\n\t\t\t\t\t\t\t(!this.isDAG || i < j)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (this.showEdgeCosts) {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = Math.floor(Math.random() * 9) + 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.adj_matrix[i][j] = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.buildEdges();\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\t\tfor (let j = i + 1; j < this.size; j++) {\n\t\t\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\t\t\tthis.adj_matrixID[j][i] = this.nextIndex++;\n\n\t\t\t\t\t\tif (this.allowed[i][j] && Math.random() <= edgePercent) {\n\t\t\t\t\t\t\tif (this.showEdgeCosts) {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = Math.floor(Math.random() * 9) + 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.adj_matrix[i][j] = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.adj_matrix[j][i] = this.adj_matrix[i][j];\n\t\t\t\t\t\t\tlet edgeLabel;\n\t\t\t\t\t\t\tif (this.showEdgeCosts) {\n\t\t\t\t\t\t\t\tedgeLabel = String(this.adj_matrix[i][j]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tedgeLabel = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\t\tthis.circleID[i],\n\t\t\t\t\t\t\t\tthis.circleID[j],\n\t\t\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t\t\tthis.curve[i][j],\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tedgeLabel,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.adj_matrix[i][j] = -1;\n\t\t\t\t\t\t\tthis.adj_matrix[j][i] = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.buildEdges();\n\n\t\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\t\tthis.adj_matrix[i][i] = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Create Adj List\n\n\t\tthis.buildAdjList();\n\n\t\t// Create Adj Matrix\n\n\t\tthis.buildAdjMatrix();\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.clearHistory();\n\t}\n\n\tresetAll() {}\n\n\tbuildAdjMatrix() {\n\t\tthis.adj_matrix_index_x = new Array(this.size);\n\t\tthis.adj_matrix_index_y = new Array(this.size);\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.adj_matrix_index_x[i] = this.nextIndex++;\n\t\t\tthis.adj_matrix_index_y[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.adj_matrix_index_x[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.adj_matrix_x_start + i * this.adj_matrix_width,\n\t\t\t\tthis.adj_matrix_y_start - this.adj_matrix_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.adj_matrix_index_x[i], VERTEX_INDEX_COLOR);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.adj_matrix_index_y[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.adj_matrix_x_start - this.adj_matrix_width,\n\t\t\t\tthis.adj_matrix_y_start + i * this.adj_matrix_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.adj_matrix_index_y[i], VERTEX_INDEX_COLOR);\n\t\t\tthis.cmd(act.setLayer, this.adj_matrix_index_x[i], 3);\n\t\t\tthis.cmd(act.setLayer, this.adj_matrix_index_y[i], 3);\n\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tthis.adj_matrixID[i][j] = this.nextIndex++;\n\t\t\t\tlet lab;\n\t\t\t\tif (this.adj_matrix[i][j] < 0) {\n\t\t\t\t\tlab = '';\n\t\t\t\t} else {\n\t\t\t\t\tlab = String(this.adj_matrix[i][j]);\n\t\t\t\t}\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.adj_matrixID[i][j],\n\t\t\t\t\tlab,\n\t\t\t\t\tthis.adj_matrix_width,\n\t\t\t\t\tthis.adj_matrix_height,\n\t\t\t\t\tthis.adj_matrix_x_start + j * this.adj_matrix_width,\n\t\t\t\t\tthis.adj_matrix_y_start + i * this.adj_matrix_height,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setLayer, this.adj_matrixID[i][j], 3);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveAdjList() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.adj_list_list[i], 'RAL1');\n\t\t\tthis.cmd(act.delete, this.adj_list_index[i], 'RAL2');\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] > 0) {\n\t\t\t\t\tthis.cmd(act.delete, this.adj_list_edges[i][j], 'RAL3');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildAdjList() {\n\t\tthis.adj_list_index = new Array(this.size);\n\t\tthis.adj_list_list = new Array(this.size);\n\t\tthis.adj_list_edges = new Array(this.size);\n\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.adj_list_index[i] = this.nextIndex++;\n\t\t\tthis.adj_list_edges[i] = new Array(this.size);\n\t\t\tthis.adj_list_index[i] = this.nextIndex++;\n\t\t\tthis.adj_list_list[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.adj_list_list[i],\n\t\t\t\t'',\n\t\t\t\tthis.adj_list_width,\n\t\t\t\tthis.adj_list_height,\n\t\t\t\tthis.adj_list_x_start,\n\t\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setLayer, this.adj_list_list[i], 2);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.adj_list_index[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tthis.adj_list_x_start - this.adj_list_width,\n\t\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.adj_list_index[i], VERTEX_INDEX_COLOR);\n\t\t\tthis.cmd(act.setLayer, this.adj_list_index[i], 2);\n\t\t\tlet lastElem = this.adj_list_list[i];\n\t\t\tlet nextXPos =\n\t\t\t\tthis.adj_list_x_start +\n\t\t\t\tthis.adj_list_width +\n\t\t\t\tthis.adj_list_spacing_after_list +\n\t\t\t\tthis.adj_list_spacing_between_nodes;\n\t\t\tlet hasEdges = false;\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\thasEdges = true;\n\t\t\t\t\tthis.adj_list_edges[i][j] = this.nextIndex++;\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLinkedListNode,\n\t\t\t\t\t\tthis.adj_list_edges[i][j],\n\t\t\t\t\t\t[this.toStr(j), this.adj_matrix[i][j]],\n\t\t\t\t\t\tthis.adj_list_elem_width,\n\t\t\t\t\t\tthis.adj_list_elem_height,\n\t\t\t\t\t\tnextXPos,\n\t\t\t\t\t\tthis.adj_list_y_start + i * this.adj_list_height,\n\t\t\t\t\t\t0.25,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.setNull, this.adj_list_edges[i][j], 1);\n\t\t\t\t\tthis.cmd(act.setTextColor, this.adj_list_edges[i][j], VERTEX_INDEX_COLOR, 0);\n\t\t\t\t\tthis.cmd(act.setLayer, this.adj_list_edges[i][j], 2);\n\n\t\t\t\t\tnextXPos =\n\t\t\t\t\t\tnextXPos + this.adj_list_elem_width + this.adj_list_spacing_between_nodes;\n\t\t\t\t\tthis.cmd(act.connect, lastElem, this.adj_list_edges[i][j]);\n\t\t\t\t\tthis.cmd(act.setNull, lastElem, 0);\n\t\t\t\t\tlastElem = this.adj_list_edges[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!hasEdges) {\n\t\t\t\tthis.cmd(act.setNull, this.adj_list_list[i], 1);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Should be overwritten in child\n\treset() {\n\t\tthrow new Error('reset() should be implemented in child');\n\t}\n\n\ttoStr(vertex) {\n\t\treturn String.fromCharCode(65 + vertex);\n\t}\n\n\tenableUI() {\n\t\tfor (const control of this.controls) {\n\t\t\tif (\n\t\t\t\tcontrol === this.defaultGraphButton &&\n\t\t\t\t(this.directed || this.isLarge || this.adj_matrix === this.defaultEdges)\n\t\t\t) {\n\t\t\t\tcontrol.disabled = true;\n\t\t\t} else {\n\t\t\t\tcontrol.disabled = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (const control of this.controls) {\n\t\t\tcontrol.disabled = true;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst CODE_START_X = 25;\nconst CODE_START_Y = 35;\nconst CODE_LINE_HEIGHT = 14;\nconst CODE_HIGHLIGHT_COLOR = '#FF0000';\nconst CODE_STANDARD_COLOR = '#000000';\nconst QUEUE_START_X = 35;\nconst QUEUE_START_Y = 250;\nconst QUEUE_SPACING = 40;\n\nconst PRE_CODE = [\n\t['procedure preOrder(Node node)'],\n\t['     if node is not null:'],\n\t['          look at data in the node'],\n\t['          recurse left'],\n\t['          recurse right'],\n\t['end procedure'],\n];\nconst IN_CODE = [\n\t['procedure inOrder(Node node)'],\n\t['     if node is not null:'],\n\t['          recurse left'],\n\t['          look at data in the node'],\n\t['          recurse right'],\n\t['end procedure'],\n];\nconst POST_CODE = [\n\t['procedure postOrder(Node node)'],\n\t['     if node is not null:'],\n\t['          recurse left'],\n\t['          recurse right'],\n\t['          look at data in the node'],\n\t['end procedure'],\n];\nconst LEVEL_CODE = [\n\t['procedure levelOrder()'],\n\t['     create Queue q'],\n\t['     add root to q'],\n\t['     while q is not empty'],\n\t['          Node curr <- remove from q'],\n\t['          record data from curr'],\n\t['          if curr.left is not null:'],\n\t['               add curr.left to q'],\n\t['          if curr.right is not null:'],\n\t['               add curr.right to q'],\n\t['end procedure'],\n];\n\nexport default class BST extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.first_print_pos_y = h - 2 * BST.PRINT_VERTICAL_GAP;\n\t\tthis.print_max = w - 10;\n\t\tthis.startingX = w / 2;\n\t\tthis.addControls();\n\t\tthis.nextIndex = 1;\n\t\tthis.commands = [];\n\t\tthis.edges = [];\n\t\tthis.toClear = [];\n\t\tthis.cmd(act.createLabel, 0, '', BST.EXPLANITORY_TEXT_X, BST.EXPLANITORY_TEXT_Y, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst traversalButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Pre-order', 'In-order', 'Post-order', 'Level order'],\n\t\t\t'Traversals',\n\t\t);\n\n\t\tthis.preOrderSelect = traversalButtonList[0];\n\t\tthis.inOrderSelect = traversalButtonList[1];\n\t\tthis.postOrderSelect = traversalButtonList[2];\n\t\tthis.levelOrderSelect = traversalButtonList[3];\n\t\tthis.preOrderSelect.onclick = () => (this.traversal = 'pre');\n\t\tthis.inOrderSelect.onclick = () => (this.traversal = 'in');\n\t\tthis.postOrderSelect.onclick = () => (this.traversal = 'post');\n\t\tthis.levelOrderSelect.onclick = () => (this.traversal = 'level');\n\t\tthis.preOrderSelect.checked = true;\n\t\tthis.traversal = 'pre';\n\n\t\tthis.traverseButton = addControlToAlgorithmBar('Button', 'Traverse');\n\t\tthis.traverseButton.onclick = this.traverseCallback.bind(this);\n\t\tthis.controls.push(this.traverseButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst predSuccButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Predecessor', 'Successor'],\n\t\t\t'Predecessor/Successor',\n\t\t);\n\n\t\tthis.predButton = predSuccButtonList[0];\n\t\tthis.succButton = predSuccButtonList[1];\n\t\tthis.predButton.onclick = () => (this.predSucc = 'pred');\n\t\tthis.succButton.onclick = () => (this.predSucc = 'succ');\n\t\tthis.succButton.checked = true;\n\t\tthis.predSucc = 'succ';\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 1;\n\t\tthis.treeRoot = null;\n\t\tthis.edges = [];\n\t\tthis.toClear = [];\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.insertField.value;\n\t\t// Get text value\n\t\tif (insertedValue !== '') {\n\t\t\t// set text value\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tconst deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.remove.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.findField.value;\n\t\tif (findValue !== '') {\n\t\t\tthis.findField.value = '';\n\t\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t\t}\n\t}\n\n\ttraverseCallback() {\n\t\tthis.implementAction(this.traverse.bind(this));\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tsizeChanged(newWidth) {\n\t\tthis.startingX = newWidth / 2;\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\n\t\tif (this.treeRoot != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tconst firstLabel = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\t\tthis.treeRoot.x,\n\t\t\t\tthis.treeRoot.y,\n\t\t\t);\n\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\t\t\tthis.printTreeRec(this.treeRoot);\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let i = firstLabel; i < this.nextIndex; i++) this.cmd(act.delete, i);\n\t\t\tthis.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tpreOrderRec(tree, passedCodeID) {\n\t\tthis.codeID = passedCodeID;\n\t\tthis.cmd(act.step);\n\n\t\tconst nextLabelID = this.nextIndex++;\n\n\t\tthis.unhighlight(3, 0);\n\t\tthis.unhighlight(4, 0);\n\t\tthis.highlight(2, 0);\n\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, BST.PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += BST.PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += BST.PRINT_VERTICAL_GAP;\n\t\t}\n\t\tthis.unhighlight(2, 0);\n\n\t\tif (tree.left != null) {\n\t\t\tthis.highlight(3, 0);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.preOrderRec(tree.left, passedCodeID);\n\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.unhighlight(3, 0);\n\n\t\tif (tree.right != null) {\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.preOrderRec(tree.right, passedCodeID);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.unhighlight(4, 0);\n\n\t\treturn;\n\t}\n\n\tlevelOrder(tree, passedCodeID) {\n\t\tthis.codeID = passedCodeID;\n\t\tconst queue = [tree];\n\t\tconst queueLabelId = this.nextIndex++;\n\n\t\tconst queueID = [this.nextIndex];\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tqueueLabelId,\n\t\t\t'Queue: ',\n\t\t\tQUEUE_START_X - 5,\n\t\t\tQUEUE_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.createLabel, this.nextIndex, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, this.nextIndex, BST.PRINT_COLOR);\n\t\tthis.cmd(act.move, this.nextIndex++, QUEUE_START_X, QUEUE_START_Y, 0);\n\t\tthis.highlight(2, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(2, 0);\n\n\t\tthis.highlight(3, 0);\n\t\tthis.cmd(act.step);\n\n\t\twhile (queue.length !== 0) {\n\t\t\tconst curr = queue.shift();\n\n\t\t\tthis.cmd(act.move, this.highlightID, curr.x, curr.y);\n\t\t\tthis.unhighlight(3, 0);\n\n\t\t\tconst currId = queueID.shift();\n\t\t\tthis.cmd(act.move, currId, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.highlight(5, 0);\n\t\t\tfor (let i = 0; i < queueID.length; i++) {\n\t\t\t\tthis.cmd(act.move, queueID[i], QUEUE_START_X + i * QUEUE_SPACING, QUEUE_START_Y);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tthis.unhighlight(5, 0);\n\n\t\t\tthis.xPosOfNextLabel += BST.PRINT_HORIZONTAL_GAP;\n\t\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\t\tthis.yPosOfNextLabel += BST.PRINT_VERTICAL_GAP;\n\t\t\t}\n\n\t\t\tthis.highlight(6, 0);\n\t\t\tif (curr.left != null) {\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(6, 0);\n\t\t\t\tthis.highlight(7, 0);\n\t\t\t\tqueue.push(curr.left);\n\t\t\t\tqueueID.push(this.nextIndex);\n\t\t\t\tthis.cmd(act.createLabel, this.nextIndex, curr.left.data, curr.left.x, curr.left.y);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.nextIndex, BST.PRINT_COLOR);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\tQUEUE_START_X + (queue.length - 1) * QUEUE_SPACING,\n\t\t\t\t\tQUEUE_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(6, 0);\n\t\t\t}\n\n\t\t\tthis.highlight(8, 0);\n\t\t\tif (curr.right != null) {\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(8, 0);\n\t\t\t\tthis.highlight(9, 0);\n\t\t\t\tqueue.push(curr.right);\n\t\t\t\tqueueID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\tcurr.right.data,\n\t\t\t\t\tcurr.right.x,\n\t\t\t\t\tcurr.right.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.nextIndex, BST.PRINT_COLOR);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\tQUEUE_START_X + (queue.length - 1) * QUEUE_SPACING,\n\t\t\t\t\tQUEUE_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(9, 0);\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(8, 0);\n\t\t\t}\n\t\t\tthis.highlight(3, 0);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.unhighlight(3, 0);\n\t}\n\n\ttraverse() {\n\t\tthis.commands = [];\n\t\tthis.clearOldObjects();\n\n\t\tif (this.treeRoot == null) {\n\t\t\treturn this.commands;\n\t\t}\n\n\t\tthis.highlightID = this.nextIndex++;\n\t\tconst firstLabel = this.nextIndex;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlightID,\n\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\tthis.treeRoot.x,\n\t\t\tthis.treeRoot.y,\n\t\t);\n\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\n\t\tif (this.traversal === 'pre') {\n\t\t\tthis.codeID = this.addCodeToCanvasBase(\n\t\t\t\tPRE_CODE,\n\t\t\t\tCODE_START_X,\n\t\t\t\tCODE_START_Y,\n\t\t\t\tCODE_LINE_HEIGHT,\n\t\t\t);\n\t\t\tthis.preOrderRec(this.treeRoot, this.codeID);\n\t\t} else if (this.traversal === 'in') {\n\t\t\tthis.codeID = this.addCodeToCanvasBase(\n\t\t\t\tIN_CODE,\n\t\t\t\tCODE_START_X,\n\t\t\t\tCODE_START_Y,\n\t\t\t\tCODE_LINE_HEIGHT,\n\t\t\t);\n\t\t\tthis.printTreeRec(this.treeRoot, this.codeID);\n\t\t} else if (this.traversal === 'post') {\n\t\t\tthis.codeID = this.addCodeToCanvasBase(\n\t\t\t\tPOST_CODE,\n\t\t\t\tCODE_START_X,\n\t\t\t\tCODE_START_Y,\n\t\t\t\tCODE_LINE_HEIGHT,\n\t\t\t);\n\t\t\tthis.postOrderRec(this.treeRoot, this.codeID);\n\t\t} else if (this.traversal === 'level') {\n\t\t\tthis.codeID = this.addCodeToCanvasBase(\n\t\t\t\tLEVEL_CODE,\n\t\t\t\tCODE_START_X,\n\t\t\t\tCODE_START_Y,\n\t\t\t\tCODE_LINE_HEIGHT,\n\t\t\t);\n\t\t\tthis.levelOrder(this.treeRoot, this.codeID);\n\t\t}\n\n\t\tthis.cmd(act.delete, this.highlightID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = firstLabel; i < this.nextIndex; i++) this.toClear.push(i);\n\t\t// this.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\n\t\treturn this.commands;\n\t}\n\n\tpostOrderRec(tree, passedCodeID) {\n\t\tthis.codeID = passedCodeID;\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tthis.highlight(2, 0);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.postOrderRec(tree.left, passedCodeID);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.unhighlight(2, 0);\n\n\t\tif (tree.right != null) {\n\t\t\tthis.unhighlight(2, 0);\n\t\t\tthis.highlight(3, 0);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.postOrderRec(tree.right, passedCodeID);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.unhighlight(3, 0);\n\n\t\tthis.highlight(4, 0);\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, BST.PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += BST.PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += BST.PRINT_VERTICAL_GAP;\n\t\t}\n\t\tthis.unhighlight(4, 0);\n\n\t\treturn;\n\t}\n\n\tprintTreeRec(tree, passedCodeID) {\n\t\tthis.codeID = passedCodeID;\n\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tthis.highlight(2, 0);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.printTreeRec(tree.left, passedCodeID);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.unhighlight(2, 0);\n\n\t\tthis.unhighlight(4, 0);\n\t\tthis.highlight(3, 0);\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, BST.PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += BST.PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = BST.FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += BST.PRINT_VERTICAL_GAP;\n\t\t}\n\t\tthis.unhighlight(3, 0);\n\n\t\tif (tree.right != null) {\n\t\t\tthis.unhighlight(2, 0);\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.printTreeRec(tree.right, passedCodeID);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.unhighlight(4, 0);\n\n\t\treturn;\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\t\tthis.clearOldObjects();\n\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tthis.doFind(this.treeRoot, findValue);\n\n\t\treturn this.commands;\n\t}\n\n\tdoFind(tree, value) {\n\t\tthis.cmd(act.setText, 0, 'Searching for ' + value);\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tif (tree.data === value) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Searching for ' + value + ' : ' + value + ' = ' + value + ' (Element found!)',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Found:' + value);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t} else {\n\t\t\t\tif (tree.data > value) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to left subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.left != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.left, value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t' Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' > ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to right subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.right != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tBST.HIGHLIGHT_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t}\n\t\t\t\t\tthis.doFind(tree.right, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\t'Searching for ' + value + ' : < Empty Tree > (Element not found)',\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, 'Searching for ' + value + ' :  (Element not found)');\n\t\t}\n\t}\n\n\tremakeTree(curr) {\n\t\tif (curr == null) return;\n\t\tif (curr.left != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.left.graphicID, BST.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.left);\n\t\t}\n\t\tif (curr.right != null) {\n\t\t\tthis.cmd(act.connect, curr.graphicID, curr.right.graphicID, BST.LINK_COLOR);\n\t\t\tthis.remakeTree(curr.right);\n\t\t}\n\t}\n\n\tclearOldObjects() {\n\t\tthis.toClear.forEach(i => this.cmd(act.delete, i));\n\t\tthis.toClear = [];\n\t}\n\n\tadd(data) {\n\t\tthis.commands = [];\n\t\tthis.clearOldObjects();\n\t\tthis.cmd(act.setText, 0, 'Inserting ' + data);\n\t\tthis.treeRoot = this.addH(data, this.treeRoot);\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\taddH(data, curr) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, 'Null found, inserting new node');\n\t\t\tconst treeNodeID = this.nextIndex++;\n\t\t\tthis.cmd(act.createCircle, treeNodeID, data, 30, BST.STARTING_Y);\n\n\t\t\tthis.cmd(act.setForegroundColor, treeNodeID, BST.FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, treeNodeID, BST.BACKGROUND_COLOR);\n\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn new BSTNode(data, treeNodeID, 0, 0);\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking at left subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.addH(data, curr.left);\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking at right subtree`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.addH(data, curr.right);\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.resizeTree();\n\t\t\tconst connected = this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tconnected && this.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, `${data} == ${curr.data}. Ignoring duplicate!`);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tconnectSmart(id1, id2) {\n\t\tif (!this.edges.some(e => e[0] === id1 && e[1] === id2)) {\n\t\t\tthis.cmd(act.connect, id1, id2, BST.LINK_COLOR);\n\t\t\tthis.edges.push([id1, id2]);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tdeleteNode(curr) {\n\t\tthis.cmd(act.delete, curr.graphicID);\n\t}\n\n\tremove(data) {\n\t\tthis.commands = [];\n\t\tthis.clearOldObjects();\n\n\t\tthis.cmd(act.setText, 0, `Deleting ${data}`);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, ' ');\n\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.treeRoot = this.removeH(this.treeRoot, data);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.resizeTree();\n\t\treturn this.commands;\n\t}\n\n\tremoveH(curr, data) {\n\t\tif (curr == null) {\n\t\t\tthis.cmd(act.setText, 0, `${data} not found in the tree`);\n\t\t\treturn;\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1);\n\t\tif (data < curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} < ${curr.data}. Looking left`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.left = this.removeH(curr.left, data);\n\t\t\tif (curr.left != null) {\n\t\t\t\tcurr.left.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else if (data > curr.data) {\n\t\t\tthis.cmd(act.setText, 0, `${data} > ${curr.data}. Looking right`);\n\t\t\tthis.cmd(act.step);\n\t\t\tcurr.right = this.removeH(curr.right, data);\n\t\t\tif (curr.right != null) {\n\t\t\t\tcurr.right.parent = curr;\n\t\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t} else {\n\t\t\tif (curr.left == null && curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Element to delete is a leaf node');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn null;\n\t\t\t} else if (curr.left == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with right child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.right;\n\t\t\t} else if (curr.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, `One-child case, replace with left child`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.deleteNode(curr);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\treturn curr.left;\n\t\t\t} else {\n\t\t\t\tconst dummy = [];\n\t\t\t\tif (this.predSucc === 'succ') {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with successor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.right = this.removeSucc(curr.right, dummy);\n\t\t\t\t\tcurr.right && this.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, 0, `Two-child case, replace data with predecessor`);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tcurr.left = this.removePred(curr.left, dummy);\n\t\t\t\t\tcurr.left && this.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\t\t}\n\t\t\t\tthis.resizeTree();\n\t\t\t\tcurr.data = dummy[0];\n\t\t\t\tthis.cmd(act.setText, curr.graphicID, curr.data);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0);\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn curr;\n\t}\n\n\tremoveSucc(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.left == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No left child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.right;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Left child exists, look left');\n\t\tcurr.left = this.removeSucc(curr.left, dummy);\n\t\tif (curr.left != null) {\n\t\t\tcurr.left.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.left.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0, '#0000ff');\n\t\treturn curr;\n\t}\n\n\tremovePred(curr, dummy) {\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 1, '#0000ff');\n\t\tthis.cmd(act.step);\n\t\tif (curr.right == null) {\n\t\t\tthis.cmd(act.setText, 0, 'No right child, replace with right child');\n\t\t\tthis.cmd(act.step);\n\t\t\tdummy.push(curr.data);\n\t\t\tthis.deleteNode(curr);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, '');\n\t\t\treturn curr.left;\n\t\t}\n\t\tthis.cmd(act.setText, 0, 'Right child exists, look right');\n\t\tthis.cmd(act.step);\n\t\tcurr.right = this.removePred(curr.right, dummy);\n\t\tif (curr.right != null) {\n\t\t\tcurr.right.parent = curr;\n\t\t\tthis.connectSmart(curr.graphicID, curr.right.graphicID);\n\t\t\tthis.resizeTree();\n\t\t}\n\t\tthis.cmd(act.setHighlight, curr.graphicID, 0, '#0000ff');\n\t\treturn curr;\n\t}\n\n\tresizeTree() {\n\t\tif (this.treeRoot == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet startingPoint = this.startingX;\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tif (this.treeRoot != null) {\n\t\t\tif (this.treeRoot.leftWidth > startingPoint) {\n\t\t\t\tstartingPoint = this.treeRoot.leftWidth;\n\t\t\t} else if (this.treeRoot.rightWidth > startingPoint) {\n\t\t\t\tstartingPoint = Math.max(\n\t\t\t\t\tthis.treeRoot.leftWidth,\n\t\t\t\t\t2 * startingPoint - this.treeRoot.rightWidth,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.setNewPositions(this.treeRoot, startingPoint, BST.STARTING_Y, 0);\n\t\t\tthis.animateNewPositions(this.treeRoot);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition, side) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\tif (side === -1) {\n\t\t\t\txPosition = xPosition - tree.rightWidth;\n\t\t\t} else if (side === 1) {\n\t\t\t\txPosition = xPosition + tree.leftWidth;\n\t\t\t}\n\t\t\ttree.x = xPosition;\n\t\t\tthis.setNewPositions(tree.left, xPosition, yPosition + BST.HEIGHT_DELTA, -1);\n\t\t\tthis.setNewPositions(tree.right, xPosition, yPosition + BST.HEIGHT_DELTA, 1);\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t\t\tthis.animateNewPositions(tree.left);\n\t\t\tthis.animateNewPositions(tree.right);\n\t\t}\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\ttree.leftWidth = Math.max(this.resizeWidths(tree.left), BST.WIDTH_DELTA / 2);\n\t\ttree.rightWidth = Math.max(this.resizeWidths(tree.right), BST.WIDTH_DELTA / 2);\n\t\treturn tree.leftWidth + tree.rightWidth;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.clearOldObjects();\n\n\t\tthis.recClear(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\treturn this.commands;\n\t}\n\n\trecClear(curr) {\n\t\tif (curr != null) {\n\t\t\tthis.cmd(act.delete, curr.graphicID);\n\t\t\tthis.recClear(curr.left);\n\t\t\tthis.recClear(curr.right);\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\t// Refactored to superclass\n\n\t// setUpPseudocode(tailoredCode) {\n\t// \tthis.code = tailoredCode;\n\n\t// \tthis.codeID = Array(this.code.length);\n\t// \tlet i, j;\n\t// \tfor (i = 0; i < this.code.length; i++) {\n\t// \t\tthis.codeID[i] = new Array(this.code[i].length);\n\t// \t\tfor (j = 0; j < this.code[i].length; j++) {\n\t// \t\t\tthis.codeID[i][j] = this.nextIndex++;\n\t// \t\t\tthis.cmd(\n\t// \t\t\t\tact.createLabel,\n\t// \t\t\t\tthis.codeID[i][j],\n\t// \t\t\t\tthis.code[i][j],\n\t// \t\t\t\tCODE_START_X,\n\t// \t\t\t\tCODE_START_Y + i * CODE_LINE_HEIGHT,\n\t// \t\t\t\t0,\n\t// \t\t\t);\n\t// \t\t\tthis.cmd(act.setForegroundColor, this.codeID[i][j], CODE_STANDARD_COLOR);\n\t// \t\t\tif (j > 0) {\n\t// \t\t\t\tthis.cmd(act.alignRight, this.codeID[i][j], this.codeID[i][j - 1]);\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\n\t// \treturn this.codeID;\n\t// }\n\n\thighlight(ind1, ind2) {\n\t\tthis.cmd(act.setForegroundColor, this.codeID[ind1][ind2], CODE_HIGHLIGHT_COLOR);\n\t}\n\n\tunhighlight(ind1, ind2) {\n\t\tthis.cmd(act.setForegroundColor, this.codeID[ind1][ind2], CODE_STANDARD_COLOR);\n\t}\n}\n\nclass BSTNode {\n\tconstructor(val, id, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\n\t\tthis.graphicID = id;\n\t\tthis.left = null;\n\t\tthis.right = null;\n\t\tthis.parent = null;\n\t}\n}\n\n// Various constants\n\nBST.HIGHLIGHT_LABEL_COLOR = '#FF0000';\nBST.HIGHLIGHT_LINK_COLOR = '#FF0000';\n\nBST.HIGHLIGHT_COLOR = '#007700';\nBST.HEIGHT_LABEL_COLOR = '#007700';\n\nBST.LINK_COLOR = '#00B000';\nBST.HIGHLIGHT_CIRCLE_COLOR = '#007700';\nBST.FOREGROUND_COLOR = '#007700';\nBST.BACKGROUND_COLOR = '#DDFFDD';\nBST.PRINT_COLOR = BST.FOREGROUND_COLOR;\n\nBST.WIDTH_DELTA = 50;\nBST.HEIGHT_DELTA = 50;\nBST.STARTING_Y = 50;\n\nBST.FIRST_PRINT_POS_X = 50;\nBST.PRINT_VERTICAL_GAP = 20;\nBST.PRINT_HORIZONTAL_GAP = 50;\nBST.EXPLANITORY_TEXT_X = 10;\nBST.EXPLANITORY_TEXT_Y = 10;\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst FIRST_PRINT_POS_X = 50;\nconst PRINT_VERTICAL_GAP = 20;\nconst PRINT_MAX = 990;\nconst PRINT_HORIZONTAL_GAP = 50;\n\nconst MIN_MAX_DEGREE = 4;\n\nconst HEIGHT_DELTA = 50;\nconst NODE_SPACING = 3;\nconst STARTING_Y = 30;\nconst WIDTH_PER_ELEM = 40;\nconst NODE_HEIGHT = 20;\n\nconst MESSAGE_X = 5;\nconst MESSAGE_Y = 10;\n\nconst FOREGROUND_COLOR = '#007700';\nconst BACKGROUND_COLOR = '#EEFFEE';\nconst PRINT_COLOR = FOREGROUND_COLOR;\n\nexport default class BTree extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.nextIndex = 0;\n\n\t\tthis.starting_x = w / 2;\n\n\t\tthis.preemptiveSplit = false;\n\n\t\tthis.addControls();\n\n\t\tthis.max_keys = 3;\n\t\tthis.min_keys = 1;\n\t\tthis.split_index = 1;\n\n\t\tthis.max_degree = 4;\n\n\t\tthis.messageID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.messageID, '', MESSAGE_X, MESSAGE_Y, 0);\n\t\tthis.moveLabel1ID = this.nextIndex++;\n\t\tthis.moveLabel2ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.commands = [];\n\n\t\tthis.first_print_pos_y = h - 3 * PRINT_VERTICAL_GAP;\n\n\t\tthis.xPosOfNextLabel = 100;\n\t\tthis.yPosOfNextLabel = 200;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.printButton = addControlToAlgorithmBar('Button', 'Print');\n\t\tthis.printButton.onclick = this.printCallback.bind(this);\n\t\tthis.controls.push(this.printButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\t\taddLabelToAlgorithmBar('Promote with');\n\t\tconst splitIndexButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['second data', 'third data'],\n\t\t\t'Split Index',\n\t\t);\n\n\t\tthis.splitSecondSelect = splitIndexButtonList[0];\n\t\tthis.splitThirdSelect = splitIndexButtonList[1];\n\t\tthis.splitSecondSelect.onclick = () => (this.split_index = 1);\n\t\tthis.splitThirdSelect.onclick = () => (this.split_index = 2);\n\t\tthis.splitSecondSelect.checked = true;\n\t\tthis.split_index = 1;\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst predSuccButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Predecessor', 'Successor'],\n\t\t\t'Predecessor/Successor',\n\t\t);\n\n\t\tthis.predButton = predSuccButtonList[0];\n\t\tthis.succButton = predSuccButtonList[1];\n\n\t\tthis.predButton.onclick = this.predCallback.bind(this);\n\t\tthis.succButton.onclick = this.succCallback.bind(this);\n\t\tthis.succButton.checked = true;\n\t\tthis.predSucc = 'succ';\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 3;\n\t\tthis.max_degree = 4;\n\t\tthis.max_keys = 3;\n\t\tthis.min_keys = 1;\n\t\tthis.split_index = 1;\n\t\t// NOTE: The order of these last two this.commands matters!\n\t\tthis.treeRoot = null;\n\t\tthis.ignoreInputs = true;\n\t\tthis.ignoreInputs = false;\n\t}\n\n\tenableUI() {\n\t\tlet i;\n\t\tfor (i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tmaxDegreeChangedHandler(newMaxDegree) {\n\t\tif (this.max_degree !== newMaxDegree) {\n\t\t\tthis.implementAction(this.changeDegree.bind(this), newMaxDegree);\n\t\t\tthis.animationManager.skipForward();\n\t\t\tthis.animationManager.clearHistory();\n\t\t}\n\t}\n\n\tpredCallback() {\n\t\tif (this.predSucc !== 'pred') {\n\t\t\tthis.predSucc = 'pred';\n\t\t\t//this.commands = this.clearCallback();  maybe this isn't necessary?\n\t\t}\n\t}\n\n\tsuccCallback() {\n\t\tif (this.predSucc !== 'succ') {\n\t\t\tthis.predSucc = 'succ';\n\t\t\t//this.commands = this.clearCallback();\n\t\t}\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.normalizeNumber(this.insertField.value, 4);\n\t\tif (insertedValue !== '') {\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tlet deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tdeletedValue = this.normalizeNumber(this.deleteField.value, 4);\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.deleteElement.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearTree.bind(this));\n\t}\n\n\tpremtiveSplitCallback() {\n\t\tif (this.preemptiveSplit !== this.premptiveSplitBox.checked) {\n\t\t\tthis.implementAction(\n\t\t\t\tthis.changePreemtiveSplit.bind(this),\n\t\t\t\tthis.premptiveSplitBox.checked,\n\t\t\t);\n\t\t}\n\t}\n\n\tchangePreemtiveSplit(newValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.step);\n\t\tthis.preemptiveSplit = newValue;\n\t\tif (this.premptiveSplitBox.checked !== this.preemptiveSplit) {\n\t\t\tthis.premptiveSplitBox.checked = this.preemptiveSplit;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tprintCallback() {\n\t\tthis.implementAction(this.printTree.bind(this));\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.messageID, 'Printing tree');\n\t\tconst firstLabel = this.nextIndex;\n\n\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\n\t\tthis.printTreeRec(this.treeRoot);\n\t\tthis.cmd(act.step);\n\t\tfor (let i = firstLabel; i < this.nextIndex; i++) {\n\t\t\tthis.cmd(act.delete, i);\n\t\t}\n\t\tthis.nextIndex = firstLabel;\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn this.commands;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tlet nextLabelID;\n\t\tif (tree.isLeaf) {\n\t\t\tfor (let i = 0; i < tree.numKeys; i++) {\n\t\t\t\tnextLabelID = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tnextLabelID,\n\t\t\t\t\ttree.keys[i],\n\t\t\t\t\tthis.getLabelX(tree, i),\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, nextLabelID, PRINT_COLOR);\n\t\t\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.xPosOfNextLabel += PRINT_HORIZONTAL_GAP;\n\t\t\t\tif (this.xPosOfNextLabel > PRINT_MAX) {\n\t\t\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\t\t\tthis.yPosOfNextLabel += PRINT_VERTICAL_GAP;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t} else {\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[0].graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[0].graphicID, 0);\n\t\t\tthis.printTreeRec(tree.children[0]);\n\t\t\tfor (let i = 0; i < tree.numKeys; i++) {\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\t\tnextLabelID = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tnextLabelID,\n\t\t\t\t\ttree.keys[i],\n\t\t\t\t\tthis.getLabelX(tree, i),\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, nextLabelID, PRINT_COLOR);\n\t\t\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.xPosOfNextLabel += PRINT_HORIZONTAL_GAP;\n\t\t\t\tif (this.xPosOfNextLabel > PRINT_MAX) {\n\t\t\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\t\t\tthis.yPosOfNextLabel += PRINT_VERTICAL_GAP;\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i + 1].graphicID, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i + 1].graphicID, 0);\n\t\t\t\tthis.printTreeRec(tree.children[i + 1]);\n\t\t\t}\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t}\n\t}\n\n\tclearTree() {\n\t\tthis.commands = [];\n\t\tthis.deleteTree(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\tthis.nextIndex = 3;\n\t\treturn this.commands;\n\t}\n\n\tdeleteTree(tree) {\n\t\tif (tree != null) {\n\t\t\tif (!tree.isLeaf) {\n\t\t\t\tfor (let i = 0; i <= tree.numKeys; i++) {\n\t\t\t\t\tthis.cmd(act.disconnect, tree.graphicID, tree.children[i].graphicID);\n\t\t\t\t\tthis.deleteTree(tree.children[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.delete, tree.graphicID);\n\t\t}\n\t}\n\n\tchangeDegree(degree) {\n\t\tthis.commands = [];\n\t\tthis.deleteTree(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\tthis.nextIndex = 3;\n\t\tconst newDegree = degree;\n\t\tthis.ignoreInputs = true;\n\t\tthis.maxDegreeRadioButtons[newDegree - MIN_MAX_DEGREE].checked = true;\n\n\t\tthis.ignoreInputs = false;\n\t\tthis.max_degree = newDegree;\n\t\tthis.max_keys = newDegree - 1;\n\t\tthis.min_keys = Math.floor((newDegree + 1) / 2) - 1;\n\t\tthis.split_index = Math.floor((newDegree - 1) / 2);\n\t\tif (this.commands.length === 0) {\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tif (newDegree % 2 !== 0 && this.preemptiveSplit) {\n\t\t\tthis.preemptiveSplit = false;\n\t\t\tthis.premptiveSplitBox.checked = false;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.normalizeNumber(this.findField.value, 4);\n\t\tthis.findField.value = '';\n\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.messageID, 'Finding ' + findValue);\n\t\tthis.findInTree(this.treeRoot, findValue);\n\n\t\treturn this.commands;\n\t}\n\n\tfindInTree(tree, val) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < tree.numKeys && tree.keys[i] < val; i++);\n\t\t\tif (i === tree.numKeys) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.findInTree(tree.children[tree.numKeys], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' is not in the tree');\n\t\t\t\t}\n\t\t\t} else if (tree.keys[i] > val) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\t\t\t\t\tthis.findInTree(tree.children[i], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' is not in the tree');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, '#FF0000', i);\n\t\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' found');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.messageID, 'Element ' + val + ' is not in the tree');\n\t\t}\n\t}\n\n\tinsertElement(insertedValue) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.messageID, 'Inserting ' + insertedValue);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.treeRoot == null) {\n\t\t\tthis.treeRoot = new BTreeNode(this.nextIndex++, this.starting_x, STARTING_Y);\n\t\t\tthis.cmd(\n\t\t\t\tact.createBTreeNode,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\tWIDTH_PER_ELEM,\n\t\t\t\tNODE_HEIGHT,\n\t\t\t\t1,\n\t\t\t\tthis.starting_x,\n\t\t\t\tSTARTING_Y,\n\t\t\t\tBACKGROUND_COLOR,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t);\n\t\t\tthis.treeRoot.keys[0] = insertedValue;\n\t\t\tthis.cmd(act.setText, this.treeRoot.graphicID, insertedValue, 0);\n\t\t} else {\n\t\t\tif (this.preemptiveSplit) {\n\t\t\t\tif (this.treeRoot.numKeys === this.max_keys) {\n\t\t\t\t\tthis.split(this.treeRoot);\n\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tthis.insertNotFull(this.treeRoot, insertedValue);\n\t\t\t} else {\n\t\t\t\tthis.insert(this.treeRoot, insertedValue);\n\t\t\t}\n\t\t\tif (!this.treeRoot.isLeaf) {\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.setText, this.messageID, '');\n\n\t\treturn this.commands;\n\t}\n\n\tinsertNotFull(tree, insertValue) {\n\t\tif (\n\t\t\ttree.keys.includes(insertValue) &&\n\t\t\ttree.keys.findIndex(e => e === insertValue) < tree.numKeys\n\t\t) {\n\t\t\tthis.cmd(act.setText, 0, `${insertValue} == ${insertValue}. Ignoring duplicate!`);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tif (tree.isLeaf) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.messageID,\n\t\t\t\t'Inserting ' + insertValue + '.  Inserting into a leaf',\n\t\t\t);\n\t\t\ttree.numKeys++;\n\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\tlet insertIndex = tree.numKeys - 1;\n\t\t\twhile (insertIndex > 0 && tree.keys[insertIndex - 1] > insertValue) {\n\t\t\t\ttree.keys[insertIndex] = tree.keys[insertIndex - 1];\n\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\t\tinsertIndex--;\n\t\t\t}\n\t\t\ttree.keys[insertIndex] = insertValue;\n\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.resizeTree();\n\t\t} else {\n\t\t\tlet findIndex = 0;\n\t\t\twhile (findIndex < tree.numKeys && tree.keys[findIndex] < insertValue) {\n\t\t\t\tfindIndex++;\n\t\t\t}\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 0);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tif (tree.children[findIndex].numKeys === this.max_keys) {\n\t\t\t\tconst newTree = this.split(tree.children[findIndex]);\n\t\t\t\tthis.resizeTree();\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.insertNotFull(newTree, insertValue);\n\t\t\t} else {\n\t\t\t\tthis.insertNotFull(tree.children[findIndex], insertValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tinsert(tree, insertValue) {\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (\n\t\t\ttree.keys.includes(insertValue) &&\n\t\t\ttree.keys.findIndex(e => e === insertValue) < tree.numKeys\n\t\t) {\n\t\t\tthis.cmd(act.setText, 0, `${insertValue} == ${insertValue}. Ignoring duplicate!`);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif (tree.isLeaf) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.messageID,\n\t\t\t\t'Inserting ' + insertValue + '.  Inserting into a leaf',\n\t\t\t);\n\t\t\ttree.numKeys++;\n\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\tlet insertIndex = tree.numKeys - 1;\n\t\t\twhile (insertIndex > 0 && tree.keys[insertIndex - 1] > insertValue) {\n\t\t\t\ttree.keys[insertIndex] = tree.keys[insertIndex - 1];\n\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\t\tinsertIndex--;\n\t\t\t}\n\t\t\ttree.keys[insertIndex] = insertValue;\n\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[insertIndex], insertIndex);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.resizeTree();\n\t\t\tthis.insertRepair(tree);\n\t\t} else {\n\t\t\tlet findIndex = 0;\n\t\t\twhile (findIndex < tree.numKeys && tree.keys[findIndex] < insertValue) {\n\t\t\t\tfindIndex++;\n\t\t\t}\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[findIndex].graphicID, 0);\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\tthis.insert(tree.children[findIndex], insertValue);\n\t\t}\n\t}\n\n\tinsertRepair(tree) {\n\t\tif (tree.numKeys <= this.max_keys) {\n\t\t\treturn;\n\t\t} else if (tree.parent == null) {\n\t\t\tthis.treeRoot = this.split(tree);\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst newNode = this.split(tree);\n\t\t\tthis.insertRepair(newNode);\n\t\t}\n\t}\n\n\tsplit(tree) {\n\t\tthis.cmd(act.setText, this.messageID, 'Node now contains too many keys.  Splittig ...');\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\tconst rightNode = new BTreeNode(this.nextIndex++, tree.x + 100, tree.y);\n\t\trightNode.numKeys = tree.numKeys - this.split_index - 1;\n\t\tconst risingNode = tree.keys[this.split_index];\n\t\tlet currentParent;\n\t\tlet parentIndex;\n\t\tif (tree.parent != null) {\n\t\t\tcurrentParent = tree.parent;\n\t\t\tfor (\n\t\t\t\tparentIndex = 0;\n\t\t\t\tparentIndex < currentParent.numKeys + 1 &&\n\t\t\t\tcurrentParent.children[parentIndex] !== tree;\n\t\t\t\tparentIndex++\n\t\t\t);\n\t\t\tif (parentIndex === currentParent.numKeys + 1) {\n\t\t\t\tthrow new Error(\"Couldn't find which child we were!\");\n\t\t\t}\n\t\t\tthis.cmd(act.setNumElements, currentParent.graphicID, currentParent.numKeys + 1);\n\t\t\tfor (let i = currentParent.numKeys; i > parentIndex; i--) {\n\t\t\t\tcurrentParent.children[i + 1] = currentParent.children[i];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tcurrentParent.graphicID,\n\t\t\t\t\tcurrentParent.children[i].graphicID,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tcurrentParent.graphicID,\n\t\t\t\t\tcurrentParent.children[i].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti + 1,\n\t\t\t\t);\n\n\t\t\t\tcurrentParent.keys[i] = currentParent.keys[i - 1];\n\t\t\t\tthis.cmd(act.setText, currentParent.graphicID, currentParent.keys[i], i);\n\t\t\t}\n\t\t\tcurrentParent.numKeys++;\n\t\t\tcurrentParent.keys[parentIndex] = risingNode;\n\t\t\tthis.cmd(act.setText, currentParent.graphicID, '', parentIndex);\n\t\t\tthis.moveLabel1ID = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.moveLabel1ID,\n\t\t\t\trisingNode,\n\t\t\t\tthis.getLabelX(tree, this.split_index),\n\t\t\t\ttree.y,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.moveLabel1ID, FOREGROUND_COLOR);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.moveLabel1ID,\n\t\t\t\tthis.getLabelX(currentParent, parentIndex),\n\t\t\t\tcurrentParent.y,\n\t\t\t);\n\n\t\t\tcurrentParent.children[parentIndex + 1] = rightNode;\n\t\t\trightNode.parent = currentParent;\n\t\t}\n\n\t\tthis.cmd(\n\t\t\tact.createBTreeNode,\n\t\t\trightNode.graphicID,\n\t\t\tWIDTH_PER_ELEM,\n\t\t\tNODE_HEIGHT,\n\t\t\ttree.numKeys - this.split_index - 1,\n\t\t\ttree.x,\n\t\t\ttree.y,\n\t\t\tBACKGROUND_COLOR,\n\t\t\tFOREGROUND_COLOR,\n\t\t);\n\n\t\tfor (let i = this.split_index + 1; i < tree.numKeys + 1; i++) {\n\t\t\trightNode.children[i - this.split_index - 1] = tree.children[i];\n\t\t\tif (tree.children[i] != null) {\n\t\t\t\trightNode.isLeaf = false;\n\t\t\t\tthis.cmd(act.disconnect, tree.graphicID, tree.children[i].graphicID);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\trightNode.graphicID,\n\t\t\t\t\trightNode.children[i - this.split_index - 1].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti - this.split_index - 1,\n\t\t\t\t);\n\t\t\t\tif (tree.children[i] != null) {\n\t\t\t\t\ttree.children[i].parent = rightNode;\n\t\t\t\t}\n\t\t\t\ttree.children[i] = null;\n\t\t\t}\n\t\t}\n\t\tfor (let i = this.split_index + 1; i < tree.numKeys; i++) {\n\t\t\trightNode.keys[i - this.split_index - 1] = tree.keys[i];\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\trightNode.graphicID,\n\t\t\t\trightNode.keys[i - this.split_index - 1],\n\t\t\t\ti - this.split_index - 1,\n\t\t\t);\n\t\t}\n\t\tconst leftNode = tree;\n\t\tleftNode.numKeys = this.split_index;\n\t\tfor (let i = this.split_index; i < tree.numKeys; i++) {\n\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t}\n\t\tthis.cmd(act.setNumElements, tree.graphicID, this.split_index);\n\n\t\tif (tree.parent != null) {\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tcurrentParent.graphicID,\n\t\t\t\trightNode.graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\tparentIndex + 1,\n\t\t\t);\n\t\t\tthis.resizeTree();\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\tthis.cmd(act.setText, currentParent.graphicID, risingNode, parentIndex);\n\t\t\treturn tree.parent;\n\t\t} else {\n\t\t\tthis.treeRoot = new BTreeNode(this.nextIndex++, this.starting_x, STARTING_Y);\n\t\t\tthis.cmd(\n\t\t\t\tact.createBTreeNode,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\tWIDTH_PER_ELEM,\n\t\t\t\tNODE_HEIGHT,\n\t\t\t\t1,\n\t\t\t\tthis.starting_x,\n\t\t\t\tSTARTING_Y,\n\t\t\t\tBACKGROUND_COLOR,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t);\n\t\t\tthis.treeRoot.keys[0] = risingNode;\n\t\t\tthis.cmd(act.setText, this.treeRoot.graphicID, risingNode, 0);\n\t\t\tthis.treeRoot.children[0] = leftNode;\n\t\t\tthis.treeRoot.children[1] = rightNode;\n\t\t\tleftNode.parent = this.treeRoot;\n\t\t\trightNode.parent = this.treeRoot;\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\tleftNode.graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\t0,\n\t\t\t); // Connection Point\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.treeRoot.graphicID,\n\t\t\t\trightNode.graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\t1,\n\t\t\t); // Connection Point\n\t\t\tthis.treeRoot.isLeaf = false;\n\t\t\treturn this.treeRoot;\n\t\t}\n\t}\n\n\tdeleteElement(deletedValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, 'Deleting ' + deletedValue);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.cmd(act.setText, 0, '');\n\t\tif (this.preemptiveSplit) {\n\t\t\tthis.doDeleteNotEmpty(this.treeRoot, deletedValue);\n\t\t} else {\n\t\t\tthis.doDelete(this.treeRoot, deletedValue);\n\t\t}\n\t\tif (this.treeRoot && this.treeRoot.numKeys === 0) {\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, this.treeRoot.graphicID);\n\t\t\tthis.treeRoot = this.treeRoot.children[0];\n\t\t\tthis.treeRoot.parent = null;\n\t\t\tthis.resizeTree();\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tdoDeleteNotEmpty(tree, val) {\n\t\tif (tree != null) {\n\t\t\tlet nextNode;\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < tree.numKeys && tree.keys[i] < val; i++);\n\t\t\tif (i === tree.numKeys) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\n\t\t\t\t\tif (tree.children[tree.numKeys].numKeys === this.min_keys) {\n\t\t\t\t\t\tif (tree.children[tree.numKeys - 1].numKeys > this.min_keys) {\n\t\t\t\t\t\t\tnextNode = this.stealFromLeft(\n\t\t\t\t\t\t\t\ttree.children[tree.numKeys],\n\t\t\t\t\t\t\t\ttree.numKeys,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextNode = this.mergeRight(tree.children[tree.numKeys - 1]);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.doDeleteNotEmpty(tree.children[tree.numKeys], val);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else if (tree.keys[i] > val) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\n\t\t\t\t\tif (tree.children[i].numKeys > this.min_keys) {\n\t\t\t\t\t\tthis.doDeleteNotEmpty(tree.children[i], val);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (tree.children[i + 1].numKeys > this.min_keys) {\n\t\t\t\t\t\t\tnextNode = this.stealFromRight(tree.children[i], i);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextNode = this.mergeRight(tree.children[i]);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, 'FF0000', i);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\tfor (let j = i; j < tree.numKeys - 1; j++) {\n\t\t\t\t\t\ttree.keys[j] = tree.keys[j + 1];\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[j], j);\n\t\t\t\t\t}\n\t\t\t\t\ttree.numKeys--;\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\tthis.cmd(act.setText, this.messageID, '');\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t'Checking to see if tree to left of element to delete \\nhas an extra key',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\t\t\t\t\tlet maxNode = tree.children[i];\n\n\t\t\t\t\tif (tree.children[i].numKeys === this.min_keys) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t'Tree to left of element to delete does not have an extra key.  \\nLooking to the right ...',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\t\ttree.children[i + 1].graphicID,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\t\ttree.children[i + 1].graphicID,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t);\n\t\t\t\t\t\t// Trees to left and right of node to delete don't have enough keys\n\t\t\t\t\t\t// Do a merge, and then recursively delete the element\n\t\t\t\t\t\tif (tree.children[i + 1].numKeys === this.min_keys) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t\t'Neither subtree has extra nodes.  Mergeing around the key to delete, \\nand recursively deleting ...',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\t\tnextNode = this.mergeRight(tree.children[i]);\n\t\t\t\t\t\t\tthis.doDeleteNotEmpty(nextNode, val);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t\t'Tree to right of element to delete does have an extra key. \\nFinding the smallest key in that subtree ...',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\tlet minNode = tree.children[i + 1];\n\t\t\t\t\t\t\twhile (!minNode.isLeaf) {\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 1);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 0);\n\t\t\t\t\t\t\t\tif (minNode.children[0].numKeys === this.min_keys) {\n\t\t\t\t\t\t\t\t\tif (minNode.children[1].numKeys === this.min_keys) {\n\t\t\t\t\t\t\t\t\t\tminNode = this.mergeRight(minNode.children[0]);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tminNode = this.stealFromRight(minNode.children[0], 0);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tminNode = minNode.children[0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 1);\n\t\t\t\t\t\t\ttree.keys[i] = minNode.keys[0];\n\t\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t\t\t\t\t\tthis.cmd(act.setText, minNode.graphicID, '', 0);\n\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\tthis.moveLabel1ID,\n\t\t\t\t\t\t\t\tminNode.keys[0],\n\t\t\t\t\t\t\t\tthis.getLabelX(minNode, 0),\n\t\t\t\t\t\t\t\tminNode.y,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, i), tree.y);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t\t\t\t\t\tfor (i = 1; i < minNode.numKeys; i++) {\n\t\t\t\t\t\t\t\tminNode.keys[i - 1] = minNode.keys[i];\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tminNode.graphicID,\n\t\t\t\t\t\t\t\t\tminNode.keys[i - 1],\n\t\t\t\t\t\t\t\t\ti - 1,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.cmd(act.setText, minNode.graphicID, '', minNode.numKeys - 1);\n\n\t\t\t\t\t\t\tminNode.numKeys--;\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, minNode.graphicID, 0);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\t\t\t\tthis.cmd(act.setNumElements, minNode.graphicID, minNode.numKeys);\n\t\t\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\t\t\tthis.cmd(act.setText, this.messageID, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.messageID,\n\t\t\t\t\t\t\t'Tree to left of element to delete does have \\nan extra key. Finding the largest key in that subtree ...',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\twhile (!maxNode.isLeaf) {\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\t\t\tif (maxNode.children[maxNode.numKeys].numKeys === this.min_keys) {\n\t\t\t\t\t\t\t\tif (maxNode.children[maxNode.numKeys - 1] > this.min_keys) {\n\t\t\t\t\t\t\t\t\tmaxNode = this.stealFromLeft(\n\t\t\t\t\t\t\t\t\t\tmaxNode.children[maxNode.numKeys],\n\t\t\t\t\t\t\t\t\t\tmaxNode.numKeys,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmaxNode = this.mergeRight(maxNode.children[maxNode.numKeys - 1]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxNode = maxNode.children[maxNode.numKeys];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\ttree.keys[i] = maxNode.keys[maxNode.numKeys - 1];\n\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t\t\t\t\tthis.cmd(act.setText, maxNode.graphicID, '', maxNode.numKeys - 1);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.moveLabel1ID,\n\t\t\t\t\t\t\ttree.keys[i],\n\t\t\t\t\t\t\tthis.getLabelX(maxNode, maxNode.numKeys - 1),\n\t\t\t\t\t\t\tmaxNode.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, i), tree.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t\t\t\t\tmaxNode.numKeys--;\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\t\t\tthis.cmd(act.setNumElements, maxNode.graphicID, maxNode.numKeys);\n\t\t\t\t\t\tthis.resizeTree();\n\t\t\t\t\t\tthis.cmd(act.setText, this.messageID, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdoDelete(tree, val) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < tree.numKeys && tree.keys[i] < val; i++);\n\t\t\tif (i === tree.numKeys) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t1,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setEdgeHighlight,\n\t\t\t\t\t\ttree.graphicID,\n\t\t\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.doDelete(tree.children[tree.numKeys], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else if (tree.keys[i] > val) {\n\t\t\t\tif (!tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 1);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setEdgeHighlight, tree.graphicID, tree.children[i].graphicID, 0);\n\t\t\t\t\tthis.doDelete(tree.children[i], val);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, '#FF0000', i);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (tree.isLeaf) {\n\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\tfor (let j = i; j < tree.numKeys - 1; j++) {\n\t\t\t\t\t\ttree.keys[j] = tree.keys[j + 1];\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[j], j);\n\t\t\t\t\t}\n\t\t\t\t\ttree.numKeys--;\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tthis.repairAfterDelete(tree);\n\t\t\t\t} else {\n\t\t\t\t\tlet maxNode;\n\t\t\t\t\tif (this.predSucc === 'pred') {\n\t\t\t\t\t\tmaxNode = tree.children[i];\n\t\t\t\t\t\twhile (!maxNode.isLeaf) {\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\t\t\tmaxNode = maxNode.children[maxNode.numKeys];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\ttree.keys[i] = maxNode.keys[maxNode.numKeys - 1];\n\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t\t\t\t\tthis.cmd(act.setText, maxNode.graphicID, '', maxNode.numKeys - 1);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.moveLabel1ID,\n\t\t\t\t\t\t\ttree.keys[i],\n\t\t\t\t\t\t\tthis.getLabelX(maxNode, maxNode.numKeys - 1),\n\t\t\t\t\t\t\tmaxNode.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmaxNode = tree.children[i + 1];\n\t\t\t\t\t\twhile (!maxNode.isLeaf) {\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\t\t\tmaxNode = maxNode.children[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 1);\n\t\t\t\t\t\ttree.keys[i] = maxNode.keys[0];\n\t\t\t\t\t\tthis.cmd(act.setTextColor, tree.graphicID, FOREGROUND_COLOR, i);\n\t\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, '', i);\n\t\t\t\t\t\tthis.cmd(act.setText, maxNode.graphicID, '', 0);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.moveLabel1ID,\n\t\t\t\t\t\t\ttree.keys[i],\n\t\t\t\t\t\t\tthis.getLabelX(maxNode, 0),\n\t\t\t\t\t\t\tmaxNode.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, i), tree.y);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\t\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t\t\t\tmaxNode.numKeys--;\n\t\t\t\t\tthis.cmd(act.setHighlight, maxNode.graphicID, 0);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\n\t\t\t\t\t/* When setNumElements is called with the new #, it cuts of the last element\n\t\t\t\t\t(like removeFromBack in an array). Removing the successor is more like \n\t\t\t\t\tremoveFromFront so you need to shift elements left by 1*/\n\t\t\t\t\tif (this.predSucc === 'succ') {\n\t\t\t\t\t\tfor (let j = 0; j < maxNode.numKeys; j++) {\n\t\t\t\t\t\t\tmaxNode.keys[j] = maxNode.keys[j + 1];\n\t\t\t\t\t\t\tthis.cmd(act.setText, maxNode.graphicID, maxNode.keys[j], j);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.setNumElements, maxNode.graphicID, maxNode.numKeys);\n\t\t\t\t\tthis.repairAfterDelete(maxNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmergeRight(tree) {\n\t\tthis.cmd(act.setText, this.messageID, 'Merging node');\n\n\t\tconst parentNode = tree.parent;\n\t\tlet parentIndex = 0;\n\t\tfor (parentIndex = 0; parentNode.children[parentIndex] !== tree; parentIndex++);\n\t\tconst rightSib = parentNode.children[parentIndex + 1];\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.setHighlight, parentNode.graphicID, 1);\n\t\tthis.cmd(act.setHighlight, rightSib.graphicID, 1);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys + rightSib.numKeys + 1);\n\t\ttree.x = (tree.x + rightSib.x) / 2;\n\t\tthis.cmd(act.setPosition, tree.graphicID, tree.x, tree.y);\n\n\t\ttree.keys[tree.numKeys] = parentNode.keys[parentIndex];\n\t\tconst fromParentIndex = tree.numKeys;\n\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.moveLabel1ID,\n\t\t\tparentNode.keys[parentIndex],\n\t\t\tthis.getLabelX(parentNode, parentIndex),\n\t\t\tparentNode.y,\n\t\t);\n\n\t\tfor (let i = 0; i < rightSib.numKeys; i++) {\n\t\t\ttree.keys[tree.numKeys + 1 + i] = rightSib.keys[i];\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\ttree.graphicID,\n\t\t\t\ttree.keys[tree.numKeys + 1 + i],\n\t\t\t\ttree.numKeys + 1 + i,\n\t\t\t);\n\t\t\tthis.cmd(act.setText, rightSib.graphicID, '', i);\n\t\t}\n\t\tif (!tree.isLeaf) {\n\t\t\tfor (let i = 0; i <= rightSib.numKeys; i++) {\n\t\t\t\tthis.cmd(act.disconnect, rightSib.graphicID, rightSib.children[i].graphicID);\n\t\t\t\ttree.children[tree.numKeys + 1 + i] = rightSib.children[i];\n\t\t\t\ttree.children[tree.numKeys + 1 + i].parent = tree;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\ttree.graphicID,\n\t\t\t\t\ttree.children[tree.numKeys + 1 + i].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ttree.numKeys + 1 + i,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.disconnect, parentNode.graphicID, rightSib.graphicID);\n\t\tfor (let i = parentIndex + 1; i < parentNode.numKeys; i++) {\n\t\t\tthis.cmd(act.disconnect, parentNode.graphicID, parentNode.children[i + 1].graphicID);\n\t\t\tparentNode.children[i] = parentNode.children[i + 1];\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tparentNode.graphicID,\n\t\t\t\tparentNode.children[i].graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\ti,\n\t\t\t);\n\t\t\tparentNode.keys[i - 1] = parentNode.keys[i];\n\t\t\tthis.cmd(act.setText, parentNode.graphicID, parentNode.keys[i - 1], i - 1);\n\t\t}\n\t\tthis.cmd(act.setText, parentNode.graphicID, '', parentNode.numKeys - 1);\n\t\tparentNode.numKeys--;\n\t\tthis.cmd(act.setNumElements, parentNode.graphicID, parentNode.numKeys);\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, parentNode.graphicID, 0);\n\n\t\tthis.cmd(act.delete, rightSib.graphicID);\n\t\ttree.numKeys = tree.numKeys + rightSib.numKeys + 1;\n\t\tthis.cmd(act.move, this.moveLabel1ID, this.getLabelX(tree, fromParentIndex), tree.y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.moveLabel1ID);\n\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[fromParentIndex], fromParentIndex);\n\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn tree;\n\t}\n\n\tstealFromRight(tree, parentIndex) {\n\t\t// Steal from right sibling\n\t\tconst parentNode = tree.parent;\n\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys + 1);\n\n\t\tthis.cmd(act.setText, this.messageID, 'Stealing from right sibling');\n\n\t\tconst rightSib = parentNode.children[parentIndex + 1];\n\t\ttree.numKeys++;\n\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\n\t\tthis.cmd(act.setText, tree.graphicID, '', tree.numKeys - 1);\n\t\tthis.cmd(act.setText, parentNode.graphicID, '', parentIndex);\n\t\tthis.cmd(act.setText, rightSib.graphicID, '', 0);\n\n\t\tconst tmpLabel1 = this.nextIndex++;\n\t\tconst tmpLabel2 = this.nextIndex++;\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel1,\n\t\t\trightSib.keys[0],\n\t\t\tthis.getLabelX(rightSib, 0),\n\t\t\trightSib.y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel2,\n\t\t\tparentNode.keys[parentIndex],\n\t\t\tthis.getLabelX(parentNode, parentIndex),\n\t\t\tparentNode.y,\n\t\t);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel1, FOREGROUND_COLOR);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel2, FOREGROUND_COLOR);\n\n\t\tthis.cmd(act.move, tmpLabel1, this.getLabelX(parentNode, parentIndex), parentNode.y);\n\t\tthis.cmd(act.move, tmpLabel2, this.getLabelX(tree, tree.numKeys - 1), tree.y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, tmpLabel1);\n\t\tthis.cmd(act.delete, tmpLabel2);\n\t\ttree.keys[tree.numKeys - 1] = parentNode.keys[parentIndex];\n\t\tparentNode.keys[parentIndex] = rightSib.keys[0];\n\n\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[tree.numKeys - 1], tree.numKeys - 1);\n\t\tthis.cmd(act.setText, parentNode.graphicID, parentNode.keys[parentIndex], parentIndex);\n\t\tif (!tree.isLeaf) {\n\t\t\ttree.children[tree.numKeys] = rightSib.children[0];\n\t\t\ttree.children[tree.numKeys].parent = tree;\n\t\t\tthis.cmd(act.disconnect, rightSib.graphicID, rightSib.children[0].graphicID);\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\ttree.graphicID,\n\t\t\t\ttree.children[tree.numKeys].graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\ttree.numKeys,\n\t\t\t);\n\n\t\t\tfor (let i = 1; i < rightSib.numKeys + 1; i++) {\n\t\t\t\tthis.cmd(act.disconnect, rightSib.graphicID, rightSib.children[i].graphicID);\n\t\t\t\trightSib.children[i - 1] = rightSib.children[i];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\trightSib.graphicID,\n\t\t\t\t\trightSib.children[i - 1].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti - 1,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tfor (let i = 1; i < rightSib.numKeys; i++) {\n\t\t\trightSib.keys[i - 1] = rightSib.keys[i];\n\t\t\tthis.cmd(act.setText, rightSib.graphicID, rightSib.keys[i - 1], i - 1);\n\t\t}\n\t\tthis.cmd(act.setText, rightSib.graphicID, '', rightSib.numKeys - 1);\n\t\trightSib.numKeys--;\n\t\tthis.cmd(act.setNumElements, rightSib.graphicID, rightSib.numKeys);\n\t\tthis.resizeTree();\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn tree;\n\t}\n\n\tstealFromLeft(tree, parentIndex) {\n\t\tconst parentNode = tree.parent;\n\t\t// Steal from left sibling\n\t\ttree.numKeys++;\n\t\tthis.cmd(act.setNumElements, tree.graphicID, tree.numKeys);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.messageID,\n\t\t\t'Node has too few keys.  Stealing from left sibling.',\n\t\t);\n\n\t\tfor (let i = tree.numKeys - 1; i > 0; i--) {\n\t\t\ttree.keys[i] = tree.keys[i - 1];\n\t\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[i], i);\n\t\t}\n\t\tconst leftSib = parentNode.children[parentIndex - 1];\n\n\t\tthis.cmd(act.setText, tree.graphicID, '', 0);\n\t\tthis.cmd(act.setText, parentNode.graphicID, '', parentIndex - 1);\n\t\tthis.cmd(act.setText, leftSib.graphicID, '', leftSib.numKeys - 1);\n\n\t\tconst tmpLabel1 = this.nextIndex++;\n\t\tconst tmpLabel2 = this.nextIndex++;\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel1,\n\t\t\tleftSib.keys[leftSib.numKeys - 1],\n\t\t\tthis.getLabelX(leftSib, leftSib.numKeys - 1),\n\t\t\tleftSib.y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\ttmpLabel2,\n\t\t\tparentNode.keys[parentIndex - 1],\n\t\t\tthis.getLabelX(parentNode, parentIndex - 1),\n\t\t\tparentNode.y,\n\t\t);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel1, FOREGROUND_COLOR);\n\t\tthis.cmd(act.setForegroundColor, tmpLabel2, FOREGROUND_COLOR);\n\n\t\tthis.cmd(act.move, tmpLabel1, this.getLabelX(parentNode, parentIndex - 1), parentNode.y);\n\t\tthis.cmd(act.move, tmpLabel2, this.getLabelX(tree, 0), tree.y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, tmpLabel1);\n\t\tthis.cmd(act.delete, tmpLabel2);\n\n\t\tif (!tree.isLeaf) {\n\t\t\tfor (let i = tree.numKeys; i > 0; i--) {\n\t\t\t\tthis.cmd(act.disconnect, tree.graphicID, tree.children[i - 1].graphicID);\n\t\t\t\ttree.children[i] = tree.children[i - 1];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\ttree.graphicID,\n\t\t\t\t\ttree.children[i].graphicID,\n\t\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t\t0, // Curve\n\t\t\t\t\t0, // Directed\n\t\t\t\t\t'', // Label\n\t\t\t\t\ti,\n\t\t\t\t);\n\t\t\t}\n\t\t\ttree.children[0] = leftSib.children[leftSib.numKeys];\n\t\t\tthis.cmd(\n\t\t\t\tact.disconnect,\n\t\t\t\tleftSib.graphicID,\n\t\t\t\tleftSib.children[leftSib.numKeys].graphicID,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\ttree.graphicID,\n\t\t\t\ttree.children[0].graphicID,\n\t\t\t\tFOREGROUND_COLOR,\n\t\t\t\t0, // Curve\n\t\t\t\t0, // Directed\n\t\t\t\t'', // Label\n\t\t\t\t0,\n\t\t\t);\n\t\t\tleftSib.children[leftSib.numKeys] = null;\n\t\t\ttree.children[0].parent = tree;\n\t\t}\n\n\t\ttree.keys[0] = parentNode.keys[parentIndex - 1];\n\t\tthis.cmd(act.setText, tree.graphicID, tree.keys[0], 0);\n\t\tparentNode.keys[parentIndex - 1] = leftSib.keys[leftSib.numKeys - 1];\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tparentNode.graphicID,\n\t\t\tparentNode.keys[parentIndex - 1],\n\t\t\tparentIndex - 1,\n\t\t);\n\t\tthis.cmd(act.setText, leftSib.graphicID, '', leftSib.numKeys - 1);\n\n\t\tleftSib.numKeys--;\n\t\tthis.cmd(act.setNumElements, leftSib.graphicID, leftSib.numKeys);\n\t\tthis.resizeTree();\n\t\tthis.cmd(act.setText, this.messageID, '');\n\t\treturn tree;\n\t}\n\n\trepairAfterDelete(tree) {\n\t\tif (tree.numKeys < this.min_keys) {\n\t\t\tif (tree.parent == null) {\n\t\t\t\tif (tree.numKeys === 0) {\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, tree.graphicID);\n\t\t\t\t\tthis.treeRoot = tree.children[0];\n\t\t\t\t\tif (this.treeRoot != null) this.treeRoot.parent = null;\n\t\t\t\t\tthis.resizeTree();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst parentNode = tree.parent;\n\t\t\t\tlet parentIndex;\n\t\t\t\tlet nextNode;\n\t\t\t\tfor (parentIndex = 0; parentNode.children[parentIndex] !== tree; parentIndex++);\n\t\t\t\tif (\n\t\t\t\t\tparentIndex > 0 &&\n\t\t\t\t\tparentNode.children[parentIndex - 1].numKeys > this.min_keys\n\t\t\t\t) {\n\t\t\t\t\tthis.stealFromLeft(tree, parentIndex);\n\t\t\t\t} else if (\n\t\t\t\t\tparentIndex < parentNode.numKeys &&\n\t\t\t\t\tparentNode.children[parentIndex + 1].numKeys > this.min_keys\n\t\t\t\t) {\n\t\t\t\t\tthis.stealFromRight(tree, parentIndex);\n\t\t\t\t} else if (parentIndex === 0) {\n\t\t\t\t\t// Merge with right sibling\n\t\t\t\t\tnextNode = this.mergeRight(tree);\n\t\t\t\t\tthis.repairAfterDelete(nextNode.parent);\n\t\t\t\t} else {\n\t\t\t\t\t// Merge with left sibling\n\t\t\t\t\tnextNode = this.mergeRight(parentNode.children[parentIndex - 1]);\n\t\t\t\t\tthis.repairAfterDelete(nextNode.parent);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetLabelX(tree, index) {\n\t\treturn (\n\t\t\ttree.x -\n\t\t\t(WIDTH_PER_ELEM * tree.numKeys) / 2 +\n\t\t\tWIDTH_PER_ELEM / 2 +\n\t\t\tindex * WIDTH_PER_ELEM\n\t\t);\n\t}\n\n\tresizeTree() {\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tthis.setNewPositions(this.treeRoot, this.starting_x, STARTING_Y);\n\t\tthis.animateNewPositions(this.treeRoot);\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\ttree.x = xPosition;\n\t\t\tif (!tree.isLeaf) {\n\t\t\t\tconst leftEdge = xPosition - tree.width / 2;\n\t\t\t\tlet priorWidth = 0;\n\t\t\t\tfor (let i = 0; i < tree.numKeys + 1; i++) {\n\t\t\t\t\tthis.setNewPositions(\n\t\t\t\t\t\ttree.children[i],\n\t\t\t\t\t\tleftEdge + priorWidth + tree.widths[i] / 2,\n\t\t\t\t\t\tyPosition + HEIGHT_DELTA,\n\t\t\t\t\t);\n\t\t\t\t\tpriorWidth += tree.widths[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet i;\n\t\tfor (i = 0; i < tree.numKeys + 1; i++) {\n\t\t\tthis.animateNewPositions(tree.children[i]);\n\t\t}\n\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (tree.isLeaf) {\n\t\t\tfor (let i = 0; i < tree.numKeys + 1; i++) {\n\t\t\t\ttree.widths[i] = 0;\n\t\t\t}\n\t\t\ttree.width = tree.numKeys * WIDTH_PER_ELEM + NODE_SPACING;\n\t\t\treturn tree.width;\n\t\t} else {\n\t\t\tlet treeWidth = 0;\n\t\t\tfor (let i = 0; i < tree.numKeys + 1; i++) {\n\t\t\t\ttree.widths[i] = this.resizeWidths(tree.children[i]);\n\t\t\t\ttreeWidth = treeWidth + tree.widths[i];\n\t\t\t}\n\t\t\ttreeWidth = Math.max(treeWidth, tree.numKeys * WIDTH_PER_ELEM + NODE_SPACING);\n\t\t\ttree.width = treeWidth;\n\t\t\treturn treeWidth;\n\t\t}\n\t}\n}\n\nfunction BTreeNode(id, initialX, initialY) {\n\tthis.widths = [];\n\tthis.keys = [];\n\tthis.children = [];\n\tthis.x = initialX;\n\tthis.y = initialY;\n\tthis.graphicID = id;\n\tthis.numKeys = 1;\n\tthis.isLeaf = true;\n\tthis.parent = null;\n\n\tthis.leftWidth = 0;\n\tthis.rightWidth = 0;\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddCheckboxToAlgorithmBar,\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\nconst PATTERN_START_Y = 80;\n\nconst FAILURE_TABLE_START_Y = 215;\nconst LAST_TABLE_START_Y = 140;\n\nconst COMP_COUNT_X = 575;\nconst COMP_COUNT_Y = 15;\n\nconst PERIOD_Y = 35;\n\nconst BM_CODE_Y = 195;\n\nconst GALIL_CODE_Y = 265;\n\nlet galilRuleEnabled = false;\n\nexport default class BoyerMoore extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Build Last Occurrence Table button\n\t\tthis.blotButton = addControlToAlgorithmBar('Button', 'Build Last Occurrence Table');\n\t\tthis.blotButton.onclick = this.buildLastOccurrenceTableCallback.bind(this);\n\t\tthis.controls.push(this.blotButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Galil Rule button\n\t\tthis.galilButton = addCheckboxToAlgorithmBar('Galil Rule Optimization', false);\n\t\tthis.galilButton.onclick = this.toggleGalilRule.bind(this);\n\t\tthis.controls.push(this.galilButton);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.patternTableLabelID = this.nextIndex++;\n\t\tthis.patternTableCharacterID = [];\n\t\tthis.patternTableIndexID = [];\n\t\tthis.lastTableLabelID = this.nextIndex++;\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\t\tthis.codeID = [];\n\t\t// this.failureTableLabelID = this.nextIndex++;\n\t\t// this.failureTableCharacterID = [];\n\t\t// this.failureTableValueID = [];\n\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.periodLabelID = this.nextIndex++;\n\n\t\tthis.lastTableCode = [\n\t\t\t['procedure BoyerMooreLastTable(pattern):'],\n\t\t\t['     lastTable <- map from character to integer'],\n\t\t\t['     for i < 0, length of pattern'],\n\t\t\t['          lastTable[pattern[i]] <- i'],\n\t\t\t['     return lastTable'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.failureTableCode = [\n\t\t\t['procedure KMPFailureTable(pattern):'],\n\t\t\t['     m <- length of pattern'],\n\t\t\t['     failureTable <- array of length m'],\n\t\t\t['     i <- 0, j <- 1'],\n\t\t\t['     failureTable[0] <- 0'],\n\t\t\t['     while j < m'],\n\t\t\t['          if pattern[i] = pattern[j]'],\n\t\t\t['               failureTable[j] <- i + 1'],\n\t\t\t['               i < i + 1, j <- j + 1'],\n\t\t\t['          else'],\n\t\t\t['               if i = 0'],\n\t\t\t['                    failureTable[j] <- 0'],\n\t\t\t['                    j <- j + 1'],\n\t\t\t['               else'],\n\t\t\t['                    i <- failureTable[i - 1]'],\n\t\t\t['     return failureTable'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.BMCode = [\n\t\t\t['procedure BoyerMoore(text, pattern):'],\n\t\t\t['     initialize lastTable'],\n\t\t\t['     m <- length of pattern, n <- length of text'],\n\t\t\t['     i <- 0'],\n\t\t\t['     while i <= n - m'],\n\t\t\t['          j = m - 1'],\n\t\t\t['          while j >= 0 and text[i + j] = pattern[j]'],\n\t\t\t['               j -> j - 1'],\n\t\t\t['          if j = -1'],\n\t\t\t['               match found at i'],\n\t\t\t['               i <- i + 1'],\n\t\t\t['          else'],\n\t\t\t['               shift <- lastTable[text[i + j]]'],\n\t\t\t['               if shift < j'],\n\t\t\t['                    i <- i + (j - shift)'],\n\t\t\t['               else'],\n\t\t\t['                    i <- i + 1'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.GalilCode = [\n\t\t\t['procedure BoyerMooreGalil(text, pattern):'],\n\t\t\t['     initialize lastTable, failureTable'],\n\t\t\t['     m <- length of pattern, n <- length of text'],\n\t\t\t['     k <- m - failureTable[m - 1]'],\n\t\t\t['     i <- 0, w <- 0'],\n\t\t\t['     while i <= n - m'],\n\t\t\t['          j = m - 1'],\n\t\t\t['          while j >= w and text[i + j] = pattern[j]'],\n\t\t\t['               j -> j - 1'],\n\t\t\t['          if j < w'],\n\t\t\t['               match found at i'],\n\t\t\t['               i <- i + k'],\n\t\t\t['               w <- m - k'],\n\t\t\t['          else'],\n\t\t\t['               shift <- lastTable[text[i + j]]'],\n\t\t\t['               if shift < j'],\n\t\t\t['                    i <- i + (j - shift)'],\n\t\t\t['               else'],\n\t\t\t['                    i <- i + 1'],\n\t\t\t['               w <- 0'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.createLabel, this.comparisonCountID, '', COMP_COUNT_X, COMP_COUNT_Y, 0);\n\n\t\tthis.period = 1;\n\t\tthis.cmd(act.createLabel, this.periodLabelID, '', COMP_COUNT_X, PERIOD_Y, 0);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.patternTableLabelID = this.nextIndex++;\n\t\tthis.patternTableCharacterID = [];\n\t\tthis.patternTableIndexID = [];\n\t\tthis.lastTableLabelID = this.nextIndex++;\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\t\tthis.codeID = [];\n\t\t// this.failureTableLabelID = this.nextIndex++;\n\t\t// this.failureTableCharacterID = [];\n\t\t// this.failureTableValueID = [];\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.periodLabelID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t\tthis.period = 1;\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tbuildLastOccurrenceTableCallback() {\n\t\tif (this.patternField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.onlyBuildLastOccurrenceTable.bind(this), 0, pattern);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\ttoggleGalilRule() {\n\t\tgalilRuleEnabled = !galilRuleEnabled;\n\t\t//this.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tconsole.log(this.codeID);\n\t\tif (this.codeID) {\n\t\t\tthis.removeCode(this.codeID);\n\t\t}\n\t\tthis.commands = [];\n\n\t\tconst maxRows = this.getMaxRows(text, pattern);\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\tconst xpos = i * this.cellSize + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tlet xpos;\n\t\tlet ypos;\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst lastTable = this.buildLastTable(text.length, pattern);\n\t\tthis.removeCode(this.codeID);\n\t\tif (galilRuleEnabled) {\n\t\t\tthis.buildFailureTable(text.length, pattern);\n\t\t\tthis.codeID = this.addCodeToCanvasBase(\n\t\t\t\tthis.GalilCode,\n\t\t\t\tARRAY_START_X + text.length * this.cellSize + 10,\n\t\t\t\tBM_CODE_Y,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.codeID = this.addCodeToCanvasBase(\n\t\t\t\tthis.BMCode,\n\t\t\t\tARRAY_START_X + text.length * this.cellSize + 10,\n\t\t\t\tBM_CODE_Y,\n\t\t\t);\n\t\t}\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + (pattern.length - 1) * this.cellSize,\n\t\t\tARRAY_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + (pattern.length - 1) * this.cellSize,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\n\t\tlet i = 0;\n\t\tlet j = pattern.length - 1;\n\t\tlet row = 0;\n\t\tlet l = 0;\n\t\tlet gr = galilRuleEnabled ? 1 : 0;\n\t\tthis.highlight(gr + 4, 0);\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\tgr = galilRuleEnabled ? 1 : 0;\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t\tif (k - i < l) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][k], '#FFFF4D');\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.highlight(gr + 5, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(gr + 5, 0);\n\t\t\tthis.highlight(gr + 6, 0);\n\t\t\twhile (j >= l && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#2ECC71');\n\t\t\t\tj--;\n\t\t\t\tthis.highlight(gr + 7, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(gr + 7, 0);\n\t\t\t\tif (j >= 0) {\n\t\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.unhighlight(gr + 6, 0);\n\t\t\tthis.highlight(gr + 8, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(gr + 8, 0);\n\t\t\tif (j < l) {\n\t\t\t\tthis.highlight(gr + 9, 0);\n\t\t\t\tthis.highlight(gr + 10, 0);\n\t\t\t\tif (galilRuleEnabled) {\n\t\t\t\t\tthis.highlight(gr + 11, 0);\n\t\t\t\t\ti += this.period;\n\t\t\t\t\tl = pattern.length - this.period;\n\t\t\t\t} else {\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(gr + 9, 0);\n\t\t\t\tthis.unhighlight(gr + 10, 0);\n\t\t\t\tthis.unhighlight(gr + 11, 0);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tif (l !== 0) {\n\t\t\t\t\tl = 0;\n\t\t\t\t}\n\t\t\t\tgr = galilRuleEnabled ? 2 : 0;\n\t\t\t\tthis.highlight(11 + gr, 0);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#E74C3C');\n\t\t\t\tlet shift;\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(11 + gr, 0);\n\t\t\t\tthis.highlight(12 + gr, 0);\n\t\t\t\tif (text.charAt(i + j) in lastTable) {\n\t\t\t\t\tshift = lastTable[text.charAt(i + j)];\n\t\t\t\t} else {\n\t\t\t\t\tshift = -1;\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(12 + gr, 0);\n\t\t\t\tthis.highlight(13 + gr, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(13 + gr, 0);\n\t\t\t\tif (shift < j) {\n\t\t\t\t\tthis.highlight(14 + gr, 0);\n\t\t\t\t\ti += j - shift;\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlight(15 + gr, 0);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(15 + gr, 0);\n\t\t\t\t\tthis.highlight(16 + gr, 0);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(14 + gr, 0);\n\t\t\t\tthis.unhighlight(16 + gr, 0);\n\t\t\t}\n\t\t\tj = pattern.length - 1;\n\t\t\trow++;\n\t\t\tif (i <= text.length - pattern.length) {\n\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t}\n\t\t}\n\t\tgr = galilRuleEnabled ? 1 : 0;\n\t\tthis.unhighlight(gr + 4, 0);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\treturn this.commands;\n\t}\n\n\tgetMaxRows(text, pattern) {\n\t\tif (galilRuleEnabled) {\n\t\t\tconst failureTable = [];\n\t\t\tfailureTable[0] = 0;\n\t\t\tlet i = 0;\n\t\t\tlet j = 1;\n\t\t\twhile (j < pattern.length) {\n\t\t\t\tif (pattern.charAt(i) === pattern.charAt(j)) {\n\t\t\t\t\ti++;\n\t\t\t\t\tfailureTable[j] = i;\n\t\t\t\t\tj++;\n\t\t\t\t} else {\n\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\tfailureTable[j] = i;\n\t\t\t\t\t\tj++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ti = failureTable[i - 1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.period = pattern.length - failureTable[pattern.length - 1];\n\t\t}\n\t\tconst lastTable = {};\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tlastTable[pattern.charAt(i)] = i;\n\t\t}\n\t\tlet i = 0;\n\t\tlet j = pattern.length - 1;\n\t\tlet maxRows = 0;\n\t\tlet l = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\twhile (j >= l && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tj--;\n\t\t\t}\n\t\t\tif (j < l) {\n\t\t\t\tif (galilRuleEnabled) {\n\t\t\t\t\ti += this.period;\n\t\t\t\t\tl = pattern.length - this.period;\n\t\t\t\t} else {\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (l !== 0) {\n\t\t\t\t\tl = 0;\n\t\t\t\t}\n\t\t\t\tlet shift;\n\t\t\t\tif (text.charAt(i + j) in lastTable) {\n\t\t\t\t\tshift = lastTable[text.charAt(i + j)];\n\t\t\t\t} else {\n\t\t\t\t\tshift = -1;\n\t\t\t\t}\n\t\t\t\tif (shift < j) {\n\t\t\t\t\ti += j - shift;\n\t\t\t\t} else {\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tj = pattern.length - 1;\n\t\t\tmaxRows++;\n\t\t}\n\t\treturn maxRows;\n\t}\n\n\tonlyBuildLastOccurrenceTable(textLength, pattern) {\n\t\tthis.commands = [];\n\t\tthis.cellSize = 30;\n\t\tthis.buildLastTable(textLength, pattern);\n\t\treturn this.commands;\n\t}\n\n\tbuildLastTable(textLength, pattern) {\n\t\t// Display labels\n\t\tconst labelsX = ARRAY_START_X + textLength * this.cellSize + 10;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.patternTableLabelID,\n\t\t\t'Pattern:',\n\t\t\tlabelsX,\n\t\t\tPATTERN_START_Y - 5,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.lastTableLabelID,\n\t\t\t'Last occurence table:',\n\t\t\tlabelsX,\n\t\t\tLAST_TABLE_START_Y + 10,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.move, this.comparisonCountID, labelsX, COMP_COUNT_Y);\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + this.compCount);\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.lastTableCode, labelsX, BM_CODE_Y);\n\n\t\t// Display pattern table\n\t\tconst patternTableStartX = ARRAY_START_X + textLength * this.cellSize + 80;\n\t\tthis.patternTableCharacterID = new Array(pattern.length);\n\t\tthis.patternTableIndexID = new Array(pattern.length);\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tconst xpos = patternTableStartX + i * this.cellSize;\n\t\t\tthis.patternTableCharacterID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tpattern.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tPATTERN_START_Y,\n\t\t\t);\n\t\t\tthis.patternTableIndexID[i] = this.nextIndex;\n\t\t\tthis.cmd(act.createLabel, this.nextIndex++, i, xpos, PATTERN_START_Y + this.cellSize);\n\t\t}\n\n\t\t// Create and display last occurrence table\n\t\tconst lastTable = {};\n\t\tconst lotStartX = ARRAY_START_X + textLength * this.cellSize + 155;\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\t\tlet j = 0;\n\n\t\tconst lotPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tlotPointerID,\n\t\t\t'#0000FF',\n\t\t\tpatternTableStartX,\n\t\t\tPATTERN_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(act.setHighlight, lotPointerID, 1);\n\t\tthis.highlight(2, 0);\n\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tthis.cmd(act.step);\n\t\t\tlet xpos = patternTableStartX + i * this.cellSize;\n\t\t\tthis.cmd(act.move, lotPointerID, xpos, PATTERN_START_Y);\n\t\t\tthis.highlight(3, 0);\n\t\t\tif (lastTable[pattern.charAt(i)]) {\n\t\t\t\tthis.cmd(act.setText, lastTable[pattern.charAt(i)][1], i);\n\t\t\t\tthis.cmd(act.setHighlight, lastTable[pattern.charAt(i)][1], 1);\n\t\t\t\tlastTable[pattern.charAt(i)][0] = i;\n\t\t\t} else {\n\t\t\t\txpos = lotStartX + j * this.cellSize;\n\t\t\t\tthis.lastTableCharacterID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\tpattern.charAt(i),\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\tLAST_TABLE_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t\t\tthis.lastTableValueID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\ti,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\tLAST_TABLE_START_Y + this.cellSize,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setHighlight, this.nextIndex, 1);\n\t\t\t\tj++;\n\t\t\t\tlastTable[pattern.charAt(i)] = [i, this.nextIndex++];\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tthis.cmd(act.setHighlight, lastTable[pattern.charAt(i)][1], 0);\n\t\t}\n\t\tthis.unhighlight(2, 0);\n\n\t\t// Display '*' entry\n\t\tthis.cmd(act.delete, lotPointerID);\n\t\tconst xpos = lotStartX + j * this.cellSize;\n\t\tthis.lastTableCharacterID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.nextIndex,\n\t\t\t'*',\n\t\t\tthis.cellSize,\n\t\t\tthis.cellSize,\n\t\t\txpos,\n\t\t\tLAST_TABLE_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\tthis.lastTableValueID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.nextIndex++,\n\t\t\t'-1',\n\t\t\tthis.cellSize,\n\t\t\tthis.cellSize,\n\t\t\txpos,\n\t\t\tLAST_TABLE_START_Y + this.cellSize,\n\t\t);\n\t\tthis.highlight(4, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(4, 0);\n\n\t\tObject.keys(lastTable).map(char => (lastTable[char] = lastTable[char][0])); // Return only indices\n\t\treturn lastTable;\n\t}\n\n\tbuildFailureTable(textLength, pattern) {\n\t\tconst startIndex = this.nextIndex;\n\t\tthis.failureTableLabelID = this.nextIndex++;\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\t\t// Display label\n\t\tconst labelX = ARRAY_START_X + textLength * this.cellSize + 10;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.failureTableLabelID,\n\t\t\t'Failure table:',\n\t\t\tlabelX,\n\t\t\tFAILURE_TABLE_START_Y + 10,\n\t\t\t0,\n\t\t);\n\n\t\tthis.cmd(act.move, this.periodLabelID, labelX, PERIOD_Y);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.periodLabelID,\n\t\t\t'Period = pattern.length - FT[pattern.length - 1]',\n\t\t);\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.failureTableCode, labelX, GALIL_CODE_Y);\n\n\t\t// Display empty failure table\n\t\tconst tableStartX = ARRAY_START_X + textLength * this.cellSize + 110;\n\t\tthis.failureTableCharacterID = new Array(pattern.length);\n\t\tthis.failureTableValueID = new Array(pattern.length);\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tconst xpos = tableStartX + i * this.cellSize;\n\t\t\tthis.failureTableCharacterID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.failureTableCharacterID[i],\n\t\t\t\tpattern.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.failureTableCharacterID[i], '#D3D3D3');\n\t\t\tthis.failureTableValueID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.failureTableValueID[i],\n\t\t\t\t'',\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tFAILURE_TABLE_START_Y + this.cellSize,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t// Display pointers and set first value to 0\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\ttableStartX,\n\t\t\tFAILURE_TABLE_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#FF0000',\n\t\t\ttableStartX + this.cellSize,\n\t\t\tFAILURE_TABLE_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(act.setText, this.failureTableValueID[0], 0);\n\t\tthis.highlight(3, 0);\n\t\tthis.highlight(4, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(3, 0);\n\t\tthis.unhighlight(4, 0);\n\n\t\tconst failureTable = [];\n\t\tfailureTable[0] = 0;\n\t\tlet i = 0;\n\t\tlet j = 1;\n\t\tthis.highlight(5, 0);\n\t\twhile (j < pattern.length) {\n\t\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + ++this.compCount);\n\t\t\tthis.highlight(6, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(6, 0);\n\t\t\tif (pattern.charAt(i) === pattern.charAt(j)) {\n\t\t\t\tthis.highlight(7, 0);\n\t\t\t\tthis.highlight(8, 0);\n\t\t\t\ti++;\n\t\t\t\tfailureTable[j] = i;\n\t\t\t\tthis.cmd(act.setText, this.failureTableValueID[j], i);\n\t\t\t\tj++;\n\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tiPointerID,\n\t\t\t\t\t\ttableStartX + i * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tjPointerID,\n\t\t\t\t\t\ttableStartX + j * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.unhighlight(8, 0);\n\t\t\t} else {\n\t\t\t\tthis.highlight(9, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(9, 0);\n\t\t\t\tthis.highlight(10, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tthis.highlight(11, 0);\n\t\t\t\t\tthis.highlight(12, 0);\n\t\t\t\t\tfailureTable[j] = i;\n\t\t\t\t\tthis.cmd(act.setText, this.failureTableValueID[j], i);\n\t\t\t\t\tj++;\n\t\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tjPointerID,\n\t\t\t\t\t\t\ttableStartX + j * this.cellSize,\n\t\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(11, 0);\n\t\t\t\t\tthis.unhighlight(12, 0);\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlight(13, 0);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(13, 0);\n\t\t\t\t\tthis.highlight(14, 0);\n\t\t\t\t\ti = failureTable[i - 1];\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tiPointerID,\n\t\t\t\t\t\ttableStartX + i * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(14, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.unhighlight(5, 0);\n\t\tthis.highlight(15, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(15, 0);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.periodLabelID,\n\t\t\t'Period = ' + pattern.length + ' - ' + failureTable[pattern.length - 1],\n\t\t);\n\t\tconst ftPeriodLabel = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tftPeriodLabel,\n\t\t\t'#FF0000',\n\t\t\ttableStartX + this.cellSize * (pattern.length - 1),\n\t\t\tFAILURE_TABLE_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tthis.period = pattern.length - failureTable[pattern.length - 1];\n\t\tthis.cmd(act.setText, this.periodLabelID, 'Period = ' + this.period);\n\t\tthis.cmd(act.delete, ftPeriodLabel);\n\n\t\tif (this.failureTableValueID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.failureTableLabelID);\n\t\t}\n\n\t\tfor (let i = 0; i < this.failureTableCharacterID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.failureTableCharacterID[i]);\n\t\t\tthis.cmd(act.delete, this.failureTableValueID[i]);\n\t\t}\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\tthis.removeCode(this.codeID);\n\n\t\tthis.nextIndex = startIndex;\n\n\t\treturn failureTable;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\n\t\tthis.comparisonMatrixID = [];\n\t\tif (this.patternTableCharacterID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.patternTableLabelID);\n\t\t}\n\n\t\tfor (let i = 0; i < this.patternTableCharacterID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.patternTableCharacterID[i]);\n\t\t\tthis.cmd(act.delete, this.patternTableIndexID[i]);\n\t\t}\n\n\t\tthis.patternTableCharacterID = [];\n\t\tthis.patternTableIndexID = [];\n\t\tif (this.lastTableCharacterID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.lastTableLabelID);\n\t\t}\n\n\t\tfor (let i = 0; i < this.lastTableCharacterID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.lastTableCharacterID[i]);\n\t\t\tthis.cmd(act.delete, this.lastTableValueID[i]);\n\t\t}\n\n\t\tthis.removeCode(this.codeID);\n\n\t\t// if (this.failureTableValueID.length !== 0) {\n\t\t// \tthis.cmd(act.delete, this.failureTableLabelID);\n\t\t// }\n\n\t\t// for (let i = 0; i < this.failureTableCharacterID.length; i++) {\n\t\t// \tthis.cmd(act.delete, this.failureTableCharacterID[i]);\n\t\t// \tthis.cmd(act.delete, this.failureTableValueID[i]);\n\t\t// }\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.setText, this.comparisonCountID, '');\n\t\tthis.cmd(act.setText, this.periodLabelID, '');\n\t\tthis.lastTableCharacterID = [];\n\t\tthis.lastTableValueID = [];\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\t\tthis.codeID = [];\n\t\tthis.period = 1;\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddCheckboxToAlgorithmBar,\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_ARRAY_SIZE = 18;\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 130;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst COMP_COUNT_X = 100;\nconst COMP_COUNT_Y = 50;\n\nconst CODE_START_X = 50;\nconst CODE_START_Y = 200;\n\nlet lastSwapEnabled = true;\n\nexport default class BubbleSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma seperated list (e.g. \"3,1,2\"). Max 18 elements & no elements > 999',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.sortButton = addControlToAlgorithmBar('Button', 'Sort', horizontalGroup);\n\t\tthis.sortButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.sortButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Last swap optimization toggle\n\t\tthis.lastSwapCheckbox = addCheckboxToAlgorithmBar('Enable last swap optimization', true);\n\t\tthis.lastSwapCheckbox.onclick = this.toggleLastSwap.bind(this);\n\t\tthis.controls.push(this.lastSwapCheckbox);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.comparisonCountID,\n\t\t\t'Comparison Count: ' + this.compCount,\n\t\t\tCOMP_COUNT_X,\n\t\t\tCOMP_COUNT_Y,\n\t\t);\n\n\t\tthis.code = [\n\t\t\t['procedure BubbleSort(array):'],\n\t\t\t['     end <- length of array'],\n\t\t\t['     start <- 0'],\n\t\t\t['     swapped <- start'],\n\t\t\t['     while start < end'],\n\t\t\t['          swapped <- start'],\n\t\t\t['          for j <- 0, end do'],\n\t\t\t['               if arr[j] > arr[j + 1]'],\n\t\t\t['                    swap arr[j], arr[j + 1]'],\n\t\t\t['                    swapped <- j'],\n\t\t\t['               end if'],\n\t\t\t['          end for'],\n\t\t\t['          end <- swapped'],\n\t\t\t['     end while'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.removeCode(this.codeID);\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\t\tif (!lastSwapEnabled) {\n\t\t\tthis.cmd(act.setText, this.codeID[3][0], '     sorted <- false');\n\t\t\tthis.cmd(act.setText, this.codeID[4][0], '     while start < end and sorted is false');\n\t\t\tthis.cmd(act.setText, this.codeID[5][0], '          sorted <- true');\n\t\t\tthis.cmd(act.setText, this.codeID[9][0], '                    sorted <- false');\n\t\t\tthis.cmd(act.setText, this.codeID[12][0], '          end <- end - 1');\n\t\t}\n\t\tthis.compCount = 0;\n\t}\n\n\tsortCallback() {\n\t\tconst list = this.listField.value.split(',').filter(x => x !== '');\n\t\tconsole.log(list);\n\t\tif (\n\t\t\tthis.listField.value !== '' &&\n\t\t\tlist.length <= MAX_ARRAY_SIZE &&\n\t\t\tlist.map(Number).filter(x => x > 999 || Number.isNaN(x)).length <= 0\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\ttoggleLastSwap() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t\tif (lastSwapEnabled) {\n\t\t\tthis.cmd(act.setText, this.codeID[3][0], '     sorted <- false');\n\t\t\tthis.cmd(act.setText, this.codeID[4][0], '     while start < end and sorted is false');\n\t\t\tthis.cmd(act.setText, this.codeID[5][0], '          sorted <- true');\n\t\t\tthis.cmd(act.setText, this.codeID[9][0], '                    sorted <- false');\n\t\t\tthis.cmd(act.setText, this.codeID[12][0], '          end <- end - 1');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.codeID[3][0], '     swapped <- start');\n\t\t\tthis.cmd(act.setText, this.codeID[4][0], '     while start < end');\n\t\t\tthis.cmd(act.setText, this.codeID[5][0], '          swapped <- start');\n\t\t\tthis.cmd(act.setText, this.codeID[9][0], '                    swapped <- j');\n\t\t\tthis.cmd(act.setText, this.codeID[12][0], '          end <- swapped');\n\t\t}\n\t\tlastSwapEnabled = !lastSwapEnabled;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.compCount = 0;\n\t\tthis.displayData = [];\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + this.compCount);\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\t\tthis.highlight(0, 0);\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, MAX_ARRAY_SIZE);\n\t\tconst length = this.arrayData.length;\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(0, 0);\n\n\t\tlet sorted = true;\n\t\tlet end = this.arrayData.length - 1;\n\t\tlet lastSwapped = 0;\n\t\tthis.highlight(4, 0);\n\t\tthis.cmd(act.step);\n\t\tdo {\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tthis.highlight(5, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(5, 0);\n\t\t\tsorted = true;\n\t\t\tthis.highlight(6, 0);\n\t\t\tfor (let i = 0; i < end; i++) {\n\t\t\t\tthis.movePointers(i, i + 1);\n\t\t\t\tthis.highlight(7, 0);\n\t\t\t\tthis.unhighlight(6, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tif (this.arrayData[i] > this.arrayData[i + 1]) {\n\t\t\t\t\tthis.swap(i, i + 1);\n\t\t\t\t\tsorted = false;\n\t\t\t\t\tlastSwapped = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.unhighlight(6, 0);\n\t\t\tthis.highlight(12, 0);\n\t\t\tif (lastSwapEnabled) {\n\t\t\t\tend = lastSwapped;\n\t\t\t} else {\n\t\t\t\tend--;\n\t\t\t}\n\t\t\tif (!sorted) {\n\t\t\t\tfor (let i = end + 1; i < this.arrayData.length; i++) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(12, 0);\n\t\t} while (!sorted);\n\t\tthis.highlight(4, 0);\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(4, 0);\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, ARRAY_START_Y);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tthis.highlight(8, 0);\n\t\tthis.highlight(9, 0);\n\t\t// Change pointer colors to red\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\t// Create temporary labels and remove text in array\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, ARRAY_START_Y);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\t// Move labels\n\t\tthis.cmd(act.move, iLabelID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, jLabelID, iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array and delete temporary labels\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t\t// Reset pointer colors back to blue\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.unhighlight(8, 0);\n\t\tthis.unhighlight(9, 0);\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_HASH_LENGTH = 10;\nconst MAX_LOAD_LENGTH = 5;\n\nconst HASH_NUMBER_START_X = 200;\nconst HASH_X_DIFF = 7;\nconst HASH_NUMBER_START_Y = 10;\nconst HASH_ADD_START_Y = 30;\nconst HASH_INPUT_START_X = 60;\nconst HASH_INPUT_X_DIFF = 7;\nconst HASH_INPUT_START_Y = 55;\nconst HASH_ADD_LINE_Y = 42;\nconst HASH_RESULT_Y = 50;\nconst ELF_HASH_SHIFT = 10;\n\nconst HASH_LABEL_X = 200;\nconst HASH_LABEL_Y = 45;\nconst HASH_LABEL_DELTA_X = 50;\n\nconst HIGHLIGHT_COLOR = '#0000FF';\n\nexport default class Hash extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.hashingIntegers = true;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Key: ');\n\t\tthis.keyField = addControlToAlgorithmBar('Text', '');\n\t\tthis.keyField.size = MAX_HASH_LENGTH;\n\t\tthis.keyField.onkeydown = this.returnSubmit(\n\t\t\tthis.keyField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\tMAX_HASH_LENGTH,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.keyField);\n\n\t\t//I'm allowing any type of data be inserted for the value, should it be restricted?\n\t\taddLabelToAlgorithmBar('Value: ');\n\t\tthis.valueField = addControlToAlgorithmBar('Text', '');\n\t\tthis.valueField.size = MAX_HASH_LENGTH;\n\t\tthis.valueField.onkeydown = this.returnSubmit(\n\t\t\tthis.valueField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\tMAX_HASH_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.valueField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.size = MAX_HASH_LENGTH;\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.keyField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\tMAX_HASH_LENGTH,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.size = MAX_HASH_LENGTH;\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.keyField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_HASH_LENGTH,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.loadField = addControlToAlgorithmBar('Text', '');\n\t\tthis.loadField.setAttribute('placeholder', 'LF/100');\n\t\tthis.loadField.size = MAX_LOAD_LENGTH;\n\t\tthis.loadField.onkeydown = this.returnSubmit(\n\t\t\tthis.loadField,\n\t\t\tthis.changeLoadFactor.bind(this),\n\t\t\tMAX_LOAD_LENGTH,\n\t\t\ttrue,\n\t\t);\n\n\t\tthis.controls.push(this.loadField);\n\n\t\tthis.loadButton = addControlToAlgorithmBar('Button', 'Load Factor');\n\t\tthis.loadButton.onclick = this.loadFactorCallBack.bind(this);\n\t\tthis.controls.push(this.loadButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Hash Integer', 'Hash Strings'],\n\t\t\t'HashType',\n\t\t);\n\t\tthis.hashIntegerButton = radioButtonList[0];\n\t\tthis.hashIntegerButton.onclick = this.changeHashTypeCallback.bind(this, true);\n\t\tthis.controls.push(this.hashIntegerButton);\n\t\tthis.hashStringButton = radioButtonList[1];\n\t\tthis.hashStringButton.onclick = this.changeHashTypeCallback.bind(this, false);\n\t\tthis.hashIntegerButton.checked = true;\n\t\tthis.controls.push(this.hashStringButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.rightVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tthis.rightVerticalTop = addGroupToAlgorithmBar(true, this.rightVerticalGroup);\n\t\tthis.rightVerticalBottom = addGroupToAlgorithmBar(true, this.rightVerticalGroup);\n\n\t\tthis.initialCapacityLabel = addLabelToAlgorithmBar(\n\t\t\t'Initial Capacity: ',\n\t\t\tthis.rightVerticalTop,\n\t\t);\n\t\tthis.initialCapacityField = addControlToAlgorithmBar('Text', '', this.rightVerticalTop);\n\t\tthis.initialCapacityField.size = MAX_HASH_LENGTH;\n\t\tthis.restartButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Restart',\n\t\t\tthis.rightVerticalBottom,\n\t\t);\n\t\tthis.restartButton.onclick = this.clearCallback.bind(this);\n\t}\n\n\t// Do this extra level of wrapping to get undo to work properly.\n\t// (also, so that we only implement the action if we are changing the\n\t// radio button)\n\tchangeHashTypeCallback(newHashingIntegers) {\n\t\tif (this.hashingIntegers !== newHashingIntegers) {\n\t\t\tthis.implementAction(this.changeHashType.bind(this), newHashingIntegers);\n\t\t}\n\t}\n\n\tchangeHashType(newHashingIntegerValue) {\n\t\tthis.hashingIntegers = newHashingIntegerValue;\n\t\tif (this.hashingIntegers) {\n\t\t\tthis.hashIntegerButton.checked = true;\n\t\t\tthis.keyField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.keyField,\n\t\t\t\tthis.insertCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.keyField,\n\t\t\t\tthis.deleteCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.keyField,\n\t\t\t\tthis.findCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.hashStringButton.checked = true;\n\t\t\tthis.keyField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.keyField,\n\t\t\t\tthis.insertCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.keyField,\n\t\t\t\tthis.deleteCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\t\tthis.keyField,\n\t\t\t\tthis.findCallback.bind(this),\n\t\t\t\tMAX_HASH_LENGTH,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t}\n\t\treturn this.resetAll();\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tdoHash(input) {\n\t\tif (this.hashingIntegers) {\n\t\t\tconst labelID1 = this.nextIndex++;\n\t\t\tconst labelID2 = this.nextIndex++;\n\t\t\tconst highlightID = this.nextIndex++;\n\t\t\tconst index = parseInt(input) % this.table_size;\n\t\t\tthis.currHash = parseInt(input);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabelID1,\n\t\t\t\tinput + ' % ' + String(this.table_size) + ' = ',\n\t\t\t\tHASH_LABEL_X,\n\t\t\t\tHASH_LABEL_Y,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabelID2,\n\t\t\t\tindex,\n\t\t\t\tHASH_LABEL_X + HASH_LABEL_DELTA_X,\n\t\t\t\tHASH_LABEL_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightID,\n\t\t\t\tHIGHLIGHT_COLOR,\n\t\t\t\tHASH_LABEL_X + HASH_LABEL_DELTA_X,\n\t\t\t\tHASH_LABEL_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.move, highlightID, this.indexXPos[index], this.indexYPos[index]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, labelID1);\n\t\t\tthis.cmd(act.delete, labelID2);\n\t\t\tthis.cmd(act.delete, highlightID);\n\t\t\tthis.nextIndex -= 3;\n\n\t\t\treturn index;\n\t\t} else {\n\t\t\tconst label1 = this.nextIndex++;\n\t\t\tthis.cmd(act.createLabel, label1, 'Hashing:', 10, 55, 0);\n\t\t\tconst wordToHashID = new Array(input.length);\n\t\t\tconst wordToHash = new Array(input.length);\n\t\t\tfor (let i = 0; i < input.length; i++) {\n\t\t\t\twordToHashID[i] = this.nextIndex++;\n\t\t\t\twordToHash[i] = input.charAt(i);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\twordToHashID[i],\n\t\t\t\t\twordToHash[i],\n\t\t\t\t\tHASH_INPUT_START_X + i * HASH_INPUT_X_DIFF,\n\t\t\t\t\tHASH_INPUT_START_Y,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst digits = new Array(32);\n\t\t\tconst hashValue = new Array(32);\n\t\t\tconst nextByte = new Array(8);\n\t\t\tconst nextByteID = new Array(8);\n\t\t\tconst resultDigits = new Array(32);\n\t\t\tconst floatingDigits = new Array(4);\n\t\t\tconst floatingVals = new Array(4);\n\n\t\t\tconst operatorID = this.nextIndex++;\n\t\t\tconst barID = this.nextIndex++;\n\t\t\tfor (let i = 0; i < 32; i++) {\n\t\t\t\thashValue[i] = 0;\n\t\t\t\tdigits[i] = this.nextIndex++;\n\t\t\t\tresultDigits[i] = this.nextIndex++;\n\t\t\t}\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\tnextByteID[i] = this.nextIndex++;\n\t\t\t}\n\t\t\tfor (let i = 0; i < 4; i++) {\n\t\t\t\tfloatingDigits[i] = this.nextIndex++;\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let i = wordToHash.length - 1; i >= 0; i--) {\n\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tdigits[j],\n\t\t\t\t\t\thashValue[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, wordToHashID[i]);\n\t\t\t\tlet nextChar = wordToHash[i].charCodeAt(0);\n\t\t\t\tfor (let j = 7; j >= 0; j--) {\n\t\t\t\t\tnextByte[j] = nextChar % 2;\n\t\t\t\t\tnextChar = Math.floor(nextChar / 2);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tnextByteID[j],\n\t\t\t\t\t\tnextByte[j],\n\t\t\t\t\t\tHASH_INPUT_START_X + i * HASH_INPUT_X_DIFF,\n\t\t\t\t\t\tHASH_INPUT_START_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tnextByteID[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + (j + 24) * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tbarID,\n\t\t\t\t\t'',\n\t\t\t\t\t32 * HASH_X_DIFF,\n\t\t\t\t\t0,\n\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\tHASH_ADD_LINE_Y,\n\t\t\t\t\t'left',\n\t\t\t\t\t'bottom',\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\toperatorID,\n\t\t\t\t\t'+',\n\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tlet carry = 0;\n\t\t\t\tfor (let j = 7; j >= 0; j--) {\n\t\t\t\t\thashValue[j + 24] = hashValue[j + 24] + nextByte[j] + carry;\n\t\t\t\t\tif (hashValue[j + 24] > 1) {\n\t\t\t\t\t\thashValue[j + 24] = hashValue[j + 24] - 2;\n\t\t\t\t\t\tcarry = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcarry = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let j = 23; j >= 0; j--) {\n\t\t\t\t\thashValue[j] = hashValue[j] + carry;\n\t\t\t\t\tif (hashValue[j] > 1) {\n\t\t\t\t\t\thashValue[j] = hashValue[j] - 2;\n\t\t\t\t\t\tcarry = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcarry = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\thashValue[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_RESULT_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tfor (let j = 0; j < 8; j++) {\n\t\t\t\t\tthis.cmd(act.delete, nextByteID[j]);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, barID);\n\t\t\t\tthis.cmd(act.delete, operatorID);\n\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\tthis.cmd(act.delete, digits[j]);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + (j - 4) * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tfor (let j = 0; j < 28; j++) {\n\t\t\t\t\t\tfloatingVals[j] = hashValue[j];\n\t\t\t\t\t\thashValue[j] = hashValue[j + 4];\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let j = 0; j < 4; j++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tresultDigits[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + (j + ELF_HASH_SHIFT) * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\thashValue[j + 28] = 0;\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tfloatingDigits[j],\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + (j + 28) * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (floatingVals[j]) {\n\t\t\t\t\t\t\thashValue[j + ELF_HASH_SHIFT] = 1 - hashValue[j + ELF_HASH_SHIFT];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createRectangle,\n\t\t\t\t\t\tbarID,\n\t\t\t\t\t\t'',\n\t\t\t\t\t\t32 * HASH_X_DIFF,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\t\tHASH_ADD_LINE_Y,\n\t\t\t\t\t\t'left',\n\t\t\t\t\t\t'bottom',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\toperatorID,\n\t\t\t\t\t\t'XOR',\n\t\t\t\t\t\tHASH_NUMBER_START_X,\n\t\t\t\t\t\tHASH_ADD_START_Y,\n\t\t\t\t\t\t0,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tdigits[j],\n\t\t\t\t\t\t\thashValue[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_RESULT_Y,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tthis.cmd(act.delete, operatorID);\n\t\t\t\t\tthis.cmd(act.delete, barID);\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, resultDigits[j]);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tdigits[j],\n\t\t\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tfor (let j = 0; j < 4; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, floatingDigits[j]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, digits[j]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\t\t\tthis.cmd(act.delete, resultDigits[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.delete, label1);\n\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tdigits[j],\n\t\t\t\t\thashValue[j],\n\t\t\t\t\tHASH_NUMBER_START_X + j * HASH_X_DIFF,\n\t\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.currHash = 0;\n\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\tthis.currHash = this.currHash * 2 + hashValue[j];\n\t\t\t}\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabel1,\n\t\t\t\t' = ' + String(this.currHash),\n\t\t\t\tHASH_NUMBER_START_X + 32 * HASH_X_DIFF,\n\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t0,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let j = 0; j < 32; j++) {\n\t\t\t\tthis.cmd(act.delete, digits[j]);\n\t\t\t}\n\n\t\t\tconst label2 = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tlabel1,\n\t\t\t\tString(this.currHash) + ' % ' + String(this.table_size) + ' = ',\n\t\t\t);\n\t\t\tconst index = this.currHash % this.table_size;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tlabel2,\n\t\t\t\tindex,\n\t\t\t\tHASH_NUMBER_START_X + 32 * HASH_X_DIFF + 105,\n\t\t\t\tHASH_NUMBER_START_Y,\n\t\t\t\t0,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tconst highlightID = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightID,\n\t\t\t\tHIGHLIGHT_COLOR,\n\t\t\t\tHASH_NUMBER_START_X + 30 * HASH_X_DIFF + 120,\n\t\t\t\tHASH_NUMBER_START_Y + 15,\n\t\t\t);\n\t\t\tthis.cmd(act.move, highlightID, this.indexXPos[index], this.indexYPos[index]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.delete, highlightID);\n\t\t\tthis.cmd(act.delete, label1);\n\t\t\tthis.cmd(act.delete, label2);\n\n\t\t\treturn index;\n\t\t}\n\t}\n\n\tresetAll() {\n\t\tthis.keyField.value = '';\n\t\tthis.valueField.value = '';\n\t\tthis.deleteField.value = '';\n\t\tthis.findField.value = '';\n\t\treturn [];\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedKey = this.keyField.value;\n\t\tconst insertedValue = this.valueField.value;\n\t\tif (insertedKey !== '' && insertedValue !== '') {\n\t\t\tthis.keyField.value = '';\n\t\t\tthis.valueField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), insertedKey, insertedValue);\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tconst deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.deleteElement.bind(this), deletedValue);\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.findField.value;\n\t\tif (findValue !== '') {\n\t\t\tthis.findField.value = '';\n\t\t\tthis.implementAction(this.findElement.bind(this), findValue);\n\t\t}\n\t}\n\n\tloadFactorCallBack() {\n\t\tif (this.loadField.value !== '') {\n\t\t\tconst newLF = this.loadField.value / 100;\n\t\t\tthis.loadField.value = '';\n\t\t\tthis.implementAction(this.changeLoadFactor.bind(this), newLF);\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.hashIntegerButton.checked = true;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport { addDivisorToAlgorithmBar, addRadioButtonGroupToAlgorithmBar } from './Algorithm.js';\nimport Hash from './Hash.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_ELEM_WIDTH = 60;\nconst ARRAY_ELEM_HEIGHT = 30;\nconst ARRAY_ELEM_START_Y = 110;\nconst ARRAY_VERTICAL_SEPARATION = 70;\n\nconst CLOSED_HASH_TABLE_SIZE = 10;\n\nconst ARRAY_ELEM_START_X = 100;\n// If you want to center the array:\n// const ARRAY_ELEM_START_X = (window.screen.width - CLOSED_HASH_TABLE_SIZE * ARRAY_ELEM_WIDTH + ARRAY_ELEM_WIDTH) / 2;\nconst ARRAY_RESIZE_ELEM_START_Y = 240;\nconst ELEMS_PER_ROW = 14;\n\nconst LOAD_LABEL_X = 60;\nconst LOAD_LABEL_Y = 20;\n\nconst HASH2_LABEL_X = 270;\nconst HASH2_LABEL_Y = 70;\n\nconst RESIZE_LABEL_X = 400;\nconst RESIZE_LABEL_Y = 20;\n\nconst DEFAULT_LOAD_FACTOR = 0.67;\n\nconst MAX_SIZE = 70;\n\nconst INDEX_COLOR = '#0000FF';\n\nexport default class ClosedHash extends Hash {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.elements_per_row = ELEMS_PER_ROW;\n\t\t//this.elements_per_row = Math.floor(w / ARRAY_ELEM_WIDTH) - 1;\n\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tsuper.addControls();\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t[\n\t\t\t\t'Linear Probing: f(i) = i',\n\t\t\t\t'Quadratic Probing: f(i) = i * i',\n\t\t\t\t'Double Hashing: f(i) = i * hash2(elem)',\n\t\t\t],\n\t\t\t'Collision Strategy: h(elem) + f(i)',\n\t\t);\n\t\tthis.linearProblingButton = radioButtonList[0];\n\t\tthis.linearProblingButton.onclick = this.linearProbeCallback.bind(this);\n\t\tthis.quadraticProbingButton = radioButtonList[1];\n\t\tthis.quadraticProbingButton.onclick = this.quadraticProbeCallback.bind(this);\n\t\tthis.doubleHashingButton = radioButtonList[2];\n\t\tthis.doubleHashingButton.onclick = this.doubleHashingCallback.bind(this);\n\n\t\tthis.linearProblingButton.checked = true;\n\t\tthis.currentHashingTypeButtonState = this.linearProblingButton;\n\n\t\tthis.initialCapacityField.value = CLOSED_HASH_TABLE_SIZE;\n\t\t// Add new controls\n\t}\n\n\tchangeProbeType(newProbingType) {\n\t\tif (newProbingType === this.linearProblingButton) {\n\t\t\tthis.linearProblingButton.checked = true;\n\t\t\tthis.currentHashingTypeButtonState = this.linearProblingButton;\n\t\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\t\tthis.skipDist[i] = i + 1;\n\t\t\t}\n\t\t} else if (newProbingType === this.quadraticProbingButton) {\n\t\t\tthis.quadraticProbingButton.checked = true;\n\t\t\tthis.currentHashingTypeButtonState = this.quadraticProbingButton;\n\n\t\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\t\tthis.skipDist[i] = (i + 1) * (i + 1);\n\t\t\t}\n\t\t} else if (newProbingType === this.doubleHashingButton) {\n\t\t\tthis.doubleHashingButton.checked = true;\n\t\t\tthis.currentHashingTypeButtonState = this.doubleHashingButton;\n\t\t}\n\t\tthis.commands = this.resetAll();\n\t\treturn this.commands;\n\t}\n\n\tquadraticProbeCallback() {\n\t\tif (this.currentHashingTypeButtonState !== this.quadraticProbingButton) {\n\t\t\tthis.implementAction(this.changeProbeType.bind(this), this.quadraticProbingButton);\n\t\t}\n\t}\n\n\tdoubleHashingCallback() {\n\t\tif (this.currentHashingTypeButtonState !== this.doubleHashingButton) {\n\t\t\tthis.implementAction(this.changeProbeType.bind(this), this.doubleHashingButton);\n\t\t}\n\t}\n\n\tlinearProbeCallback() {\n\t\tif (this.currentHashingTypeButtonState !== this.linearProblingButton) {\n\t\t\tthis.implementAction(this.changeProbeType.bind(this), this.linearProblingButton);\n\t\t}\n\t}\n\n\tinsertElement(key, value) {\n\t\tconst entry = new MapEntry(key, value);\n\t\tconst elem = entry.elem;\n\t\tthis.commands = [];\n\n\t\tif (\n\t\t\t(this.size + 1) / this.table_size > this.load_factor &&\n\t\t\tthis.table_size * 2 + 1 < MAX_SIZE\n\t\t) {\n\t\t\tthis.resize(false);\n\t\t}\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting element: ' + elem);\n\t\tthis.cmd(act.step);\n\n\t\tlet index = this.doHash(key);\n\n\t\tindex = this.getEmptyIndex(index, key);\n\n\t\tif (index === -2 && this.table_size * 2 < MAX_SIZE) {\n\t\t\tthis.resize(true);\n\t\t} else if (index === -2) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t`Array would normally resize after length number of probes,\n\t\t\t\thowever there just isn't enough space on the screen to resize. \n\t\t\t\tSo here's a cute emoji of jack instead: VV`,\n\t\t\t);\n\t\t\treturn this.commands;\n\t\t}\n\n\t\tif (\n\t\t\tthis.hashTableValues[index] &&\n\t\t\tthis.hashTableValues[index].key === key &&\n\t\t\t!this.deleted[index]\n\t\t) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Key ' + key + ' is already in HashMap, updating value.',\n\t\t\t\t``,\n\t\t\t);\n\t\t\tthis.size--;\n\t\t}\n\n\t\tconst labID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, labID, elem, 20, 25);\n\t\tthis.cmd(act.move, labID, this.indexXPos[index], this.indexYPos[index] - ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, labID);\n\t\tthis.cmd(act.setText, this.hashTableVisual[index], elem);\n\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\tthis.hashTableValues[index] = entry;\n\t\tthis.empty[index] = false;\n\t\tthis.deleted[index] = false;\n\t\tthis.size++;\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\t\tthis.cmd(act.setText, this.DelIndexLabel, '');\n\t\treturn this.commands;\n\t}\n\n\tresetSkipDist(key, labelID) {\n\t\tconst skipVal = this.nextLowestPrime - (this.currHash % this.nextLowestPrime);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabelID,\n\t\t\t`hash2(${String(key)}) = ` +\n\t\t\t\t`${this.nextLowestPrime} - ${String(this.currHash)} % ${\n\t\t\t\t\tthis.nextLowestPrime\n\t\t\t\t} = ${String(skipVal)}`,\n\t\t\tHASH2_LABEL_X,\n\t\t\tHASH2_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.skipDist[0] = skipVal;\n\t\tfor (let i = 1; i < this.table_size; i++) {\n\t\t\tthis.skipDist[i] = this.skipDist[i - 1] + skipVal;\n\t\t}\n\t\treturn skipVal;\n\t}\n\n\tgetEmptyIndex(index, key) {\n\t\tlet HashID = -1;\n\t\tlet skipVal = 1;\n\t\tif (this.currentHashingTypeButtonState === this.doubleHashingButton) {\n\t\t\tHashID = this.nextIndex++;\n\t\t\tskipVal = this.resetSkipDist(key, HashID);\n\t\t}\n\n\t\tlet probes = 0;\n\t\tlet removedIndex = -1;\n\t\tconst start = index;\n\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 1);\n\t\twhile (\n\t\t\tprobes < this.table_size &&\n\t\t\t!this.empty[index] &&\n\t\t\t!(this.hashTableValues[index].key === key)\n\t\t) {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, `Entry occupied, so probe forward`);\n\t\t\tthis.cmd(act.step);\n\t\t\t// storing removed index\n\t\t\tif (removedIndex === -1 && this.deleted[index]) {\n\t\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Storing index of first deleted element');\n\t\t\t\tthis.cmd(act.setText, this.DelIndexLabel, 'First Deleted Index: ' + index);\n\t\t\t\tremovedIndex = index;\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\n\t\t\t// increment index and clear labels\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\n\t\t\tindex = (start + this.skipDist[probes]) % this.table_size;\n\n\t\t\tif (this.currentHashingTypeButtonState === this.quadraticProbingButton) {\n\t\t\t\tskipVal = probes + 1;\n\t\t\t}\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.HashIndexID,\n\t\t\t\t`Index to probe: (${start} + ${probes + 1}*${skipVal}) % ${this.table_size} =` +\n\t\t\t\t\t` ${(start + this.skipDist[probes]) % this.table_size}`,\n\t\t\t);\n\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 1);\n\t\t\tif (this.empty[index]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.ExplainLabel,\n\t\t\t\t\t'Encountered null spot, so terminate loop',\n\t\t\t\t);\n\t\t\t} else if (this.hashTableValues[index].key === key) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.ExplainLabel,\n\t\t\t\t\t`Encountered matching key, so terminate loop`,\n\t\t\t\t);\n\t\t\t}\n\t\t\tprobes++;\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tthis.cmd(act.setText, this.HashIndexID, '');\n\n\t\tif (HashID !== -1) {\n\t\t\tthis.cmd(act.delete, HashID);\n\t\t\tthis.nextIndex--;\n\t\t}\n\n\t\tif (!this.empty[index] && this.hashTableValues[index].key === key && !this.deleted[index]) {\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\t\treturn index;\n\t\t} else if (probes === this.table_size && removedIndex === -1) {\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\t\treturn -2;\n\t\t} else {\n\t\t\tif (removedIndex !== -1) {\n\t\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting at earlier DEL spot');\n\t\t\t\tindex = removedIndex;\n\t\t\t} else if (this.hashTableValues[index] == null) {\n\t\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting at null spot');\n\t\t\t} else if (this.hashTableValues[index].key === key) {\n\t\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting at DEL spot with same key');\n\t\t\t}\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 1);\n\t\t\tthis.cmd(act.step);\n\t\t\treturn removedIndex !== -1 ? removedIndex : index;\n\t\t}\n\t}\n\n\tgetElemIndex(index, key) {\n\t\tlet HashID = -1;\n\t\tlet skipVal = 1;\n\t\tif (this.currentHashingTypeButtonState === this.doubleHashingButton) {\n\t\t\tHashID = this.nextIndex++;\n\t\t\tskipVal = this.resetSkipDist(key, HashID);\n\t\t}\n\n\t\tconst start = index;\n\t\tlet foundIndex = -1;\n\t\tlet candidateIndex = index;\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[candidateIndex], 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[candidateIndex], 0);\n\t\t\tif (\n\t\t\t\t!this.empty[candidateIndex] &&\n\t\t\t\t!this.deleted[candidateIndex] &&\n\t\t\t\tthis.hashTableValues[candidateIndex].key === key\n\t\t\t) {\n\t\t\t\tfoundIndex = candidateIndex;\n\t\t\t\tbreak;\n\t\t\t} else if (\n\t\t\t\tthis.empty[candidateIndex] ||\n\t\t\t\t(this.deleted[candidateIndex] && this.hashTableValues[candidateIndex].key === key)\n\t\t\t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (this.currentHashingTypeButtonState === this.quadraticProbingButton) {\n\t\t\t\tskipVal = i + 1;\n\t\t\t}\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.HashIndexID,\n\t\t\t\t`Index to probe: (${start} + ${i + 1}*${skipVal}) % ${this.table_size} =` +\n\t\t\t\t\t` ${(start + this.skipDist[i]) % this.table_size}`,\n\t\t\t);\n\t\t\tcandidateIndex = (index + this.skipDist[i]) % this.table_size;\n\t\t}\n\n\t\tthis.cmd(act.setText, this.HashIndexID, '');\n\t\tif (HashID !== -1) {\n\t\t\tthis.cmd(act.delete, HashID);\n\t\t\tthis.nextIndex--;\n\t\t}\n\n\t\treturn foundIndex;\n\t}\n\n\tdeleteElement(key) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Deleting element with key: ' + key);\n\t\tlet index = this.doHash(key);\n\n\t\tindex = this.getElemIndex(index, key);\n\n\t\tif (index >= 0) {\n\t\t\tconst elem = this.hashTableValues[index].elem;\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting element: ' + elem + '  Element deleted',\n\t\t\t);\n\t\t\t// this.empty[index] = true;\n\t\t\tthis.deleted[index] = true;\n\t\t\tthis.cmd(act.setText, this.hashTableVisual[index], 'DEL');\n\t\t\tthis.size--;\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting element with key: ' + key + '  Key not in table',\n\t\t\t);\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tfindElement(key) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Key: ' + key);\n\t\tconst index = this.doHash(key);\n\n\t\tconst found = this.getElemIndex(index, key) !== -1;\n\t\tif (found) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Found Key: ' + key + '  Value: ' + this.hashTableValues[index].val,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding Key: ' + key + '  Not Found!');\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tresize(fromCycle) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\t\tthis.cmd(act.setText, this.DelIndexLabel, '');\n\n\t\tconst resizeLabel = this.nextIndex++;\n\t\tif (!fromCycle) {\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tresizeLabel,\n\t\t\t\t`(Resize Required): (Size + 1 / length) > Load Factor --> (${this.size} + 1 / ${this.table_size}) > ${this.load_factor}`,\n\t\t\t\tRESIZE_LABEL_X,\n\t\t\t\tRESIZE_LABEL_Y,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tresizeLabel,\n\t\t\t\t`(Resize Required): ${this.table_size} elements probed`,\n\t\t\t\tRESIZE_LABEL_X,\n\t\t\t\tRESIZE_LABEL_Y,\n\t\t\t);\n\t\t}\n\n\t\tthis.table_size = this.table_size * 2 + 1;\n\n\t\tif (this.table_size * 2 + 1 > MAX_SIZE) {\n\t\t\tthis.load_factor = 0.99;\n\t\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor:n ${this.load_factor}`);\n\t\t\tthis.loadButton.setAttribute('style', 'pointer-events: none; color: grey');\n\t\t}\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.oldHashTableVisual = this.hashTableVisual;\n\t\tthis.oldHashTableValues = this.hashTableValues;\n\t\tthis.oldskipDist = this.skipDist;\n\t\tthis.oldempty = this.empty;\n\t\tthis.olddeleted = this.deleted;\n\t\tthis.oldIndexXPos = this.indexXPos;\n\t\tthis.oldIndexYPos = this.indexYPos;\n\t\tthis.oldindexLabelID = this.indexLabelID;\n\n\t\tthis.hashTableValues = new Array(this.table_size);\n\t\tthis.hashTableVisual = new Array(this.table_size);\n\t\tthis.skipDist = new Array(this.table_size);\n\t\tthis.empty = new Array(this.table_size);\n\t\tthis.deleted = new Array(this.table_size);\n\t\tthis.indexXPos = new Array(this.table_size);\n\t\tthis.indexYPos = new Array(this.table_size);\n\t\tthis.indexLabelID = new Array(this.table_size);\n\n\t\tif (this.currentHashingTypeButtonState === this.linearProblingButton) {\n\t\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\t\tthis.skipDist[i] = i + 1;\n\t\t\t}\n\t\t} else if (this.currentHashingTypeButtonState === this.quadraticProbingButton) {\n\t\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\t\tthis.skipDist[i] = (i + 1) * (i + 1);\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.hashTableVisual[i] = this.nextIndex++;\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\n\t\t\tconst nextXPos = ARRAY_ELEM_START_X + (i % this.elements_per_row) * ARRAY_ELEM_WIDTH;\n\t\t\tconst nextYPos =\n\t\t\t\tARRAY_RESIZE_ELEM_START_Y +\n\t\t\t\tMath.floor(i / this.elements_per_row) * ARRAY_VERTICAL_SEPARATION;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.hashTableVisual[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\tnextXPos,\n\t\t\t\tnextYPos,\n\t\t\t);\n\t\t\tthis.indexLabelID[i] = this.nextIndex++;\n\t\t\tthis.indexXPos[i] = nextXPos;\n\t\t\tthis.indexYPos[i] = nextYPos + ARRAY_ELEM_HEIGHT;\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.indexLabelID[i],\n\t\t\t\ti,\n\t\t\t\tthis.indexXPos[i],\n\t\t\t\tthis.indexYPos[i],\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.indexLabelID[i], INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tlet elementsMoved = 0;\n\n\t\tfor (let i = 0; i < this.table_size / 2 && elementsMoved < this.size; i++) {\n\t\t\tthis.cmd(act.setHighlight, this.oldHashTableVisual[i], 1);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (!this.oldempty[i] && !this.olddeleted[i]) {\n\t\t\t\tconst oldElement = this.oldHashTableValues[i];\n\n\t\t\t\tlet index = this.doHash(oldElement.key);\n\n\t\t\t\tindex = this.getEmptyIndex(index, oldElement.key);\n\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tconst labID = this.nextIndex++;\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tlabID,\n\t\t\t\t\t\toldElement.elem,\n\t\t\t\t\t\tthis.oldIndexXPos[i],\n\t\t\t\t\t\tthis.oldIndexYPos[i] - ARRAY_ELEM_HEIGHT,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tlabID,\n\t\t\t\t\t\tthis.indexXPos[index],\n\t\t\t\t\t\tthis.indexYPos[index] - ARRAY_ELEM_HEIGHT,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, labID);\n\t\t\t\t\tthis.cmd(act.setText, this.hashTableVisual[index], oldElement.elem);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.hashTableVisual[index], 0);\n\t\t\t\t\tthis.hashTableValues[index] = oldElement;\n\t\t\t\t\tthis.empty[index] = false;\n\t\t\t\t\tthis.deleted[index] = false;\n\t\t\t\t\telementsMoved++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.cmd(act.setHighlight, this.oldHashTableVisual[i], 0);\n\t\t}\n\n\t\tthis.cmd(act.delete, resizeLabel);\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tconst nextXPos = ARRAY_ELEM_START_X + (i % this.elements_per_row) * ARRAY_ELEM_WIDTH;\n\t\t\tconst nextYPos =\n\t\t\t\tARRAY_ELEM_START_Y +\n\t\t\t\tMath.floor(i / this.elements_per_row) * ARRAY_VERTICAL_SEPARATION;\n\t\t\tif (i < (this.table_size - 1) / 2) {\n\t\t\t\tthis.cmd(act.delete, this.oldHashTableVisual[i]);\n\t\t\t\tthis.cmd(act.delete, this.oldindexLabelID[i]);\n\t\t\t}\n\t\t\tthis.cmd(act.move, this.hashTableVisual[i], nextXPos, nextYPos);\n\t\t\tthis.cmd(act.move, this.indexLabelID[i], nextXPos, nextYPos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.indexYPos[i] = nextYPos + ARRAY_ELEM_HEIGHT;\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tchangeLoadFactor(LF) {\n\t\tthis.commands = [];\n\n\t\tif (this.table_size * 2 + 1 <= MAX_SIZE) {\n\t\t\tthis.load_factor = LF;\n\t\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.loadFactorID,\n\t\t\t\t`Load Factor: ${this.load_factor}\n\t\t\t(Array Length too large for resize)`,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tsetup() {\n\t\tthis.resetIndex = this.nextIndex;\n\t\tthis.table_size = CLOSED_HASH_TABLE_SIZE;\n\t\tthis.nextLowestPrime = 11;\n\t\tthis.load_factor = DEFAULT_LOAD_FACTOR;\n\t\tthis.skipDist = new Array(this.table_size);\n\t\tthis.hashTableVisual = new Array(this.table_size);\n\t\tthis.hashTableValues = new Array(this.table_size);\n\t\tthis.size = 0;\n\n\t\tthis.indexLabelID = new Array(this.table_size);\n\t\tthis.indexXPos = new Array(this.table_size);\n\t\tthis.indexYPos = new Array(this.table_size);\n\n\t\tthis.empty = new Array(this.table_size);\n\t\tthis.deleted = new Array(this.table_size);\n\n\t\tthis.ExplainLabel = this.nextIndex++;\n\n\t\tthis.HashIndexID = this.nextIndex++;\n\n\t\t// stores deleted index\n\t\tthis.DelIndexLabel = this.nextIndex++;\n\n\t\t// stores the load factor\n\t\tthis.loadFactorID = this.nextIndex++;\n\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.skipDist[i] = i + 1; // Start with linear probing\n\t\t\tthis.hashTableVisual[i] = this.nextIndex++;\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\n\t\t\tconst nextXPos = ARRAY_ELEM_START_X + (i % this.elements_per_row) * ARRAY_ELEM_WIDTH;\n\t\t\tconst nextYPos =\n\t\t\t\tARRAY_ELEM_START_Y +\n\t\t\t\tMath.floor(i / this.elements_per_row) * ARRAY_VERTICAL_SEPARATION;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.hashTableVisual[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\tnextXPos,\n\t\t\t\tnextYPos,\n\t\t\t);\n\t\t\tthis.indexLabelID[i] = this.nextIndex++;\n\t\t\tthis.indexXPos[i] = nextXPos;\n\t\t\tthis.indexYPos[i] = nextYPos + ARRAY_ELEM_HEIGHT;\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.indexLabelID[i],\n\t\t\t\ti,\n\t\t\t\tthis.indexXPos[i],\n\t\t\t\tthis.indexYPos[i],\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.indexLabelID[i], INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, this.ExplainLabel, '', 10, 40, 0);\n\t\tthis.cmd(act.createLabel, this.HashIndexID, '', HASH2_LABEL_X + 300, HASH2_LABEL_Y + 5);\n\t\tthis.cmd(act.createLabel, this.DelIndexLabel, '', 10, 60, 0);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.loadFactorID,\n\t\t\t`Load Factor: ${this.load_factor}`,\n\t\t\tLOAD_LABEL_X,\n\t\t\tLOAD_LABEL_Y,\n\t\t);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tresetAll() {\n\t\tthis.commands = super.resetAll();\n\n\t\tthis.size = 0;\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\t\t\tthis.hashTableValues[i] = undefined;\n\t\t\tthis.cmd(act.setText, this.hashTableVisual[i], '');\n\t\t}\n\n\t\treturn this.commands;\n\t\t// Clear array, etc\n\t}\n\n\t// NEED TO OVERRIDE IN PARENT\n\treset() {\n\t\tthis.nextIndex = this.resetIndex;\n\t\tthis.table_size = CLOSED_HASH_TABLE_SIZE;\n\t\tthis.load_factor = DEFAULT_LOAD_FACTOR;\n\t\tthis.size = 0;\n\n\t\tthis.empty = new Array(this.table_size);\n\t\tthis.deleted = new Array(this.table_size);\n\t\tthis.hashTableVisual = new Array(this.table_size);\n\t\tthis.hashTableValues = new Array(this.table_size);\n\t\tthis.indexLabelID = new Array(this.table_size);\n\n\t\tthis.ExplainLabel = this.nextIndex++;\n\n\t\tthis.HashIndexID = this.nextIndex++;\n\n\t\t// stores deleted index\n\t\tthis.DelIndexLabel = this.nextIndex++;\n\n\t\t// stores the load factor\n\t\tthis.loadFactorID = this.nextIndex++;\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\t\t\tthis.hashTableVisual[i] = this.nextIndex++;\n\t\t\tthis.indexLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tsuper.reset();\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.cmd(act.delete, this.hashTableVisual[i]);\n\t\t\tthis.cmd(act.delete, this.indexLabelID[i]);\n\t\t}\n\n\t\tthis.table_size = parseInt(this.initialCapacityField.value)\n\t\t\t? Math.min(Math.max(0, parseInt(this.initialCapacityField.value)), MAX_SIZE)\n\t\t\t: CLOSED_HASH_TABLE_SIZE;\n\n\t\tif (this.table_size * 2 + 1 > MAX_SIZE) {\n\t\t\tthis.load_factor = 0.99;\n\t\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.loadFactorID,\n\t\t\t\t`Load Factor: ${this.load_factor}\n\t\t\t\t(Max Array Length)`,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.loadButton.setAttribute('style', 'pointer-events: none; color: grey');\n\t\t} else {\n\t\t\tthis.load_factor = DEFAULT_LOAD_FACTOR;\n\t\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.loadButton.setAttribute('style', 'pointer-events: auto; color: black');\n\t\t}\n\t\tthis.empty = Array(this.table_size);\n\t\tthis.deleted = Array(this.table_size);\n\t\tconst newHashTableVisual = Array(this.table_size);\n\t\tconst newIndexLabelID = Array(this.table_size);\n\t\tthis.hashTableValues = Array(this.table_size);\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tnewHashTableVisual[i] = this.nextIndex++;\n\t\t\tconst nextXPos = ARRAY_ELEM_START_X + (i % this.elements_per_row) * ARRAY_ELEM_WIDTH;\n\t\t\tconst nextYPos =\n\t\t\t\tARRAY_ELEM_START_Y +\n\t\t\t\tMath.floor(i / this.elements_per_row) * ARRAY_VERTICAL_SEPARATION;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tnewHashTableVisual[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\tnextXPos,\n\t\t\t\tnextYPos,\n\t\t\t);\n\n\t\t\tnewIndexLabelID[i] = this.nextIndex++;\n\t\t\tthis.indexXPos[i] = nextXPos;\n\t\t\tthis.indexYPos[i] = nextYPos + ARRAY_ELEM_HEIGHT;\n\t\t\tthis.cmd(act.createLabel, newIndexLabelID[i], i, this.indexXPos[i], this.indexYPos[i]);\n\t\t\tthis.cmd(act.setForegroundColor, newIndexLabelID[i], INDEX_COLOR);\n\n\t\t\tthis.empty[i] = true;\n\t\t\tthis.deleted[i] = false;\n\t\t\tthis.hashTableValues[i] = undefined;\n\t\t}\n\t\tthis.size = 0;\n\t\tthis.hashTableVisual = newHashTableVisual;\n\t\tthis.indexLabelID = newIndexLabelID;\n\t\treturn this.commands;\n\t}\n\n\tresetCallback() {}\n\n\tdisableUI() {\n\t\tsuper.disableUI();\n\t\tthis.linearProblingButton.disabled = true;\n\t\tthis.quadraticProbingButton.disabled = true;\n\t\tthis.doubleHashingButton.disabled = true;\n\t}\n\n\tenableUI() {\n\t\tsuper.enableUI();\n\t\tthis.linearProblingButton.disabled = false;\n\t\tthis.quadraticProbingButton.disabled = false;\n\t\tthis.doubleHashingButton.disabled = false;\n\t}\n}\n\nclass MapEntry {\n\tconstructor(key, val) {\n\t\tthis.key = key;\n\t\tthis.val = val;\n\t\tthis.elem = `<${key}, ${val}>`;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddCheckboxToAlgorithmBar,\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_ARRAY_SIZE = 18;\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 120;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst COMP_COUNT_X = 100;\nconst COMP_COUNT_Y = 50;\n\nconst CODE_START_X = 50;\nconst CODE_START_Y = 180;\n\nlet lastSwapEnabled = true;\n\nexport default class CocktailSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma seperated list (e.g. \"3,1,2\"). Max 18 elements & no elements > 999',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.sortButton = addControlToAlgorithmBar('Button', 'Sort', horizontalGroup);\n\t\tthis.sortButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.sortButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Last swap optimization toggle\n\t\tthis.lastSwapCheckbox = addCheckboxToAlgorithmBar('Enable last swap optimization', true);\n\t\tthis.lastSwapCheckbox.onclick = this.toggleLastSwap.bind(this);\n\t\tthis.controls.push(this.lastSwapCheckbox);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.comparisonCountID,\n\t\t\t'Comparison Count: ' + this.compCount,\n\t\t\tCOMP_COUNT_X,\n\t\t\tCOMP_COUNT_Y,\n\t\t);\n\n\t\tthis.code = [\n\t\t\t['procedure CocktailSort(array):'],\n\t\t\t['     start <- 0, end <- length of array - 1'],\n\t\t\t['     swapped <- start'],\n\t\t\t['     while end > start'],\n\t\t\t['          swapped <- start'],\n\t\t\t['          for i <- start, end do'],\n\t\t\t['               if array[i] > array[i + 1]'],\n\t\t\t['                    swap array[i], array[i + 1]'],\n\t\t\t['                    swapped <- i'],\n\t\t\t['               end if'],\n\t\t\t['          end for'],\n\t\t\t['          end <- swapped'],\n\t\t\t['          for i <- end, start do'],\n\t\t\t['               if array[i] < array[i - 1]'],\n\t\t\t['                    swap array[i], array[i - 1]'],\n\t\t\t['                    swapped <- i'],\n\t\t\t['               end if'],\n\t\t\t['          end for'],\n\t\t\t['          start <- swapped'],\n\t\t\t['     end while'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tconsole.log(this.nextIndex);\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.compCount = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.removeCode(this.codeID);\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\t\tif (!lastSwapEnabled) {\n\t\t\tthis.cmd(act.setText, this.codeID[2][0], '     sorted <- false');\n\t\t\tthis.cmd(act.setText, this.codeID[3][0], '     while start < end and sorted is false');\n\t\t\tthis.cmd(act.setText, this.codeID[4][0], '          sorted <- true');\n\t\t\tthis.cmd(act.setText, this.codeID[8][0], '                    sorted <- false');\n\t\t\tthis.cmd(act.setText, this.codeID[11][0], '          end <- end - 1');\n\t\t\tthis.cmd(act.setText, this.codeID[15][0], '                    sorted <- false');\n\t\t\tthis.cmd(act.setText, this.codeID[18][0], '          start <- start + 1');\n\t\t}\n\t}\n\n\tsortCallback() {\n\t\tconst list = this.listField.value.split(',').filter(x => x !== '');\n\t\tif (\n\t\t\tthis.listField.value !== '' &&\n\t\t\tlist.length <= MAX_ARRAY_SIZE &&\n\t\t\tlist.map(Number).filter(x => x > 999 || Number.isNaN(x)).length <= 0\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\ttoggleLastSwap() {\n\t\tif (lastSwapEnabled) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.cmd(act.setText, this.codeID[2][0], '     sorted <- false');\n\t\t\tthis.cmd(act.setText, this.codeID[3][0], '     while start < end and sorted is false');\n\t\t\tthis.cmd(act.setText, this.codeID[4][0], '          sorted <- true');\n\t\t\tthis.cmd(act.setText, this.codeID[8][0], '                    sorted <- false');\n\t\t\tthis.cmd(act.setText, this.codeID[11][0], '          end <- end - 1');\n\t\t\tthis.cmd(act.setText, this.codeID[15][0], '                    sorted <- false');\n\t\t\tthis.cmd(act.setText, this.codeID[18][0], '          start <- start + 1');\n\t\t} else {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.cmd(act.setText, this.codeID[2][0], '     swapped <- start');\n\t\t\tthis.cmd(act.setText, this.codeID[3][0], '     while start < end');\n\t\t\tthis.cmd(act.setText, this.codeID[4][0], '          swapped <- start');\n\t\t\tthis.cmd(act.setText, this.codeID[8][0], '                    swapped <- i');\n\t\t\tthis.cmd(act.setText, this.codeID[11][0], '          end <- swapped');\n\t\t\tthis.cmd(act.setText, this.codeID[15][0], '                    swapped <- i');\n\t\t\tthis.cmd(act.setText, this.codeID[18][0], '          start <- swapped');\n\t\t}\n\t\tlastSwapEnabled = !lastSwapEnabled;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.compCount = 0;\n\t\tthis.displayData = [];\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + this.compCount);\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\t\tthis.highlight(0, 0);\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, MAX_ARRAY_SIZE);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\t\tconst length = this.arrayData.length;\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(0, 0);\n\n\t\tlet sorted = true;\n\t\tlet start = 0;\n\t\tlet end = this.arrayData.length - 1;\n\t\tlet lastSwapped = 0;\n\t\tthis.highlight(3, 0);\n\t\tthis.cmd(act.step);\n\t\tdo {\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tthis.highlight(5, 0);\n\t\t\tsorted = true;\n\t\t\tfor (let i = start; i < end; i++) {\n\t\t\t\tthis.movePointers(i, i + 1);\n\t\t\t\tthis.unhighlight(5, 0);\n\t\t\t\tthis.highlight(6, 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(6, 0);\n\t\t\t\tif (this.arrayData[i] > this.arrayData[i + 1]) {\n\t\t\t\t\tthis.highlight(7, 0);\n\t\t\t\t\tthis.highlight(8, 0);\n\t\t\t\t\tthis.swap(i, i + 1);\n\t\t\t\t\tsorted = false;\n\t\t\t\t\tlastSwapped = i;\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.unhighlight(8, 0);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(5, 0);\n\t\t\tthis.highlight(11, 0);\n\t\t\tif (lastSwapEnabled) {\n\t\t\t\tend = lastSwapped;\n\t\t\t} else {\n\t\t\t\tend--;\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(11, 0);\n\t\t\tif (!sorted) {\n\t\t\t\tfor (let i = end + 1; i < this.arrayData.length; i++) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.highlight(12, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tif (!sorted) {\n\t\t\t\tsorted = true;\n\t\t\t\tfor (let i = end; i > start; i--) {\n\t\t\t\t\tthis.movePointers(i - 1, i);\n\t\t\t\t\tthis.unhighlight(12, 0);\n\t\t\t\t\tthis.highlight(13, 0);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(13, 0);\n\t\t\t\t\tif (+this.arrayData[i] < +this.arrayData[i - 1]) {\n\t\t\t\t\t\tthis.highlight(14, 0);\n\t\t\t\t\t\tthis.highlight(15, 0);\n\t\t\t\t\t\tthis.swap(i, i - 1);\n\t\t\t\t\t\tsorted = false;\n\t\t\t\t\t\tlastSwapped = i;\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(14, 0);\n\t\t\t\t\tthis.unhighlight(15, 0);\n\t\t\t\t}\n\t\t\t\tthis.highlight(18, 0);\n\t\t\t\tif (lastSwapEnabled) {\n\t\t\t\t\tstart = lastSwapped;\n\t\t\t\t} else {\n\t\t\t\t\tstart++;\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(18, 0);\n\t\t\t\tif (!sorted) {\n\t\t\t\t\tfor (let i = start - 1; i >= 0; i--) {\n\t\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.unhighlight(12, 0);\n\t\t\tthis.highlight(3, 0);\n\t\t\tthis.cmd(act.step);\n\t\t} while (!sorted);\n\t\tthis.unhighlight(3, 0);\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\n\t\t// Swap actual data\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\n\t\t// Swap displayed data\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","class PriorityQueue {\n\tconstructor() {\n\t\tthis.backingArray = [];\n\t}\n\n\tenqueue(data, id, priority) {\n\t\tthis.backingArray.push([data, id, priority]);\n\t\tthis.backingArray.sort((a, b) => {\n\t\t\tif (a[2] !== b[2]) {\n\t\t\t\treturn a[2] - b[2];\n\t\t\t} else {\n\t\t\t\tif (Array.isArray(a[0])) {\n\t\t\t\t\tif (a[0][0] !== b[0][0]) {\n\t\t\t\t\t\treturn a[0][0] - b[0][0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn a[0][1] - b[0][1];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn a[0] - b[0];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tdequeue() {\n\t\tconst x = this.backingArray.shift();\n\t\treturn [x[0], x[1]];\n\t}\n\n\tsize() {\n\t\treturn this.backingArray.length;\n\t}\n\n\tgetIDs() {\n\t\treturn this.backingArray.map(x => x[1]);\n\t}\n}\n\nexport default PriorityQueue;\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_SIZE = 32;\nconst LENGTH = 8;\n\nconst MAX_ARRAY_SIZE = 31;\nconst ARRAY_ELEM_WIDTH = 40;\nconst ARRAY_ELEM_HEIGHT = 25;\nconst ARRAY_INITIAL_X = 30;\n\nconst ARRAY_Y_POS = 50;\nconst ARRAY_LABEL_Y_POS = 75;\n\nconst ARRAY_RESIZE_Y_POS = 100;\nconst ARRAY_RESIZE_LABEL_Y_POS = 125;\n\nconst HEAP_X_POSITIONS = [\n\t0,\n\t450,\n\t250,\n\t650,\n\t150,\n\t350,\n\t550,\n\t750,\n\t100,\n\t200,\n\t300,\n\t400,\n\t500,\n\t600,\n\t700,\n\t800,\n\t75,\n\t125,\n\t175,\n\t225,\n\t275,\n\t325,\n\t375,\n\t425,\n\t475,\n\t525,\n\t575,\n\t625,\n\t675,\n\t725,\n\t775,\n\t825,\n];\n\nconst HEAP_Y_POSITIONS = [\n\t0,\n\t180,\n\t250,\n\t250,\n\t320,\n\t320,\n\t320,\n\t320,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t390,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n];\n\nexport default class Heap extends Algorithm {\n\tconstructor(am) {\n\t\tsuper(am);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.array_size = LENGTH;\n\t\tthis.order = 'smaller';\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Enqueue');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.removeButton = addControlToAlgorithmBar('Button', 'Dequeue');\n\t\tthis.removeButton.onclick = this.removeCallback.bind(this);\n\t\tthis.controls.push(this.removeButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma separated list (e.g. \"3,1,2\"). Max 31 elements & no elements > 999',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\tthis.buildHeapField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.buildHeapField.onkeydown = this.returnSubmit(\n\t\t\tthis.buildHeapField,\n\t\t\tthis.buildHeapCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.buildHeapField);\n\n\t\tthis.buildHeapButton = addControlToAlgorithmBar('Button', 'BuildHeap', horizontalGroup);\n\t\tthis.buildHeapButton.onclick = this.buildHeapCallback.bind(this);\n\t\tthis.controls.push(this.buildHeapButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst minMaxButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['MinHeap', 'MaxHeap'],\n\t\t\t'MinHeap/MaxHeap',\n\t\t);\n\n\t\tthis.minHeapButton = minMaxButtonList[0];\n\t\tthis.minHeapButton.onclick = this.minHeapCallback.bind(this);\n\t\tthis.minHeapButton.checked = true;\n\t\tthis.maxHeapButton = minMaxButtonList[1];\n\t\tthis.maxHeapButton.onclick = this.maxHeapCallback.bind(this);\n\t\tthis.isMinHeap = true;\n\t\tthis.controls.push(this.minHeapButton);\n\t\tthis.controls.push(this.maxHeapButton);\n\t}\n\n\tcreateArray() {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData = new Array(this.array_size);\n\t\tthis.arrayLabels = new Array(this.array_size);\n\t\tthis.arrayRects = new Array(this.array_size);\n\t\tthis.circleObjs = new Array(this.array_size);\n\t\tthis.arrayXPositions = new Array(this.array_size);\n\t\tthis.currentHeapSize = 0;\n\n\t\tfor (let i = 0; i < this.array_size; i++) {\n\t\t\tthis.arrayXPositions[i] = ARRAY_INITIAL_X + i * ARRAY_ELEM_WIDTH;\n\t\t\tthis.arrayLabels[i] = this.nextIndex++;\n\t\t\tthis.arrayRects[i] = this.nextIndex++;\n\t\t\tthis.circleObjs[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayRects[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\tthis.arrayXPositions[i],\n\t\t\t\tARRAY_Y_POS,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.arrayLabels[i],\n\t\t\t\ti,\n\t\t\t\tthis.arrayXPositions[i],\n\t\t\t\tARRAY_LABEL_Y_POS,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabels[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.setText, this.arrayRects[0], 'null');\n\t\treturn this.commands;\n\t}\n\n\tsetup() {\n\t\tthis.swapLabel1 = this.nextIndex++;\n\t\tthis.swapLabel2 = this.nextIndex++;\n\t\tthis.swapLabel3 = this.nextIndex++;\n\t\tthis.swapLabel4 = this.nextIndex++;\n\t\tthis.descriptLabel1 = this.nextIndex++;\n\t\tthis.descriptLabel2 = this.nextIndex++;\n\t\tthis.descriptLabel3 = this.nextIndex++;\n\t\tthis.resetIndex = this.nextIndex;\n\t\tthis.createArray();\n\t\tthis.cmd(act.createLabel, this.descriptLabel1, '', 20, 10, 0);\n\t\tthis.cmd(act.createLabel, this.descriptLabel3, '', 300, 10, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tinsertCallback() {\n\t\tconst insertedValue = this.normalizeNumber(this.insertField.value, 4);\n\t\tif (insertedValue !== '') {\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tremoveCallback() {\n\t\tthis.implementAction(this.remove.bind(this));\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t\tthis.implementAction(this.resize.bind(this), LENGTH, false);\n\t}\n\n\tbuildHeapCallback() {\n\t\tconst list = this.buildHeapField.value.split(',').filter(x => x !== '');\n\t\tif (\n\t\t\tthis.buildHeapField.value !== '' &&\n\t\t\tlist.length <= MAX_ARRAY_SIZE &&\n\t\t\tlist.map(Number).filter(x => x > 999 || Number.isNaN(x)).length <= 0\n\t\t) {\n\t\t\tthis.buildHeapField.value = '';\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.implementAction(this.buildHeap.bind(this), list);\n\t\t}\n\t}\n\n\tminHeapCallback() {\n\t\tif (!this.isMinHeap) {\n\t\t\tthis.clearCallback();\n\t\t\tthis.isMinHeap = true;\n\t\t\tthis.order = 'smaller';\n\t\t}\n\t}\n\n\tmaxHeapCallback() {\n\t\tif (this.isMinHeap) {\n\t\t\tthis.clearCallback();\n\t\t\tthis.isMinHeap = false;\n\t\t\tthis.order = 'larger';\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\twhile (this.currentHeapSize > 0) {\n\t\t\tthis.cmd(act.delete, this.circleObjs[this.currentHeapSize]);\n\t\t\tthis.cmd(act.setText, this.arrayRects[this.currentHeapSize], '');\n\t\t\tthis.currentHeapSize--;\n\t\t}\n\t\tthis.cmd(act.setText, this.descriptLabel1, '');\n\t\treturn this.commands;\n\t}\n\n\treset() {\n\t\tthis.currentHeapSize = 0;\n\t\tthis.array_size = LENGTH;\n\n\t\tthis.nextIndex = this.resetIndex;\n\n\t\tthis.arrayData = new Array(this.array_size);\n\t\tthis.arrayLabels = new Array(this.array_size);\n\t\tthis.arrayRects = new Array(this.array_size);\n\t\tthis.circleObjs = new Array(this.array_size);\n\t\tthis.arrayXPositions = new Array(this.array_size);\n\n\t\tfor (let i = 0; i < this.array_size; i++) {\n\t\t\tthis.arrayXPositions[i] = ARRAY_INITIAL_X + i * ARRAY_ELEM_WIDTH;\n\t\t\tthis.arrayLabels[i] = this.nextIndex++;\n\t\t\tthis.arrayRects[i] = this.nextIndex++;\n\t\t\tthis.circleObjs[i] = this.nextIndex++;\n\t\t}\n\t}\n\n\tswap(index1, index2) {\n\t\tthis.cmd(act.setText, this.arrayRects[index1], '');\n\t\tthis.cmd(act.setText, this.arrayRects[index2], '');\n\t\tthis.cmd(act.setText, this.circleObjs[index1], '');\n\t\tthis.cmd(act.setText, this.circleObjs[index2], '');\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel1,\n\t\t\tthis.arrayData[index1],\n\t\t\tthis.arrayXPositions[index1],\n\t\t\tARRAY_Y_POS,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel2,\n\t\t\tthis.arrayData[index2],\n\t\t\tthis.arrayXPositions[index2],\n\t\t\tARRAY_Y_POS,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel3,\n\t\t\tthis.arrayData[index1],\n\t\t\tHEAP_X_POSITIONS[index1],\n\t\t\tHEAP_Y_POSITIONS[index1],\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.swapLabel4,\n\t\t\tthis.arrayData[index2],\n\t\t\tHEAP_X_POSITIONS[index2],\n\t\t\tHEAP_Y_POSITIONS[index2],\n\t\t);\n\t\tthis.cmd(act.move, this.swapLabel1, this.arrayXPositions[index2], ARRAY_Y_POS);\n\t\tthis.cmd(act.move, this.swapLabel2, this.arrayXPositions[index1], ARRAY_Y_POS);\n\t\tthis.cmd(act.move, this.swapLabel3, HEAP_X_POSITIONS[index2], HEAP_Y_POSITIONS[index2]);\n\t\tthis.cmd(act.move, this.swapLabel4, HEAP_X_POSITIONS[index1], HEAP_Y_POSITIONS[index1]);\n\t\tconst tmp = this.arrayData[index1];\n\t\tthis.arrayData[index1] = this.arrayData[index2];\n\t\tthis.arrayData[index2] = tmp;\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayRects[index1], this.arrayData[index1]);\n\t\tthis.cmd(act.setText, this.arrayRects[index2], this.arrayData[index2]);\n\t\tthis.cmd(act.setText, this.circleObjs[index1], this.arrayData[index1]);\n\t\tthis.cmd(act.setText, this.circleObjs[index2], this.arrayData[index2]);\n\t\tthis.cmd(act.delete, this.swapLabel1);\n\t\tthis.cmd(act.delete, this.swapLabel2);\n\t\tthis.cmd(act.delete, this.swapLabel3);\n\t\tthis.cmd(act.delete, this.swapLabel4);\n\t}\n\n\tsetIndexHighlight(index, highlightVal) {\n\t\tthis.cmd(act.setHighlight, this.circleObjs[index], highlightVal);\n\t\tthis.cmd(act.setHighlight, this.arrayRects[index], highlightVal);\n\t}\n\n\tpushDown(index) {\n\t\tlet childIndex; // Used to keep track of smallest (in MinHeap) or largest (in MaxHeap) child\n\n\t\twhile (index * 2 <= this.currentHeapSize) {\n\t\t\tchildIndex = 2 * index;\n\n\t\t\tif (index * 2 + 1 <= this.currentHeapSize) {\n\t\t\t\tthis.cmd(act.setText, this.descriptLabel3, `Finding ${this.order} of two children`);\n\t\t\t\tthis.setIndexHighlight(2 * index, 1);\n\t\t\t\tthis.setIndexHighlight(2 * index + 1, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.setIndexHighlight(2 * index, 0);\n\t\t\t\tthis.setIndexHighlight(2 * index + 1, 0);\n\t\t\t\tif (this.downheapCheckRightChild(index)) {\n\t\t\t\t\tchildIndex = 2 * index + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.setText, this.descriptLabel3, `Comparing child to parent`);\n\t\t\tthis.setIndexHighlight(index, 1);\n\t\t\tthis.setIndexHighlight(childIndex, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.setIndexHighlight(index, 0);\n\t\t\tthis.setIndexHighlight(childIndex, 0);\n\t\t\tthis.cmd(act.setText, this.descriptLabel3, ``);\n\n\t\t\tif (this.downheapCompare(childIndex, index)) {\n\t\t\t\tthis.swap(childIndex, index);\n\t\t\t\tindex = childIndex;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tdownheapCheckRightChild(index) {\n\t\t// Checks if the right child is smaller (in MinHeap) or greater (in MaxHeap) than left child\n\t\tif (this.isMinHeap) {\n\t\t\tif (this.arrayData[2 * index + 1] < this.arrayData[2 * index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.arrayData[2 * index + 1] > this.arrayData[2 * index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tdownheapCompare(childIndex, index) {\n\t\t// Checks if smallest child is smaller than parent (in MinHeap)\n\t\t// or greatest child is greater than parent (in MaxHeap)\n\t\tif (this.isMinHeap) {\n\t\t\tif (this.arrayData[childIndex] < this.arrayData[index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.arrayData[childIndex] > this.arrayData[index]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tremove() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.descriptLabel1, '');\n\n\t\tif (this.currentHeapSize === 0) {\n\t\t\tthis.cmd(act.setText, this.descriptLabel1, 'Heap is empty, cannot dequeue');\n\t\t\treturn this.commands;\n\t\t}\n\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Removing element:');\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.descriptLabel2,\n\t\t\tthis.arrayData[1],\n\t\t\tHEAP_X_POSITIONS[1],\n\t\t\tHEAP_Y_POSITIONS[1],\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.setText, this.circleObjs[1], '');\n\t\tthis.cmd(act.move, this.descriptLabel2, 120, 40);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.descriptLabel2);\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Removing element: ' + this.arrayData[1]);\n\t\tthis.arrayData[1] = '';\n\t\tif (this.currentHeapSize > 1) {\n\t\t\tthis.cmd(act.setText, this.arrayRects[1], '');\n\t\t\tthis.cmd(act.setText, this.arrayRects[this.currentHeapSize], '');\n\t\t\tthis.swap(1, this.currentHeapSize);\n\t\t\tthis.cmd(act.delete, this.circleObjs[this.currentHeapSize]);\n\t\t\tthis.currentHeapSize--;\n\t\t\tthis.pushDown(1);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.arrayRects[1], '');\n\t\t\tthis.cmd(act.delete, this.circleObjs[this.currentHeapSize]);\n\t\t\tthis.currentHeapSize--;\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tbuildHeap(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData = params\n\t\t\t.map(Number) // Map to numbers (to remove invalid characters)\n\t\t\t.filter(x => !Number.isNaN(x)) // Remove stuff that was invalid\n\t\t\t.slice(0, MAX_ARRAY_SIZE); // Get first 31 numbers\n\t\tthis.arrayData.unshift(0); // Add a 0 to start of array\n\n\t\tthis.currentHeapSize = this.arrayData.length - 1;\n\t\tconst size = Math.min(MAX_SIZE, this.currentHeapSize * 2 + 1);\n\t\tif (this.array_size !== size) {\n\t\t\tthis.commands = this.resize(size, false);\n\t\t}\n\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Adding data to array');\n\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 1; i <= this.currentHeapSize; i++) {\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircle,\n\t\t\t\tthis.circleObjs[i],\n\t\t\t\tthis.arrayData[i],\n\t\t\t\tHEAP_X_POSITIONS[i],\n\t\t\t\tHEAP_Y_POSITIONS[i],\n\t\t\t);\n\t\t\tthis.cmd(act.setText, this.arrayRects[i], this.arrayData[i]);\n\t\t\tif (i > 1) {\n\t\t\t\tthis.cmd(act.connect, this.circleObjs[Math.floor(i / 2)], this.circleObjs[i]);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Enforcing order property using downheap');\n\t\tlet nextElem = this.currentHeapSize;\n\t\twhile (nextElem > 0) {\n\t\t\tthis.pushDown(nextElem);\n\t\t\tnextElem = nextElem - 1;\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Buildheap complete!');\n\t\treturn this.commands;\n\t}\n\n\tinsertElement(insertedValue) {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.descriptLabel1, '');\n\n\t\tif (this.currentHeapSize === this.array_size - 1) {\n\t\t\tif (this.currentHeapSize >= MAX_SIZE - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.descriptLabel1,\n\t\t\t\t\t'Array would normally resize here, ' +\n\t\t\t\t\t\t\"but there's not enough space on the screen for a larger heap. So here's a cute emoji of jack instead: VV\",\n\t\t\t\t);\n\t\t\t\treturn this.commands;\n\t\t\t} else {\n\t\t\t\tconst size = Math.min(MAX_SIZE, this.array_size * 2);\n\t\t\t\tthis.commands = this.resize(size, true);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Enqueueing Element: ' + insertedValue);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.descriptLabel1, 'Enqueueing Element: ');\n\t\tthis.currentHeapSize++;\n\t\tthis.arrayData[this.currentHeapSize] = insertedValue;\n\t\tthis.cmd(\n\t\t\tact.createCircle,\n\t\t\tthis.circleObjs[this.currentHeapSize],\n\t\t\t'',\n\t\t\tHEAP_X_POSITIONS[this.currentHeapSize],\n\t\t\tHEAP_Y_POSITIONS[this.currentHeapSize],\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.descriptLabel2, insertedValue, 120, 45, 1);\n\t\tif (this.currentHeapSize > 1) {\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.circleObjs[Math.floor(this.currentHeapSize / 2)],\n\t\t\t\tthis.circleObjs[this.currentHeapSize],\n\t\t\t);\n\t\t}\n\n\t\tthis.cmd(\n\t\t\tact.move,\n\t\t\tthis.descriptLabel2,\n\t\t\tHEAP_X_POSITIONS[this.currentHeapSize],\n\t\t\tHEAP_Y_POSITIONS[this.currentHeapSize],\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.circleObjs[this.currentHeapSize], insertedValue);\n\t\tthis.cmd(act.delete, this.descriptLabel2);\n\t\tthis.cmd(act.setText, this.arrayRects[this.currentHeapSize], insertedValue);\n\n\t\tlet currentIndex = this.currentHeapSize;\n\t\tlet parentIndex = Math.floor(currentIndex / 2);\n\n\t\tif (currentIndex > 1) {\n\t\t\tthis.setIndexHighlight(currentIndex, 1);\n\t\t\tthis.setIndexHighlight(parentIndex, 1);\n\t\t\tthis.cmd(act.setText, this.descriptLabel3, `Comparing child to parent`);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.setIndexHighlight(currentIndex, 0);\n\t\t\tthis.setIndexHighlight(parentIndex, 0);\n\t\t}\n\n\t\twhile (currentIndex > 1 && this.upheapCompare(currentIndex, parentIndex)) {\n\t\t\tthis.swap(currentIndex, parentIndex);\n\t\t\tcurrentIndex = parentIndex;\n\t\t\tparentIndex = Math.floor(parentIndex / 2);\n\t\t\tif (currentIndex > 1) {\n\t\t\t\tthis.setIndexHighlight(currentIndex, 1);\n\t\t\t\tthis.setIndexHighlight(parentIndex, 1);\n\t\t\t\tthis.cmd(act.setText, this.descriptLabel3, `Comparing child to parent`);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.setIndexHighlight(currentIndex, 0);\n\t\t\t\tthis.setIndexHighlight(parentIndex, 0);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.setText, this.descriptLabel1, '');\n\t\tthis.cmd(act.setText, this.descriptLabel3, '');\n\t\treturn this.commands;\n\t}\n\n\tresize(size, add) {\n\t\tthis.commands = [];\n\t\tconst resizeLabelID = this.nextIndex++;\n\n\t\tif (add) {\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tresizeLabelID,\n\t\t\t\t'Resize Required: size == array.length - 1',\n\t\t\t\t400,\n\t\t\t\t20,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tif (size === MAX_SIZE) {\n\t\t\t\tthis.cmd(act.setText, resizeLabelID, 'Resizing to 32 (Max array size)');\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setText, resizeLabelID, 'Resizing to 2 * array.length');\n\t\t\t}\n\t\t}\n\n\t\tconst oldSize = this.array_size;\n\n\t\tthis.array_size = size;\n\n\t\tthis.newArrayData = new Array(this.array_size);\n\t\tthis.newArrayLabels = new Array(this.array_size);\n\t\tthis.newArrayRects = new Array(this.array_size);\n\t\tthis.newCircleObjs = new Array(this.array_size);\n\t\tthis.newArrayXPositions = new Array(this.array_size);\n\n\t\tfor (let i = 0; i < this.array_size; i++) {\n\t\t\tthis.newArrayLabels[i] = this.nextIndex++;\n\t\t\tthis.newArrayRects[i] = this.nextIndex++;\n\t\t\tthis.newArrayXPositions[i] = ARRAY_INITIAL_X + i * ARRAY_ELEM_WIDTH;\n\t\t\tif (i < oldSize) {\n\t\t\t\tthis.newCircleObjs[i] = this.circleObjs[i];\n\t\t\t} else {\n\t\t\t\tthis.newCircleObjs[i] = this.nextIndex++;\n\t\t\t}\n\t\t\tthis.newArrayData[i] = this.arrayData[i];\n\t\t}\n\n\t\tif (add) {\n\t\t\tfor (let i = 0; i < this.array_size; i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.newArrayRects[i],\n\t\t\t\t\t'',\n\t\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\t\tthis.newArrayXPositions[i],\n\t\t\t\t\tARRAY_RESIZE_Y_POS,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.newArrayLabels[i],\n\t\t\t\t\ti,\n\t\t\t\t\tthis.newArrayXPositions[i],\n\t\t\t\t\tARRAY_RESIZE_LABEL_Y_POS,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.newArrayLabels[i], '#0000FF');\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.arrayMoveID = new Array(this.oldSize);\n\n\t\t\tfor (let i = 0; i <= this.currentHeapSize; i++) {\n\t\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tthis.arrayMoveID[i],\n\t\t\t\t\t\t'null',\n\t\t\t\t\t\tthis.arrayXPositions[i],\n\t\t\t\t\t\tARRAY_Y_POS,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tthis.arrayMoveID[i],\n\t\t\t\t\t\tthis.arrayData[i],\n\t\t\t\t\t\tthis.arrayXPositions[i],\n\t\t\t\t\t\tARRAY_Y_POS,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.arrayMoveID[i],\n\t\t\t\t\tthis.newArrayXPositions[i],\n\t\t\t\t\tARRAY_RESIZE_Y_POS,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\n\t\t\tfor (let i = 0; i < oldSize; i++) {\n\t\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\t\tthis.cmd(act.setText, this.newArrayRects[i], this.newArrayData[i]);\n\t\t\t}\n\n\t\t\tthis.cmd(act.setText, this.newArrayRects[0], 'null');\n\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tfor (let i = 0; i < oldSize; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayLabels[i]);\n\t\t\tthis.cmd(act.delete, this.arrayRects[i]);\n\t\t}\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.arrayData = this.newArrayData;\n\t\tthis.arrayLabels = this.newArrayLabels;\n\t\tthis.arrayXPositions = this.newArrayXPositions;\n\t\tthis.arrayRects = this.newArrayRects;\n\t\tthis.circleObjs = this.newCircleObjs;\n\n\t\tif (add) {\n\t\t\tfor (let i = 0; i < this.array_size; i++) {\n\t\t\t\tthis.cmd(act.move, this.arrayRects[i], this.arrayXPositions[i], ARRAY_Y_POS);\n\t\t\t\tthis.cmd(act.move, this.arrayLabels[i], this.arrayXPositions[i], ARRAY_LABEL_Y_POS);\n\t\t\t}\n\n\t\t\tthis.cmd(act.delete, resizeLabelID);\n\t\t} else {\n\t\t\tfor (let i = 0; i < this.array_size; i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.arrayRects[i],\n\t\t\t\t\t'',\n\t\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\t\tthis.arrayXPositions[i],\n\t\t\t\t\tARRAY_Y_POS,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.arrayLabels[i],\n\t\t\t\t\ti,\n\t\t\t\t\tthis.arrayXPositions[i],\n\t\t\t\t\tARRAY_LABEL_Y_POS,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.newArrayLabels[i], '#0000FF');\n\t\t\t}\n\t\t\tthis.cmd(act.setText, this.arrayRects[0], 'null');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tupheapCompare(currentIndex, parentIndex) {\n\t\tif (this.isMinHeap) {\n\t\t\tif (this.arrayData[currentIndex] < this.arrayData[parentIndex]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.arrayData[currentIndex] > this.arrayData[parentIndex]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tthis.controls.forEach(button => (button.disabled = true));\n\t}\n\n\tenableUI() {\n\t\tthis.controls.forEach(button => (button.disabled = false));\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Hash from './Hash.js';\nimport { act } from '../anim/AnimationMain';\n\nconst POINTER_ARRAY_ELEM_WIDTH = 50;\nconst POINTER_ARRAY_ELEM_HEIGHT = 25;\nconst POINTER_ARRAY_ELEM_START_X = 70;\nconst POINTER_ARRAY_ELEM_START_Y = 100;\n\nconst RESIZE_POINTER_ARRAY_ELEM_START_X = 670;\nconst RESIZE_POINTER_ARRAY_ELEM_START_Y = 50;\nconst RESIZE_LABEL_X = 800;\nconst RESIZE_LABEL_Y = 20;\n\nconst LINKED_ITEM_WIDTH = 70;\nconst LINKED_ITEM_HEIGHT = 20;\n\nconst LINKED_ITEM_INITIAL_X = 60;\nconst LINKED_ITEM_INITIAL_Y = 40;\nconst LINKED_ITEM_X_DELTA_INIT = 70;\nconst LINKED_ITEM_X_DELTA = 90;\n\nconst EXPLAIN_LABEL_X = 550;\nconst EXPLAIN_LABEL_Y = 15;\n\nconst HASH_TABLE_SIZE = 7;\n\nconst DEFAULT_LOAD_FACTOR = 0.67;\n\nconst LOAD_LABEL_X = 60;\nconst LOAD_LABEL_Y = 20;\n\nconst MAX_SIZE = 30;\n\nconst INDEX_COLOR = '#0000FF';\n\nexport default class OpenHash extends Hash {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.nextIndex = 0;\n\t\tthis.POINTER_ARRAY_ELEM_Y = h - POINTER_ARRAY_ELEM_WIDTH;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tsuper.addControls();\n\t\tthis.restartButton.onclick = this.resizeInitialTableCall.bind(this);\n\t}\n\n\tsetup() {\n\t\tthis.initialCapacityField.value = HASH_TABLE_SIZE;\n\t\tthis.hashTableVisual = new Array(HASH_TABLE_SIZE);\n\t\tthis.hashTableIndices = new Array(HASH_TABLE_SIZE);\n\t\tthis.hashTableValues = new Array(HASH_TABLE_SIZE);\n\t\tthis.indexXPos = new Array(HASH_TABLE_SIZE);\n\t\tthis.indexYPos = new Array(HASH_TABLE_SIZE);\n\n\t\tthis.ExplainLabel = this.nextIndex++;\n\n\t\tthis.loadFactorID = this.nextIndex++;\n\n\t\tthis.size = 0;\n\n\t\tthis.table_size = HASH_TABLE_SIZE;\n\n\t\tthis.load_factor = DEFAULT_LOAD_FACTOR;\n\n\t\tthis.resetIndex = this.nextIndex;\n\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < HASH_TABLE_SIZE; i++) {\n\t\t\tlet nextID = this.nextIndex++;\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tnextID,\n\t\t\t\t'',\n\t\t\t\tPOINTER_ARRAY_ELEM_WIDTH,\n\t\t\t\tPOINTER_ARRAY_ELEM_HEIGHT,\n\t\t\t\tPOINTER_ARRAY_ELEM_START_X,\n\t\t\t\tPOINTER_ARRAY_ELEM_START_Y + i * POINTER_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.hashTableVisual[i] = nextID;\n\t\t\tthis.cmd(act.setNull, this.hashTableVisual[i], 1);\n\n\t\t\tnextID = this.nextIndex++;\n\t\t\tthis.hashTableIndices[i] = nextID;\n\t\t\tthis.hashTableValues[i] = null;\n\n\t\t\tthis.indexXPos[i] = POINTER_ARRAY_ELEM_START_X - POINTER_ARRAY_ELEM_WIDTH;\n\t\t\tthis.indexYPos[i] = POINTER_ARRAY_ELEM_START_Y + i * POINTER_ARRAY_ELEM_HEIGHT;\n\n\t\t\tthis.cmd(act.createLabel, nextID, i, this.indexXPos[i], this.indexYPos[i]);\n\t\t\tthis.cmd(act.setForegroundColor, nextID, INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.loadFactorID,\n\t\t\t`Load Factor: ${this.load_factor}`,\n\t\t\tLOAD_LABEL_X,\n\t\t\tLOAD_LABEL_Y,\n\t\t);\n\t\tthis.cmd(act.createLabel, this.ExplainLabel, '', EXPLAIN_LABEL_X, EXPLAIN_LABEL_Y, 0);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tresizeInitialTableCall() {\n\t\tthis.implementAction(this.resizeInitialTable.bind(this));\n\t}\n\n\tresizeInitialTable() {\n\t\t// Make command stack empty, and clear the elements of the list.\n\t\tthis.commands = [];\n\t\t//Delete current hashTable\n\t\tthis.oldHashTableVisual = this.hashTableVisual;\n\t\tthis.oldHashTableIndices = this.hashTableIndices;\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.cmd(act.setNull, this.oldHashTableVisual[i], 1);\n\t\t\tthis.cmd(act.delete, this.oldHashTableVisual[i]);\n\t\t\tthis.cmd(act.delete, this.oldHashTableIndices[i]);\n\t\t}\n\n\t\tif (this.initialCapacityField !== '') {\n\t\t\tthis.table_size = parseInt(this.initialCapacityField.value)\n\t\t\t\t? Math.min(Math.max(0, parseInt(this.initialCapacityField.value)), MAX_SIZE)\n\t\t\t\t: HASH_TABLE_SIZE;\n\t\t}\n\n\t\tif (this.table_size * 2 + 1 > MAX_SIZE) {\n\t\t\tthis.load_factor = 0.99;\n\t\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.loadFactorID,\n\t\t\t\t`Load Factor: ${this.load_factor}\n\t\t\t\t(Array Length too large for resize)`,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.loadButton.setAttribute('style', 'pointer-events: none; color: grey');\n\t\t} else {\n\t\t\tthis.load_factor = DEFAULT_LOAD_FACTOR;\n\t\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.loadButton.setAttribute('style', 'pointer-events: auto; color: black');\n\t\t}\n\t\tthis.hashTableVisual = new Array(this.table_size);\n\t\tthis.hashTableIndices = new Array(this.table_size);\n\t\tthis.indexXPos = new Array(this.table_size);\n\t\tthis.indexYPos = new Array(this.table_size);\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tlet nextID = this.nextIndex++;\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tnextID,\n\t\t\t\t'',\n\t\t\t\tPOINTER_ARRAY_ELEM_WIDTH,\n\t\t\t\tPOINTER_ARRAY_ELEM_HEIGHT,\n\t\t\t\tPOINTER_ARRAY_ELEM_START_X,\n\t\t\t\tPOINTER_ARRAY_ELEM_START_Y + i * POINTER_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.hashTableVisual[i] = nextID;\n\t\t\tthis.cmd(act.setNull, this.hashTableVisual[i], 1);\n\n\t\t\tnextID = this.nextIndex++;\n\t\t\tthis.hashTableIndices[i] = nextID;\n\n\t\t\tthis.indexXPos[i] = POINTER_ARRAY_ELEM_START_X - POINTER_ARRAY_ELEM_WIDTH;\n\t\t\tthis.indexYPos[i] = POINTER_ARRAY_ELEM_START_Y + i * POINTER_ARRAY_ELEM_HEIGHT;\n\n\t\t\tthis.cmd(act.createLabel, nextID, i, this.indexXPos[i], this.indexYPos[i]);\n\t\t\tthis.cmd(act.setForegroundColor, nextID, INDEX_COLOR);\n\t\t}\n\n\t\tif (this.size !== 0) {\n\t\t\tfor (let i = 0; i < this.hashTableValues.length; i++) {\n\t\t\t\tlet node = this.hashTableValues[i];\n\t\t\t\tif (node != null) {\n\t\t\t\t\tthis.cmd(act.delete, node.graphicID);\n\t\t\t\t\twhile (node.next != null) {\n\t\t\t\t\t\tnode = node.next;\n\t\t\t\t\t\tthis.cmd(act.delete, node.graphicID);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.hashTableValues = new Array(HASH_TABLE_SIZE);\n\t\t\tthis.size = 0;\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tinsertElement(key, value) {\n\t\tconst elem = `<${key}, ${value}>`;\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\n\t\tif (\n\t\t\t(this.size + 1) / this.table_size > this.load_factor &&\n\t\t\tthis.table_size * 2 + 1 < MAX_SIZE\n\t\t) {\n\t\t\tthis.resize();\n\t\t}\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Inserting element ' + elem);\n\t\tconst node = new LinkedListNode(\n\t\t\tkey,\n\t\t\tvalue,\n\t\t\tthis.nextIndex++,\n\t\t\tLINKED_ITEM_INITIAL_X,\n\t\t\tLINKED_ITEM_INITIAL_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tnode.graphicID,\n\t\t\telem,\n\t\t\tLINKED_ITEM_WIDTH,\n\t\t\tLINKED_ITEM_HEIGHT,\n\t\t\tLINKED_ITEM_INITIAL_X,\n\t\t\tLINKED_ITEM_INITIAL_Y,\n\t\t\t0.25,\n\t\t\t0,\n\t\t\t1,\n\t\t);\n\n\t\tconst index = this.doHash(key);\n\n\t\tlet found = false;\n\t\tlet prev = null;\n\t\tlet old;\n\t\tif (this.hashTableValues[index] != null) {\n\t\t\t// Search for duplicates\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Searching for duplicates of ' + key);\n\n\t\t\tconst compareIndex = this.nextIndex++;\n\t\t\tlet tmp = this.hashTableValues[index];\n\t\t\tthis.cmd(act.createLabel, compareIndex, '', EXPLAIN_LABEL_X, EXPLAIN_LABEL_Y + 30, 0);\n\t\t\twhile (tmp != null && !found) {\n\t\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 1);\n\t\t\t\tif (tmp.key === key) {\n\t\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.key + '==' + key);\n\t\t\t\t\told = tmp;\n\t\t\t\t\tfound = true;\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 0);\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.key + '!=' + key);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 0);\n\t\t\t\tprev = tmp;\n\t\t\t\ttmp = tmp.next;\n\t\t\t}\n\n\t\t\tthis.cmd(act.delete, compareIndex);\n\t\t\tthis.nextIndex--;\n\t\t} else {\n\t\t\tthis.cmd(act.setNull, node.graphicID, 1);\n\t\t\tthis.cmd(act.setNull, this.hashTableVisual[index], 0);\n\t\t}\n\n\t\tif (found) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Key ' + key + ' is already in HashMap, updating value.',\n\t\t\t);\n\t\t\tthis.cmd(act.delete, old.graphicID);\n\t\t\tnode.next = old.next;\n\n\t\t\tif (prev != null) {\n\t\t\t\tprev.next = node;\n\t\t\t\tthis.cmd(act.connect, prev.graphicID, node.graphicID);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.hashTableVisual[index],\n\t\t\t\t\tthis.hashTableValues[index].graphicID,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.connect, this.hashTableVisual[index], node.graphicID);\n\t\t\t\tthis.hashTableValues[index] = node;\n\t\t\t}\n\t\t\tif (node.next != null) {\n\t\t\t\tthis.cmd(act.connect, node.graphicID, node.next.graphicID);\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setNull, node.graphicID, 1);\n\t\t\t}\n\n\t\t\tthis.repositionList(index, this.hashTableValues[index]);\n\t\t\tthis.cmd(act.step);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.ExplainLabel, 'Duplicate of  ' + key + '  not found!');\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (this.hashTableValues[index] != null) {\n\t\t\t\tthis.cmd(act.connect, node.graphicID, this.hashTableValues[index].graphicID);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.hashTableVisual[index],\n\t\t\t\t\tthis.hashTableValues[index].graphicID,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.cmd(act.connect, this.hashTableVisual[index], node.graphicID);\n\t\t\tnode.next = this.hashTableValues[index];\n\t\t\tthis.hashTableValues[index] = node;\n\t\t\tthis.repositionList(index, this.hashTableValues[index]);\n\t\t\tthis.size++;\n\t\t}\n\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\n\t\treturn this.commands;\n\t}\n\n\trepositionList(index, tmp) {\n\t\tlet startX = POINTER_ARRAY_ELEM_START_X + LINKED_ITEM_X_DELTA_INIT;\n\t\tconst startY = POINTER_ARRAY_ELEM_START_Y + index * POINTER_ARRAY_ELEM_HEIGHT;\n\t\t// let tmp = this.hashTableValues[index];\n\t\twhile (tmp != null) {\n\t\t\ttmp.x = startX;\n\t\t\ttmp.y = startY;\n\t\t\tthis.cmd(act.move, tmp.graphicID, tmp.x, tmp.y);\n\t\t\tstartX = startX + LINKED_ITEM_X_DELTA;\n\t\t\ttmp = tmp.next;\n\t\t}\n\t}\n\n\trepositionResizeList(index) {\n\t\tlet startX = RESIZE_POINTER_ARRAY_ELEM_START_X + LINKED_ITEM_X_DELTA_INIT;\n\t\tconst startY = RESIZE_POINTER_ARRAY_ELEM_START_Y + index * POINTER_ARRAY_ELEM_HEIGHT;\n\t\tlet tmp = this.hashTableValues[index];\n\t\twhile (tmp != null) {\n\t\t\ttmp.x = startX;\n\t\t\ttmp.y = startY;\n\t\t\tthis.cmd(act.move, tmp.graphicID, tmp.x, tmp.y);\n\t\t\tstartX = startX + LINKED_ITEM_X_DELTA;\n\t\t\ttmp = tmp.next;\n\t\t}\n\t}\n\n\tdeleteElement(key) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Deleting entry with key: ' + key);\n\t\tconst index = this.doHash(key);\n\t\tif (this.hashTableValues[index] == null) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting entry with key: ' + key + '  Key not in table',\n\t\t\t);\n\t\t\treturn this.commands;\n\t\t}\n\t\tthis.cmd(act.setHighlight, this.hashTableValues[index].graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.hashTableValues[index].graphicID, 0);\n\t\tif (this.hashTableValues[index].key === key) {\n\t\t\tif (this.hashTableValues[index].next != null) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.hashTableVisual[index],\n\t\t\t\t\tthis.hashTableValues[index].next.graphicID,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setNull, this.hashTableVisual[index], 1);\n\t\t\t}\n\t\t\tthis.cmd(act.delete, this.hashTableValues[index].graphicID);\n\t\t\tthis.hashTableValues[index] = this.hashTableValues[index].next;\n\t\t\tthis.repositionList(index, this.hashTableValues[index]);\n\t\t\tthis.size--;\n\t\t\treturn this.commands;\n\t\t}\n\t\tlet tmpPrev = this.hashTableValues[index];\n\t\tlet tmp = this.hashTableValues[index].next;\n\t\tlet found = false;\n\t\twhile (tmp != null && !found) {\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 0);\n\t\t\tif (tmp.key === key) {\n\t\t\t\tfound = true;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.ExplainLabel,\n\t\t\t\t\t'Deleting entry with key: ' + key + '  Entry deleted',\n\t\t\t\t);\n\t\t\t\tif (tmp.next != null) {\n\t\t\t\t\tthis.cmd(act.connect, tmpPrev.graphicID, tmp.next.graphicID);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setNull, tmpPrev.graphicID, 1);\n\t\t\t\t}\n\t\t\t\ttmpPrev.next = tmpPrev.next.next;\n\t\t\t\tthis.cmd(act.delete, tmp.graphicID);\n\t\t\t\tthis.repositionList(index, this.hashTableValues[index]);\n\t\t\t\tthis.size--;\n\t\t\t} else {\n\t\t\t\ttmpPrev = tmp;\n\t\t\t\ttmp = tmp.next;\n\t\t\t}\n\t\t}\n\t\tif (!found) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Deleting entry with key: ' + key + '  Key not in table',\n\t\t\t);\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tfindElement(key) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.ExplainLabel, 'Finding entry with key: ' + key);\n\n\t\tconst index = this.doHash(key);\n\t\tconst compareIndex = this.nextIndex++;\n\t\tlet found = false;\n\t\tlet tmp = this.hashTableValues[index];\n\t\tlet value = null;\n\t\tthis.cmd(act.createLabel, compareIndex, '', 10, 40, 0);\n\t\twhile (tmp != null && !found) {\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 1);\n\t\t\tif (tmp.key === key) {\n\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.key + '==' + key);\n\t\t\t\tfound = true;\n\t\t\t\tvalue = tmp.val;\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setText, compareIndex, tmp.key + '!=' + key);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, tmp.graphicID, 0);\n\t\t\ttmp = tmp.next;\n\t\t}\n\t\tif (found) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Found entry with key: ' + key + '  Value: ' + value,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.ExplainLabel,\n\t\t\t\t'Finding entry with key: ' + key + '  Not Found!',\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.delete, compareIndex);\n\t\tthis.nextIndex--;\n\t\treturn this.commands;\n\t}\n\n\tresize() {\n\t\tthis.commands = [];\n\n\t\tthis.cmd(act.setText, this.ExplainLabel, '');\n\n\t\tconst resizeLabel = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tresizeLabel,\n\t\t\t`(Resize Required): (Size + 1 / length) > Load Factor --> (${this.size} + 1 / ${this.table_size}) > ${this.load_factor}`,\n\t\t\tRESIZE_LABEL_X,\n\t\t\tRESIZE_LABEL_Y,\n\t\t);\n\n\t\tthis.table_size = this.table_size * 2 + 1;\n\n\t\tif (this.table_size * 2 + 1 > MAX_SIZE) {\n\t\t\tthis.load_factor = 0.99;\n\t\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\t\t\tthis.loadButton.setAttribute('style', 'pointer-events: none; color: grey');\n\t\t}\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.oldHashTableVisual = this.hashTableVisual;\n\t\tthis.oldHashTableValues = this.hashTableValues;\n\t\tthis.oldHashTableIndices = this.hashTableIndices;\n\t\tthis.oldIndexXPos = this.indexXPos;\n\t\tthis.oldIndexYPos = this.indexYPos;\n\n\t\tthis.hashTableValues = new Array(this.table_size);\n\t\tthis.hashTableVisual = new Array(this.table_size);\n\t\tthis.hashTableIndices = new Array(this.table_size);\n\t\tthis.indexXPos = new Array(this.table_size);\n\t\tthis.indexYPos = new Array(this.table_size);\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tlet nextID = this.nextIndex++;\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tnextID,\n\t\t\t\t'',\n\t\t\t\tPOINTER_ARRAY_ELEM_WIDTH,\n\t\t\t\tPOINTER_ARRAY_ELEM_HEIGHT,\n\t\t\t\tRESIZE_POINTER_ARRAY_ELEM_START_X,\n\t\t\t\tRESIZE_POINTER_ARRAY_ELEM_START_Y + i * POINTER_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.hashTableVisual[i] = nextID;\n\t\t\tthis.cmd(act.setNull, this.hashTableVisual[i], 1);\n\n\t\t\tnextID = this.nextIndex++;\n\t\t\tthis.hashTableIndices[i] = nextID;\n\t\t\tthis.hashTableValues[i] = null;\n\n\t\t\tthis.indexXPos[i] = RESIZE_POINTER_ARRAY_ELEM_START_X - POINTER_ARRAY_ELEM_WIDTH;\n\t\t\tthis.indexYPos[i] = RESIZE_POINTER_ARRAY_ELEM_START_Y + i * POINTER_ARRAY_ELEM_HEIGHT;\n\n\t\t\tthis.cmd(act.createLabel, nextID, i, this.indexXPos[i], this.indexYPos[i]);\n\t\t\tthis.cmd(act.setForegroundColor, nextID, INDEX_COLOR);\n\t\t}\n\n\t\tfor (let i = 0; i < (this.table_size - 1) / 2; i++) {\n\t\t\tthis.cmd(act.setHighlight, this.oldHashTableVisual[i], 1);\n\t\t\tthis.cmd(act.step);\n\n\t\t\twhile (this.oldHashTableValues[i] != null) {\n\t\t\t\tthis.cmd(act.setHighlight, this.oldHashTableVisual[i], 0);\n\n\t\t\t\tconst node = this.oldHashTableValues[i];\n\t\t\t\tthis.cmd(act.setHighlight, node.graphicID, 1);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.move, node.graphicID, LINKED_ITEM_INITIAL_X, LINKED_ITEM_INITIAL_Y);\n\n\t\t\t\tthis.oldHashTableValues[i] = this.oldHashTableValues[i].next;\n\n\t\t\t\tthis.cmd(act.disconnect, this.oldHashTableVisual[i], node.graphicID);\n\t\t\t\tif (this.oldHashTableValues[i] != null) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\tthis.oldHashTableVisual[i],\n\t\t\t\t\t\tthis.oldHashTableValues[i].graphicID,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.disconnect, node.graphicID, this.oldHashTableValues[i].graphicID);\n\t\t\t\t\tthis.repositionList(i, this.oldHashTableValues[i]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(act.setNull, this.oldHashTableVisual[i], 1);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tconst index = this.doHash(node.key);\n\n\t\t\t\tnode.next = this.hashTableValues[index];\n\t\t\t\tthis.cmd(act.setNull, node.graphicID, 1);\n\t\t\t\tthis.cmd(act.setNull, this.hashTableVisual[index], 0);\n\n\t\t\t\tif (node.next != null) {\n\t\t\t\t\tthis.cmd(act.disconnect, this.hashTableVisual[index], node.next.graphicID);\n\t\t\t\t\tthis.cmd(act.connect, node.graphicID, node.next.graphicID);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.connect, this.hashTableVisual[index], node.graphicID);\n\t\t\t\tthis.hashTableValues[index] = node;\n\t\t\t\tthis.repositionResizeList(index);\n\n\t\t\t\tthis.cmd(act.setHighlight, node.graphicID, 0);\n\t\t\t}\n\t\t\tthis.cmd(act.setHighlight, this.oldHashTableVisual[i], 0);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < (this.table_size - 1) / 2; i++) {\n\t\t\tthis.cmd(act.setNull, this.oldHashTableVisual[i], 1);\n\t\t\tthis.cmd(act.delete, this.oldHashTableVisual[i]);\n\t\t\tthis.cmd(act.delete, this.oldHashTableIndices[i]);\n\t\t}\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tconst xpos = POINTER_ARRAY_ELEM_START_X;\n\t\t\tconst ypos = POINTER_ARRAY_ELEM_START_Y + i * POINTER_ARRAY_ELEM_HEIGHT;\n\n\t\t\tthis.indexXPos[i] = POINTER_ARRAY_ELEM_START_X - POINTER_ARRAY_ELEM_WIDTH;\n\t\t\tthis.indexYPos[i] = POINTER_ARRAY_ELEM_START_Y + i * POINTER_ARRAY_ELEM_HEIGHT;\n\n\t\t\tthis.cmd(act.move, this.hashTableVisual[i], xpos, ypos);\n\t\t\tthis.cmd(act.move, this.hashTableIndices[i], xpos - POINTER_ARRAY_ELEM_WIDTH, ypos);\n\n\t\t\tlet index = 0;\n\t\t\tlet tmp = this.hashTableValues[i];\n\t\t\twhile (tmp != null) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\ttmp.graphicID,\n\t\t\t\t\txpos + LINKED_ITEM_X_DELTA_INIT + LINKED_ITEM_X_DELTA * index,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t\tindex++;\n\t\t\t\ttmp = tmp.next;\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, resizeLabel);\n\t\tthis.cmd(act.step);\n\t}\n\n\tchangeLoadFactor(LF) {\n\t\tthis.commands = [];\n\n\t\tif (this.table_size * 2 + 1 <= MAX_SIZE) {\n\t\t\tthis.load_factor = LF;\n\t\t\tthis.cmd(act.setText, this.loadFactorID, `Load Factor: ${this.load_factor}`);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.loadFactorID,\n\t\t\t\t`Load Factor: ${this.load_factor}\n\t\t\t(Max Array Length)`,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tresetAll() {\n\t\tlet tmp;\n\t\tthis.commands = super.resetAll();\n\n\t\tthis.size = 0;\n\n\t\tfor (let i = 0; i < this.hashTableValues.length; i++) {\n\t\t\ttmp = this.hashTableValues[i];\n\t\t\tif (tmp != null) {\n\t\t\t\twhile (tmp != null) {\n\t\t\t\t\tthis.cmd(act.delete, tmp.graphicID);\n\t\t\t\t\ttmp = tmp.next;\n\t\t\t\t}\n\t\t\t\tthis.hashTableValues[i] = null;\n\t\t\t\tthis.cmd(act.setNull, this.hashTableVisual[i], 1);\n\t\t\t}\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\t// NEED TO OVERRIDE IN PARENT\n\treset() {\n\t\tthis.nextIndex = this.resetIndex;\n\t\tthis.table_size = HASH_TABLE_SIZE;\n\t\tthis.load_factor = DEFAULT_LOAD_FACTOR;\n\t\tthis.size = 0;\n\n\t\tthis.hashTableVisual = new Array(this.table_size);\n\t\tthis.hashTableValues = new Array(this.table_size);\n\t\tthis.hashTableIndices = new Array(HASH_TABLE_SIZE);\n\n\t\tthis.indexXPos = new Array(HASH_TABLE_SIZE);\n\t\tthis.indexYPos = new Array(HASH_TABLE_SIZE);\n\n\t\tfor (let i = 0; i < this.table_size; i++) {\n\t\t\tthis.hashTableValues[i] = null;\n\t\t\tthis.hashTableVisual[i] = this.nextIndex++;\n\t\t\tthis.hashTableIndices[i] = this.nextIndex++;\n\t\t}\n\n\t\tsuper.reset();\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < this.hashTableValues.length; i++) {\n\t\t\tconst node = this.hashTableValues[i];\n\t\t\tif (node != null) {\n\t\t\t\tthis.cmd(act.delete, node.graphicID);\n\t\t\t}\n\t\t\tif (i >= HASH_TABLE_SIZE) {\n\t\t\t\tthis.cmd(act.delete, this.hashTableVisual[i], 1);\n\t\t\t\tthis.cmd(act.delete, this.hashTableIndices[i]);\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setNull, this.hashTableVisual[i], 1);\n\t\t\t}\n\t\t}\n\n\t\tthis.hashTableValues = new Array(HASH_TABLE_SIZE);\n\t\tthis.size = 0;\n\n\t\treturn this.commands;\n\t}\n\n\t/*this.nextIndex = 0;\n this.commands = [];\n this.cmd(act.createLabel, 0, \"\", 20, 50, 0);\n this.animationManager.startNewAnimation(this.commands);\n this.animationManager.skipForward();\n this.animationManager.clearHistory(); */\n\n\tdisableUI() {\n\t\tsuper.disableUI();\n\t}\n\n\tenableUI() {\n\t\tsuper.enableUI();\n\t}\n}\n\nclass LinkedListNode {\n\tconstructor(key, val, id, initialX, initialY) {\n\t\tthis.key = key;\n\t\tthis.val = val;\n\t\tthis.graphicID = id;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\t\tthis.next = null;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINK_COLOR = '#007700';\nconst HIGHLIGHT_CIRCLE_COLOR = '#007700';\nconst FOREGROUND_COLOR = '#007700';\nconst BACKGROUND_COLOR = '#EEFFEE';\nconst PRINT_COLOR = FOREGROUND_COLOR;\n\nconst WIDTH_DELTA = 50;\nconst HEIGHT_DELTA = 50;\nconst STARTING_Y = 50;\n\nconst FIRST_PRINT_POS_X = 50;\nconst PRINT_VERTICAL_GAP = 20;\nconst PRINT_HORIZONTAL_GAP = 50;\n\nexport default class SplayTree extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.startingX = w / 2;\n\t\tthis.first_print_pos_y = h - 2 * PRINT_VERTICAL_GAP;\n\t\tthis.print_max = w - 10;\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.cmd(act.createLabel, 0, '', 20, 10, 0);\n\t\tthis.nextIndex = 1;\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tthis.insertField = addControlToAlgorithmBar('Text', '');\n\t\tthis.insertField.onkeydown = this.returnSubmit(\n\t\t\tthis.insertField,\n\t\t\tthis.insertCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.insertField);\n\n\t\tthis.insertButton = addControlToAlgorithmBar('Button', 'Insert');\n\t\tthis.insertButton.onclick = this.insertCallback.bind(this);\n\t\tthis.controls.push(this.insertButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.deleteField = addControlToAlgorithmBar('Text', '');\n\t\tthis.deleteField.onkeydown = this.returnSubmit(\n\t\t\tthis.deleteField,\n\t\t\tthis.deleteCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.deleteField);\n\n\t\tthis.deleteButton = addControlToAlgorithmBar('Button', 'Delete');\n\t\tthis.deleteButton.onclick = this.deleteCallback.bind(this);\n\t\tthis.controls.push(this.deleteButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.findField = addControlToAlgorithmBar('Text', '');\n\t\tthis.findField.onkeydown = this.returnSubmit(\n\t\t\tthis.findField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.findField);\n\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.printButton = addControlToAlgorithmBar('Button', 'Print');\n\t\tthis.printButton.onclick = this.printCallback.bind(this);\n\t\tthis.controls.push(this.printButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 1;\n\t\tthis.treeRoot = null;\n\t}\n\n\tinsertCallback() {\n\t\tlet insertedValue = this.insertField.value;\n\t\t// Get text value\n\t\tinsertedValue = this.normalizeNumber(insertedValue, 4);\n\t\tif (insertedValue !== '') {\n\t\t\t// set text value\n\t\t\tthis.insertField.value = '';\n\t\t\tthis.implementAction(this.insertElement.bind(this), parseInt(insertedValue));\n\t\t}\n\t}\n\n\tdeleteCallback() {\n\t\tlet deletedValue = this.deleteField.value;\n\t\tif (deletedValue !== '') {\n\t\t\tdeletedValue = this.normalizeNumber(deletedValue, 4);\n\t\t\tthis.deleteField.value = '';\n\t\t\tthis.implementAction(this.deleteElement.bind(this), parseInt(deletedValue));\n\t\t}\n\t}\n\n\t//  TODO:  This top-down version is broken.  Don't use\n\tsplay(value) {\n\t\tif (this.treeRoot == null) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.treeRoot.data === value) {\n\t\t\treturn true;\n\t\t}\n\t\tif (value < this.treeRoot.data) {\n\t\t\tif (this.treeRoot.left == null) {\n\t\t\t\treturn false;\n\t\t\t} else if (this.treeRoot.left.data === value) {\n\t\t\t\tthis.singleRotateRight(this.treeRoot);\n\t\t\t\treturn true;\n\t\t\t} else if (value < this.treeRoot.left.data) {\n\t\t\t\tif (this.treeRoot.left.left == null) {\n\t\t\t\t\tthis.singleRotateRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.zigZigRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.treeRoot.left.right == null) {\n\t\t\t\t\tthis.singleRotateRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.doubleRotateRight(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.treeRoot.right == null) {\n\t\t\t\treturn false;\n\t\t\t} else if (this.treeRoot.right.data === value) {\n\t\t\t\tthis.singleRotateLeft(this.treeRoot);\n\t\t\t\treturn true;\n\t\t\t} else if (value > this.treeRoot.right.data) {\n\t\t\t\tif (this.treeRoot.right.right == null) {\n\t\t\t\t\tthis.singleRotateLeft(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.zigZigLeft(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.treeRoot.right.left == null) {\n\t\t\t\t\tthis.singleRotateLeft(this.treeRoot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.doubleRotateLeft(this.treeRot);\n\t\t\t\t\treturn this.splay(value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprintCallback() {\n\t\tthis.implementAction(this.printTree.bind(this));\n\t}\n\n\tprintTree() {\n\t\tthis.commands = [];\n\n\t\tif (this.treeRoot != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tconst firstLabel = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\tthis.treeRoot.x,\n\t\t\t\tthis.treeRoot.y,\n\t\t\t);\n\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel = this.first_print_pos_y;\n\t\t\tthis.printTreeRec(this.treeRoot);\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tfor (let i = firstLabel; i < this.nextIndex; i++) {\n\t\t\t\tthis.cmd(act.delete, i);\n\t\t\t}\n\t\t\tthis.nextIndex = this.highlightID; /// Reuse objects.  Not necessary.\n\t\t}\n\t\treturn this.commands;\n\t}\n\n\tprintTreeRec(tree) {\n\t\tthis.cmd(act.step);\n\t\tif (tree.left != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\tthis.printTreeRec(tree.left);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst nextLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, nextLabelID, tree.data, tree.x, tree.y);\n\t\tthis.cmd(act.setForegroundColor, nextLabelID, PRINT_COLOR);\n\t\tthis.cmd(act.move, nextLabelID, this.xPosOfNextLabel, this.yPosOfNextLabel);\n\t\tthis.cmd(act.step);\n\n\t\tthis.xPosOfNextLabel += PRINT_HORIZONTAL_GAP;\n\t\tif (this.xPosOfNextLabel > this.print_max) {\n\t\t\tthis.xPosOfNextLabel = FIRST_PRINT_POS_X;\n\t\t\tthis.yPosOfNextLabel += PRINT_VERTICAL_GAP;\n\t\t}\n\t\tif (tree.right != null) {\n\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\tthis.printTreeRec(tree.right);\n\t\t\tthis.cmd(act.move, this.highlightID, tree.x, tree.y);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\treturn;\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.recClear(this.treeRoot);\n\t\tthis.treeRoot = null;\n\t\treturn this.commands;\n\t}\n\n\trecClear(curr) {\n\t\tif (curr != null) {\n\t\t\tthis.cmd(act.delete, curr.graphicID);\n\t\t\tthis.recClear(curr.left);\n\t\t\tthis.recClear(curr.right);\n\t\t}\n\t}\n\n\tfindCallback() {\n\t\tconst findValue = this.normalizeNumber(this.findField.value, 4);\n\t\tthis.findField.value = '';\n\t\tthis.implementAction(this.findElement.bind(this), parseInt(findValue));\n\t}\n\n\tfindElement(findValue) {\n\t\tthis.commands = [];\n\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tconst found = this.doFind(this.treeRoot, findValue);\n\n\t\tif (found) {\n\t\t\tthis.cmd(act.setText, 0, 'Element ' + findValue + ' found.');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, 'Element ' + findValue + ' not found.');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tdoFind(tree, value) {\n\t\tthis.cmd(act.setText, 0, 'Searching for ' + value);\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\t\tif (tree.data === value) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Searching for ' + value + ' : ' + value + ' = ' + value + ' (Element found!)',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setText, 0, 'Splaying found node to root of tree');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\tthis.splayUp(tree);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (tree.data > value) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to left subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.left != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t\treturn this.doFind(tree.left, value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.splayUp(tree);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t'Searching for ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' : ' +\n\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t' > ' +\n\t\t\t\t\t\t\ttree.data +\n\t\t\t\t\t\t\t' (look to right subtree)',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\t\t\t\tif (tree.right != null) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\tthis.highlightID,\n\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\t\t\ttree.x,\n\t\t\t\t\t\t\ttree.y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\t\t\treturn this.doFind(tree.right, value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.splayUp(tree);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\t'Searching for ' + value + ' : < Empty Tree > (Element not found)',\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, 0, 'Searching for ' + value + ' :  (Element not found)');\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tinsertElement(insertedValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, 'Inserting ' + insertedValue);\n\t\tthis.highlightID = this.nextIndex++;\n\n\t\tif (this.treeRoot == null) {\n\t\t\tthis.cmd(act.createCircle, this.nextIndex, insertedValue, this.startingX, STARTING_Y);\n\t\t\tthis.cmd(act.setForegroundColor, this.nextIndex, FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex, BACKGROUND_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.treeRoot = new BSTNode(insertedValue, this.nextIndex, this.startingX, STARTING_Y);\n\t\t\tthis.nextIndex += 1;\n\t\t} else {\n\t\t\tthis.cmd(act.createCircle, this.nextIndex, insertedValue, 100, 100);\n\t\t\tthis.cmd(act.setForegroundColor, this.nextIndex, FOREGROUND_COLOR);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex, BACKGROUND_COLOR);\n\t\t\tthis.cmd(act.step);\n\t\t\tconst insertElem = new BSTNode(insertedValue, this.nextIndex, 100, 100);\n\n\t\t\tthis.nextIndex += 1;\n\t\t\tthis.cmd(act.setHighlight, insertElem.graphicID, 1);\n\t\t\tthis.insert(insertElem, this.treeRoot);\n\t\t\tthis.resizeTree();\n\t\t\tthis.cmd(act.setText, 0, 'Splay inserted element to root of tree');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.splayUp(insertElem);\n\t\t}\n\t\tthis.cmd(act.setText, 0, '');\n\t\treturn this.commands;\n\t}\n\n\tinsert(elem, tree) {\n\t\tlet foundDuplicate = false;\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 1);\n\t\tthis.cmd(act.setHighlight, elem.graphicID, 1);\n\n\t\tif (elem.data < tree.data) {\n\t\t\tthis.cmd(act.setText, 0, elem.data + ' < ' + tree.data + '.  Looking at left subtree');\n\t\t} else if (elem.data > tree.data) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\t0,\n\t\t\t\telem.data + ' >= ' + tree.data + '.  Looking at right subtree',\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, 0, elem.data + ' = ' + tree.data + '. Ignoring duplicate');\n\t\t\tfoundDuplicate = true;\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, tree.graphicID, 0);\n\t\tthis.cmd(act.setHighlight, elem.graphicID, 0);\n\n\t\tif (foundDuplicate) {\n\t\t\tthis.cmd(act.delete, elem.graphicID, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif (elem.data < tree.data) {\n\t\t\tif (tree.left == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Found null tree, inserting element');\n\n\t\t\t\tthis.cmd(act.setHighlight, elem.graphicID, 0);\n\t\t\t\ttree.left = elem;\n\t\t\t\telem.parent = tree;\n\t\t\t\tthis.cmd(act.connect, tree.graphicID, elem.graphicID, LINK_COLOR);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\tthis.highlightID,\n\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\ttree.x,\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, this.highlightID, tree.left.x, tree.left.y);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\tthis.insert(elem, tree.left);\n\t\t\t}\n\t\t} else {\n\t\t\tif (tree.right == null) {\n\t\t\t\tthis.cmd(act.setText, 0, 'Found null tree, inserting element');\n\t\t\t\tthis.cmd(act.setHighlight, elem.graphicID, 0);\n\t\t\t\ttree.right = elem;\n\t\t\t\telem.parent = tree;\n\t\t\t\tthis.cmd(act.connect, tree.graphicID, elem.graphicID, LINK_COLOR);\n\t\t\t\telem.x = tree.x + WIDTH_DELTA / 2;\n\t\t\t\telem.y = tree.y + HEIGHT_DELTA;\n\t\t\t\tthis.cmd(act.move, elem.graphicID, elem.x, elem.y);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\tthis.highlightID,\n\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\t\ttree.x,\n\t\t\t\t\ttree.y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\t\tthis.insert(elem, tree.right);\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteElement(deletedValue) {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, 0, 'Deleting ' + deletedValue);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, 0, '');\n\t\tthis.highlightID = this.nextIndex++;\n\t\tthis.treeDelete(this.treeRoot, deletedValue);\n\t\tthis.cmd(act.setText, 0, '');\n\t\t// Do delete\n\t\treturn this.commands;\n\t}\n\n\ttreeDelete(tree, valueToDelete) {\n\t\tthis.cmd(act.setText, 0, 'Finding ' + valueToDelete + ' and splaying to rooot');\n\t\tthis.cmd(act.step);\n\n\t\tconst inTree = this.doFind(this.treeRoot, valueToDelete);\n\t\tthis.cmd(act.setText, 0, 'Removing root, leaving left and right trees');\n\t\tthis.cmd(act.step);\n\t\tif (inTree) {\n\t\t\tif (this.treeRoot.right == null) {\n\t\t\t\tthis.cmd(act.delete, this.treeRoot.graphicID);\n\t\t\t\tthis.cmd(act.setText, 0, 'No right tree, make left tree the root.');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.treeRoot = this.treeRoot.left;\n\t\t\t\tthis.treeRoot.parent = null;\n\t\t\t\tthis.resizeTree();\n\t\t\t} else if (this.treeRoot.left == null) {\n\t\t\t\tthis.cmd(act.delete, this.treeRoot.graphicID);\n\t\t\t\tthis.cmd(act.setText, 0, 'No left tree, make right tree the root.');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.treeRoot = this.treeRoot.right;\n\t\t\t\tthis.treeRoot.parent = null;\n\t\t\t\tthis.resizeTree();\n\t\t\t} else {\n\t\t\t\tconst right = this.treeRoot.right;\n\t\t\t\tconst left = this.treeRoot.left;\n\t\t\t\tconst oldGraphicID = this.treeRoot.graphicID;\n\t\t\t\tthis.cmd(act.disconnect, this.treeRoot.graphicID, left.graphicID);\n\t\t\t\tthis.cmd(act.disconnect, this.treeRoot.graphicID, right.graphicID);\n\t\t\t\tthis.cmd(act.setAlpha, this.treeRoot.graphicID, 0);\n\t\t\t\tthis.cmd(act.setText, 0, 'Splay largest element in left tree to root');\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tleft.parent = null;\n\t\t\t\tconst largestLeft = this.findMax(left);\n\t\t\t\tthis.splayUp(largestLeft);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\t0,\n\t\t\t\t\t'Left tree now has no right subtree, connect left and right trees',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.connect, largestLeft.graphicID, right.graphicID, LINK_COLOR);\n\t\t\t\tlargestLeft.parent = null;\n\t\t\t\tlargestLeft.right = right;\n\t\t\t\tright.parent = largestLeft;\n\t\t\t\tthis.treeRoot = largestLeft;\n\t\t\t\tthis.cmd(act.delete, oldGraphicID);\n\t\t\t\tthis.resizeTree();\n\t\t\t}\n\t\t}\n\t}\n\n\tsingleRotateRight(tree) {\n\t\tconst B = tree;\n\t\t// const t3 = B.right;\n\t\tconst A = tree.left;\n\t\t// const t1 = A.left;\n\t\tconst t2 = A.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig Right');\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, A.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, B.graphicID, A.graphicID);\n\t\tthis.cmd(act.connect, A.graphicID, B.graphicID, LINK_COLOR);\n\t\tA.parent = B.parent;\n\t\tif (B.parent == null) {\n\t\t\tthis.treeRoot = A;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, B.parent.graphicID, B.graphicID, LINK_COLOR);\n\t\t\tthis.cmd(act.connect, B.parent.graphicID, A.graphicID, LINK_COLOR);\n\t\t\tif (B.isLeftChild()) {\n\t\t\t\tB.parent.left = A;\n\t\t\t} else {\n\t\t\t\tB.parent.right = A;\n\t\t\t}\n\t\t}\n\t\tA.right = B;\n\t\tB.parent = A;\n\t\tB.left = t2;\n\t\tthis.resizeTree();\n\t}\n\n\tzigZigRight(tree) {\n\t\tconst C = tree;\n\t\tconst B = tree.left;\n\t\tconst A = tree.left.left;\n\t\t// const t1 = A.left;\n\t\tconst t2 = A.right;\n\t\tconst t3 = B.right;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig-Zig Right');\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, B.graphicID, 0);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, A.graphicID, 0);\n\n\t\tif (C.parent != null) {\n\t\t\tthis.cmd(act.disconnect, C.parent.graphicID, C.graphicID);\n\t\t\tthis.cmd(act.connect, C.parent.graphicID, A.graphicID, LINK_COLOR);\n\t\t\tif (C.isLeftChild()) {\n\t\t\t\tC.parent.left = A;\n\t\t\t} else {\n\t\t\t\tC.parent.right = A;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.treeRoot = A;\n\t\t}\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, A.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = B;\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t3.graphicID);\n\t\t\tthis.cmd(act.connect, C.graphicID, t3.graphicID, LINK_COLOR);\n\t\t\tt3.parent = C;\n\t\t}\n\t\tthis.cmd(act.disconnect, B.graphicID, A.graphicID);\n\t\tthis.cmd(act.connect, A.graphicID, B.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.disconnect, C.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, C.graphicID, LINK_COLOR);\n\n\t\tA.right = B;\n\t\tA.parent = C.parent;\n\t\tB.parent = A;\n\t\tB.left = t2;\n\t\tB.right = C;\n\t\tC.parent = B;\n\t\tC.left = t3;\n\t\tthis.resizeTree();\n\t}\n\n\tzigZigLeft(tree) {\n\t\tconst A = tree;\n\t\tconst B = tree.right;\n\t\tconst C = tree.right.right;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\tconst t3 = C.left;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig-Zig Left');\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, C.graphicID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 0);\n\t\tthis.cmd(act.setEdgeHighlight, B.graphicID, C.graphicID, 0);\n\n\t\tif (A.parent != null) {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, C.graphicID, LINK_COLOR);\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = C;\n\t\t\t} else {\n\t\t\t\tA.parent.right = C;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.treeRoot = C;\n\t\t}\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = A;\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, C.graphicID, t3.graphicID);\n\t\t\tthis.cmd(act.connect, B.graphicID, t3.graphicID, LINK_COLOR);\n\t\t\tt3.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.disconnect, B.graphicID, C.graphicID);\n\t\tthis.cmd(act.connect, C.graphicID, B.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tC.parent = A.parent;\n\t\tA.right = t2;\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tB.right = t3;\n\t\tC.left = B;\n\t\tB.parent = C;\n\n\t\tthis.resizeTree();\n\t}\n\n\tsingleRotateLeft(tree) {\n\t\tconst A = tree;\n\t\tconst B = tree.right;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\t// const t3 = B.right;\n\n\t\tthis.cmd(act.setText, 0, 'Zig Left');\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t\tt2.parent = A;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tB.parent = A.parent;\n\t\tif (A.parent == null) {\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID, LINK_COLOR);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, B.graphicID, LINK_COLOR);\n\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = B;\n\t\t\t} else {\n\t\t\t\tA.parent.right = B;\n\t\t\t}\n\t\t}\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tA.right = t2;\n\n\t\tthis.resizeTree();\n\t}\n\n\tsplayUp(tree) {\n\t\tif (tree.parent == null) {\n\t\t\treturn;\n\t\t} else if (tree.parent.parent == null) {\n\t\t\tif (tree.isLeftChild()) {\n\t\t\t\tthis.singleRotateRight(tree.parent);\n\t\t\t} else {\n\t\t\t\tthis.singleRotateLeft(tree.parent);\n\t\t\t}\n\t\t} else if (tree.isLeftChild() && !tree.parent.isLeftChild()) {\n\t\t\tthis.doubleRotateLeft(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t} else if (!tree.isLeftChild() && tree.parent.isLeftChild()) {\n\t\t\tthis.doubleRotateRight(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t} else if (tree.isLeftChild()) {\n\t\t\tthis.zigZigRight(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t} else {\n\t\t\tthis.zigZigLeft(tree.parent.parent);\n\t\t\tthis.splayUp(tree);\n\t\t}\n\t}\n\n\tfindMax(tree) {\n\t\tif (tree.right != null) {\n\t\t\tthis.highlightID = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlightID,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR,\n\t\t\t\ttree.x,\n\t\t\t\ttree.y,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (tree.right != null) {\n\t\t\t\tthis.cmd(act.move, this.highlightID, tree.right.x, tree.right.y);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\ttree = tree.right;\n\t\t\t}\n\t\t\tthis.cmd(act.delete, this.highlightID);\n\t\t\treturn tree;\n\t\t} else {\n\t\t\treturn tree;\n\t\t}\n\t}\n\n\tdoubleRotateRight(tree) {\n\t\tthis.cmd(act.setText, 0, 'Zig-Zag Right');\n\t\tconst A = tree.left;\n\t\tconst B = tree.left.right;\n\t\tconst C = tree;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\tconst t3 = B.right;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, A.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, B.graphicID, 1);\n\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tt2.parent = A;\n\t\t\tA.right = t2;\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t3.graphicID);\n\t\t\tt3.parent = C;\n\t\t\tC.left = t2;\n\t\t\tthis.cmd(act.connect, C.graphicID, t3.graphicID, LINK_COLOR);\n\t\t}\n\t\tif (C.parent == null) {\n\t\t\tB.parent = null;\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, C.parent.graphicID, C.graphicID);\n\t\t\tthis.cmd(act.connect, C.parent.graphicID, B.graphicID, LINK_COLOR);\n\t\t\tif (C.isLeftChild()) {\n\t\t\t\tC.parent.left = B;\n\t\t\t} else {\n\t\t\t\tC.parent.right = B;\n\t\t\t}\n\t\t\tB.parent = C.parent;\n\t\t\tC.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, C.graphicID, A.graphicID);\n\t\tthis.cmd(act.disconnect, A.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.connect, B.graphicID, C.graphicID, LINK_COLOR);\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tB.right = C;\n\t\tC.parent = B;\n\t\tA.right = t2;\n\t\tC.left = t3;\n\n\t\tthis.resizeTree();\n\t}\n\n\tdoubleRotateLeft(tree) {\n\t\tthis.cmd(act.setText, 0, 'Zig-Zag Left');\n\t\tconst A = tree;\n\t\tconst B = tree.right.left;\n\t\tconst C = tree.right;\n\t\t// const t1 = A.left;\n\t\tconst t2 = B.left;\n\t\tconst t3 = B.right;\n\t\t// const t4 = C.right;\n\n\t\tthis.cmd(act.setEdgeHighlight, A.graphicID, C.graphicID, 1);\n\t\tthis.cmd(act.setEdgeHighlight, C.graphicID, B.graphicID, 1);\n\n\t\tthis.cmd(act.step);\n\n\t\tif (t2 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t2.graphicID);\n\t\t\tt2.parent = A;\n\t\t\tA.right = t2;\n\t\t\tthis.cmd(act.connect, A.graphicID, t2.graphicID, LINK_COLOR);\n\t\t}\n\t\tif (t3 != null) {\n\t\t\tthis.cmd(act.disconnect, B.graphicID, t3.graphicID);\n\t\t\tt3.parent = C;\n\t\t\tC.left = t2;\n\t\t\tthis.cmd(act.connect, C.graphicID, t3.graphicID, LINK_COLOR);\n\t\t}\n\n\t\tif (A.parent == null) {\n\t\t\tB.parent = null;\n\t\t\tthis.treeRoot = B;\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, A.parent.graphicID, A.graphicID);\n\t\t\tthis.cmd(act.connect, A.parent.graphicID, B.graphicID, LINK_COLOR);\n\t\t\tif (A.isLeftChild()) {\n\t\t\t\tA.parent.left = B;\n\t\t\t} else {\n\t\t\t\tA.parent.right = B;\n\t\t\t}\n\t\t\tB.parent = A.parent;\n\t\t\tA.parent = B;\n\t\t}\n\t\tthis.cmd(act.disconnect, A.graphicID, C.graphicID);\n\t\tthis.cmd(act.disconnect, C.graphicID, B.graphicID);\n\t\tthis.cmd(act.connect, B.graphicID, A.graphicID, LINK_COLOR);\n\t\tthis.cmd(act.connect, B.graphicID, C.graphicID, LINK_COLOR);\n\t\tB.left = A;\n\t\tA.parent = B;\n\t\tB.right = C;\n\t\tC.parent = B;\n\t\tA.right = t2;\n\t\tC.left = t3;\n\n\t\tthis.resizeTree();\n\t}\n\n\tresizeTree() {\n\t\tlet startingPoint = this.startingX;\n\t\tthis.resizeWidths(this.treeRoot);\n\t\tif (this.treeRoot != null) {\n\t\t\tif (this.treeRoot.leftWidth > startingPoint) {\n\t\t\t\tstartingPoint = this.treeRoot.leftWidth;\n\t\t\t} else if (this.treeRoot.rightWidth > startingPoint) {\n\t\t\t\tstartingPoint = Math.max(\n\t\t\t\t\tthis.treeRoot.leftWidth,\n\t\t\t\t\t2 * startingPoint - this.treeRoot.rightWidth,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.setNewPositions(this.treeRoot, startingPoint, STARTING_Y, 0);\n\t\t\tthis.animateNewPositions(this.treeRoot);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tsetNewPositions(tree, xPosition, yPosition, side) {\n\t\tif (tree != null) {\n\t\t\ttree.y = yPosition;\n\t\t\tif (side === -1) {\n\t\t\t\txPosition = xPosition - tree.rightWidth;\n\t\t\t} else if (side === 1) {\n\t\t\t\txPosition = xPosition + tree.leftWidth;\n\t\t\t}\n\t\t\ttree.x = xPosition;\n\t\t\tthis.setNewPositions(tree.left, xPosition, yPosition + HEIGHT_DELTA, -1);\n\t\t\tthis.setNewPositions(tree.right, xPosition, yPosition + HEIGHT_DELTA, 1);\n\t\t}\n\t}\n\n\tanimateNewPositions(tree) {\n\t\tif (tree != null) {\n\t\t\tthis.cmd(act.move, tree.graphicID, tree.x, tree.y);\n\t\t\tthis.animateNewPositions(tree.left);\n\t\t\tthis.animateNewPositions(tree.right);\n\t\t}\n\t}\n\n\tresizeWidths(tree) {\n\t\tif (tree == null) {\n\t\t\treturn 0;\n\t\t}\n\t\ttree.leftWidth = Math.max(this.resizeWidths(tree.left), WIDTH_DELTA / 2);\n\t\ttree.rightWidth = Math.max(this.resizeWidths(tree.right), WIDTH_DELTA / 2);\n\t\treturn tree.leftWidth + tree.rightWidth;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n\nclass BSTNode {\n\tconstructor(val, id, initialX, initialY) {\n\t\tthis.data = val;\n\t\tthis.x = initialX;\n\t\tthis.y = initialY;\n\t\tthis.graphicID = id;\n\t\tthis.left = null;\n\t\tthis.right = null;\n\t\tthis.parent = null;\n\t}\n\n\tisLeftChild() {\n\t\tif (this.parent == null) {\n\t\t\treturn true;\n\t\t}\n\t\treturn this.parent.left === this;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_ARRAY_SIZE = 15;\n\nconst INFO_MSG_X = 20;\nconst INFO_MSG_Y = 150;\nconst CODE_START_X = 25;\nconst CODE_START_Y = 35;\nconst CODE_LINE_HEIGHT = 14;\nconst CODE_HIGHLIGHT_COLOR = '#FF0000';\nconst CODE_STANDARD_COLOR = '#000000';\n\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\nconst ARRAY_INITIAL_X = 400;\nconst ARRAY_INITIAL_Y = 50;\n\nconst HEAP_ARRAY_ELEM_WIDTH = 40;\nconst HEAP_ARRAY_ELEM_HEIGHT = 30;\nconst HEAP_INITIAL_X = 400;\nconst HEAP_INITIAL_Y = 150;\nconst HEAP_LABEL_Y_POS = 180;\n\nconst HEAP_X_POSITIONS = [\n\t0,\n\t450,\n\t250,\n\t650,\n\t150,\n\t350,\n\t550,\n\t750,\n\t100,\n\t200,\n\t300,\n\t400,\n\t500,\n\t600,\n\t700,\n\t800,\n\t75,\n\t125,\n\t175,\n\t225,\n\t275,\n\t325,\n\t375,\n\t425,\n\t475,\n\t525,\n\t575,\n\t625,\n\t675,\n\t725,\n\t775,\n\t825,\n];\n\nconst HEAP_Y_POSITIONS = [\n\t0,\n\t250,\n\t320,\n\t320,\n\t390,\n\t390,\n\t390,\n\t390,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t460,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n\t530,\n];\n\nexport default class HeapSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma seperated list (e.g. \"3,1,2\"). Max 15 elements & no elements > 999',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.sortButton = addControlToAlgorithmBar('Button', 'Sort', horizontalGroup);\n\t\tthis.sortButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.sortButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.heapArrayData = [];\n\t\tthis.heapArrayID = [];\n\t\tthis.heapArrayLabelID = [];\n\t\tthis.heapTreeObj = [];\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.code = [\n\t\t\t['procedure heapSort(array)'],\n\t\t\t['     heap <- create new PriorityQueue(array)'],\n\t\t\t['     for i <- 0, array.length - 1, loop:'],\n\t\t\t['          add ', 'heap.remove()', ' to data[i]'],\n\t\t\t['     end for'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.codeID = Array(this.code.length);\n\t\tlet i, j;\n\t\tfor (i = 0; i < this.code.length; i++) {\n\t\t\tthis.codeID[i] = new Array(this.code[i].length);\n\t\t\tfor (j = 0; j < this.code[i].length; j++) {\n\t\t\t\tthis.codeID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.codeID[i][j],\n\t\t\t\t\tthis.code[i][j],\n\t\t\t\t\tCODE_START_X,\n\t\t\t\t\tCODE_START_Y + i * CODE_LINE_HEIGHT,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[i][j], CODE_STANDARD_COLOR);\n\t\t\t\tif (j > 0) {\n\t\t\t\t\tthis.cmd(act.alignRight, this.codeID[i][j], this.codeID[i][j - 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tsort(list) {\n\t\tthis.commands = [];\n\n\t\tthis.highlight(0, 0);\n\n\t\tthis.arrayData = list\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, MAX_ARRAY_SIZE);\n\t\tconst length = this.arrayData.length;\n\t\tconst displayDataTemp = new Array(length);\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_INITIAL_X;\n\t\t\tconst ypos = ARRAY_INITIAL_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tdisplayDataTemp[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tthis.arrayData = displayDataTemp;\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(0, 0);\n\n\t\t//Create a new heap\n\t\tthis.highlight(1, 0);\n\t\tthis.createHeap(this.arrayData);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Buildheap the new array');\n\t\t//Buildheap the new heap\n\t\tlet nextElem = Math.floor(this.currentHeapSize / 2);\n\t\twhile (nextElem > 0) {\n\t\t\tthis.pushDown(nextElem);\n\t\t\tnextElem = nextElem - 1;\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.unhighlight(1, 0);\n\t\tthis.cmd(act.setText, this.infoLabelID, '');\n\n\t\t//Remove all of the elements from the heap\n\t\twhile (this.currentHeapSize > 0) {\n\t\t\tthis.highlight(2, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(2, 0);\n\t\t\tthis.remove();\n\t\t}\n\n\t\tthis.highlight(4, 0);\n\t\tthis.cmd(act.setText, this.infoLabelID, '');\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < length + 1; i++) {\n\t\t\tthis.cmd(act.delete, this.heapArrayID[i]);\n\t\t\tthis.cmd(act.delete, this.heapArrayLabelID[i]);\n\t\t}\n\t\tthis.unhighlight(4, 0);\n\t\tthis.highlight(5, 0);\n\t\tthis.cmd(act.step);\n\n\t\tthis.unhighlight(5, 0);\n\n\t\treturn this.commands;\n\t}\n\n\tcreateHeap(arrayData) {\n\t\tconst length = arrayData.length + 1;\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Array-backed heap created');\n\n\t\tthis.heapArrayXPositions = new Array(length);\n\t\tthis.heapArrayData = arrayData.slice();\n\t\tthis.heapArrayData.unshift(null);\n\t\tthis.currentHeapSize = length - 1;\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\t//Create heap array\n\t\t\tthis.heapArrayXPositions[i] = HEAP_INITIAL_X + i * HEAP_ARRAY_ELEM_WIDTH;\n\t\t\tthis.heapArrayID[i] = this.nextIndex++;\n\t\t\tthis.heapArrayLabelID[i] = this.nextIndex++;\n\t\t\tthis.heapTreeObj[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.heapArrayID[i],\n\t\t\t\tthis.heapArrayData[i],\n\t\t\t\tHEAP_ARRAY_ELEM_WIDTH,\n\t\t\t\tHEAP_ARRAY_ELEM_HEIGHT,\n\t\t\t\tthis.heapArrayXPositions[i],\n\t\t\t\tHEAP_INITIAL_Y,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.heapArrayLabelID[i],\n\t\t\t\ti,\n\t\t\t\tthis.heapArrayXPositions[i],\n\t\t\t\tHEAP_LABEL_Y_POS,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, this.heapArrayLabelID[i], '#0000FF');\n\n\t\t\t//Create heap tree\n\t\t\tif (i > 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createCircle,\n\t\t\t\t\tthis.heapTreeObj[i],\n\t\t\t\t\tthis.heapArrayData[i],\n\t\t\t\t\tHEAP_X_POSITIONS[i],\n\t\t\t\t\tHEAP_Y_POSITIONS[i],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setText, this.heapArrayID[i], this.heapArrayData[i]);\n\t\t\t\tif (i > 1) {\n\t\t\t\t\tthis.cmd(act.connect, this.heapTreeObj[Math.floor(i / 2)], this.heapTreeObj[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tremove() {\n\t\tconst index = this.arrayData.length - this.currentHeapSize;\n\t\tconst remData = this.heapArrayData[1];\n\t\tconst removedElementID = this.nextIndex; //no ++ since 'removedElementID' is deleted before any other elements are created\n\n\t\tthis.cmd(act.setText, this.infoLabelID, '');\n\n\t\tthis.highlight(3, 0);\n\t\tthis.highlight(3, 1);\n\t\tthis.highlight(3, 2);\n\n\t\tthis.cmd(act.setText, this.heapArrayID[1], '');\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tremovedElementID,\n\t\t\tremData,\n\t\t\tHEAP_X_POSITIONS[1],\n\t\t\tHEAP_Y_POSITIONS[1],\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.setText, this.heapTreeObj[1], '');\n\t\tthis.cmd(act.setText, this.arrayID[index], '');\n\t\tthis.cmd(\n\t\t\tact.move,\n\t\t\tremovedElementID,\n\t\t\tindex * ARRAY_ELEM_WIDTH + ARRAY_INITIAL_X - 5,\n\t\t\tARRAY_INITIAL_Y - 5,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tthis.arrayData[index] = remData;\n\t\tthis.cmd(act.setText, this.arrayID[index], remData);\n\t\tthis.cmd(act.delete, removedElementID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.heapArrayData[1] = '';\n\n\t\tthis.unhighlight(3, 0);\n\t\tthis.unhighlight(3, 2);\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Downheap to maintain order');\n\n\t\tif (this.currentHeapSize > 1) {\n\t\t\tthis.cmd(act.setHighlight, this.heapArrayID[1], 1);\n\t\t\tthis.cmd(act.setHighlight, this.heapArrayID[this.currentHeapSize], 1);\n\t\t\tthis.cmd(act.setHighlight, this.heapTreeObj[1], 1);\n\t\t\tthis.cmd(act.setHighlight, this.heapTreeObj[this.currentHeapSize], 1);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.cmd(act.setHighlight, this.heapArrayID[1], 0);\n\t\t\tthis.cmd(act.setHighlight, this.heapArrayID[this.currentHeapSize], 0);\n\t\t\tthis.cmd(act.setHighlight, this.heapTreeObj[1], 0);\n\t\t\tthis.cmd(act.setHighlight, this.heapTreeObj[this.currentHeapSize], 0);\n\t\t\tthis.swap(1, this.currentHeapSize);\n\n\t\t\tthis.cmd(act.delete, this.heapTreeObj[this.currentHeapSize]);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.currentHeapSize--;\n\t\t\tif (this.currentHeapSize > 0) {\n\t\t\t\tthis.pushDown(1);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.heapArrayID[1], '');\n\t\t\tthis.cmd(act.delete, this.heapTreeObj[this.currentHeapSize]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.currentHeapSize--;\n\t\t}\n\t\tthis.unhighlight(3, 1);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tpushDown(index) {\n\t\tlet childIndex; // Used to keep track of smallest (in MinHeap) or largest (in MaxHeap) child\n\n\t\twhile (index * 2 <= this.currentHeapSize) {\n\t\t\tchildIndex = 2 * index;\n\n\t\t\tif (index * 2 + 1 <= this.currentHeapSize) {\n\t\t\t\tthis.setIndexHighlight(2 * index, 1);\n\t\t\t\tthis.setIndexHighlight(2 * index + 1, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.setIndexHighlight(2 * index, 0);\n\t\t\t\tthis.setIndexHighlight(2 * index + 1, 0);\n\t\t\t\tif (this.downheapCheckRightChild(index)) {\n\t\t\t\t\tchildIndex = 2 * index + 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setIndexHighlight(index, 1);\n\t\t\tthis.setIndexHighlight(childIndex, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.setIndexHighlight(index, 0);\n\t\t\tthis.setIndexHighlight(childIndex, 0);\n\n\t\t\tif (this.downheapCompare(childIndex, index)) {\n\t\t\t\tthis.swap(childIndex, index);\n\t\t\t\tindex = childIndex;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tdownheapCheckRightChild(index) {\n\t\t// Checks if the right child is smaller than left child\n\t\treturn this.compareWithLetters(\n\t\t\tthis.heapArrayData[2 * index + 1],\n\t\t\tthis.heapArrayData[2 * index],\n\t\t);\n\t}\n\n\tdownheapCompare(childIndex, index) {\n\t\t// Checks if smallest child is smaller than parent\n\t\treturn this.compareWithLetters(this.heapArrayData[childIndex], this.heapArrayData[index]);\n\t}\n\n\tcompareWithLetters(num1, num2) {\n\t\treturn parseInt(num1) < parseInt(num2);\n\t}\n\n\tswap(index1, index2) {\n\t\tconst swapLabel1 = this.nextIndex++;\n\t\tconst swapLabel2 = this.nextIndex++;\n\t\tconst swapLabel3 = this.nextIndex++;\n\t\tconst swapLabel4 = this.nextIndex++;\n\t\tthis.cmd(act.setText, this.heapArrayID[index1], '');\n\t\tthis.cmd(act.setText, this.heapArrayID[index2], '');\n\t\tthis.cmd(act.setText, this.heapTreeObj[index1], '');\n\t\tthis.cmd(act.setText, this.heapTreeObj[index2], '');\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tswapLabel1,\n\t\t\tthis.heapArrayData[index1],\n\t\t\tthis.heapArrayXPositions[index1],\n\t\t\tHEAP_INITIAL_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tswapLabel2,\n\t\t\tthis.heapArrayData[index2],\n\t\t\tthis.heapArrayXPositions[index2],\n\t\t\tHEAP_INITIAL_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tswapLabel3,\n\t\t\tthis.heapArrayData[index1],\n\t\t\tHEAP_X_POSITIONS[index1],\n\t\t\tHEAP_Y_POSITIONS[index1],\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tswapLabel4,\n\t\t\tthis.heapArrayData[index2],\n\t\t\tHEAP_X_POSITIONS[index2],\n\t\t\tHEAP_Y_POSITIONS[index2],\n\t\t);\n\t\tthis.cmd(act.move, swapLabel1, this.heapArrayXPositions[index2], HEAP_INITIAL_Y);\n\t\tthis.cmd(act.move, swapLabel2, this.heapArrayXPositions[index1], HEAP_INITIAL_Y);\n\t\tthis.cmd(act.move, swapLabel3, HEAP_X_POSITIONS[index2], HEAP_Y_POSITIONS[index2]);\n\t\tthis.cmd(act.move, swapLabel4, HEAP_X_POSITIONS[index1], HEAP_Y_POSITIONS[index1]);\n\t\tconst tmp = this.heapArrayData[index1];\n\t\tthis.heapArrayData[index1] = this.heapArrayData[index2];\n\t\tthis.heapArrayData[index2] = tmp;\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.heapArrayID[index1], this.heapArrayData[index1]);\n\t\tthis.cmd(act.setText, this.heapArrayID[index2], this.heapArrayData[index2]);\n\t\tthis.cmd(act.setText, this.heapTreeObj[index1], this.heapArrayData[index1]);\n\t\tthis.cmd(act.setText, this.heapTreeObj[index2], this.heapArrayData[index2]);\n\t\tthis.cmd(act.delete, swapLabel1);\n\t\tthis.cmd(act.delete, swapLabel2);\n\t\tthis.cmd(act.delete, swapLabel3);\n\t\tthis.cmd(act.delete, swapLabel4);\n\t\tthis.nextIndex -= 4;\n\t}\n\n\tsetIndexHighlight(index, highlightVal) {\n\t\tthis.cmd(act.setHighlight, this.heapTreeObj[index], highlightVal);\n\t\tthis.cmd(act.setHighlight, this.heapArrayID[index], highlightVal);\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.heapArrayData = [];\n\t\tthis.heapArrayID = [];\n\t\tthis.heapArrayLabelID = [];\n\n\t\treturn this.commands;\n\t}\n\n\treset() {\n\t\tthis.currentHeapSize = 0;\n\t}\n\n\tsortCallback() {\n\t\tconst list = this.listField.value.split(',').filter(x => x !== '');\n\t\tif (\n\t\t\tthis.listField.value !== '' &&\n\t\t\tlist.length <= MAX_ARRAY_SIZE &&\n\t\t\tlist.map(Number).filter(x => x > 999 || Number.isNaN(x)).length <= 0\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\thighlight(ind1, ind2) {\n\t\tthis.cmd(act.setForegroundColor, this.codeID[ind1][ind2], CODE_HIGHLIGHT_COLOR);\n\t}\n\n\tunhighlight(ind1, ind2) {\n\t\tthis.cmd(act.setForegroundColor, this.codeID[ind1][ind2], CODE_STANDARD_COLOR);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","import * as algos from './algo';\n\n// After adding the export in algos/index.js, add new algorithms in the following format:\n// AlgorithmName: ['Menu Display Name', algos.ClassName, 'Verbose Display Name (optional)']\nexport const algoMap = {\n\tArrayList: ['ArrayList', algos.ArrayList],\n\tLinkedList: ['Singly LinkedList', algos.LinkedList],\n\tDoublyLinkedList: ['Doubly LinkedList', algos.DoublyLinkedList],\n\tCircularlyLinkedList: ['Circularly LinkedList', algos.CircularlyLinkedList],\n\tStackArray: ['Stack (Array)', algos.StackArray],\n\tStackLL: ['Stack (LinkedList)', algos.StackLL],\n\tQueueArray: ['Queue (Array)', algos.QueueArray],\n\tQueueLL: ['Queue (LinkedList)', algos.QueueLL],\n\tDequeArray: ['Deque (Array)', algos.DequeArray],\n\tDequeLL: ['Deque (LinkedList)', algos.DequeLL],\n\tBST: ['Binary Search Tree', algos.BST],\n\tHeap: ['Heaps / PQs', algos.Heap],\n\tSkipList: ['SkipList', algos.SkipList],\n\tClosedHash: ['HashMap (Probing)', algos.ClosedHash],\n\tOpenHash: ['HashMap (Chaining)', algos.OpenHash],\n\tSplayTree: ['SplayTree', algos.SplayTree],\n\tAVL: ['AVL', algos.AVL],\n\tBTree: ['2-4 Tree', algos.BTree],\n\tBubbleSort: ['Bubble Sort', algos.BubbleSort],\n\tCocktailSort: ['Cocktail Shaker Sort', algos.CocktailSort],\n\tInsertionSort: ['Insertion Sort', algos.InsertionSort],\n\tSelectionSort: ['Selection Sort', algos.SelectionSort],\n\tQuickSort: ['QuickSort', algos.QuickSort],\n\tQuickSelect: ['QuickSelect / k Select', algos.QuickSelect],\n\tMergeSort: ['MergeSort', algos.MergeSort],\n\tLSDRadix: ['LSD Radix Sort', algos.LSDRadix],\n\tHeapSort: ['HeapSort', algos.HeapSort],\n\tBruteForce: ['Brute Force', algos.BruteForce],\n\tBoyerMoore: ['Boyer-Moore', algos.BoyerMoore],\n\tKMP: ['KMP', algos.KMP],\n\tRabinKarp: ['Rabin-Karp', algos.RabinKarp],\n\tBFS: ['Breadth-First Search', algos.BFS],\n\tDFS: ['Depth-First Search', algos.DFS],\n\tDijkstra: [\"Dijkstra's\", algos.Dijkstras],\n\tPrim: [\"Prim's\", algos.Prims],\n\tKruskal: [\"Kruskal's\", algos.Kruskals],\n\tLCS: ['LCS', algos.LCS, 'Longest Common Subsequence'],\n\tFloyd: ['Floyd-Warshall', algos.Floyd],\n};\n\nexport const algoList = [\n\t'Lists',\n\t'ArrayList',\n\t'LinkedList',\n\t'DoublyLinkedList',\n\t'CircularlyLinkedList',\n\t'Stacks, Queues and Deques',\n\t'StackArray',\n\t'StackLL',\n\t'QueueArray',\n\t'QueueLL',\n\t'DequeArray',\n\t'DequeLL',\n\t'Trees and SkipList',\n\t'BST',\n\t'Heap',\n\t'AVL',\n\t'BTree',\n\t'SplayTree',\n\t'SkipList',\n\t'HashMaps',\n\t'ClosedHash',\n\t'OpenHash',\n\t'Sorting and QuickSelect',\n\t'BubbleSort',\n\t'CocktailSort',\n\t'InsertionSort',\n\t'SelectionSort',\n\t'QuickSort',\n\t'QuickSelect',\n\t'MergeSort',\n\t'LSDRadix',\n\t'HeapSort',\n\t'String Searching',\n\t'BruteForce',\n\t'BoyerMoore',\n\t'KMP',\n\t'RabinKarp',\n\t'Graph Algorithms',\n\t'BFS',\n\t'DFS',\n\t'Dijkstra',\n\t'Prim',\n\t'Kruskal',\n\t'Dynamic Programming',\n\t'LCS',\n\t'Floyd',\n];\n","/* eslint-disable lines-between-class-members */\n// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 150;\nconst RESIZE_ARRAY_START_X = 100;\nconst RESIZE_ARRAY_START_Y = 280;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst ARRAY_ELEMS_PER_LINE = 14;\nconst ARRAY_LINE_SPACING = 130;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\nconst PUSH_RESIZE_LABEL_X = 60;\nconst PUSH_RESIZE_LABEL_Y = 60;\n\nconst SIZE = 7;\nconst MAX_SIZE = 30;\n\nexport default class ArrayList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.arrayData = new Array(SIZE);\n\n\t\tthis.size = 0;\n\t\tthis.length = SIZE;\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], '#0000FF');\n\t\t}\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.size = 0;\n\t\tthis.length = SIZE;\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tthis.arrayData = new Array(SIZE);\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.highlight1ID = this.nextIndex++;\n\t}\n\n\taddIndexCallback() {\n\t\tif (\n\t\t\tthis.addValueField.value !== '' &&\n\t\t\tthis.addIndexField.value !== '' &&\n\t\t\t!(this.length === this.size && this.length * 2 > MAX_SIZE)\n\t\t) {\n\t\t\tconst addVal = this.addValueField.value;\n\t\t\tconst index = this.addIndexField.value;\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tif (this.size === this.length) {\n\t\t\t\t\tthis.implementAction(this.resize.bind(this), addVal, index);\n\t\t\t\t} else {\n\t\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (\n\t\t\tthis.addValueField.value !== '' &&\n\t\t\t!(this.length === this.size && this.length * 2 > MAX_SIZE)\n\t\t) {\n\t\t\tconst addVal = this.addValueField.value;\n\t\t\tthis.addValueField.value = '';\n\t\t\tif (this.size === this.length) {\n\t\t\t\tthis.implementAction(this.resize.bind(this), addVal, 0);\n\t\t\t} else {\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t\t}\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (\n\t\t\tthis.addValueField.value !== '' &&\n\t\t\t!(this.length === this.size && this.length * 2 > MAX_SIZE)\n\t\t) {\n\t\t\tconst addVal = this.addValueField.value;\n\t\t\tthis.addValueField.value = '';\n\t\t\tif (this.size === this.length) {\n\t\t\t\tthis.implementAction(this.resize.bind(this), addVal, this.size);\n\t\t\t} else {\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tthis.clearAll();\n\t\treturn this.commands;\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = this.size; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\n\t\tthis.arrayMoveID = new Array(this.size);\n\n\t\tif (index !== this.size) {\n\t\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\t\tconst ypos =\n\t\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\t\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i], this.arrayData[i + 1], xpos, ypos);\n\t\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos + ARRAY_ELEM_WIDTH, ypos);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\n\t\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\t\tthis.cmd(act.setText, this.arrayID[i + 1], this.arrayData[i + 1]);\n\t\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\t'#0000FF',\n\t\t\tPUSH_ELEMENT_X,\n\t\t\tPUSH_ELEMENT_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (parseInt(index) % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(parseInt(index) / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos);\n\t\tthis.cmd(act.move, labPushValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\tif (index != null) {\n\t\t\tthis.nextIndex = this.nextIndex - (this.size - index) - 2;\n\t\t} else {\n\t\t\tthis.nextIndex = this.nextIndex - 2;\n\t\t}\n\n\t\tthis.size = this.size + 1;\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tconst xpos = (index % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos = Math.floor(index / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, '#0000FF', xpos, ypos);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[index], '');\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos - 100);\n\t\tthis.cmd(act.move, labPopValID, xpos, ypos - 100);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t}\n\t\tthis.arrayData[this.size] = null;\n\n\t\tthis.arrayMoveID = new Array(this.size);\n\n\t\tfor (let i = index + 1; i < this.size; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i], this.arrayData[i - 1], xpos, ypos);\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos - ARRAY_ELEM_WIDTH, ypos);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = index + 1; i < this.size; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i - 1], this.arrayData[i - 1]);\n\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tif (index != null) {\n\t\t\tthis.nextIndex = this.nextIndex - (this.size - index);\n\t\t} else {\n\t\t\tthis.nextIndex = this.nextIndex - 2;\n\t\t}\n\n\t\tthis.size = this.size - 1;\n\n\t\treturn this.commands;\n\t}\n\n\tresize(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tconst labPushResizeID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabPushResizeID,\n\t\t\t'(Resize Required)',\n\t\t\tPUSH_RESIZE_LABEL_X,\n\t\t\tPUSH_RESIZE_LABEL_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tthis.arrayIDNew = new Array(this.size * 2);\n\t\tthis.arrayLabelIDNew = new Array(this.size * 2);\n\t\tthis.arrayDataNew = new Array(this.size * 2);\n\n\t\tthis.length = this.length * 2;\n\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tthis.arrayIDNew[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelIDNew[i] = this.nextIndex++;\n\t\t\tif (i < index) {\n\t\t\t\tthis.arrayDataNew[i] = this.arrayData[i];\n\t\t\t} else if (i > index && i <= this.size) {\n\t\t\t\tthis.arrayDataNew[i] = this.arrayData[i - 1];\n\t\t\t}\n\t\t}\n\n\t\tthis.arrayDataNew[index] = elemToAdd;\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\t//Create new array\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayIDNew[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelIDNew[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelIDNew[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.arrayMoveID = new Array(this.size);\n\n\t\t//Move elements before index from old array\n\t\tfor (let i = 0; i < index; i++) {\n\t\t\tconst xposinit = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst yposinit =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\n\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i], this.arrayData[i], xposinit, yposinit);\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos, ypos);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//delete movement id objects and set text\n\t\tfor (let i = 0; i < index; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\tthis.cmd(act.setText, this.arrayIDNew[i], this.arrayData[i]);\n\t\t}\n\n\t\t//Add elemToAdd at the index\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\t'#0000FF',\n\t\t\tPUSH_ELEMENT_X,\n\t\t\tPUSH_ELEMENT_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos =\n\t\t\t(parseInt(index) % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(parseInt(index) / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING +\n\t\t\tRESIZE_ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos);\n\t\tthis.cmd(act.move, labPushValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayIDNew[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.step);\n\n\t\t//Move elements after index from old array\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tconst xposinit = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst yposinit =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tconst xpos = (i % (ARRAY_ELEMS_PER_LINE - 1)) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / (ARRAY_ELEMS_PER_LINE - 1)) * ARRAY_LINE_SPACING +\n\t\t\t\tRESIZE_ARRAY_START_Y;\n\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\n\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i], this.arrayData[i], xposinit, yposinit);\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos + ARRAY_ELEM_WIDTH, ypos);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//delete movement id objects\n\t\tfor (let i = index; i <= this.size; i++) {\n\t\t\tif (i < this.size) {\n\t\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\t}\n\t\t\tthis.cmd(act.setText, this.arrayIDNew[i], this.arrayData[i - 1]);\n\t\t}\n\n\t\tthis.cmd(act.setText, this.arrayIDNew[index], elemToAdd);\n\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.delete, labPushResizeID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t\tthis.cmd(act.delete, this.arrayLabelID[i]);\n\t\t}\n\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tthis.cmd(act.move, this.arrayIDNew[i], xpos, ypos);\n\t\t\tthis.cmd(act.move, this.arrayLabelIDNew[i], xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t}\n\n\t\tthis.arrayID = this.arrayIDNew;\n\t\tthis.arrayLabelID = this.arrayLabelIDNew;\n\t\tthis.arrayData = this.arrayDataNew;\n\n\t\tif (index != null) {\n\t\t\tthis.nextIndex = this.nextIndex - this.size;\n\t\t}\n\n\t\tthis.size = this.size + 1;\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t\tthis.arrayData[i] = null;\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst TOP_POS_X = 180;\nconst TOP_POS_Y = 100;\nconst TOP_LABEL_X = 130;\nconst TOP_LABEL_Y = 100;\n\nconst TOP_ELEM_WIDTH = 30;\nconst TOP_ELEM_HEIGHT = 30;\n\nconst SIZE = 32;\n\nexport default class LinkedList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.topID = this.nextIndex++;\n\t\tthis.topLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\t// this.top = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.cmd(act.createLabel, this.topLabelID, 'Head', TOP_LABEL_X, TOP_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.topID,\n\t\t\t'',\n\t\t\tTOP_ELEM_WIDTH,\n\t\t\tTOP_ELEM_HEIGHT,\n\t\t\tTOP_POS_X,\n\t\t\tTOP_POS_Y,\n\t\t);\n\t\tthis.cmd(act.setNull, this.topID, 1);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddIndexCallback() {\n\t\tif (this.addValueField.value !== '' && this.addIndexField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tconst index = parseInt(this.addIndexField.value);\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// getCallback()\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\ttraverse(index) {\n\t\tfor (let i = 0; i <= index; i++) {\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, this.linkedListElemID[i], 1);\n\t\t\tif (i > 0) {\n\t\t\t\tthis.cmd(act.setHighlight, this.linkedListElemID[i - 1], 0);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.traverse(index - 1);\n\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tthis.linkedListElemID[index],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t\t0,\n\t\t\t1,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (index === this.size) {\n\t\t\t// adding to back , dont need to do anything to head\n\t\t\tthis.cmd(act.setNull, this.linkedListElemID[index], 1);\n\t\t}\n\n\t\tif (this.size !== 0) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(act.disconnect, this.topID, this.linkedListElemID[index + 1]);\n\t\t\t\tthis.cmd(act.connect, this.topID, this.linkedListElemID[index]);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t} else if (index === this.size) {\n\t\t\t\tthis.cmd(act.setNull, this.linkedListElemID[index - 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(act.connect, this.topID, this.linkedListElemID[0]);\n\t\t}\n\n\t\tthis.cmd(act.setHighlight, this.linkedListElemID[index - 1], 0);\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.resetNodePositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.traverse(index - 1);\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(act.disconnect, this.topID, this.linkedListElemID[index]);\n\t\t\t\tthis.cmd(act.connect, this.topID, this.linkedListElemID[index + 1]);\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setNull, this.linkedListElemID[index - 1], 1);\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[index]);\n\n\t\tthis.cmd(act.setHighlight, this.linkedListElemID[index - 1], 0);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 100;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 150;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst HEAD_POS_X = 180;\nconst HEAD_POS_Y = 100;\n\nconst TAIL_POS_X = 180;\n\nconst POINTER_LABEL_X = 130;\nconst HEAD_LABEL_Y = 100;\n\nconst POINTER_ELEM_WIDTH = 30;\nconst POINTER_ELEM_HEIGHT = 30;\n\nconst SIZE = 32;\n\nexport default class DoublyLinkedList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.tail_pos_y = h - LINKED_LIST_ELEM_HEIGHT;\n\t\tthis.tail_label_y = this.tail_pos_y;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.headID = this.nextIndex++;\n\t\tthis.headLabelID = this.nextIndex++;\n\n\t\tthis.tailID = this.nextIndex++;\n\t\tthis.tailLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.headLabelID, 'Head', POINTER_LABEL_X, HEAD_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.headID,\n\t\t\t'',\n\t\t\tPOINTER_ELEM_WIDTH,\n\t\t\tPOINTER_ELEM_HEIGHT,\n\t\t\tHEAD_POS_X,\n\t\t\tHEAD_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.tailLabelID, 'Tail', POINTER_LABEL_X, this.tail_label_y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.tailID,\n\t\t\t'',\n\t\t\tPOINTER_ELEM_WIDTH,\n\t\t\tPOINTER_ELEM_HEIGHT,\n\t\t\tTAIL_POS_X,\n\t\t\tthis.tail_pos_y,\n\t\t);\n\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\tthis.cmd(act.setNull, this.tailID, 1);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddIndexCallback() {\n\t\tif (this.addValueField.value !== '' && this.addIndexField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tconst index = parseInt(this.addIndexField.value);\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (this.addValueField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// DoublyLinkedList.prototype.getCallback = function(event)\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\ttraverse(index) {\n\t\tif (index < Math.floor(this.size / 2)) {\n\t\t\tfor (let i = 0; i <= index; i++) {\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, this.linkedListElemID[i], 1);\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tthis.cmd(act.setHighlight, this.linkedListElemID[i - 1], 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t} else {\n\t\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, this.linkedListElemID[i], 1);\n\t\t\t\tif (i < this.size) {\n\t\t\t\t\tthis.cmd(act.setHighlight, this.linkedListElemID[i + 1], 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\t// iterate to the correct node if it is an index != 0 or size\n\t\tconst indexToTraverseTo = index < Math.floor(this.size / 2) ? index - 1 : index;\n\t\tif (index > 0 && index < this.size) {\n\t\t\tthis.traverse(indexToTraverseTo);\n\t\t}\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createDoublyLinkedListNode,\n\t\t\tthis.linkedListElemID[index],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (index === 0) {\n\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index], 1);\n\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[index]);\n\t\t}\n\n\t\tif (index === this.size) {\n\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index], 1);\n\t\t\tthis.cmd(act.connect, this.tailID, this.linkedListElemID[index]);\n\t\t}\n\n\t\tif (this.size !== 0) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.disconnect, this.headID, this.linkedListElemID[index + 1]);\n\t\t\t} else if (index === this.size) {\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[index - 1]);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(\n\t\t\tact.setHighlight,\n\t\t\tthis.linkedListElemID[\n\t\t\t\tindex < Math.floor(this.size / 2) ? indexToTraverseTo : indexToTraverseTo + 1\n\t\t\t],\n\t\t\t0,\n\t\t);\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.resetNodePositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tif (index > 0 && index < this.size - 1) {\n\t\t\tthis.traverse(index);\n\t\t}\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 1);\n\t\t\t\tthis.cmd(act.disconnect, this.headID, this.linkedListElemID[index]);\n\t\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[index + 1]);\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 1);\n\t\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[index]);\n\t\t\t\tthis.cmd(act.connect, this.tailID, this.linkedListElemID[index - 1]);\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, this.headID, this.linkedListElemID[index]);\n\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[index]);\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[index]);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\tthis.cmd(act.setNull, this.tailID, 1);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 9;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst HEAD_POS_X = 180;\nconst HEAD_POS_Y = 100;\n\nconst POINTER_LABEL_X = 130;\nconst HEAD_LABEL_Y = 100;\n\nconst POINTER_ELEM_WIDTH = 30;\nconst POINTER_ELEM_HEIGHT = 30;\n\nconst SIZE = 9;\n\nexport default class CircularlyLinkedList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst addVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst addTopHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\t\tconst addBottomHorizontalGroup = addGroupToAlgorithmBar(true, addVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Add', addTopHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('at index', addTopHorizontalGroup);\n\n\t\t// Add's index text field\n\t\tthis.addIndexField = addControlToAlgorithmBar('Text', '', addTopHorizontalGroup);\n\t\tthis.addIndexField.onkeydown = this.returnSubmit(\n\t\t\tthis.addIndexField,\n\t\t\t() => this.addIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addIndexField);\n\n\t\t// Add to front button\n\t\tthis.addFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Front',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addFrontButton.onclick = this.addFrontCallback.bind(this);\n\t\tthis.controls.push(this.addFrontButton);\n\n\t\t// Add to back button\n\t\tthis.addBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add to Back',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addBackButton.onclick = () => this.addBackCallback();\n\t\tthis.controls.push(this.addBackButton);\n\n\t\taddLabelToAlgorithmBar('or', addBottomHorizontalGroup);\n\n\t\t// Add at index button\n\t\tthis.addIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add at Index',\n\t\t\taddBottomHorizontalGroup,\n\t\t);\n\t\tthis.addIndexButton.onclick = this.addIndexCallback.bind(this);\n\t\tthis.controls.push(this.addIndexButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst removeVerticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst removeTopHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\t\tconst removeBottomHorizontalGroup = addGroupToAlgorithmBar(true, removeVerticalGroup);\n\n\t\taddLabelToAlgorithmBar('Index', removeTopHorizontalGroup);\n\n\t\t// Remove's index text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '', removeTopHorizontalGroup);\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\t() => this.removeIndexCallback(),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove from index button\n\t\tthis.removeIndexButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Index',\n\t\t\tremoveTopHorizontalGroup,\n\t\t);\n\t\tthis.removeIndexButton.onclick = () => this.removeIndexCallback();\n\t\tthis.controls.push(this.removeIndexButton);\n\n\t\taddLabelToAlgorithmBar('or', removeBottomHorizontalGroup);\n\n\t\t// Remove from front button\n\t\tthis.removeFrontButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Front',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeFrontButton.onclick = () => this.removeFrontCallback();\n\t\tthis.controls.push(this.removeFrontButton);\n\n\t\t// Remove from back button\n\t\tthis.removeBackButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Remove from Back',\n\t\t\tremoveBottomHorizontalGroup,\n\t\t);\n\t\tthis.removeBackButton.onclick = () => this.removeBackCallback();\n\t\tthis.controls.push(this.removeBackButton);\n\n\t\t// Get's index text field\n\t\t// this.getField = addControlToAlgorithmBar(\"Text\", \"\");\n\t\t// this.getField.onkeydown = this.returnSubmit(this.getField, () => this.getCallback(), 4, true);\n\t\t// this.controls.push(this.getField);\n\n\t\t// Get button\n\t\t// this.getButton = addControlToAlgorithmBar(\"Button\", \"Get\");\n\t\t// this.getButton.onclick = () => this.getCallback();\n\t\t// this.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = () => this.clearCallback();\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.headID = this.nextIndex++;\n\t\tthis.headLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.headLabelID, 'Head', POINTER_LABEL_X, HEAD_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.headID,\n\t\t\t'',\n\t\t\tPOINTER_ELEM_WIDTH,\n\t\t\tPOINTER_ELEM_HEIGHT,\n\t\t\tHEAD_POS_X,\n\t\t\tHEAD_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddIndexCallback() {\n\t\tif (\n\t\t\tthis.addValueField.value !== '' &&\n\t\t\tthis.addIndexField.value !== '' &&\n\t\t\tthis.size < SIZE\n\t\t) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tconst index = parseInt(this.addIndexField.value);\n\t\t\tif (index >= 0 && index <= this.size) {\n\t\t\t\tthis.addValueField.value = '';\n\t\t\t\tthis.addIndexField.value = '';\n\t\t\t\tthis.implementAction(this.add.bind(this), addVal, index);\n\t\t\t}\n\t\t}\n\t}\n\n\taddFrontCallback() {\n\t\tif (this.addValueField.value !== '' && this.size < SIZE) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddBackCallback() {\n\t\tif (this.addValueField.value !== '' && this.size < SIZE) {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveIndexCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst index = this.removeField.value;\n\t\t\tif (index >= 0 && index < this.size) {\n\t\t\t\tthis.removeField.value = '';\n\t\t\t\tthis.implementAction(this.remove.bind(this), index);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFrontCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveBackCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// CircularlySinglyLinkedList.prototype.getCallback = function()\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\ttraverse(index) {\n\t\tfor (let i = 0; i <= index; i++) {\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setHighlight, this.linkedListElemID[i], 1);\n\t\t\tif (i > 0) {\n\t\t\t\tthis.cmd(act.setHighlight, this.linkedListElemID[i - 1], 0);\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tif (index < this.size) {\n\t\t\tthis.traverse(index - 1);\n\t\t}\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\t// Order of data should behave as normal\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\n\t\t// Adding to the front or back using O(1) trick, so new node will be added to index 1\n\t\tif (this.size !== 0 && (index === 0 || index === this.size)) {\n\t\t\t// Move over all node IDs but the first\n\t\t\tfor (let i = this.size - 1; i >= 1; i--) {\n\t\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t\t}\n\t\t\t// Place new node's ID at index 1\n\t\t\tthis.linkedListElemID[1] = this.nextIndex++;\n\t\t}\n\t\t// Adding first node or to the middle, so new node will be placed normally\n\t\telse {\n\t\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t\t}\n\t\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\t\t}\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tif (this.size !== 0 && (index === 0 || index === this.size)) {\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircularlyLinkedListNode,\n\t\t\t\tthis.linkedListElemID[1],\n\t\t\t\t'',\n\t\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\t\tLINKED_LIST_INSERT_X,\n\t\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.createCircularlyLinkedListNode,\n\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t'',\n\t\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\t\tLINKED_LIST_INSERT_X,\n\t\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size === 0) {\n\t\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.cmd(act.setText, this.linkedListElemID[0], elemToAdd);\n\t\t\tthis.cmd(act.delete, labPushValID);\n\t\t\tthis.cmd(act.connectCurve, this.linkedListElemID[0], this.linkedListElemID[0], -0.5);\n\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[0]);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.size = this.size + 1;\n\t\t\tthis.resetNodePositions();\n\t\t} else {\n\t\t\tif (index === 0 || index === this.size) {\n\t\t\t\t// Move label from first node to new node\n\t\t\t\tconst labCopiedValID = this.nextIndex++;\n\t\t\t\tconst copiedData = index === 0 ? this.arrayData[1] : this.arrayData[0];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tlabCopiedValID,\n\t\t\t\t\tcopiedData,\n\t\t\t\t\tLINKED_LIST_START_X,\n\t\t\t\t\tLINKED_LIST_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, labCopiedValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[1], copiedData);\n\t\t\t\tthis.cmd(act.delete, labCopiedValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t// Move label for new data to the first node\n\t\t\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_START_X, LINKED_LIST_START_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[0], elemToAdd);\n\t\t\t\tthis.cmd(act.delete, labPushValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t// Change pointers\n\t\t\t\tif (this.size === 1) {\n\t\t\t\t\t// Case where we're adding the second node\n\t\t\t\t\tthis.cmd(act.disconnect, this.linkedListElemID[0], this.linkedListElemID[0]); // Disconnect head node from itself\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[0], this.linkedListElemID[1]); // Connect head node to new node\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t); // Connect new node to head node\n\t\t\t\t} else {\n\t\t\t\t\t// Other cases\n\t\t\t\t\tthis.cmd(act.disconnect, this.linkedListElemID[0], this.linkedListElemID[2]); // Disconnect head from old second node\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[0], this.linkedListElemID[1]); // Connect head node to new node\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[1], this.linkedListElemID[2]); // Connect new node to old second node\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.size = this.size + 1;\n\t\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[0]);\n\t\t\t\tthis.resetNodePositions();\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t// If adding to the back, \"move head over\" (rotate elements backwards)\n\t\t\t\tif (index === this.size - 1) {\n\t\t\t\t\t// We increment size above, so subtract one to check if adding to back\n\t\t\t\t\tlet i;\n\t\t\t\t\tthis.cmd(act.disconnect, this.headID, this.linkedListElemID[0]);\n\t\t\t\t\tconst firstNodeID = this.linkedListElemID[0];\n\t\t\t\t\tfor (i = 0; i < this.size - 1; i++) {\n\t\t\t\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t\t\t\t}\n\t\t\t\t\tthis.linkedListElemID[this.size - 1] = firstNodeID;\n\n\t\t\t\t\tconst lastX =\n\t\t\t\t\t\t((this.size - 1) % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\t\tconst lastY =\n\t\t\t\t\t\tMath.floor((this.size - 1) / LINKED_LIST_ELEMS_PER_LINE) *\n\t\t\t\t\t\t\tLINKED_LIST_LINE_SPACING +\n\t\t\t\t\t\tLINKED_LIST_START_Y;\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tthis.linkedListElemID[i],\n\t\t\t\t\t\t(LINKED_LIST_START_X + lastX) / 2,\n\t\t\t\t\t\tlastY + LINKED_LIST_ELEM_HEIGHT * 3,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[0]);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tfor (let i = 0; i < this.size - 1; i++) {\n\t\t\t\t\t\tconst nextX =\n\t\t\t\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\t\t\tconst nextY =\n\t\t\t\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\t\t\t\tLINKED_LIST_START_Y;\n\t\t\t\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.disconnect,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 2],\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t); // Disconnect curved pointer\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 2],\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t); // Connect with normal pointer\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.disconnect,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t); // Disconnect normal pointer\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[this.size - 1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t); // Connect with curved pointer\n\t\t\t\t\tthis.cmd(act.move, this.linkedListElemID[i], lastX, lastY);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\t\t\tthis.cmd(act.delete, labPushValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\n\t\t\t\tthis.size = this.size + 1;\n\t\t\t\tthis.resetNodePositions();\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.setHighlight, this.linkedListElemID[index - 1], 0);\n\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.traverse(index - 1);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\t// O(1) remove from front trick\n\t\t\t\tconst labCopiedValID = this.nextIndex++;\n\t\t\t\tconst secondNodeX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING;\n\t\t\t\tconst secondNodeY = LINKED_LIST_START_Y;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tlabCopiedValID,\n\t\t\t\t\tthis.arrayData[1],\n\t\t\t\t\tsecondNodeX,\n\t\t\t\t\tsecondNodeY,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.move, labCopiedValID, LINKED_LIST_START_X, LINKED_LIST_START_Y);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setText, this.linkedListElemID[0], this.arrayData[1]);\n\t\t\t\tthis.cmd(act.delete, labCopiedValID);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.linkedListElemID[1],\n\t\t\t\t\tsecondNodeX,\n\t\t\t\t\tsecondNodeY - LINKED_LIST_ELEM_HEIGHT * 2,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.disconnect, this.linkedListElemID[0], this.linkedListElemID[1]);\n\t\t\t\tif (this.size === 2) {\n\t\t\t\t\t// Only one node will remain, connect it to itself\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Normal remove\n\t\t\t\t\tthis.cmd(act.connect, this.linkedListElemID[0], this.linkedListElemID[2]);\n\t\t\t\t}\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tif (this.size === 2) {\n\t\t\t\t\t// Only one node will remain, connect it to itself\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Normal remove\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectCurve,\n\t\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\t\tthis.linkedListElemID[0],\n\t\t\t\t\t\t-0.5,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\n\t\t\tconst removedNodeIndex = index === 0 ? 1 : index; // If deleting from front, we need to remove the second node\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[removedNodeIndex]);\n\t\t\tfor (let i = removedNodeIndex; i < this.size; i++) {\n\t\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[0]);\n\t\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\t}\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.setHighlight, this.linkedListElemID[index - 1], 0);\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\nconst RESIZE_ARRAY_START_X = 100;\nconst RESIZE_ARRAY_START_Y = 300;\n\nconst ARRAY_ELEMS_PER_LINE = 14;\nconst ARRAY_LINE_SPACING = 130;\n\nconst TOP_POS_X = 180;\nconst TOP_POS_Y = 100;\nconst TOP_LABEL_X = 130;\nconst TOP_LABEL_Y = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\nconst PUSH_RESIZE_LABEL_X = 60;\nconst PUSH_RESIZE_LABEL_Y = 60;\n\nconst SIZE = 7;\nconst MAX_SIZE = 30;\n\nexport default class StackArray extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.pushField = addControlToAlgorithmBar('Text', '');\n\t\tthis.pushField.onkeydown = this.returnSubmit(\n\t\t\tthis.pushField,\n\t\t\tthis.pushCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.pushButton = addControlToAlgorithmBar('Button', 'Push');\n\t\tthis.pushButton.onclick = this.pushCallback.bind(this);\n\t\tthis.controls.push(this.pushField);\n\t\tthis.controls.push(this.pushButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.popButton = addControlToAlgorithmBar('Button', 'Pop');\n\t\tthis.popButton.onclick = this.popCallback.bind(this);\n\t\tthis.controls.push(this.popButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tthis.arrayData = new Array(SIZE);\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.topID = this.nextIndex++;\n\t\tthis.topLabelID = this.nextIndex++;\n\n\t\tthis.top = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.createLabel, this.topLabelID, 'Size', TOP_LABEL_X, TOP_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.topID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tTOP_POS_X,\n\t\t\tTOP_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.highlight2ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.nextIndex = 0;\n\t\tthis.length = SIZE;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tthis.arrayData = new Array(SIZE);\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.nextIndex = this.nextIndex + 3;\n\t\t//^ To keep nextIndex in the same place relative to setup()\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.highlight2ID = this.nextIndex++;\n\t}\n\n\tpushCallback() {\n\t\tif (this.top < this.arrayData.length && this.pushField.value !== '') {\n\t\t\tconst pushVal = this.pushField.value;\n\t\t\tthis.pushField.value = '';\n\t\t\tthis.implementAction(this.push.bind(this), pushVal);\n\t\t} else if (this.top === this.arrayData.length && this.top * 2 < MAX_SIZE) {\n\t\t\tconst pushVal = this.pushField.value;\n\t\t\tthis.pushField.value = '';\n\t\t\tthis.implementAction(this.resize.bind(this), pushVal);\n\t\t}\n\t}\n\n\tpopCallback() {\n\t\tif (this.top > 0) {\n\t\t\tthis.implementAction(this.pop.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearData.bind(this));\n\t}\n\n\tclearData() {\n\t\tthis.commands = [];\n\t\tthis.clearAll();\n\t\treturn this.commands;\n\t}\n\n\tpush(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData[this.top] = elemToPush;\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Pushing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, '#0000FF', TOP_POS_X, TOP_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.top % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.top / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[this.top], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.topID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top + 1;\n\t\tthis.cmd(act.setText, this.topID, this.top);\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.topID, 0);\n\n\t\tif (elemToPush != null) {\n\t\t\tthis.nextIndex = this.nextIndex - 2;\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tpop() {\n\t\tthis.commands = [];\n\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPopID, 'Popped Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.cmd(act.setHighlight, this.topID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top - 1;\n\n\t\tconst popVal = this.arrayData[this.top];\n\t\tthis.arrayData[this.top] = '';\n\n\t\tthis.cmd(act.setText, this.topID, this.top);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.topID, 0);\n\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, '#0000FF', TOP_POS_X, TOP_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.top % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.top / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.createLabel, labPopValID, popVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[this.top], '');\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Popped Value: ' + popVal);\n\t\tthis.cmd(act.delete, labPopValID);\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\tresize(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tconst labPushResizeID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Pushing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabPushResizeID,\n\t\t\t'(Resize Required)',\n\t\t\tPUSH_RESIZE_LABEL_X,\n\t\t\tPUSH_RESIZE_LABEL_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tthis.arrayIDNew = new Array(this.top * 2);\n\t\tthis.arrayLabelIDNew = new Array(this.top * 2);\n\t\tthis.arrayDataNew = new Array(this.top * 2);\n\n\t\tfor (let i = 0; i < this.top * 2; i++) {\n\t\t\tthis.arrayIDNew[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelIDNew[i] = this.nextIndex++;\n\t\t\tif (i < this.top) {\n\t\t\t\tthis.arrayDataNew[i] = this.arrayData[i];\n\t\t\t}\n\t\t}\n\t\tthis.arrayDataNew[this.top] = elemToPush;\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\t//Create new array\n\t\tfor (let i = 0; i < this.top * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayIDNew[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelIDNew[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelIDNew[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.arrayMoveID = new Array(this.top);\n\n\t\t//Move old array elements to the new array\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tconst xposinit = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst yposinit =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\n\t\t\t// const display = this.animationManager.objectManager.getText(this.arrayID[i]);\n\t\t\tconst display = this.arrayData[i];\n\n\t\t\tthis.cmd(act.createLabel, this.arrayMoveID[i], display, xposinit, yposinit);\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos, ypos);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//delete movement id objects and set text\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\t// const display = this.animationManager.objectManager.getText(this.arrayID[i]);\n\t\t\tconst display = this.arrayData[i];\n\n\t\t\tthis.cmd(act.setText, this.arrayIDNew[i], display);\n\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//Add elemToPush at the index\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\t'#0000FF',\n\t\t\tPUSH_ELEMENT_X,\n\t\t\tPUSH_ELEMENT_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos =\n\t\t\t(parseInt(this.top) % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(parseInt(this.top) / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING +\n\t\t\tRESIZE_ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos);\n\t\tthis.cmd(act.move, labPushValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayIDNew[this.top], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.step);\n\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t\tthis.cmd(act.delete, this.arrayLabelID[i]);\n\t\t}\n\n\t\tfor (let i = 0; i < this.top * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tthis.cmd(act.move, this.arrayIDNew[i], xpos, ypos);\n\t\t\tthis.cmd(act.move, this.arrayLabelIDNew[i], xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.topID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tthis.top = this.top + 1;\n\t\tthis.cmd(act.setText, this.topID, this.top);\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.delete, labPushResizeID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.topID, 0);\n\n\t\tthis.arrayID = this.arrayIDNew;\n\t\tthis.arrayLabelID = this.arrayLabelIDNew;\n\t\tthis.arrayData = this.arrayDataNew;\n\n\t\tthis.nextIndex = this.nextIndex - this.top + 1;\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t}\n\t\tthis.top = 0;\n\t\tthis.cmd(act.setText, this.topID, '0');\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 250;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst TOP_POS_X = 180;\nconst TOP_POS_Y = 100;\nconst TOP_LABEL_X = 130;\nconst TOP_LABEL_Y = 100;\n\nconst TOP_ELEM_WIDTH = 30;\nconst TOP_ELEM_HEIGHT = 30;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst CODE_START_X = 400;\nconst CODE_START_Y = 25;\nconst CODE_LINE_HEIGHT = 14;\nconst CODE_HIGHLIGHT_COLOR = '#FF0000';\nconst CODE_STANDARD_COLOR = '#000000';\n\nconst SIZE = 32;\n\nexport default class StackLL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.pushField = addControlToAlgorithmBar('Text', '');\n\t\tthis.pushField.onkeydown = this.returnSubmit(\n\t\t\tthis.pushField,\n\t\t\tthis.pushCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.pushButton = addControlToAlgorithmBar('Button', 'Push');\n\t\tthis.pushButton.onclick = this.pushCallback.bind(this);\n\t\tthis.controls.push(this.pushField);\n\t\tthis.controls.push(this.pushButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.popButton = addControlToAlgorithmBar('Button', 'Pop');\n\t\tthis.popButton.onclick = this.popCallback.bind(this);\n\t\tthis.controls.push(this.popButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.linkedListElemID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.topID = this.nextIndex++;\n\t\tthis.topLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.top = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.topLabelID, 'Head', TOP_LABEL_X, TOP_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.topID,\n\t\t\t'',\n\t\t\tTOP_ELEM_WIDTH,\n\t\t\tTOP_ELEM_HEIGHT,\n\t\t\tTOP_POS_X,\n\t\t\tTOP_POS_Y,\n\t\t);\n\t\tthis.cmd(act.setNull, this.topID, 1);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.code = [\n\t\t\t['procedure push(data)'],\n\t\t\t['     head = new node(data, head)'],\n\t\t\t// ['     increment size'],\n\t\t\t['end procedure'],\n\n\t\t\t[],\n\t\t\t['procedure pop()'],\n\n\t\t\t['     result = head.data'],\n\t\t\t['     head = head.next'],\n\t\t\t// ['     decrement size'],\n\t\t\t// ['     return result'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.codeID = Array(this.code.length);\n\t\tlet i, j;\n\t\tfor (i = 0; i < this.code.length; i++) {\n\t\t\tthis.codeID[i] = new Array(this.code[i].length);\n\t\t\tfor (j = 0; j < this.code[i].length; j++) {\n\t\t\t\tthis.codeID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.codeID[i][j],\n\t\t\t\t\tthis.code[i][j],\n\t\t\t\t\tCODE_START_X,\n\t\t\t\t\tCODE_START_Y + i * CODE_LINE_HEIGHT,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[i][j], CODE_STANDARD_COLOR);\n\t\t\t\tif (j > 0) {\n\t\t\t\t\tthis.cmd(act.alignRight, this.codeID[i][j], this.codeID[i][j - 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tresetLinkedListPositions() {\n\t\tfor (let i = this.top - 1; i >= 0; i--) {\n\t\t\tconst nextX =\n\t\t\t\t((this.top - 1 - i) % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\tLINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor((this.top - 1 - i) / LINKED_LIST_ELEMS_PER_LINE) *\n\t\t\t\t\tLINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tpushCallback() {\n\t\tif (this.top < SIZE && this.pushField.value !== '') {\n\t\t\tconst pushVal = this.pushField.value;\n\t\t\tthis.pushField.value = '';\n\t\t\tthis.implementAction(this.push.bind(this), pushVal);\n\t\t}\n\t}\n\n\tpopCallback() {\n\t\tif (this.top > 0) {\n\t\t\tthis.implementAction(this.pop.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tpush(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tthis.arrayData[this.top] = elemToPush;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.highlight(1, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tthis.linkedListElemID[this.top],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t\t0,\n\t\t\t1,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Pushing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[this.top], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (this.top === 0) {\n\t\t\tthis.cmd(act.setNull, this.topID, 0);\n\t\t\tthis.cmd(act.setNull, this.linkedListElemID[this.top], 1);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.connect,\n\t\t\t\tthis.linkedListElemID[this.top],\n\t\t\t\tthis.linkedListElemID[this.top - 1],\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.disconnect, this.topID, this.linkedListElemID[this.top - 1]);\n\t\t}\n\t\tthis.cmd(act.connect, this.topID, this.linkedListElemID[this.top]);\n\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top + 1;\n\t\tthis.resetLinkedListPositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(1, 0);\n\n\t\treturn this.commands;\n\t}\n\n\tpop() {\n\t\tthis.commands = [];\n\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPopID, 'Popped Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabPopValID,\n\t\t\tthis.arrayData[this.top - 1],\n\t\t\tLINKED_LIST_START_X,\n\t\t\tLINKED_LIST_START_Y,\n\t\t);\n\n\t\tthis.highlight(5, 0);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.disconnect, this.topID, this.linkedListElemID[this.top - 1]);\n\t\tthis.unhighlight(5, 0);\n\n\t\tif (this.top === 1) {\n\t\t\tthis.cmd(act.setNull, this.topID, 1);\n\t\t} else {\n\t\t\tthis.cmd(act.connect, this.topID, this.linkedListElemID[this.top - 2]);\n\t\t}\n\t\tthis.highlight(6, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(6, 0);\n\t\tthis.cmd(act.delete, this.linkedListElemID[this.top - 1]);\n\t\tthis.highlight(7, 0);\n\t\tthis.top = this.top - 1;\n\t\tthis.resetLinkedListPositions();\n\t\tthis.unhighlight(7, 0);\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Popped Value: ' + this.arrayData[this.top]);\n\n\t\treturn this.commands;\n\t}\n\n\thighlight(ind1, ind2) {\n\t\tthis.cmd(act.setForegroundColor, this.codeID[ind1][ind2], CODE_HIGHLIGHT_COLOR);\n\t}\n\n\tunhighlight(ind1, ind2) {\n\t\tthis.cmd(act.setForegroundColor, this.codeID[ind1][ind2], CODE_STANDARD_COLOR);\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.top = 0;\n\t\tthis.cmd(act.setNull, this.topID, 1);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst ARRAY_ELEMS_PER_LINE = 14;\nconst ARRAY_LINE_SPACING = 130;\n\nconst FRONT_POS_X = 180;\nconst FRONT_POS_Y = 100;\nconst FRONT_LABEL_X = 130;\nconst FRONT_LABEL_Y = 100;\n\nconst SIZE_POS_X = 280;\nconst SIZE_POS_Y = 100;\nconst SIZE_LABEL_X = 230;\nconst SIZE_LABEL_Y = 100;\n\nconst QUEUE_LABEL_X = 60;\nconst QUEUE_LABEL_Y = 30;\nconst QUEUE_ELEMENT_X = 130;\nconst QUEUE_ELEMENT_Y = 30;\n\nconst QUEUE_INDEX_X = 129;\nconst QUEUE_INDEX_Y = 50;\nconst QUEUE_INDEXVAL_X = 260;\nconst QUEUE_INDEXVAL_Y = 50;\n\nconst RESIZE_ARRAY_START_X = 100;\nconst RESIZE_ARRAY_START_Y = 300;\nconst QUEUE_RESIZE_LABEL_X = 60;\nconst QUEUE_RESIZE_LABEL_Y = 60;\n\nconst INDEX_COLOR = '#0000FF';\n\nconst FRONT_LABEL_OFFSET = -40;\n\nconst SIZE = 7;\nconst MAX_SIZE = 30;\n\nexport default class QueueArray extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.enqueueField = addControlToAlgorithmBar('Text', '');\n\t\tthis.enqueueField.onkeydown = this.returnSubmit(\n\t\t\tthis.enqueueField,\n\t\t\tthis.enqueueCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.enqueueButton = addControlToAlgorithmBar('Button', 'Enqueue');\n\t\tthis.enqueueButton.onclick = this.enqueueCallback.bind(this);\n\t\tthis.controls.push(this.enqueueField);\n\t\tthis.controls.push(this.enqueueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.dequeueButton = addControlToAlgorithmBar('Button', 'Dequeue');\n\t\tthis.dequeueButton.onclick = this.dequeueCallback.bind(this);\n\t\tthis.controls.push(this.dequeueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.frontID = this.nextIndex++;\n\t\tconst frontLabelID = this.nextIndex++;\n\t\tthis.sizeID = this.nextIndex++;\n\t\tconst sizeLabelID = this.nextIndex++;\n\t\tthis.frontPointerID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, frontLabelID, 'Front', FRONT_LABEL_X, FRONT_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.frontID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, sizeLabelID, 'Size', SIZE_LABEL_X, SIZE_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.sizeID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tSIZE_POS_X,\n\t\t\tSIZE_POS_Y,\n\t\t);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.frontPointerID,\n\t\t\t'Front',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + FRONT_LABEL_OFFSET,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.top = 0;\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tthis.arrayData = new Array(SIZE);\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.nextIndex = this.nextIndex + 7;\n\t}\n\n\tenqueueCallback() {\n\t\tif (this.size < this.arrayData.length && this.enqueueField.value !== '') {\n\t\t\tconst pushVal = this.enqueueField.value;\n\t\t\tthis.enqueueField.value = '';\n\t\t\tthis.implementAction(this.enqueue.bind(this), pushVal);\n\t\t} else if (\n\t\t\tthis.size === this.arrayData.length &&\n\t\t\tthis.enqueueField !== '' &&\n\t\t\tthis.size * 2 < MAX_SIZE\n\t\t) {\n\t\t\tconst pushVal = this.enqueueField.value;\n\t\t\tthis.enqueueField.value = '';\n\t\t\tthis.implementAction(this.resize.bind(this), pushVal);\n\t\t}\n\t}\n\n\tdequeueCallback() {\n\t\tif (this.size !== 0) {\n\t\t\tthis.implementAction(this.dequeue.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tenqueue(elemToEnqueue) {\n\t\tthis.commands = [];\n\n\t\tconst labEnqueueID = this.nextIndex++;\n\t\tconst labEnqueueValID = this.nextIndex++;\n\t\tconst labIndexID = this.nextIndex++;\n\t\tconst labIndexValID = this.nextIndex++;\n\n\t\tconst newTail = (this.front + this.size) % this.arrayData.length;\n\t\tthis.arrayData[newTail] = elemToEnqueue;\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labEnqueueID, 'Enqueuing Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labEnqueueValID, elemToEnqueue, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabIndexID,\n\t\t\t'Enqueueing at (front + size) % array.length: ',\n\t\t\tQUEUE_INDEX_X,\n\t\t\tQUEUE_INDEX_Y,\n\t\t);\n\t\tthis.cmd(act.createLabel, labIndexValID, newTail, QUEUE_INDEXVAL_X, QUEUE_INDEXVAL_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (newTail % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(newTail / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, QUEUE_INDEXVAL_X, QUEUE_INDEXVAL_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, labIndexValID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labEnqueueValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[newTail], elemToEnqueue);\n\t\tthis.cmd(act.delete, labEnqueueValID);\n\t\tthis.cmd(act.delete, labIndexValID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.delete, labEnqueueID);\n\t\tthis.cmd(act.delete, labIndexID);\n\n\t\tthis.nextIndex = this.nextIndex - 4;\n\n\t\treturn this.commands;\n\t}\n\n\tdequeue() {\n\t\tthis.commands = [];\n\n\t\tconst labDequeueID = this.nextIndex++;\n\t\tconst labDequeueValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labDequeueID, 'Dequeued Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.front % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.front / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tconst dequeuedVal = this.arrayData[this.front];\n\t\tthis.cmd(act.createLabel, labDequeueValID, dequeuedVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[this.front], '');\n\t\tthis.cmd(act.move, labDequeueValID, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tthis.front = (this.front + 1) % this.arrayData.length;\n\t\tconst frontxpos = (this.front % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst frontypos =\n\t\t\tMath.floor(this.front / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING +\n\t\t\tARRAY_START_Y +\n\t\t\tFRONT_LABEL_OFFSET;\n\t\tthis.cmd(act.move, this.frontPointerID, frontxpos, frontypos);\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 0);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Dequeued Value: ' + dequeuedVal);\n\n\t\tthis.cmd(act.delete, labDequeueID);\n\t\tthis.cmd(act.delete, labDequeueValID);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size - 1;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\tresize(elemToEnqueue) {\n\t\tthis.commands = [];\n\n\t\tconst labEnqueueID = this.nextIndex++;\n\t\tconst labEnqueueValID = this.nextIndex++;\n\t\tconst labEnqueueResizeID = this.nextIndex++;\n\n\t\tthis.arrayIDNew = new Array(this.size * 2);\n\t\tthis.arrayLabelIDNew = new Array(this.size * 2);\n\t\tthis.arrayDataNew = new Array(this.size * 2);\n\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tthis.arrayIDNew[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelIDNew[i] = this.nextIndex++;\n\t\t\tif (i < this.size) {\n\t\t\t\tthis.arrayDataNew[i] = this.arrayData[(this.front + i) % this.arrayData.length];\n\t\t\t}\n\t\t}\n\n\t\tthis.arrayDataNew[this.size] = elemToEnqueue;\n\n\t\tthis.cmd(act.createLabel, labEnqueueID, 'Enqueuing Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labEnqueueValID, elemToEnqueue, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabEnqueueResizeID,\n\t\t\t'(Resize Required)',\n\t\t\tQUEUE_RESIZE_LABEL_X,\n\t\t\tQUEUE_RESIZE_LABEL_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\t//Create new array\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayIDNew[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelIDNew[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelIDNew[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.arrayMoveID = new Array(this.size);\n\n\t\t//Move old elements to new array\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst xposinit =\n\t\t\t\t(((this.front + i) % this.arrayData.length) % ARRAY_ELEMS_PER_LINE) *\n\t\t\t\t\tARRAY_ELEM_WIDTH +\n\t\t\t\tARRAY_START_X;\n\t\t\tconst yposinit =\n\t\t\t\tMath.floor(((this.front + i) % this.arrayData.length) / ARRAY_ELEMS_PER_LINE) *\n\t\t\t\t\tARRAY_LINE_SPACING +\n\t\t\t\tARRAY_START_Y;\n\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.arrayMoveID[i],\n\t\t\t\tthis.arrayData[(this.front + i) % this.arrayData.length],\n\t\t\t\txposinit,\n\t\t\t\typosinit,\n\t\t\t);\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos, ypos);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//Delete movement objects and set text\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\tthis.cmd(act.setText, this.arrayIDNew[i], this.arrayDataNew[i]);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//Delete old array\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t\tthis.cmd(act.delete, this.arrayLabelID[i]);\n\t\t}\n\n\t\t//Move new array\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tthis.cmd(act.move, this.arrayIDNew[i], xpos, ypos);\n\t\t\tthis.cmd(act.move, this.arrayLabelIDNew[i], xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.front = 0;\n\t\tthis.arrayID = this.arrayIDNew;\n\t\tthis.arrayLabelID = this.arrayLabelIDNew;\n\t\tthis.arrayData = this.arrayDataNew;\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.move, this.frontPointerID, ARRAY_START_X, ARRAY_START_Y + FRONT_LABEL_OFFSET);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 0);\n\n\t\t//Delete '(resize required)' text, create circle at the \"size\" object, add enqueue text\n\n\t\tconst newTail = (this.front + this.size) % this.arrayData.length;\n\t\tconst labIndexID = this.nextIndex++;\n\t\tconst labIndexValID = this.nextIndex++;\n\n\t\tthis.cmd(act.delete, labEnqueueResizeID);\n\n\t\t//Just so the element travels over the array instead of underneath it\n\t\tthis.cmd(act.delete, labEnqueueValID);\n\t\tconst labEnqueueValIDNew = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabEnqueueValIDNew,\n\t\t\telemToEnqueue,\n\t\t\tQUEUE_ELEMENT_X,\n\t\t\tQUEUE_ELEMENT_Y,\n\t\t);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabIndexID,\n\t\t\t'Enqueueing at (front + size) % array.length: ',\n\t\t\tQUEUE_INDEX_X,\n\t\t\tQUEUE_INDEX_Y,\n\t\t);\n\t\tthis.cmd(act.createLabel, labIndexValID, newTail, QUEUE_INDEXVAL_X, QUEUE_INDEXVAL_Y);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\t\tthis.cmd(act.step);\n\n\t\t//Enqueue 'elemToEnqueue'\n\t\tconst xpos = (newTail % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(newTail / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, QUEUE_INDEXVAL_X, QUEUE_INDEXVAL_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, labIndexValID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labEnqueueValIDNew, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[newTail], elemToEnqueue);\n\t\tthis.cmd(act.delete, labEnqueueValIDNew);\n\t\tthis.cmd(act.delete, labIndexValID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.delete, labEnqueueID);\n\t\tthis.cmd(act.delete, labIndexID);\n\n\t\tthis.nextIndex = this.nextIndex - this.size;\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t}\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.cmd(act.setText, this.frontID, '0');\n\t\tthis.cmd(act.setText, this.sizeID, '0');\n\t\tthis.cmd(\n\t\t\tact.setPosition,\n\t\t\tthis.frontPointerID,\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + FRONT_LABEL_OFFSET,\n\t\t);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 70;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 250;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 100;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst TOP_POS_X = 180;\nconst TOP_POS_Y = 100;\nconst TOP_LABEL_X = 130;\nconst TOP_LABEL_Y = 100;\n\nconst TOP_ELEM_WIDTH = 30;\nconst TOP_ELEM_HEIGHT = 30;\n\nconst TAIL_POS_X = 180;\nconst TAIL_LABEL_X = 130;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst SIZE = 32;\n\nexport default class QueueLL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.tail_pos_y = h - LINKED_LIST_ELEM_HEIGHT;\n\t\tthis.tail_label_y = this.tail_pos_y;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\tthis.enqueueField = addControlToAlgorithmBar('Text', '');\n\t\tthis.enqueueField.onkeydown = this.returnSubmit(\n\t\t\tthis.enqueueField,\n\t\t\tthis.enqueueCallback.bind(this),\n\t\t\t4,\n\t\t);\n\n\t\tthis.enqueueButton = addControlToAlgorithmBar('Button', 'Enqueue');\n\t\tthis.enqueueButton.onclick = this.enqueueCallback.bind(this);\n\t\tthis.controls.push(this.enqueueField);\n\t\tthis.controls.push(this.enqueueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.dequeueButton = addControlToAlgorithmBar('Button', 'Dequeue');\n\t\tthis.dequeueButton.onclick = this.dequeueCallback.bind(this);\n\t\tthis.controls.push(this.dequeueButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.linkedListElemID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.headID = this.nextIndex++;\n\t\tthis.headLabelID = this.nextIndex++;\n\n\t\tthis.tailID = this.nextIndex++;\n\t\tthis.tailLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.top = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.headLabelID, 'Head', TOP_LABEL_X, TOP_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.headID,\n\t\t\t'',\n\t\t\tTOP_ELEM_WIDTH,\n\t\t\tTOP_ELEM_HEIGHT,\n\t\t\tTOP_POS_X,\n\t\t\tTOP_POS_Y,\n\t\t);\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\n\t\tthis.cmd(act.createLabel, this.tailLabelID, 'Tail', TAIL_LABEL_X, this.tail_label_y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.tailID,\n\t\t\t'',\n\t\t\tTOP_ELEM_WIDTH,\n\t\t\tTOP_ELEM_HEIGHT,\n\t\t\tTAIL_POS_X,\n\t\t\tthis.tail_pos_y,\n\t\t);\n\t\tthis.cmd(act.setNull, this.tailID, 1);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', 5, PUSH_LABEL_Y, 0);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\tresetLinkedListPositions() {\n\t\tfor (let i = this.top - 1; i >= 0; i--) {\n\t\t\tconst nextX =\n\t\t\t\t((this.top - 1 - i) % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\tLINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor((this.top - 1 - i) / LINKED_LIST_ELEMS_PER_LINE) *\n\t\t\t\t\tLINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tenqueueCallback() {\n\t\tif (this.top < SIZE && this.enqueueField.value !== '') {\n\t\t\tconst pushVal = this.enqueueField.value;\n\t\t\tthis.enqueueField.value = '';\n\t\t\tthis.implementAction(this.enqueue.bind(this), pushVal);\n\t\t}\n\t}\n\n\tdequeueCallback() {\n\t\tif (this.top > 0) {\n\t\t\tthis.implementAction(this.dequeue.bind(this));\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tenqueue(elemToPush) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayData[this.top] = elemToPush;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tfor (let i = this.top; i > 0; i--) {\n\t\t\tthis.arrayData[i] = this.arrayData[i - 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i - 1];\n\t\t}\n\t\tthis.arrayData[0] = elemToPush;\n\t\tthis.linkedListElemID[0] = this.nextIndex++;\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createLinkedListNode,\n\t\t\tthis.linkedListElemID[0],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t\t0,\n\t\t\t1,\n\t\t);\n\n\t\tthis.cmd(act.setNull, this.linkedListElemID[0], 1);\n\t\tthis.cmd(act.createLabel, labPushID, 'Enqueuing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToPush, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[0], elemToPush);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (this.top === 0) {\n\t\t\tthis.cmd(act.setNull, this.headID, 0);\n\t\t\tthis.cmd(act.setNull, this.tailID, 0);\n\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[this.top]);\n\t\t\tthis.cmd(act.connect, this.tailID, this.linkedListElemID[this.top]);\n\t\t} else {\n\t\t\tthis.cmd(act.setNull, this.linkedListElemID[1], 0);\n\t\t\tthis.cmd(act.connect, this.linkedListElemID[1], this.linkedListElemID[0]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[1]);\n\t\t}\n\t\tthis.cmd(act.connect, this.tailID, this.linkedListElemID[0]);\n\n\t\tthis.cmd(act.step);\n\t\tthis.top = this.top + 1;\n\t\tthis.resetLinkedListPositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tdequeue() {\n\t\tthis.commands = [];\n\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labPopID, 'Dequeued Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabPopValID,\n\t\t\tthis.arrayData[this.top - 1],\n\t\t\tLINKED_LIST_START_X,\n\t\t\tLINKED_LIST_START_Y,\n\t\t);\n\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.disconnect, this.headID, this.linkedListElemID[this.top - 1]);\n\n\t\tif (this.top === 1) {\n\t\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\t\tthis.cmd(act.setNull, this.tailID, 1);\n\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[this.top - 1]);\n\t\t} else {\n\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[this.top - 2]);\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[this.top - 1]);\n\t\tthis.top = this.top - 1;\n\t\tthis.resetLinkedListPositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Dequeued Value: ' + this.arrayData[this.top]);\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.top; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.top = 0;\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\tthis.cmd(act.setNull, this.tailID, 1);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 200;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst ARRAY_ELEMS_PER_LINE = 14;\nconst ARRAY_LINE_SPACING = 130;\n\nconst FRONT_POS_X = 180;\nconst FRONT_POS_Y = 100;\nconst FRONT_LABEL_X = 130;\nconst FRONT_LABEL_Y = 100;\n\nconst SIZE_POS_X = 280;\nconst SIZE_POS_Y = 100;\nconst SIZE_LABEL_X = 230;\nconst SIZE_LABEL_Y = 100;\n\nconst QUEUE_LABEL_X = 50;\nconst QUEUE_LABEL_Y = 30;\nconst QUEUE_ELEMENT_X = 120;\nconst QUEUE_ELEMENT_Y = 30;\n\nconst RESIZE_ARRAY_START_X = 100;\nconst RESIZE_ARRAY_START_Y = 300;\nconst QUEUE_RESIZE_LABEL_X = 60;\nconst QUEUE_RESIZE_LABEL_Y = 60;\n\nconst FRONT_LABEL_OFFSET = -40;\n\nconst INDEX_COLOR = '#0000FF';\n\nconst SIZE = 7;\nconst MAX_SIZE = 30;\n\nexport default class DequeArray extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\t// Add's value text field\n\t\tthis.addField = addControlToAlgorithmBar('Text', '');\n\t\tthis.addField.onkeydown = this.returnSubmit(this.addField, null, 4);\n\t\tthis.controls.push(this.addField);\n\n\t\t// Add first button\n\t\tthis.addFirstButton = addControlToAlgorithmBar('Button', 'Add First');\n\t\tthis.addFirstButton.onclick = this.addFirstCallBack.bind(this);\n\t\tthis.controls.push(this.addFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Add last button\n\t\tthis.addLastButton = addControlToAlgorithmBar('Button', 'Add Last');\n\t\tthis.addLastButton.onclick = this.addLastCallback.bind(this);\n\t\tthis.controls.push(this.addLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Remove first button\n\t\tthis.removeFirstButton = addControlToAlgorithmBar('Button', 'Remove First');\n\t\tthis.removeFirstButton.onclick = this.removeFirstCallback.bind(this);\n\t\tthis.controls.push(this.removeFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Remove last button\n\t\tthis.removeLastButton = addControlToAlgorithmBar('Button', 'Remove Last');\n\t\tthis.removeLastButton.onclick = this.removeLastCallback.bind(this);\n\t\tthis.controls.push(this.removeLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\t\tthis.frontID = this.nextIndex++;\n\t\tconst frontLabelID = this.nextIndex++;\n\t\tthis.frontPointerID = this.nextIndex++;\n\t\tthis.sizeID = this.nextIndex++;\n\t\tconst sizeLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelID[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelID[i], INDEX_COLOR);\n\t\t}\n\t\tthis.cmd(act.createLabel, frontLabelID, 'Front', FRONT_LABEL_X, FRONT_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.frontID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, sizeLabelID, 'Size', SIZE_LABEL_X, SIZE_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.sizeID,\n\t\t\t0,\n\t\t\tARRAY_ELEM_WIDTH,\n\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\tSIZE_POS_X,\n\t\t\tSIZE_POS_Y,\n\t\t);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.frontPointerID,\n\t\t\t'Front',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + FRONT_LABEL_OFFSET,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', QUEUE_LABEL_X, QUEUE_LABEL_Y, false);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.top = 0;\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.nextIndex = 0;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.arrayID = new Array(SIZE);\n\t\tthis.arrayLabelID = new Array(SIZE);\n\n\t\tfor (let i = 0; i < SIZE; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelID[i] = this.nextIndex++;\n\t\t}\n\n\t\tthis.nextIndex = this.nextIndex + 7;\n\t}\n\n\taddLastCallback() {\n\t\tif (this.size < this.arrayData.length && this.addField.value !== '') {\n\t\t\tconst pushVal = this.addField.value;\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.addLast.bind(this), pushVal);\n\t\t} else if (\n\t\t\tthis.size === this.arrayData.length &&\n\t\t\tthis.addField.value !== '' &&\n\t\t\tthis.size * 2 < MAX_SIZE\n\t\t) {\n\t\t\tconst pushVal = this.addField.value;\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.resize.bind(this), pushVal, false);\n\t\t}\n\t}\n\n\tremoveFirstCallback() {\n\t\tif (this.size !== 0) {\n\t\t\tthis.implementAction(this.removeFirst.bind(this));\n\t\t}\n\t}\n\n\tremoveLastCallback() {\n\t\tif (this.size !== 0) {\n\t\t\tthis.implementAction(this.removeLast.bind(this));\n\t\t}\n\t}\n\n\taddFirstCallBack() {\n\t\tif (this.size < this.arrayData.length && this.addField.value !== '') {\n\t\t\tconst pushVal = this.addField.value;\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.addFirst.bind(this), pushVal);\n\t\t} else if (\n\t\t\tthis.size === this.arrayData.length &&\n\t\t\tthis.addField.value !== '' &&\n\t\t\tthis.size * 2 < MAX_SIZE\n\t\t) {\n\t\t\tconst pushVal = this.addField.value;\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.resize.bind(this), pushVal, true);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\taddLast(elemToAddLast) {\n\t\tthis.commands = [];\n\n\t\tconst labAddLastID = this.nextIndex++;\n\t\tconst labAddLastValID = this.nextIndex++;\n\t\tconst addIndex = (this.front + this.size) % this.arrayData.length;\n\n\t\tthis.arrayData[addIndex] = elemToAddLast;\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X + 100, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(act.createLabel, labAddLastID, 'Enqueuing Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labAddLastValID, elemToAddLast, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight1ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.leftoverLabelID,\n\t\t\t`Adding ${elemToAddLast} to back at index (${this.front} + ${this.size}) % ${this.arrayData.length}`,\n\t\t);\n\n\t\tconst xpos = (addIndex % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(addIndex / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labAddLastValID, xpos, ypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.arrayID[addIndex], elemToAddLast);\n\t\tthis.cmd(act.delete, labAddLastValID);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.delete, labAddLastID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\taddFirst(elemToAdd) {\n\t\tthis.commands = [];\n\n\t\tconst labelAddID = this.nextIndex++;\n\t\tconst labelAddIDVal = this.nextIndex++;\n\n\t\tconst addIndex = (this.front - 1 + this.arrayData.length) % this.arrayData.length;\n\n\t\tconst xpos = (addIndex % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(addIndex / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.arrayData[addIndex] = elemToAdd;\n\n\t\tthis.cmd(act.createLabel, labelAddID, 'Enqueuing Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labelAddIDVal, elemToAdd, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X + 100, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.leftoverLabelID,\n\t\t\t`Adding ${elemToAdd} to front at index (${this.front} - 1) % ${this.arrayData.length}`,\n\t\t);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(\n\t\t\tact.move,\n\t\t\tthis.highlight1ID,\n\t\t\tthis.front * ARRAY_ELEM_WIDTH + ARRAY_START_X,\n\t\t\typos + ARRAY_ELEM_HEIGHT,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, labelAddIDVal, xpos, ypos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, labelAddIDVal);\n\n\t\tthis.front = addIndex;\n\n\t\tconst frontxpos = (addIndex % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst frontypos =\n\t\t\tMath.floor(addIndex / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING +\n\t\t\tARRAY_START_Y +\n\t\t\tFRONT_LABEL_OFFSET;\n\n\t\tthis.cmd(act.setText, this.arrayID[addIndex], elemToAdd);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, this.frontPointerID, frontxpos, frontypos);\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 0);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.sizeID, this.size + 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.delete, labelAddID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.size++;\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\tremoveFirst() {\n\t\tthis.commands = [];\n\n\t\tconst labremoveFirstID = this.nextIndex++;\n\t\tconst labremoveFirstValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabremoveFirstID,\n\t\t\t'removeFirst Value: ',\n\t\t\tQUEUE_LABEL_X,\n\t\t\tQUEUE_LABEL_Y,\n\t\t);\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (this.front % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(this.front / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tconst removeFirstdVal = this.arrayData[this.front];\n\t\tthis.cmd(act.createLabel, labremoveFirstValID, removeFirstdVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[this.front], '');\n\t\tthis.cmd(act.move, labremoveFirstValID, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tthis.front = (this.front + 1) % this.arrayData.length;\n\t\tconst frontxpos = (this.front % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst frontypos =\n\t\t\tMath.floor(this.front / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING +\n\t\t\tARRAY_START_Y +\n\t\t\tFRONT_LABEL_OFFSET;\n\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.move, this.frontPointerID, frontxpos, frontypos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 0);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'removeFirst Value: ' + removeFirstdVal);\n\n\t\tthis.cmd(act.delete, labremoveFirstID);\n\t\tthis.cmd(act.delete, labremoveFirstValID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.size--;\n\t\tthis.cmd(act.setText, this.sizeID, this.size);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\tremoveLast() {\n\t\tthis.commands = [];\n\t\tconst remLabelID = this.nextIndex++;\n\t\tconst remLabelValID = this.nextIndex++;\n\n\t\tconst remIndex =\n\t\t\t(this.front + this.size - 1 + this.arrayData.length) % this.arrayData.length;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(act.createLabel, remLabelID, 'Removed Value: ', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.highlight1ID,\n\t\t\tINDEX_COLOR,\n\t\t\tFRONT_POS_X,\n\t\t\tFRONT_POS_Y,\n\t\t);\n\t\tthis.cmd(act.createHighlightCircle, this.highlight2ID, INDEX_COLOR, SIZE_POS_X, SIZE_POS_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (remIndex % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(remIndex / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.move, this.highlight2ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\t\tthis.cmd(act.delete, this.highlight2ID);\n\n\t\tconst removedVal = this.arrayData[remIndex];\n\t\tthis.cmd(act.createLabel, remLabelValID, removedVal, xpos, ypos);\n\t\tthis.cmd(act.setText, this.arrayID[remIndex], '');\n\t\tthis.cmd(act.move, remLabelValID, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, 'Removed Value: ' + removedVal);\n\n\t\tthis.cmd(act.delete, remLabelID);\n\t\tthis.cmd(act.delete, remLabelValID);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.sizeID, this.size - 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.size--;\n\n\t\tthis.nextIndex = this.nextIndex - 2;\n\n\t\treturn this.commands;\n\t}\n\n\tresize(elemToEnqueue, isFront) {\n\t\tthis.commands = [];\n\n\t\tconst labEnqueueID = this.nextIndex++;\n\t\tconst labEnqueueValID = this.nextIndex++;\n\t\tconst labEnqueueResizeID = this.nextIndex++;\n\n\t\tthis.arrayIDNew = new Array(this.size * 2);\n\t\tthis.arrayLabelIDNew = new Array(this.size * 2);\n\t\tthis.arrayDataNew = new Array(this.size * 2);\n\n\t\tconst frontOffset = isFront ? 1 : 0;\n\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tthis.arrayIDNew[i] = this.nextIndex++;\n\t\t\tthis.arrayLabelIDNew[i] = this.nextIndex++;\n\t\t\tif (i < this.size) {\n\t\t\t\tthis.arrayDataNew[i + frontOffset] = this.arrayData[\n\t\t\t\t\t(this.front + i) % this.arrayData.length\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\n\t\tconst extra = isFront ? ': elements shifted by 1' : '';\n\n\t\tthis.cmd(act.createLabel, labEnqueueID, 'Enqueuing Value:', QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labEnqueueValID, elemToEnqueue, QUEUE_ELEMENT_X, QUEUE_ELEMENT_Y);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabEnqueueResizeID,\n\t\t\t`(Resize Required${extra})`,\n\t\t\tisFront ? QUEUE_RESIZE_LABEL_X + 100 : QUEUE_RESIZE_LABEL_X,\n\t\t\tQUEUE_RESIZE_LABEL_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\t//Create new array\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + RESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + RESIZE_ARRAY_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayIDNew[i],\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.createLabel, this.arrayLabelIDNew[i], i, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t\tthis.cmd(act.setForegroundColor, this.arrayLabelIDNew[i], '#0000FF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.highlight1ID = this.nextIndex++;\n\t\tthis.arrayMoveID = new Array(this.size);\n\n\t\t//Move old elements to new array\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst xposinit =\n\t\t\t\t(((this.front + i) % this.arrayData.length) % ARRAY_ELEMS_PER_LINE) *\n\t\t\t\t\tARRAY_ELEM_WIDTH +\n\t\t\t\tARRAY_START_X;\n\t\t\tconst yposinit =\n\t\t\t\tMath.floor(((this.front + i) % this.arrayData.length) / ARRAY_ELEMS_PER_LINE) *\n\t\t\t\t\tARRAY_LINE_SPACING +\n\t\t\t\tARRAY_START_Y;\n\n\t\t\tconst xpos =\n\t\t\t\t((i + frontOffset) % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH +\n\t\t\t\tRESIZE_ARRAY_START_X;\n\t\t\tconst ypos =\n\t\t\t\tMath.floor((i + frontOffset) / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING +\n\t\t\t\tRESIZE_ARRAY_START_Y;\n\n\t\t\tthis.arrayMoveID[i] = this.nextIndex++;\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.arrayMoveID[i],\n\t\t\t\tthis.arrayData[(this.front + i) % this.arrayData.length],\n\t\t\t\txposinit,\n\t\t\t\typosinit,\n\t\t\t);\n\t\t\tthis.cmd(act.move, this.arrayMoveID[i], xpos, ypos);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\t//Delete movement objects and set text\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayMoveID[i]);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.arrayIDNew[i + frontOffset],\n\t\t\t\tthis.arrayDataNew[i + frontOffset],\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t//Delete old array\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t\tthis.cmd(act.delete, this.arrayLabelID[i]);\n\t\t}\n\n\t\t//Move new array\n\t\tfor (let i = 0; i < this.size * 2; i++) {\n\t\t\tconst xpos = (i % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = Math.floor(i / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\t\tthis.cmd(act.move, this.arrayIDNew[i], xpos, ypos);\n\t\t\tthis.cmd(act.move, this.arrayLabelIDNew[i], xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.front = 0;\n\t\tthis.arrayID = this.arrayIDNew;\n\t\tthis.arrayLabelID = this.arrayLabelIDNew;\n\t\tthis.arrayData = this.arrayDataNew;\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 1);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setText, this.frontID, this.front);\n\t\tthis.cmd(act.move, this.frontPointerID, ARRAY_START_X, ARRAY_START_Y + FRONT_LABEL_OFFSET);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.frontID, 0);\n\t\tthis.cmd(act.setHighlight, this.frontPointerID, 0);\n\n\t\t//Delete '(resize required)' text, create circle at the \"size\" object, add enqueue text\n\n\t\tconst addIndex = !isFront\n\t\t\t? (this.front + this.size) % this.arrayDataNew.length\n\t\t\t: this.front;\n\n\t\tthis.cmd(act.delete, labEnqueueResizeID);\n\n\t\t//Just so the element travels over the array instead of underneath it\n\t\tthis.cmd(act.delete, labEnqueueValID);\n\t\tconst labEnqueueValIDNew = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tlabEnqueueValIDNew,\n\t\t\telemToEnqueue,\n\t\t\tQUEUE_ELEMENT_X,\n\t\t\tQUEUE_ELEMENT_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\tif (isFront) {\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlight1ID,\n\t\t\t\tINDEX_COLOR,\n\t\t\t\tFRONT_POS_X,\n\t\t\t\tFRONT_POS_Y,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.highlight1ID,\n\t\t\t\tINDEX_COLOR,\n\t\t\t\tSIZE_POS_X,\n\t\t\t\tSIZE_POS_Y,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tconst xpos = (addIndex % ARRAY_ELEMS_PER_LINE) * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst ypos =\n\t\t\tMath.floor(addIndex / ARRAY_ELEMS_PER_LINE) * ARRAY_LINE_SPACING + ARRAY_START_Y;\n\n\t\tthis.cmd(\n\t\t\tact.move,\n\t\t\tthis.highlight1ID,\n\t\t\tthis.front * ARRAY_ELEM_WIDTH + ARRAY_START_X,\n\t\t\typos + ARRAY_ELEM_HEIGHT,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, this.highlight1ID, xpos, ypos + ARRAY_ELEM_HEIGHT);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.move, labEnqueueValIDNew, xpos, ypos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, labEnqueueValIDNew);\n\t\tthis.cmd(act.delete, this.highlight1ID);\n\n\t\tthis.arrayData[addIndex] = elemToEnqueue;\n\t\tthis.cmd(act.setText, this.arrayID[addIndex], elemToEnqueue);\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.setHighlight, this.sizeID, 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.sizeID, this.size + 1);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setHighlight, this.sizeID, 0);\n\n\t\tthis.cmd(act.delete, labEnqueueID);\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\t\tthis.cmd(act.setPosition, this.leftoverLabelID, QUEUE_LABEL_X, QUEUE_LABEL_Y);\n\t\tthis.size++;\n\n\t\tthis.nextIndex = this.nextIndex - this.size;\n\n\t\treturn this.commands;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\t}\n\t\tthis.front = 0;\n\t\tthis.size = 0;\n\t\tthis.cmd(act.setText, this.frontID, '0');\n\t\tthis.cmd(act.setText, this.sizeID, '0');\n\t\tthis.cmd(\n\t\t\tact.setPosition,\n\t\t\tthis.frontPointerID,\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + FRONT_LABEL_OFFSET,\n\t\t);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst LINKED_LIST_START_X = 100;\nconst LINKED_LIST_START_Y = 200;\nconst LINKED_LIST_ELEM_WIDTH = 100;\nconst LINKED_LIST_ELEM_HEIGHT = 30;\n\nconst LINKED_LIST_INSERT_X = 200;\nconst LINKED_LIST_INSERT_Y = 50;\n\nconst LINKED_LIST_ELEMS_PER_LINE = 8;\nconst LINKED_LIST_ELEM_SPACING = 150;\nconst LINKED_LIST_LINE_SPACING = 100;\n\nconst PUSH_LABEL_X = 50;\nconst PUSH_LABEL_Y = 30;\nconst PUSH_ELEMENT_X = 120;\nconst PUSH_ELEMENT_Y = 30;\n\nconst HEAD_POS_X = 180;\nconst HEAD_POS_Y = 100;\n\nconst TAIL_POS_X = 180;\n\nconst POINTER_LABEL_X = 130;\nconst HEAD_LABEL_Y = 100;\n\nconst POINTER_ELEM_WIDTH = 30;\nconst POINTER_ELEM_HEIGHT = 30;\n\nconst SIZE = 32;\n\nexport default class DequeLL extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.commands = [];\n\t\tthis.tail_pos_y = h - LINKED_LIST_ELEM_HEIGHT;\n\t\tthis.tail_label_y = this.tail_pos_y;\n\t\tthis.setup();\n\t\tthis.initialIndex = this.nextIndex;\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\t// Add's value text field\n\t\tthis.addField = addControlToAlgorithmBar('Text', '');\n\t\tthis.addField.onkeydown = this.returnSubmit(this.addField, null, 4);\n\t\tthis.controls.push(this.addField);\n\n\t\t// Add first button\n\t\tthis.addFirstButton = addControlToAlgorithmBar('Button', 'Add First');\n\t\tthis.addFirstButton.onclick = this.addFirstCallback.bind(this);\n\t\tthis.controls.push(this.addFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Add last button\n\t\tthis.addLastButton = addControlToAlgorithmBar('Button', 'Add Last');\n\t\tthis.addLastButton.onclick = this.addLastCallback.bind(this);\n\t\tthis.controls.push(this.addLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Remove first button\n\t\tthis.removeFirstButton = addControlToAlgorithmBar('Button', 'Remove First');\n\t\tthis.removeFirstButton.onclick = this.removeFirstCallback.bind(this);\n\t\tthis.controls.push(this.removeFirstButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Remove last button\n\t\tthis.removeLastButton = addControlToAlgorithmBar('Button', 'Remove Last');\n\t\tthis.removeLastButton.onclick = this.removeLastCallback.bind(this);\n\t\tthis.controls.push(this.removeLastButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.linkedListElemID = new Array(SIZE);\n\n\t\tthis.headID = this.nextIndex++;\n\t\tthis.headLabelID = this.nextIndex++;\n\n\t\tthis.tailID = this.nextIndex++;\n\t\tthis.tailLabelID = this.nextIndex++;\n\n\t\tthis.arrayData = new Array(SIZE);\n\t\tthis.size = 0;\n\t\tthis.leftoverLabelID = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, this.headLabelID, 'Head', POINTER_LABEL_X, HEAD_LABEL_Y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.headID,\n\t\t\t'',\n\t\t\tPOINTER_ELEM_WIDTH,\n\t\t\tPOINTER_ELEM_HEIGHT,\n\t\t\tHEAD_POS_X,\n\t\t\tHEAD_POS_Y,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, this.tailLabelID, 'Tail', POINTER_LABEL_X, this.tail_label_y);\n\t\tthis.cmd(\n\t\t\tact.createRectangle,\n\t\t\tthis.tailID,\n\t\t\t'',\n\t\t\tPOINTER_ELEM_WIDTH,\n\t\t\tPOINTER_ELEM_HEIGHT,\n\t\t\tTAIL_POS_X,\n\t\t\tthis.tail_pos_y,\n\t\t);\n\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\tthis.cmd(act.setNull, this.tailID, 1);\n\n\t\tthis.cmd(act.createLabel, this.leftoverLabelID, '', PUSH_LABEL_X, PUSH_LABEL_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.size = 0;\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\taddFirstCallback() {\n\t\tif (this.addField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addField.value);\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, 0);\n\t\t}\n\t}\n\n\taddLastCallback() {\n\t\tif (this.addField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addField.value);\n\t\t\tthis.addField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, this.size);\n\t\t}\n\t}\n\n\tremoveFirstCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), 0);\n\t\t}\n\t}\n\n\tremoveLastCallback() {\n\t\tif (this.size > 0) {\n\t\t\tthis.implementAction(this.remove.bind(this), this.size - 1);\n\t\t}\n\t}\n\n\t// getCallback(event)\n\t// {\n\t//     if (this.getField.value != \"\" && this.getField.value > 0 && this.getField.value < this.size)\n\t//     {\n\t//         this.implementAction(this.get.bind(this), \"\");\n\t//     }\n\t// }\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(elemToAdd, index) {\n\t\tthis.commands = [];\n\n\t\tconst labPushID = this.nextIndex++;\n\t\tconst labPushValID = this.nextIndex++;\n\n\t\tfor (let i = this.size - 1; i >= index; i--) {\n\t\t\tthis.arrayData[i + 1] = this.arrayData[i];\n\t\t\tthis.linkedListElemID[i + 1] = this.linkedListElemID[i];\n\t\t}\n\t\tthis.arrayData[index] = elemToAdd;\n\t\tthis.linkedListElemID[index] = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tthis.cmd(\n\t\t\tact.createDoublyLinkedListNode,\n\t\t\tthis.linkedListElemID[index],\n\t\t\t'',\n\t\t\tLINKED_LIST_ELEM_WIDTH,\n\t\t\tLINKED_LIST_ELEM_HEIGHT,\n\t\t\tLINKED_LIST_INSERT_X,\n\t\t\tLINKED_LIST_INSERT_Y,\n\t\t\t0.25,\n\t\t);\n\n\t\tthis.cmd(act.createLabel, labPushID, 'Adding Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPushValID, elemToAdd, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\n\t\tthis.cmd(act.step);\n\n\t\tthis.cmd(act.move, labPushValID, LINKED_LIST_INSERT_X, LINKED_LIST_INSERT_Y);\n\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.linkedListElemID[index], elemToAdd);\n\t\tthis.cmd(act.delete, labPushValID);\n\n\t\tif (index === 0) {\n\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index], 1);\n\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[index]);\n\t\t}\n\n\t\tif (index === this.size) {\n\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index], 1);\n\t\t\tthis.cmd(act.connect, this.tailID, this.linkedListElemID[index]);\n\t\t}\n\n\t\tif (this.size !== 0) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.disconnect, this.headID, this.linkedListElemID[index + 1]);\n\t\t\t} else if (index === this.size) {\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[index - 1]);\n\t\t\t} else {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.step);\n\t\tthis.size = this.size + 1;\n\t\tthis.resetNodePositions();\n\t\tthis.cmd(act.delete, labPushID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tremove(index) {\n\t\tthis.commands = [];\n\n\t\tindex = parseInt(index);\n\t\tconst labPopID = this.nextIndex++;\n\t\tconst labPopValID = this.nextIndex++;\n\n\t\tthis.cmd(act.setText, this.leftoverLabelID, '');\n\n\t\tconst nodePosX = LINKED_LIST_START_X + LINKED_LIST_ELEM_SPACING * index;\n\t\tconst nodePosY = LINKED_LIST_START_Y;\n\t\tthis.cmd(act.createLabel, labPopID, 'Removing Value: ', PUSH_LABEL_X, PUSH_LABEL_Y);\n\t\tthis.cmd(act.createLabel, labPopValID, this.arrayData[index], nodePosX, nodePosY);\n\t\tthis.cmd(act.move, labPopValID, PUSH_ELEMENT_X, PUSH_ELEMENT_Y);\n\t\tthis.cmd(act.step);\n\n\t\tif (this.size !== 1) {\n\t\t\tif (index === 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setPrevNull, this.linkedListElemID[index + 1], 1);\n\t\t\t\tthis.cmd(act.disconnect, this.headID, this.linkedListElemID[index]);\n\t\t\t\tthis.cmd(act.connect, this.headID, this.linkedListElemID[index + 1]);\n\t\t\t} else if (index === this.size - 1) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setNextNull, this.linkedListElemID[index - 1], 1);\n\t\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[index]);\n\t\t\t\tthis.cmd(act.connect, this.tailID, this.linkedListElemID[index - 1]);\n\t\t\t} else {\n\t\t\t\tconst xPos =\n\t\t\t\t\t(index % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING +\n\t\t\t\t\tLINKED_LIST_START_X;\n\t\t\t\tconst yPos = LINKED_LIST_START_Y - LINKED_LIST_ELEM_HEIGHT * 2;\n\t\t\t\tthis.cmd(act.move, this.linkedListElemID[index], xPos, yPos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.disconnect,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectNext,\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectPrev,\n\t\t\t\t\tthis.linkedListElemID[index + 1],\n\t\t\t\t\tthis.linkedListElemID[index - 1],\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.cmd(act.disconnect, this.headID, this.linkedListElemID[index]);\n\t\t\tthis.cmd(act.disconnect, this.tailID, this.linkedListElemID[index]);\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.delete, this.linkedListElemID[index]);\n\n\t\tfor (let i = index; i < this.size; i++) {\n\t\t\tthis.arrayData[i] = this.arrayData[i + 1];\n\t\t\tthis.linkedListElemID[i] = this.linkedListElemID[i + 1];\n\t\t}\n\t\tthis.size = this.size - 1;\n\t\tthis.resetNodePositions();\n\n\t\tthis.cmd(act.delete, labPopValID);\n\t\tthis.cmd(act.delete, labPopID);\n\n\t\treturn this.commands;\n\t}\n\n\tresetNodePositions() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tconst nextX =\n\t\t\t\t(i % LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_ELEM_SPACING + LINKED_LIST_START_X;\n\t\t\tconst nextY =\n\t\t\t\tMath.floor(i / LINKED_LIST_ELEMS_PER_LINE) * LINKED_LIST_LINE_SPACING +\n\t\t\t\tLINKED_LIST_START_Y;\n\t\t\tthis.cmd(act.move, this.linkedListElemID[i], nextX, nextY);\n\t\t}\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.delete, this.linkedListElemID[i]);\n\t\t}\n\t\tthis.size = 0;\n\t\tthis.cmd(act.setNull, this.headID, 1);\n\t\tthis.cmd(act.setNull, this.tailID, 1);\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst SKIP_LIST_START_X = 100;\nconst SKIP_LIST_START_Y = 400;\nconst SKIP_LIST_ELEM_SIZE = 40;\n\nconst SKIP_LIST_SPACING = 80;\n\nconst VALUE_LABEL_X = 50;\nconst VALUE_LABEL_Y = 23;\nconst VALUE_STRING_X = 120;\nconst VALUE_STRING_Y = 23;\n\nconst CF_LABEL_X = 50;\nconst CF_LABEL_Y = 37;\nconst CF_STRING_X = 120;\nconst CF_STRING_Y = 37;\n\nconst EXP_LABEL_X = 250;\nconst EXP_LABEL_Y = 30;\n\nconst NINF = '\\u2212\\u221E'; // Negative infinity\nconst PINF = '\\u221E'; // Positive infinity\n\nexport default class SkipList extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\t// add w/ heads groups\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\t\tconst topHorizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\t\tconst bottomHorizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// add w/ random heads groups\n\t\tconst verticalGroupRandom = addGroupToAlgorithmBar(false);\n\t\tconst topHorizontalGroupRandom = addGroupToAlgorithmBar(true, verticalGroupRandom);\n\t\tconst bottomHorizontalGroupRandom = addGroupToAlgorithmBar(true, verticalGroupRandom);\n\n\t\t// Add w/ heads section\n\t\taddLabelToAlgorithmBar('Add', topHorizontalGroup);\n\n\t\t// Add's value text field\n\t\tthis.addValueField = addControlToAlgorithmBar('Text', '', topHorizontalGroup);\n\t\tthis.addValueField.setAttribute('placeholder', 'Value');\n\t\tthis.addValueField.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueField,\n\t\t\tthis.addWithHeadsCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueField);\n\n\t\taddLabelToAlgorithmBar('with', topHorizontalGroup);\n\n\t\t// Heads' text field\n\t\tthis.headsField = addControlToAlgorithmBar('Text', '', topHorizontalGroup);\n\t\tthis.headsField.setAttribute('placeholder', '#');\n\t\tthis.headsField.onkeydown = this.returnSubmit(\n\t\t\tthis.headsField,\n\t\t\tthis.addWithHeadsCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.headsField);\n\n\t\taddLabelToAlgorithmBar('heads (Max 4)', topHorizontalGroup);\n\n\t\t// Add with heads button\n\t\tthis.addWithHeadsButton = addControlToAlgorithmBar('Button', 'Add', bottomHorizontalGroup);\n\t\tthis.addWithHeadsButton.onclick = this.addWithHeadsCallback.bind(this);\n\t\tthis.controls.push(this.addWithHeadsButton);\n\n\t\t// Add w/ random heads section\n\t\taddLabelToAlgorithmBar('Add', topHorizontalGroupRandom);\n\n\t\t// Add's value text field\n\t\tthis.addValueFieldRandom = addControlToAlgorithmBar('Text', '', topHorizontalGroupRandom);\n\t\tthis.addValueFieldRandom.setAttribute('placeholder', 'Value');\n\t\tthis.addValueFieldRandom.onkeydown = this.returnSubmit(\n\t\t\tthis.addValueFieldRandom,\n\t\t\tthis.addRandomlyCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.addValueFieldRandom);\n\n\t\taddLabelToAlgorithmBar('with random coin flip', topHorizontalGroupRandom);\n\n\t\t// Add randomly button\n\t\tthis.addRandomlyButton = addControlToAlgorithmBar(\n\t\t\t'Button',\n\t\t\t'Add',\n\t\t\tbottomHorizontalGroupRandom,\n\t\t);\n\t\tthis.addRandomlyButton.onclick = this.addRandomlyCallback.bind(this);\n\t\tthis.controls.push(this.addRandomlyButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Remove's text field\n\t\tthis.removeField = addControlToAlgorithmBar('Text', '');\n\t\tthis.removeField.onkeydown = this.returnSubmit(\n\t\t\tthis.removeField,\n\t\t\tthis.removeCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.removeField);\n\n\t\t// Remove button\n\t\tthis.removeButton = addControlToAlgorithmBar('Button', 'Remove');\n\t\tthis.removeButton.onclick = this.removeCallback.bind(this);\n\t\tthis.controls.push(this.removeButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Get's index text field\n\t\tthis.getField = addControlToAlgorithmBar('Text', '');\n\t\tthis.getField.onkeydown = this.returnSubmit(\n\t\t\tthis.getField,\n\t\t\tthis.getCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.getField);\n\n\t\t// Get button\n\t\tthis.getButton = addControlToAlgorithmBar('Button', 'Get');\n\t\tthis.getButton.onclick = this.getCallback.bind(this);\n\t\tthis.controls.push(this.getButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\n\t\tthis.nodeID = [[this.nextIndex++], [this.nextIndex++]];\n\t\tthis.data = [[Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY]];\n\t\tthis.size = 0;\n\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[0][0],\n\t\t\tNINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[1][0],\n\t\t\tPINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(act.connectSkipList, this.nodeID[0][0], this.nodeID[1][0], 3);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.nodeID = [[this.nextIndex++], [this.nextIndex++]];\n\t\tthis.data = [[Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY]];\n\t\tthis.size = 0;\n\t}\n\n\taddRandomlyCallback() {\n\t\tif (this.addValueFieldRandom.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueFieldRandom.value);\n\t\t\tthis.addValueFieldRandom.value = '';\n\t\t\tthis.headsField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal);\n\t\t}\n\t}\n\n\taddWithHeadsCallback() {\n\t\tif (this.addValueField.value !== '' && this.headsField.value !== '') {\n\t\t\tconst addVal = parseInt(this.addValueField.value);\n\t\t\tthis.addValueField.value = '';\n\t\t\tconst heads = parseInt(this.headsField.value);\n\t\t\tthis.headsField.value = '';\n\t\t\tthis.implementAction(this.add.bind(this), addVal, heads);\n\t\t}\n\t}\n\n\tremoveCallback() {\n\t\tif (this.removeField.value !== '') {\n\t\t\tconst value = parseInt(this.removeField.value);\n\t\t\tthis.removeField.value = '';\n\t\t\tthis.implementAction(this.remove.bind(this), value);\n\t\t}\n\t}\n\n\tgetCallback() {\n\t\tif (this.getField.value !== '') {\n\t\t\tconst value = parseInt(this.getField.value);\n\t\t\tthis.getField.value = '';\n\t\t\tthis.implementAction(this.get.bind(this), value);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clearAll.bind(this));\n\t}\n\n\tadd(value, heads) {\n\t\tthis.commands = [];\n\n\t\tif (heads === undefined) {\n\t\t\theads = Math.floor(Math.random() * 5); // random int between [0, 4]\n\t\t}\n\t\theads = Math.min(heads, 4);\n\n\t\tconst valueLabelId = this.nextIndex++;\n\t\tconst valueStringId = this.nextIndex++;\n\n\t\tconst cfLabelId = this.nextIndex++;\n\t\tconst cfStringId = this.nextIndex++;\n\t\tconst expLabelID = this.nextIndex++;\n\n\t\tlet headsString = '';\n\t\tfor (let i = 0; i < heads; i++) {\n\t\t\theadsString += 'H';\n\t\t}\n\t\theadsString += 'T';\n\n\t\tthis.cmd(act.createLabel, valueLabelId, 'Value to add:', VALUE_LABEL_X, VALUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, valueStringId, value, VALUE_STRING_X, VALUE_STRING_Y);\n\t\tthis.cmd(act.createLabel, cfLabelId, 'Coin Flipper:', CF_LABEL_X, CF_LABEL_Y);\n\t\tthis.cmd(act.createLabel, cfStringId, headsString, CF_STRING_X, CF_STRING_Y);\n\t\tthis.cmd(act.createLabel, expLabelID, '', EXP_LABEL_X, EXP_LABEL_Y);\n\t\tthis.cmd(act.step);\n\n\t\t// Add levels\n\t\tfor (let row = this.nodeID[0].length; row <= heads; row++) {\n\t\t\tconst rightPhantomsCol = this.nodeID.length - 1;\n\t\t\tthis.data[0][row] = Number.NEGATIVE_INFINITY;\n\t\t\tthis.nodeID[0][row] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createSkipListNode,\n\t\t\t\tthis.nodeID[0][row],\n\t\t\t\tNINF,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_START_X,\n\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t);\n\t\t\tthis.data[rightPhantomsCol][row] = Number.POSITIVE_INFINITY;\n\t\t\tthis.nodeID[rightPhantomsCol][row] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createSkipListNode,\n\t\t\t\tthis.nodeID[rightPhantomsCol][row],\n\t\t\t\tPINF,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * rightPhantomsCol,\n\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.connectSkipList,\n\t\t\t\tthis.nodeID[0][row],\n\t\t\t\tthis.nodeID[rightPhantomsCol][row],\n\t\t\t\t3,\n\t\t\t);\n\t\t\tthis.cmd(act.connectSkipList, this.nodeID[0][row - 1], this.nodeID[0][row], 0);\n\t\t\tthis.cmd(\n\t\t\t\tact.connectSkipList,\n\t\t\t\tthis.nodeID[rightPhantomsCol][row - 1],\n\t\t\t\tthis.nodeID[rightPhantomsCol][row],\n\t\t\t\t0,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\t// Find column where new element will be inserted\n\t\tlet newCol = 1;\n\t\twhile (value > this.data[newCol][0]) {\n\t\t\tnewCol++;\n\t\t}\n\n\t\t//this step should be skipped in the case of a duplicate\n\t\tif (value !== this.data[newCol][0]) {\n\t\t\t// Move IDs and data in next columns to the right\n\t\t\tfor (let col = this.nodeID.length - 1; col >= newCol; col--) {\n\t\t\t\tthis.nodeID[col + 1] = this.nodeID[col];\n\t\t\t\tthis.data[col + 1] = this.data[col];\n\t\t\t}\n\t\t\tthis.nodeID[newCol] = [];\n\t\t\tthis.data[newCol] = [];\n\t\t}\n\n\t\t// Traverse and add\n\t\tlet col = 0;\n\t\tlet row = this.nodeID[0].length - 1;\n\n\t\tconst highlightID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\thighlightID,\n\t\t\t'#FF0000',\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t);\n\t\tthis.cmd(act.setHighlight, highlightID, 1);\n\t\tthis.cmd(act.step);\n\n\t\tlet foundDuplicate = false;\n\t\twhile (row >= 0) {\n\t\t\t// Move right until next element is greater or equal\n\t\t\tlet nextCol = this.getNextCol(col, row);\n\t\t\tif (value === this.data[nextCol][row]) {\n\t\t\t\tcol = nextCol;\n\t\t\t\tfoundDuplicate = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\twhile (value > this.data[nextCol][row]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * nextCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tcol = nextCol;\n\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t}\n\n\t\t\tif (value === this.data[nextCol][row]) {\n\t\t\t\tcol = nextCol;\n\t\t\t\tfoundDuplicate = true;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Move highlight circle downward\n\t\t\trow--;\n\t\t\tif (row >= 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\n\t\t// Add nodes bottom-up to the new column if no duplicate has been found\n\t\tif (!foundDuplicate) {\n\t\t\tthis.shiftColumns(newCol);\n\t\t} else {\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\thighlightID,\n\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setText, expLabelID, 'Duplicate found!');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\trow++;\n\t\t// Having a highlight circle in the previous ID causes an object to look weird (this\n\t\t// seems to be an already existing bug) Creating a random object before it is a workaround\n\t\tthis.cmd(act.createCircle, this.nextIndex++, '', -100, -100, 0);\n\n\t\twhile (row <= heads) {\n\t\t\tthis.cmd(act.setText, expLabelID, 'Adding data');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.data[newCol][row] = value;\n\t\t\tthis.nodeID[newCol][row] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createSkipListNode,\n\t\t\t\tthis.nodeID[newCol][row],\n\t\t\t\tvalue,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * newCol,\n\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t);\n\t\t\tconst prevCol = this.getPrevCol(newCol, row);\n\t\t\tconst nextCol = this.getNextCol(newCol, row);\n\t\t\tthis.cmd(act.disconnect, this.nodeID[prevCol][row], this.nodeID[nextCol][row]);\n\t\t\tthis.cmd(act.connectSkipList, this.nodeID[prevCol][row], this.nodeID[newCol][row], 3);\n\t\t\tthis.cmd(act.connectSkipList, this.nodeID[newCol][row], this.nodeID[nextCol][row], 3);\n\t\t\tif (row !== 0) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connectSkipList,\n\t\t\t\t\tthis.nodeID[newCol][row - 1],\n\t\t\t\t\tthis.nodeID[newCol][row],\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\thighlightID,\n\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * newCol,\n\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\trow++;\n\t\t}\n\n\t\tthis.cmd(act.delete, valueLabelId);\n\t\tthis.cmd(act.delete, valueStringId);\n\t\tthis.cmd(act.delete, cfLabelId);\n\t\tthis.cmd(act.delete, cfStringId);\n\t\tthis.cmd(act.delete, highlightID);\n\t\tthis.cmd(act.delete, expLabelID);\n\n\t\tthis.size++;\n\n\t\treturn this.commands;\n\t}\n\n\tremove(params) {\n\t\tthis.commands = [];\n\n\t\tconst value = parseInt(params);\n\n\t\tconst valueLabelId = this.nextIndex++;\n\t\tconst valueStringId = this.nextIndex++;\n\n\t\tthis.cmd(act.createLabel, valueLabelId, 'Value to remove:', VALUE_LABEL_X, VALUE_LABEL_Y);\n\t\tthis.cmd(act.createLabel, valueStringId, value, VALUE_STRING_X, VALUE_STRING_Y);\n\t\tthis.cmd(act.step);\n\n\t\t// Traverse and remove\n\t\tlet col = 0;\n\t\tlet row = this.nodeID[0].length - 1;\n\t\tlet removedCol = -1;\n\n\t\tconst highlightID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\thighlightID,\n\t\t\t'#FF0000',\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t);\n\t\tthis.cmd(act.step);\n\n\t\twhile (row >= 0) {\n\t\t\t// Move right until next element is greater or equal\n\t\t\tlet nextCol = this.getNextCol(col, row);\n\t\t\twhile (value > this.data[nextCol][row]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * nextCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tcol = nextCol;\n\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t}\n\n\t\t\tif (value === this.data[nextCol][row]) {\n\t\t\t\tremovedCol = nextCol;\n\t\t\t\tcol = nextCol;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\twhile (row >= 0) {\n\t\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t\t\tconst prevCol = this.getPrevCol(col, row);\n\t\t\t\t\tthis.cmd(act.disconnect, this.nodeID[prevCol][row], this.nodeID[col][row]);\n\t\t\t\t\tthis.cmd(act.disconnect, this.nodeID[col][row], this.nodeID[nextCol][row]);\n\t\t\t\t\tif (this.nodeID[col][row + 1] != null) {\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.nodeID[col][row + 1], this.nodeID[col][row]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connectSkipList,\n\t\t\t\t\t\tthis.nodeID[prevCol][row],\n\t\t\t\t\t\tthis.nodeID[nextCol][row],\n\t\t\t\t\t\t3,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.delete, this.nodeID[col][row]);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\trow--;\n\t\t\t\t\tif (row !== -1) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\thighlightID,\n\t\t\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\trow--;\n\t\t\t\tif (row !== -1) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\thighlightID,\n\t\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, valueLabelId);\n\t\tthis.cmd(act.delete, valueStringId);\n\t\tthis.cmd(act.delete, highlightID);\n\n\t\tif (removedCol !== -1) {\n\t\t\t// Shift ID and data columns to the left (already erases last column)\n\t\t\tfor (let col = removedCol; col < this.nodeID.length - 1; col++) {\n\t\t\t\tthis.nodeID[col] = this.nodeID[col + 1];\n\t\t\t\tthis.data[col] = this.data[col + 1];\n\t\t\t}\n\t\t\tthis.nodeID.pop();\n\t\t\tthis.data.pop();\n\n\t\t\tthis.shiftColumns(removedCol);\n\t\t}\n\n\t\t// Remove empty rows\n\t\t// Find tallest column of actual values (not phantoms)\n\t\tlet maxHeight = 1;\n\t\tfor (let col = 1; col < this.nodeID.length - 1; col++) {\n\t\t\tmaxHeight = Math.max(maxHeight, this.nodeID[col].length);\n\t\t}\n\t\t// Remove rows above tallest column (so empty rows)\n\t\tfor (let row = this.nodeID[0].length - 1; row >= maxHeight; row--) {\n\t\t\tthis.data[0].pop();\n\t\t\tconst leftPhantomID = this.nodeID[0].pop();\n\t\t\tthis.cmd(act.delete, leftPhantomID);\n\t\t\tconst rightPhantomsCol = this.nodeID.length - 1;\n\t\t\tthis.data[rightPhantomsCol].pop();\n\t\t\tconst rightPhantomID = this.nodeID[rightPhantomsCol].pop();\n\t\t\tthis.cmd(act.delete, rightPhantomID);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tthis.size--;\n\n\t\treturn this.commands;\n\t}\n\n\tget(params) {\n\t\tthis.commands = [];\n\n\t\tconst value = parseInt(params);\n\n\t\tlet col = 0;\n\t\tlet row = this.nodeID[0].length - 1;\n\t\t// let nextCol = this.getNextCol(col, row);\n\n\t\tconst highlightID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\thighlightID,\n\t\t\t'#FF0000',\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t);\n\t\tthis.cmd(act.setHighlight, highlightID, 1);\n\t\tthis.cmd(act.step);\n\n\t\twhile (row >= 0 && value !== this.data[col][row]) {\n\t\t\t// Move right until next element is greater or equal\n\t\t\tlet nextCol = this.getNextCol(col, row);\n\t\t\twhile (value >= this.data[nextCol][row]) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * nextCol,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tcol = nextCol;\n\t\t\t\tnextCol = this.getNextCol(col, row);\n\t\t\t}\n\n\t\t\t// Move highlight circle downward if data has not been found\n\t\t\tif (value !== this.data[col][row]) {\n\t\t\t\trow--;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\thighlightID,\n\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, highlightID);\n\n\t\treturn this.commands;\n\t}\n\n\t// Shifts columns on screen\n\tshiftColumns(col) {\n\t\tfor (; col < this.nodeID.length; col++) {\n\t\t\tfor (let row = 0; row < this.nodeID[col].length; row++) {\n\t\t\t\tif (this.nodeID[col][row] != null) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tthis.nodeID[col][row],\n\t\t\t\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING * col,\n\t\t\t\t\t\tSKIP_LIST_START_Y - SKIP_LIST_SPACING * row,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t}\n\n\t// Gets the column of the next node (\"right pointer\")\n\tgetNextCol(col, row) {\n\t\tcol++;\n\t\twhile (this.data[col][row] == null) {\n\t\t\tcol++;\n\t\t}\n\t\treturn col;\n\t}\n\n\t// Gets the column of the previous node (\"left pointer\")\n\tgetPrevCol(col, row) {\n\t\tcol--;\n\t\twhile (this.data[col][row] == null) {\n\t\t\tcol--;\n\t\t}\n\t\treturn col;\n\t}\n\n\tclearAll() {\n\t\tthis.commands = [];\n\n\t\tfor (let col = 0; col < this.nodeID.length; col++) {\n\t\t\tfor (let row = 0; row < this.nodeID[col].length; row++) {\n\t\t\t\tthis.cmd(act.delete, this.nodeID[col][row]);\n\t\t\t}\n\t\t}\n\n\t\tthis.nodeID = [[this.nextIndex++], [this.nextIndex++]];\n\t\tthis.data = [[Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY]];\n\t\tthis.size = 0;\n\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[0][0],\n\t\t\tNINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createSkipListNode,\n\t\t\tthis.nodeID[1][0],\n\t\t\tPINF,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_ELEM_SIZE,\n\t\t\tSKIP_LIST_START_X + SKIP_LIST_SPACING,\n\t\t\tSKIP_LIST_START_Y,\n\t\t);\n\t\tthis.cmd(act.connectSkipList, this.nodeID[0][0], this.nodeID[1][0], 3);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_ARRAY_SIZE = 18;\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 130;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst COMP_COUNT_X = 100;\nconst COMP_COUNT_Y = 50;\n\nconst CODE_START_X = 50;\nconst CODE_START_Y = 200;\n\nexport default class InsertionSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma seperated list (e.g. \"3,1,2\"). Max 18 elements & no elements > 999',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.sortButton = addControlToAlgorithmBar('Button', 'Sort', horizontalGroup);\n\t\tthis.sortButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.sortButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.comparisonCountID,\n\t\t\t'Comparison Count: ' + this.compCount,\n\t\t\tCOMP_COUNT_X,\n\t\t\tCOMP_COUNT_Y,\n\t\t);\n\n\t\tthis.code = [\n\t\t\t['procedure InsertionSort(array):'],\n\t\t\t['     length <- length of array'],\n\t\t\t['     for i <- 1, length - 1 do'],\n\t\t\t['          j <- i'],\n\t\t\t['          while ', 'j > 0, ', 'array[j - 1] > array[j]', ' do'],\n\t\t\t['               swap array[j-1], array[j] '],\n\t\t\t['               j <- j - 1'],\n\t\t\t['          end while'],\n\t\t\t['     end for'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.removeCode(this.codeID);\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t\tthis.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\t}\n\n\tsortCallback() {\n\t\tconst list = this.listField.value.split(',').filter(x => x !== '');\n\t\tif (\n\t\t\tthis.listField.value !== '' &&\n\t\t\tlist.length <= MAX_ARRAY_SIZE &&\n\t\t\tlist.map(Number).filter(x => x > 999 || Number.isNaN(x)).length <= 0\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + this.compCount);\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, MAX_ARRAY_SIZE);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\t\tconst length = this.arrayData.length;\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.highlight(0, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(0, 0);\n\t\tthis.highlight(2, 0);\n\n\t\tfor (let i = 1; i < this.arrayData.length; i++) {\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(2, 0);\n\t\t\tthis.highlight(3, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tthis.highlight(4, 0);\n\t\t\tfor (let j = i; j >= 1; j--) {\n\t\t\t\tthis.movePointers(j - 1, j);\n\t\t\t\tthis.unhighlight(3, 0);\n\t\t\t\tthis.unhighlight(4, 0);\n\t\t\t\tthis.unhighlight(6, 0);\n\t\t\t\tthis.highlight(4, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(4, 1);\n\t\t\t\tthis.highlight(4, 2);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(4, 2);\n\t\t\t\tif (this.arrayData[j] < this.arrayData[j - 1]) {\n\t\t\t\t\tthis.highlight(5, 0);\n\t\t\t\t\tthis.swap(j, j - 1);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(5, 0);\n\t\t\t\t\tthis.highlight(6, 0);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tthis.unhighlight(6, 0);\n\t\t\tif (i === 1) this.cmd(act.setBackgroundColor, this.arrayID[0], '#2ECC71');\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tthis.unhighlight(2, 0);\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_ARRAY_SIZE = 18;\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 130;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst COMP_COUNT_X = 100;\nconst COMP_COUNT_Y = 50;\n\nconst CODE_START_X = 50;\nconst CODE_START_Y = 200;\n\n// const ARRRAY_ELEMS_PER_LINE = 15;\n// const ARRAY_LINE_SPACING = 130;\n\n// const TOP_POS_X = 180;\n// const TOP_POS_Y = 100;\n// const TOP_LABEL_X = 130;\n// const TOP_LABEL_Y = 100;\n\n// const PUSH_LABEL_X = 50;\n// const PUSH_LABEL_Y = 30;\n// const PUSH_ELEMENT_X = 120;\n// const PUSH_ELEMENT_Y = 30;\n\n// const SIZE = 10;\n\nexport default class SelectionSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma seperated list (e.g. \"3,1,2\"). Max 18 elements & no elements > 999',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.sortButton = addControlToAlgorithmBar('Button', 'Sort', horizontalGroup);\n\t\tthis.sortButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.sortButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\t//Min & Max selection button\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst minMaxButtonList = addRadioButtonGroupToAlgorithmBar(['Min', 'Max'], 'Min/Max');\n\n\t\tthis.minButton = minMaxButtonList[0];\n\t\tthis.minButton.onclick = this.minCallback.bind(this);\n\t\tthis.controls.push(this.minButton);\n\t\tthis.minButton.checked = true;\n\t\tthis.maxButton = minMaxButtonList[1];\n\t\tthis.maxButton.onclick = this.maxCallback.bind(this);\n\t\tthis.controls.push(this.maxButton);\n\t\tthis.isMin = true;\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.comparisonCountID,\n\t\t\t'Comparison Count: ' + this.compCount,\n\t\t\tCOMP_COUNT_X,\n\t\t\tCOMP_COUNT_Y,\n\t\t);\n\n\t\tthis.code = [\n\t\t\t['procedure SelectionSort(array):'],\n\t\t\t['     length <- length of array'],\n\t\t\t['     for i <- 0, length do'],\n\t\t\t['          min <- i'],\n\t\t\t['          for j <- i + 1, length do'],\n\t\t\t['               if array[j] < array[min]'],\n\t\t\t['                    min <- j'],\n\t\t\t['               end if'],\n\t\t\t['          end for'],\n\t\t\t['          swap array[min], array[i]'],\n\t\t\t['     end for'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.removeCode(this.codeID);\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\t\tif (!this.isMin) {\n\t\t\tthis.cmd(act.setText, this.codeID[2][0], '     for i <- length - 1, 0 do');\n\t\t\tthis.cmd(act.setText, this.codeID[3][0], '          max <- i');\n\t\t\tthis.cmd(act.setText, this.codeID[4][0], '          for j <- i - 1, 0 do');\n\t\t\tthis.cmd(act.setText, this.codeID[5][0], '               if array[j] > array[max]');\n\t\t\tthis.cmd(act.setText, this.codeID[5][0], '                    max <- j');\n\t\t\tthis.cmd(act.setText, this.codeID[9][0], '          swap array[max], array[i]');\n\t\t}\n\t}\n\n\tminCallback() {\n\t\tif (!this.isMin) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.cmd(act.setText, this.codeID[2][0], '     for i <- 0, length do');\n\t\t\tthis.cmd(act.setText, this.codeID[3][0], '          min <- i');\n\t\t\tthis.cmd(act.setText, this.codeID[4][0], '          for j <- i + 1, length do');\n\t\t\tthis.cmd(act.setText, this.codeID[5][0], '               if array[j] < array[min]');\n\t\t\tthis.cmd(act.setText, this.codeID[6][0], '                    min <- j');\n\t\t\tthis.cmd(act.setText, this.codeID[9][0], '          swap array[min], array[i]');\n\t\t\tthis.isMin = true;\n\t\t}\n\t}\n\n\tmaxCallback() {\n\t\tif (this.isMin) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.cmd(act.setText, this.codeID[2][0], '     for i <- length - 1, 0 do');\n\t\t\tthis.cmd(act.setText, this.codeID[3][0], '          max <- i');\n\t\t\tthis.cmd(act.setText, this.codeID[4][0], '          for j <- i - 1, 0 do');\n\t\t\tthis.cmd(act.setText, this.codeID[5][0], '               if array[j] > array[max]');\n\t\t\tthis.cmd(act.setText, this.codeID[6][0], '                    max <- j');\n\t\t\tthis.cmd(act.setText, this.codeID[9][0], '          swap array[max], array[i]');\n\t\t\tthis.isMin = false;\n\t\t}\n\t}\n\n\tsortCallback() {\n\t\tconst list = this.listField.value.split(',').filter(x => x !== '');\n\t\tif (\n\t\t\tthis.listField.value !== '' &&\n\t\t\tlist.length <= MAX_ARRAY_SIZE &&\n\t\t\tlist.map(Number).filter(x => x > 999 || Number.isNaN(x)).length <= 0\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.compCount = 0;\n\t\tthis.displayData = [];\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + this.compCount);\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\t\tthis.highlight(0, 0);\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, MAX_ARRAY_SIZE);\n\t\tconst length = this.arrayData.length;\n\t\tthis.displayData = new Array(length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\t\tlet circleShift = 0;\n\t\tif (!this.isMin) {\n\t\t\tcircleShift = ARRAY_ELEM_WIDTH * (this.arrayData.length - 1);\n\t\t}\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#FF0000',\n\t\t\tARRAY_START_X + circleShift,\n\t\t\tARRAY_START_Y,\n\t\t);\n\n\t\tcircleShift = ARRAY_ELEM_WIDTH;\n\t\tif (!this.isMin) {\n\t\t\tcircleShift = ARRAY_ELEM_WIDTH * (this.arrayData.length - 2);\n\t\t}\n\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + circleShift,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(0, 0);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\t\tthis.highlight(2, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(2, 0);\n\t\tfor (let i = 0; i < this.arrayData.length - 1; i++) {\n\t\t\tthis.highlight(3, 0);\n\t\t\tlet k = i;\n\t\t\tif (!this.isMin) {\n\t\t\t\tk = this.arrayData.length - 1 - i;\n\t\t\t}\n\n\t\t\tlet toSwap = k;\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[toSwap], '#FFFF00');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let j = i + 1; j < this.arrayData.length; j++) {\n\t\t\t\tthis.unhighlight(4, 0);\n\t\t\t\tlet w = j;\n\t\t\t\tif (!this.isMin) {\n\t\t\t\t\tw = this.arrayData.length - 1 - j;\n\t\t\t\t}\n\n\t\t\t\tthis.movePointers(toSwap, w);\n\t\t\t\tif (this.compare(this.arrayData[w], this.arrayData[toSwap])) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[toSwap], '#FFFFFF');\n\t\t\t\t\tthis.highlight(6, 0);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\ttoSwap = w;\n\t\t\t\t\tthis.movePointers(toSwap, w);\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[toSwap], '#FFFF00');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(6, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.swap(k, toSwap);\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[toSwap], '#FFFFFF');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[k], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.step);\n\n\t\tlet lastIndex = this.arrayID.length - 1;\n\t\tif (!this.isMin) {\n\t\t\tlastIndex = 0;\n\t\t}\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[lastIndex], '#2ECC71');\n\n\t\treturn this.commands;\n\t}\n\n\tcompare(i, j) {\n\t\tthis.highlight(5, 0);\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + ++this.compCount);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(5, 0);\n\t\tif (this.isMin) {\n\t\t\treturn i < j;\n\t\t} else {\n\t\t\treturn i > j;\n\t\t}\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tthis.highlight(9, 0);\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t\tthis.unhighlight(9, 0);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_ARRAY_SIZE = 18;\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 120;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst COMP_COUNT_X = 100;\nconst COMP_COUNT_Y = 50;\n\nconst CODE_START_X = 50;\nconst CODE_START_Y = 180;\n\nexport default class QuickSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma seperated list (e.g. \"3,1,2\"). Max 18 elements & no elements > 999',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.sortButton = addControlToAlgorithmBar('Button', 'Sort', horizontalGroup);\n\t\tthis.sortButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.sortButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Toggles\n\t\tconst pivotButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Random pivot', 'Min element', 'First element', 'Perfect pivot'],\n\t\t\t'Traversals',\n\t\t);\n\n\t\tthis.randomPivotSelect = pivotButtonList[0];\n\t\tthis.minPivotSelect = pivotButtonList[1];\n\t\tthis.firstPivotSelect = pivotButtonList[2];\n\t\tthis.perfectPivotSelect = pivotButtonList[3];\n\t\tthis.randomPivotSelect.onclick = () => (this.pivotType = 'random');\n\t\tthis.minPivotSelect.onclick = () => (this.pivotType = 'min');\n\t\tthis.firstPivotSelect.onclick = () => (this.pivotType = 'first');\n\t\tthis.perfectPivotSelect.onclick = () => (this.pivotType = 'perfect');\n\t\tthis.randomPivotSelect.checked = true;\n\t\tthis.pivotType = 'random';\n\n\t\tthis.controls.push(this.randomPivotSelect);\n\t\tthis.controls.push(this.perfectPivotSelect);\n\t\tthis.controls.push(this.firstPivotSelect);\n\t\tthis.controls.push(this.minPivotSelect);\n\n\t\taddDivisorToAlgorithmBar();\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.comparisonCountID,\n\t\t\t'Comparison Count: ' + this.compCount,\n\t\t\tCOMP_COUNT_X,\n\t\t\tCOMP_COUNT_Y,\n\t\t);\n\n\t\tthis.code = [\n\t\t\t['procedure QuickSort(array, left, right):'],\n\t\t\t['     pivotIdx <- random index within region being sorted'],\n\t\t\t['     pivot <- array[pivotIdx]'],\n\t\t\t['     swap array[left] and array[pivotIdx]'],\n\t\t\t['     i <- left + 1, j <- right - 1'],\n\t\t\t['     while i <= j do'],\n\t\t\t['          while ', 'i <= j', ' and ', 'array[i] <= pivot'],\n\t\t\t['               i <- i + 1'],\n\t\t\t['          end while'],\n\t\t\t['          while ', 'i <= j', ' and ', 'array[j] >= pivot'],\n\t\t\t['               j <- j - 1'],\n\t\t\t['          end while'],\n\t\t\t['          if i <= j then'],\n\t\t\t['               swap array[i] and array[j]'],\n\t\t\t['               i <- i + 1, j <- j - 1'],\n\t\t\t['          end if'],\n\t\t\t['     end while'],\n\t\t\t['     swap pivot and array[j]'],\n\t\t\t['     QuickSort on array, left, j'],\n\t\t\t['     QuickSort on array, j + 1, right'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.removeCode(this.codeID);\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\t}\n\n\tsortCallback() {\n\t\tconst list = this.listField.value.split(',').filter(x => x !== '');\n\t\tif (\n\t\t\tthis.listField.value !== '' &&\n\t\t\tlist.length <= MAX_ARRAY_SIZE &&\n\t\t\tlist.map(Number).filter(x => x > 999 || Number.isNaN(x)).length <= 0\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + this.compCount);\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, MAX_ARRAY_SIZE);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.arrayData[i] = parseInt(this.arrayData[i]);\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.pPointerID = this.nextIndex++;\n\t\tthis.helper(0, this.arrayData.length - 1);\n\n\t\treturn this.commands;\n\t}\n\n\thelper(left, right) {\n\t\tif (left > right) return;\n\n\t\tthis.highlight(0, 0);\n\n\t\t// Hightlight cells in the current sub-array\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#99CCFF');\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(0, 0);\n\n\t\tif (left === right) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(0, 0);\n\t\t\treturn;\n\t\t}\n\n\t\t// Create pivot pointer and swap with left-most element\n\t\t// To make things more interesting (and clearer), we don't pick the left-most element as pivot\n\t\tlet pivot;\n\t\tthis.highlight(1, 0);\n\t\tthis.highlight(2, 0);\n\t\tif (this.pivotType === 'min') {\n\t\t\tlet min = left;\n\t\t\tfor (let i = left + 1; i <= right; i++) {\n\t\t\t\tif (this.arrayData[i] < this.arrayData[min]) {\n\t\t\t\t\tmin = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpivot = min;\n\t\t} else if (this.pivotType === 'first') {\n\t\t\tpivot = left;\n\t\t} else if (this.pivotType === 'perfect') {\n\t\t\tconst sorted = this.arrayData.slice(left, right + 1);\n\t\t\tsorted.sort((a, b) => a - b);\n\t\t\tconst midIndex = Math.floor(sorted.length / 2);\n\t\t\tpivot = this.arrayData.indexOf(sorted[midIndex]);\n\t\t} else if (this.pivotType === 'random') {\n\t\t\tpivot = Math.floor(Math.random() * (right - left)) + left + 1;\n\t\t}\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.pPointerID, '#FFFF00', pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(1, 0);\n\t\tthis.unhighlight(2, 0);\n\t\tthis.highlight(3, 0);\n\t\tthis.swapPivot(pivot, left);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(3, 0);\n\t\tthis.highlight(4, 0);\n\t\t// Partition\n\t\tlet i = left + 1;\n\t\tlet j = right;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.iPointerID, '#0000FF', iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.createHighlightCircle, this.jPointerID, '#0000FF', jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(4, 0);\n\t\tthis.highlight(5, 0);\n\t\twhile (i <= j) {\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.highlight(6, 0);\n\t\t\tthis.unhighlight(5, 0);\n\t\t\tthis.highlight(6, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(6, 0);\n\t\t\tthis.unhighlight(6, 1);\n\t\t\tthis.highlight(6, 3);\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (i <= j && this.arrayData[left] >= this.arrayData[i]) {\n\t\t\t\tthis.unhighlight(6, 3);\n\t\t\t\tthis.highlight(7, 0);\n\t\t\t\ti++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.highlight(6, 1);\n\t\t\t\tif (i <= j) {\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(6, 1);\n\t\t\t\t\tthis.highlight(6, 3);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.unhighlight(6, 1);\n\t\t\tthis.unhighlight(6, 3);\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\t\t\t// One additional comparison will be made in the above loop if i <= j\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.highlight(9, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(9, 0);\n\t\t\tthis.highlight(9, 1);\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(9, 1);\n\t\t\t\tthis.highlight(9, 3);\n\t\t\t}\n\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (i <= j && this.arrayData[left] <= this.arrayData[j]) {\n\t\t\t\tthis.unhighlight(9, 3);\n\t\t\t\tthis.highlight(10, 0);\n\t\t\t\tj--;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t\tthis.highlight(9, 1);\n\t\t\t\tif (i <= j) {\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(9, 1);\n\t\t\t\t\tthis.highlight(9, 3);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.unhighlight(9, 1);\n\t\t\tthis.unhighlight(9, 3);\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.highlight(13, 0);\n\t\t\t\tthis.swap(i, j);\n\t\t\t\tthis.unhighlight(13, 0);\n\t\t\t\tthis.highlight(14, 0);\n\t\t\t\ti++;\n\t\t\t\tj--;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t\tthis.unhighlight(14, 0);\n\t\t\t}\n\t\t}\n\n\t\tthis.highlight(17, 0);\n\t\t// Move pivot back and delete pivot pointer\n\t\tthis.swapPivot(left, j, true);\n\t\tthis.unhighlight(17, 0);\n\n\t\t// Delete i and j pointers\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.delete, this.pPointerID);\n\t\tthis.cmd(act.step);\n\n\t\t// Un-hightlight cells in sub-array and set pivot cell to green\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#FFFFFF');\n\t\t}\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[j], '#2ECC71');\n\t\tthis.cmd(act.step);\n\n\t\tthis.highlight(18, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(18, 0);\n\n\t\tthis.helper(left, j - 1);\n\n\t\tthis.highlight(19, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(19, 0);\n\n\t\tthis.helper(j + 1, right);\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, ARRAY_START_Y);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswapPivot(pivot, other, moveJ) {\n\t\tif (pivot === other) return;\n\t\t// Create temporary labels and remove text in array\n\t\tconst lLabelID = this.nextIndex++;\n\t\tconst lXPos = other * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, lLabelID, this.displayData[other], lXPos, ARRAY_START_Y);\n\t\tconst pLabelID = this.nextIndex++;\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, pLabelID, this.displayData[pivot], pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[other], '');\n\t\tthis.cmd(act.setText, this.arrayID[pivot], '');\n\t\t// Move labels and pivot pointer\n\t\tthis.cmd(act.move, pLabelID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, this.pPointerID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, lLabelID, pXPos, ARRAY_START_Y);\n\t\tmoveJ && this.cmd(act.move, this.jPointerID, pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array, and delete temporary labels and pointer\n\t\tthis.cmd(act.setText, this.arrayID[other], this.displayData[pivot]);\n\t\tthis.cmd(act.setText, this.arrayID[pivot], this.displayData[other]);\n\t\tthis.cmd(act.delete, pLabelID);\n\t\tthis.cmd(act.delete, lLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[pivot];\n\t\tthis.arrayData[pivot] = this.arrayData[other];\n\t\tthis.arrayData[other] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[pivot];\n\t\tthis.displayData[pivot] = this.displayData[other];\n\t\tthis.displayData[other] = temp;\n\t}\n\n\tswap(i, j) {\n\t\t// Create temporary labels and remove text in array\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, ARRAY_START_Y);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\t// Move labels\n\t\tthis.cmd(act.move, iLabelID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, jLabelID, iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array and delete temporary labels\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t\t// Reset pointer colors back to blue\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\t// toggleWorstPivot() {\n\t// \tworstPivotEnabled = !worstPivotEnabled;\n\t// \tif (firstPivotEnabled) {\n\t// \t\tfirstPivotEnabled = false;\n\t// \t\tthis.firstPivotToggle.checked = false;\n\t// \t}\n\t// }\n\n\t// toggleFirstPivot() {\n\t// \tfirstPivotEnabled = !firstPivotEnabled;\n\t// \tif (worstPivotEnabled) {\n\t// \t\tworstPivotEnabled = false;\n\t// \t\tthis.worstPivotToggle.checked = false;\n\t// \t}\n\t// }\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_ARRAY_SIZE = 18;\n\nconst ARRAY_START_X = 350;\nconst ARRAY_START_Y = 120;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst COMP_COUNT_X = 100;\nconst COMP_COUNT_Y = 50;\n\nconst CODE_START_X = 50;\nconst CODE_START_Y = 100;\n\nexport default class QuickSelect extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t`Comma seperated list (e.g. \"3,1,2\"). Max ${MAX_ARRAY_SIZE} elements & no elements > 999`,\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.runCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\taddLabelToAlgorithmBar('k element (1 indexed)', horizontalGroup);\n\n\t\t// k text field\n\t\tthis.kField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.kField.onkeydown = this.returnSubmit(\n\t\t\tthis.kField,\n\t\t\tthis.runCallback.bind(this),\n\t\t\t2,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.kField);\n\n\t\t// Run button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Run', horizontalGroup);\n\t\tthis.findButton.onclick = this.runCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\n\t\taddDivisorToAlgorithmBar();\n\t\t// Toggles\n\t\tconst pivotButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Random pivot', 'Min element', 'First element', 'Perfect pivot'],\n\t\t\t'Traversals',\n\t\t);\n\n\t\tthis.randomPivotSelect = pivotButtonList[0];\n\t\tthis.minPivotSelect = pivotButtonList[1];\n\t\tthis.firstPivotSelect = pivotButtonList[2];\n\t\tthis.perfectPivotSelect = pivotButtonList[3];\n\t\tthis.randomPivotSelect.onclick = () => (this.pivotType = 'random');\n\t\tthis.minPivotSelect.onclick = () => (this.pivotType = 'min');\n\t\tthis.firstPivotSelect.onclick = () => (this.pivotType = 'first');\n\t\tthis.perfectPivotSelect.onclick = () => (this.pivotType = 'perfect');\n\t\tthis.randomPivotSelect.checked = true;\n\t\tthis.pivotType = 'random';\n\n\t\tthis.controls.push(this.randomPivotSelect);\n\t\tthis.controls.push(this.perfectPivotSelect);\n\t\tthis.controls.push(this.firstPivotSelect);\n\t\tthis.controls.push(this.minPivotSelect);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.comparisonCountID,\n\t\t\t'Comparison Count: ' + this.compCount,\n\t\t\tCOMP_COUNT_X,\n\t\t\tCOMP_COUNT_Y,\n\t\t);\n\n\t\tthis.code = [\n\t\t\t['procedure QuickSelect(array, left, right, k):'],\n\t\t\t['     pivotIdx <- random index within [left, right]'],\n\t\t\t['     pivot <- array[pivotIdx]'],\n\t\t\t['     swap array[left] and array[pivotIdx]'],\n\t\t\t['     i <- left + 1, j <- right - 1'],\n\t\t\t['     while i <= j do'],\n\t\t\t['          while ', 'i <= j', ' and ', 'array[i] <= pivot'],\n\t\t\t['               i <- i + 1'],\n\t\t\t['          end while'],\n\t\t\t['          while ', 'i <= j', ' and ', 'array[j] >= pivot'],\n\t\t\t['               j <- j - 1'],\n\t\t\t['          end while'],\n\t\t\t['          if i <= j then'],\n\t\t\t['               swap array[i] and array[j]'],\n\t\t\t['               i <- i + 1, j <- j - 1'],\n\t\t\t['          end if'],\n\t\t\t['     end while'],\n\t\t\t['     swap pivot and array[j]'],\n\t\t\t['     if j equals k - 1 then'],\n\t\t\t['          return array[j]'],\n\t\t\t['     if j > k - 1 then'],\n\t\t\t['          QuickSelect on array, left, j - 1, k'],\n\t\t\t['     else'],\n\t\t\t['          QuickSelect on array, j + 1, right, k'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.removeCode(this.codeID);\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.pPointerID = 0;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\t}\n\n\trunCallback() {\n\t\tconst list = this.listField.value.split(',').filter(x => x !== '');\n\t\tif (\n\t\t\tthis.listField.value !== '' &&\n\t\t\tthis.kField.value !== '' &&\n\t\t\tlist.length <= MAX_ARRAY_SIZE &&\n\t\t\tlist.map(Number).filter(x => x > 999 || Number.isNaN(x)).length <= 0\n\t\t) {\n\t\t\tconst k = this.kField.value;\n\t\t\tif (k > 0 && k <= list.length) {\n\t\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\t\tthis.listField.value = '';\n\t\t\t\tthis.kField.value = '';\n\t\t\t\tthis.implementAction(this.run.bind(this), list, k);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.displayData = [];\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + this.compCount);\n\t\treturn this.commands;\n\t}\n\n\trun(list, k) {\n\t\tthis.commands = [];\n\n\t\tthis.k = Number(k);\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = list\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, 18);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tthis.arrayData[i] = parseInt(this.arrayData[i]);\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.pPointerID = this.nextIndex++;\n\t\tthis.helper(0, this.arrayData.length - 1);\n\n\t\treturn this.commands;\n\t}\n\n\thelper(left, right) {\n\t\tif (left > right) return;\n\n\t\tthis.highlight(0, 0);\n\n\t\t// Hightlight cells in the current sub-array\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#99CCFF');\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\tif (left === right) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(0, 0);\n\t\t\treturn;\n\t\t}\n\t\tthis.unhighlight(0, 0);\n\n\t\t// Create pivot pointer and swap with left-most element\n\t\t// To make things more interesting (and clearer), we don't pick the left-most element as pivot\n\t\tlet pivot;\n\t\tthis.highlight(1, 0);\n\t\tthis.highlight(2, 0);\n\t\tif (this.pivotType === 'min') {\n\t\t\tlet min = left;\n\t\t\tfor (let i = left + 1; i <= right; i++) {\n\t\t\t\tif (this.arrayData[i] < this.arrayData[min]) {\n\t\t\t\t\tmin = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpivot = min;\n\t\t} else if (this.pivotType === 'first') {\n\t\t\tpivot = left;\n\t\t} else if (this.pivotType === 'perfect') {\n\t\t\tconst sorted = this.arrayData.slice(left, right + 1);\n\t\t\tsorted.sort((a, b) => a - b);\n\t\t\tconst midIndex = Math.floor(sorted.length / 2);\n\t\t\tpivot = this.arrayData.indexOf(sorted[midIndex]);\n\t\t} else if (this.pivotType === 'random') {\n\t\t\tpivot = Math.floor(Math.random() * (right - left)) + left + 1;\n\t\t}\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.pPointerID, '#FFFF00', pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(1, 0);\n\t\tthis.unhighlight(2, 0);\n\t\tthis.highlight(3, 0);\n\t\tthis.swapPivot(pivot, left);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(3, 0);\n\t\tthis.highlight(4, 0);\n\t\t// Partition\n\t\tlet i = left + 1;\n\t\tlet j = right;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createHighlightCircle, this.iPointerID, '#0000FF', iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.createHighlightCircle, this.jPointerID, '#0000FF', jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(4, 0);\n\t\tthis.highlight(5, 0);\n\t\twhile (i <= j) {\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.highlight(6, 0);\n\t\t\tthis.unhighlight(5, 0);\n\t\t\tthis.highlight(6, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(6, 0);\n\t\t\tthis.unhighlight(6, 1);\n\t\t\tthis.highlight(6, 3);\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (i <= j && this.arrayData[left] >= this.arrayData[i]) {\n\t\t\t\tthis.unhighlight(6, 3);\n\t\t\t\tthis.highlight(7, 0);\n\t\t\t\ti++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.highlight(6, 1);\n\t\t\t\tif (i <= j) {\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(6, 1);\n\t\t\t\t\tthis.highlight(6, 3);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.unhighlight(6, 1);\n\t\t\tthis.unhighlight(6, 3);\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#FF0000');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\n\t\t\tthis.highlight(9, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(9, 0);\n\t\t\tthis.highlight(9, 1);\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(9, 1);\n\t\t\t\tthis.highlight(9, 3);\n\t\t\t}\n\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (i <= j && this.arrayData[left] <= this.arrayData[j]) {\n\t\t\t\tthis.unhighlight(9, 3);\n\t\t\t\tthis.highlight(10, 0);\n\t\t\t\tj--;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t\tthis.highlight(9, 1);\n\t\t\t\tif (i <= j) {\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(9, 1);\n\t\t\t\t\tthis.highlight(9, 3);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.unhighlight(9, 1);\n\t\t\tthis.unhighlight(9, 3);\n\t\t\tif (i <= j) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#FF0000');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tif (i <= j) {\n\t\t\t\tthis.highlight(13, 0);\n\t\t\t\tthis.swap(i, j);\n\t\t\t\tthis.unhighlight(13, 0);\n\t\t\t\tthis.highlight(14, 0);\n\t\t\t\ti++;\n\t\t\t\tj--;\n\t\t\t\tthis.movePointers(i, j);\n\t\t\t\tthis.unhighlight(14, 0);\n\t\t\t}\n\t\t}\n\n\t\tthis.highlight(17, 0);\n\t\t// Move pivot back and delete pivot pointer\n\t\tthis.swapPivot(left, j, true);\n\t\tthis.unhighlight(17, 0);\n\n\t\t// Delete i and j pointers\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.delete, this.pPointerID);\n\t\tthis.cmd(act.step);\n\n\t\t// Un-hightlight cells in sub-array and set pivot cell to green\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[i], '#FFFFFF');\n\t\t}\n\t\tthis.highlight(18, 0);\n\t\tthis.cmd(act.step);\n\t\tif (this.k - 1 === j) {\n\t\t\tthis.unhighlight(18, 0);\n\t\t\tthis.highlight(19, 0);\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[j], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(19, 0);\n\t\t} else {\n\t\t\tthis.unhighlight(18, 0);\n\t\t\tthis.highlight(20, 0);\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[j], '#4DA6ff');\n\t\t\tthis.cmd(act.step);\n\n\t\t\tif (this.k - 1 < j) {\n\t\t\t\tthis.unhighlight(20, 0);\n\t\t\t\tthis.highlight(21, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(21, 0);\n\t\t\t\tthis.helper(left, j - 1);\n\t\t\t} else {\n\t\t\t\tthis.unhighlight(20, 0);\n\t\t\t\tthis.highlight(23, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(23, 0);\n\t\t\t\tthis.helper(j + 1, right);\n\t\t\t}\n\t\t}\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, ARRAY_START_Y);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswapPivot(pivot, other, moveJ) {\n\t\tif (pivot === other) return;\n\t\t// Create temporary labels and remove text in array\n\t\tconst lLabelID = this.nextIndex++;\n\t\tconst lXPos = other * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, lLabelID, this.displayData[other], lXPos, ARRAY_START_Y);\n\t\tconst pLabelID = this.nextIndex++;\n\t\tconst pXPos = pivot * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, pLabelID, this.displayData[pivot], pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[other], '');\n\t\tthis.cmd(act.setText, this.arrayID[pivot], '');\n\t\t// Move labels and pivot pointer\n\t\tthis.cmd(act.move, pLabelID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, this.pPointerID, lXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, lLabelID, pXPos, ARRAY_START_Y);\n\t\tmoveJ && this.cmd(act.move, this.jPointerID, pXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array, and delete temporary labels and pointer\n\t\tthis.cmd(act.setText, this.arrayID[other], this.displayData[pivot]);\n\t\tthis.cmd(act.setText, this.arrayID[pivot], this.displayData[other]);\n\t\tthis.cmd(act.delete, pLabelID);\n\t\tthis.cmd(act.delete, lLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[pivot];\n\t\tthis.arrayData[pivot] = this.arrayData[other];\n\t\tthis.arrayData[other] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[pivot];\n\t\tthis.displayData[pivot] = this.displayData[other];\n\t\tthis.displayData[other] = temp;\n\t}\n\n\tswap(i, j) {\n\t\t// Create temporary labels and remove text in array\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, ARRAY_START_Y);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\t// Move labels\n\t\tthis.cmd(act.move, iLabelID, jXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.move, jLabelID, iXPos, ARRAY_START_Y);\n\t\tthis.cmd(act.step);\n\t\t// Set text in array and delete temporary labels\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t//Swap data in backend display data\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t\t// Reset pointer colors back to blue\n\t\tthis.cmd(act.setForegroundColor, this.iPointerID, '#0000FF');\n\t\tthis.cmd(act.setForegroundColor, this.jPointerID, '#0000FF');\n\t\tthis.cmd(act.step);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_ARRAY_SIZE = 15;\n\nconst ARRAY_START_X = 450;\nconst ARRAY_START_Y = 50;\nconst ARRAY_LINE_SPACING = 75;\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst COMP_COUNT_X = 100;\nconst COMP_COUNT_Y = 50;\n\nconst CODE_START_X = 50;\nconst CODE_START_Y = 80;\n\n// const ARRRAY_ELEMS_PER_LINE = 15;\n\n// const TOP_POS_X = 180;\n// const TOP_POS_Y = 100;\n// const TOP_LABEL_X = 130;\n// const TOP_LABEL_Y = 100;\n\n// const PUSH_LABEL_X = 50;\n// const PUSH_LABEL_Y = 30;\n// const PUSH_ELEMENT_X = 120;\n// const PUSH_ELEMENT_Y = 30;\n\n// const SIZE = 10;\n\nconst LARGE_OFFSET = 15;\nconst SMALL_OFFSET = 7;\n\nexport default class MergeSort extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\n\t\t// Useful for memory management\n\t\tthis.nextIndex = 0;\n\n\t\t// TODO:  Add any code necessary to set up your own algorithm.  Initialize data\n\t\t// structures, etc.\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma seperated list (e.g. \"3,1,2\"). Max 15 elements & no elements > 999',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.sortButton = addControlToAlgorithmBar('Button', 'Sort', horizontalGroup);\n\t\tthis.sortButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.sortButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.kPointerID = 0;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.comparisonCountID,\n\t\t\t'Comparison Count: ' + this.compCount,\n\t\t\tCOMP_COUNT_X,\n\t\t\tCOMP_COUNT_Y,\n\t\t);\n\n\t\tthis.code = [\n\t\t\t['procedure MergeSort(array)'],\n\t\t\t['     length <- length of array, midIdx <- length / 2'],\n\t\t\t['     leftArray <- array[0...midIdx - 1]'],\n\t\t\t['     rightArray <- array[midIdx...length - 1]'],\n\t\t\t['     MergeSort(leftArray)'],\n\t\t\t['     MergeSort(rightArray)'],\n\t\t\t['     leftIdx, rightIdx, currIdx <- 0'],\n\t\t\t['     while leftIdx < midIdx and rightIdx < length - midIdx do'],\n\t\t\t['          if leftArray[leftIdx] <= rightArray[rightIdx] then'],\n\t\t\t['               array[currIdx] <- leftArray[leftIdx]'],\n\t\t\t['               leftIdx <- leftIdx + 1'],\n\t\t\t['          else'],\n\t\t\t['               array[currIdx] <- rightArray[rightIdx]'],\n\t\t\t['               rightIdx <- rightIdx + 1'],\n\t\t\t['          end if'],\n\t\t\t['          currIdx <- currIdx + 1'],\n\t\t\t['     end while'],\n\t\t\t['     while leftIdx < midIdx do'],\n\t\t\t['          array[currIdx] <- leftArray[leftIdx]'],\n\t\t\t['          currIdx <- currIdx + 1'],\n\t\t\t['          leftIdx <- leftIdx + 1'],\n\t\t\t['     end while'],\n\t\t\t['     while rightIdx < length - midIdx do'],\n\t\t\t['          array[currIdx] <- rightArray[rightIdx]'],\n\t\t\t['          currIdx <- currIdx + 1'],\n\t\t\t['          rightIdx <- rightIdx + 1'],\n\t\t\t['     end while'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.iPointerID = 0;\n\t\tthis.jPointerID = 0;\n\t\tthis.kPointerID = 0;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t}\n\n\tsortCallback() {\n\t\tconst list = this.listField.value.split(',').filter(x => x !== '');\n\t\tif (\n\t\t\tthis.listField.value !== '' &&\n\t\t\tlist.length <= MAX_ARRAY_SIZE &&\n\t\t\tlist.map(Number).filter(x => x > 999 || Number.isNaN(x)).length <= 0\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.displayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + this.compCount);\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.commands = [];\n\t\tthis.highlight(0, 0);\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, MAX_ARRAY_SIZE);\n\t\tthis.displayData = new Array(this.arrayData.length);\n\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\tfor (let i = 0; i < this.arrayData.length; i++) {\n\t\t\tconst xPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst yPos = ARRAY_START_Y;\n\t\t\tthis.arrayID.push(this.nextIndex);\n\n\t\t\tlet displayData = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tdisplayData += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.displayData[i] = displayData;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tdisplayData,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txPos,\n\t\t\t\tyPos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(0, 0);\n\n\t\tif (this.arrayData.length !== 1) {\n\t\t\tthis.highlight(2, 0);\n\t\t\tthis.highlight(3, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(2, 0);\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tconst mid = Math.ceil((this.arrayData.length - 1) / 2);\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.leftHelper(0, mid - 1, -LARGE_OFFSET, 0, 1);\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tthis.highlight(5, 0);\n\t\t\tthis.rightHelper(mid, this.arrayData.length - 1, LARGE_OFFSET, 0, 1);\n\t\t\tthis.unhighlight(5, 0);\n\t\t\tthis.merge(\n\t\t\t\t0,\n\t\t\t\tthis.arrayData.length - 1,\n\t\t\t\tmid,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t-LARGE_OFFSET,\n\t\t\t\tLARGE_OFFSET,\n\t\t\t\tthis.arrayID,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, this.arrayID[0], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tleftHelper(left, right, offset, prevOffset, row) {\n\t\tthis.cmd(act.step);\n\t\tif (left > right) return;\n\t\tthis.unhighlight(4, 0);\n\t\tthis.unhighlight(5, 0);\n\t\tthis.highlight(0, 0);\n\n\t\tconst tempArrayID = this.drawArrayAndCopy(left, right, offset, prevOffset, row);\n\t\tthis.unhighlight(0, 0);\n\n\t\tif (left !== right) {\n\t\t\tthis.highlight(2, 0);\n\t\t\tthis.highlight(3, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(2, 0);\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tconst mid = Math.ceil((left + right) / 2);\n\t\t\tconst extraOffset = row < 2 ? 2 * LARGE_OFFSET : 2 * SMALL_OFFSET;\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.leftHelper(left, mid - 1, offset - extraOffset, offset, row + 1);\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tthis.highlight(5, 0);\n\t\t\tthis.leftHelper(mid, right, offset, offset, row + 1);\n\t\t\tthis.unhighlight(5, 0);\n\t\t\tthis.merge(left, right, mid, row, offset, offset - extraOffset, offset, tempArrayID);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, tempArrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\trightHelper(left, right, offset, prevOffset, row) {\n\t\tthis.cmd(act.step);\n\t\tif (left > right) return;\n\t\tthis.unhighlight(4, 0);\n\t\tthis.unhighlight(5, 0);\n\t\tthis.highlight(0, 0);\n\n\t\tconst tempArrayID = this.drawArrayAndCopy(left, right, offset, prevOffset, row);\n\t\tthis.unhighlight(0, 0);\n\n\t\tif (left !== right) {\n\t\t\tthis.highlight(2, 0);\n\t\t\tthis.highlight(3, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(2, 0);\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tconst mid = Math.ceil((left + right) / 2);\n\t\t\tconst extraOffset = row < 2 ? 2 * LARGE_OFFSET : 2 * SMALL_OFFSET;\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.rightHelper(left, mid - 1, offset, offset, row + 1);\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tthis.highlight(5, 0);\n\t\t\tthis.rightHelper(mid, right, offset + extraOffset, offset, row + 1);\n\t\t\tthis.unhighlight(5, 0);\n\t\t\tthis.merge(left, right, mid, row, offset, offset, offset + extraOffset, tempArrayID);\n\t\t} else {\n\t\t\tthis.cmd(act.setBackgroundColor, tempArrayID[left], '#2ECC71');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tdrawArrayAndCopy(left, right, offset, prevOffset, row) {\n\t\tconst tempArrayID = [];\n\n\t\t// Display subarray\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tconst xPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X + offset;\n\t\t\tconst yPos = ARRAY_START_Y + row * ARRAY_LINE_SPACING;\n\t\t\ttempArrayID[i] = this.nextIndex;\n\t\t\tthis.arrayID.push(this.nextIndex);\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\t'',\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txPos,\n\t\t\t\tyPos,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t// Copy elements from big array to current subarray\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\tthis.copyData(\n\t\t\t\ti,\n\t\t\t\ti,\n\t\t\t\tprevOffset,\n\t\t\t\toffset,\n\t\t\t\trow - 1,\n\t\t\t\trow,\n\t\t\t\tthis.displayData[i],\n\t\t\t\ttempArrayID[i],\n\t\t\t\t-1,\n\t\t\t);\n\t\t}\n\n\t\treturn tempArrayID;\n\t}\n\n\tmerge(left, right, mid, row, currOffset, leftOffset, rightOffset, currArrayID) {\n\t\tconst tempArray = new Array(this.arrayData.length); // Temporary array to store data for sorting\n\t\tconst tempDisplay = new Array(this.arrayData.length);\n\n\t\t// Copy data to temporary array\n\t\tfor (let i = left; i <= right; i++) {\n\t\t\ttempArray[i] = this.arrayData[i];\n\t\t\ttempDisplay[i] = this.displayData[i];\n\t\t}\n\n\t\tthis.highlight(6, 0);\n\n\t\t// Create pointers\n\t\tconst bottomYPos = ARRAY_START_Y + (row + 1) * ARRAY_LINE_SPACING;\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst iXPos = left * ARRAY_ELEM_WIDTH + ARRAY_START_X + leftOffset;\n\t\tthis.cmd(act.createHighlightCircle, iPointerID, '#0000FF', iXPos, bottomYPos);\n\t\tconst jPointerID = this.nextIndex++;\n\t\tconst jXPos = mid * ARRAY_ELEM_WIDTH + ARRAY_START_X + rightOffset;\n\t\tthis.cmd(act.createHighlightCircle, jPointerID, '#0000FF', jXPos, bottomYPos);\n\t\tconst kPointerID = this.nextIndex++;\n\t\tconst kXPos = left * ARRAY_ELEM_WIDTH + ARRAY_START_X + currOffset;\n\t\tconst topYPos = ARRAY_START_Y + row * ARRAY_LINE_SPACING;\n\t\tthis.cmd(act.createHighlightCircle, kPointerID, '#0000FF', kXPos, topYPos);\n\t\tthis.cmd(act.step);\n\n\t\tthis.unhighlight(6, 0);\n\t\tthis.highlight(7, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(7, 0);\n\t\t// Merge data and animate\n\t\tlet i = left;\n\t\tlet j = mid;\n\t\tlet k = left;\n\t\twhile (i < mid && j <= right) {\n\t\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + ++this.compCount);\n\t\t\tthis.highlight(8, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(8, 0);\n\t\t\tif (tempArray[i] <= tempArray[j]) {\n\t\t\t\tthis.highlight(9, 0);\n\t\t\t\tthis.copyData(\n\t\t\t\t\ti,\n\t\t\t\t\tk,\n\t\t\t\t\tleftOffset,\n\t\t\t\t\tcurrOffset,\n\t\t\t\t\trow + 1,\n\t\t\t\t\trow,\n\t\t\t\t\ttempDisplay[i],\n\t\t\t\t\tcurrArrayID[k],\n\t\t\t\t\tiPointerID,\n\t\t\t\t);\n\t\t\t\tthis.unhighlight(9, 0);\n\t\t\t\tthis.arrayData[k] = tempArray[i];\n\t\t\t\tthis.displayData[k] = tempDisplay[i];\n\t\t\t\ti++;\n\t\t\t\tthis.highlight(10, 0);\n\t\t\t\tif (i < mid) {\n\t\t\t\t\tthis.movePointer(i, row + 1, leftOffset, iPointerID);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t} else {\n\t\t\t\tthis.highlight(11, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(11, 0);\n\t\t\t\tthis.highlight(12, 0);\n\t\t\t\tthis.copyData(\n\t\t\t\t\tj,\n\t\t\t\t\tk,\n\t\t\t\t\trightOffset,\n\t\t\t\t\tcurrOffset,\n\t\t\t\t\trow + 1,\n\t\t\t\t\trow,\n\t\t\t\t\ttempDisplay[j],\n\t\t\t\t\tcurrArrayID[k],\n\t\t\t\t\tjPointerID,\n\t\t\t\t);\n\t\t\t\tthis.unhighlight(12, 0);\n\t\t\t\tthis.arrayData[k] = tempArray[j];\n\t\t\t\tthis.displayData[k] = tempDisplay[j];\n\t\t\t\tj++;\n\t\t\t\tthis.highlight(13, 0);\n\t\t\t\tif (j <= right) {\n\t\t\t\t\tthis.movePointer(j, row + 1, rightOffset, jPointerID);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.unhighlight(13, 0);\n\t\t\t}\n\t\t\tk++;\n\t\t\tthis.highlight(15, 0);\n\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(15, 0);\n\t\t}\n\t\tthis.highlight(17, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(17, 0);\n\t\twhile (i < mid) {\n\t\t\tthis.highlight(18, 0);\n\t\t\tthis.copyData(\n\t\t\t\ti,\n\t\t\t\tk,\n\t\t\t\tleftOffset,\n\t\t\t\tcurrOffset,\n\t\t\t\trow + 1,\n\t\t\t\trow,\n\t\t\t\ttempDisplay[i],\n\t\t\t\tcurrArrayID[k],\n\t\t\t\tiPointerID,\n\t\t\t);\n\t\t\tthis.unhighlight(18, 0);\n\t\t\tthis.highlight(19, 0);\n\t\t\tthis.highlight(20, 0);\n\t\t\tthis.arrayData[k] = tempArray[i];\n\t\t\tthis.displayData[k] = tempDisplay[i];\n\t\t\tk++;\n\t\t\ti++;\n\t\t\tif (k <= right) {\n\t\t\t\tthis.movePointer(i, row + 1, leftOffset, iPointerID);\n\t\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(19, 0);\n\t\t\tthis.unhighlight(20, 0);\n\t\t}\n\t\tthis.highlight(22, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(22, 0);\n\t\twhile (j <= right) {\n\t\t\tthis.highlight(23, 0);\n\t\t\tthis.copyData(\n\t\t\t\tj,\n\t\t\t\tk,\n\t\t\t\trightOffset,\n\t\t\t\tcurrOffset,\n\t\t\t\trow + 1,\n\t\t\t\trow,\n\t\t\t\ttempDisplay[j],\n\t\t\t\tcurrArrayID[k],\n\t\t\t\tjPointerID,\n\t\t\t);\n\t\t\tthis.unhighlight(23, 0);\n\t\t\tthis.highlight(24, 0);\n\t\t\tthis.highlight(25, 0);\n\t\t\tthis.arrayData[k] = tempArray[j];\n\t\t\tthis.displayData[k] = tempDisplay[j];\n\t\t\tj++;\n\t\t\tk++;\n\t\t\tif (k <= right) {\n\t\t\t\tthis.movePointer(j, row + 1, rightOffset, jPointerID);\n\t\t\t\tthis.movePointer(k, row, currOffset, kPointerID);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.unhighlight(24, 0);\n\t\t\tthis.unhighlight(25, 0);\n\t\t}\n\n\t\t// Delete pointers\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\tthis.cmd(act.delete, kPointerID);\n\t\tthis.cmd(act.step);\n\t}\n\n\tcopyData(fromIndex, toIndex, fromOffset, toOffset, fromRow, toRow, value, cellID, pointerID) {\n\t\tif (pointerID !== -1) {\n\t\t\tthis.cmd(act.setForegroundColor, pointerID, '#FF0000');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t\tconst fromXPos = fromIndex * ARRAY_ELEM_WIDTH + ARRAY_START_X + fromOffset;\n\t\tconst fromYPos = ARRAY_START_Y + fromRow * ARRAY_LINE_SPACING;\n\t\tconst labelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, labelID, value, fromXPos, fromYPos);\n\t\tconst toXPos = toIndex * ARRAY_ELEM_WIDTH + ARRAY_START_X + toOffset;\n\t\tconst toYPos = ARRAY_START_Y + toRow * ARRAY_LINE_SPACING;\n\t\tthis.cmd(act.move, labelID, toXPos, toYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, cellID, value);\n\t\tthis.cmd(act.delete, labelID);\n\t\tif (pointerID !== -1) {\n\t\t\tthis.cmd(act.setBackgroundColor, cellID, '#2ECC71');\n\t\t\tthis.cmd(act.setForegroundColor, pointerID, '#0000FF');\n\t\t\tthis.cmd(act.step);\n\t\t}\n\t}\n\n\tmovePointer(index, row, offset, pointerID) {\n\t\tconst xPos = index * ARRAY_ELEM_WIDTH + ARRAY_START_X + offset;\n\t\tconst yPos = ARRAY_START_Y + row * ARRAY_LINE_SPACING;\n\t\tthis.cmd(act.move, pointerID, xPos, yPos);\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddGroupToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MAX_ARRAY_SIZE = 18;\n\nconst INFO_LABEL_X = 75;\nconst INFO_LABEL_Y = 20;\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 70;\n\nconst ARRAY_ELEM_WIDTH = 50;\nconst ARRAY_ELEM_HEIGHT = 50;\n\nconst BUCKETS_START_X = 100;\nconst BUCKETS_START_Y = 140;\n\nconst BUCKET_ELEM_WIDTH = 50;\nconst BUCKET_ELEM_HEIGHT = 20;\nconst BUCKET_ELEM_SPACING = 15;\n\nconst CODE_START_X = 650;\nconst CODE_START_Y = 140;\n\nexport default class LSDRadix extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\tconst verticalGroup = addGroupToAlgorithmBar(false);\n\n\t\taddLabelToAlgorithmBar(\n\t\t\t'Comma seperated list (e.g. \"3,1,2\"). Max 18 elements & no elements < 0',\n\t\t\tverticalGroup,\n\t\t);\n\n\t\tconst horizontalGroup = addGroupToAlgorithmBar(true, verticalGroup);\n\n\t\t// List text field\n\t\tthis.listField = addControlToAlgorithmBar('Text', '', horizontalGroup);\n\t\tthis.listField.onkeydown = this.returnSubmit(\n\t\t\tthis.listField,\n\t\t\tthis.sortCallback.bind(this),\n\t\t\t60,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.listField);\n\n\t\t// Sort button\n\t\tthis.sortButton = addControlToAlgorithmBar('Button', 'Sort', horizontalGroup);\n\t\tthis.sortButton.onclick = this.sortCallback.bind(this);\n\t\tthis.controls.push(this.sortButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.arrayDisplay = [];\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\t\tthis.bucketsDisplay = [];\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.infoLabelID = this.nextIndex++;\n\n\t\tthis.code = [\n\t\t\t['procedure LSDRadixSort(array):'],\n\t\t\t['     buckets <- list of 10 lists'],\n\t\t\t['     iterations <- length of longest number'],\n\t\t\t['     length <- length of array'],\n\t\t\t['     for i <- 1, iterations do'],\n\t\t\t['          for j <- 0, length - 1 do'],\n\t\t\t['               bucket <- ith digit of array[j]'],\n\t\t\t['               add array[j] to buckets[bucket]'],\n\t\t\t['          end for'],\n\t\t\t['          index <- 0'],\n\t\t\t['          for bucket <- 0, 9 do'],\n\t\t\t[\"               while buckets[bucket] isn't empty\"],\n\t\t\t['                    array[index] <- remove first from buckets[bucket]'],\n\t\t\t['                    index <- index + 1'],\n\t\t\t['               end while'],\n\t\t\t['          end for'],\n\t\t\t['     end for'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.arrayDisplay = [];\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\t\tthis.bucketsDisplay = [];\n\t\tthis.removeCode(this.codeID);\n\t\tthis.iPointerID = this.nextIndex++;\n\t\tthis.jPointerID = this.nextIndex++;\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\t}\n\n\tsortCallback() {\n\t\tconst list = this.listField.value.split(',').filter(x => x !== '');\n\t\tif (\n\t\t\tthis.listField.value !== '' &&\n\t\t\tlist.length <= MAX_ARRAY_SIZE &&\n\t\t\tlist.map(Number).filter(x => Number.isNaN(x)).length <= 0\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tthis.listField.value = '';\n\t\t\tthis.implementAction(this.sort.bind(this), list);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.arrayID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.arrayID[i]);\n\t\t}\n\t\tfor (let i = 0; i < this.bucketsID.length; i++) {\n\t\t\tfor (let j = 0; j < this.bucketsID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.bucketsID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.arrayData = [];\n\t\tthis.arrayID = [];\n\t\tthis.arrayDisplay = [];\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\t\tthis.bucketsDisplay = [];\n\t\treturn this.commands;\n\t}\n\n\tsort(params) {\n\t\tthis.highlight(0, 0);\n\t\tthis.commands = [];\n\n\t\tthis.arrayID = [];\n\t\tthis.arrayData = params\n\t\t\t.map(Number)\n\t\t\t.filter(x => !Number.isNaN(x))\n\t\t\t.slice(0, MAX_ARRAY_SIZE);\n\t\tconst length = this.arrayData.length;\n\t\tconst elemCounts = new Map();\n\t\tconst letterMap = new Map();\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst count = elemCounts.has(this.arrayData[i]) ? elemCounts.get(this.arrayData[i]) : 0;\n\t\t\tif (count > 0) {\n\t\t\t\tletterMap.set(this.arrayData[i], 'a');\n\t\t\t}\n\t\t\telemCounts.set(this.arrayData[i], count + 1);\n\t\t}\n\n\t\t// Create data array\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.arrayID[i] = this.nextIndex++;\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\t\tconst ypos = ARRAY_START_Y;\n\n\t\t\tlet arrayDisplay = this.arrayData[i].toString();\n\t\t\tif (letterMap.has(this.arrayData[i])) {\n\t\t\t\tconst currChar = letterMap.get(this.arrayData[i]);\n\t\t\t\tarrayDisplay += currChar;\n\t\t\t\tletterMap.set(this.arrayData[i], String.fromCharCode(currChar.charCodeAt(0) + 1));\n\t\t\t}\n\t\t\tthis.arrayDisplay[i] = arrayDisplay;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.arrayID[i],\n\t\t\t\tarrayDisplay,\n\t\t\t\tARRAY_ELEM_WIDTH,\n\t\t\t\tARRAY_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t}\n\n\t\tthis.bucketsData = [];\n\t\tthis.bucketsID = [];\n\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(0, 0);\n\t\tthis.highlight(1, 0);\n\n\t\t// Create buckets\n\t\tfor (let i = 0; i < 10; i++) {\n\t\t\tthis.bucketsData[i] = [];\n\t\t\tthis.bucketsID[i] = [];\n\t\t\tthis.bucketsDisplay[i] = [];\n\t\t\tthis.bucketsID[i].push(this.nextIndex++);\n\t\t\tconst xpos = i * ARRAY_ELEM_WIDTH + BUCKETS_START_X;\n\t\t\tconst ypos = BUCKETS_START_Y;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.bucketsID[i][0],\n\t\t\t\ti,\n\t\t\t\tBUCKET_ELEM_WIDTH,\n\t\t\t\tBUCKET_ELEM_HEIGHT,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.bucketsID[i], '#D3D3D3');\n\t\t}\n\n\t\t// Find number of digits\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.infoLabelID,\n\t\t\t'Searching for number with greatest magnitude',\n\t\t\tINFO_LABEL_X,\n\t\t\tINFO_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.iPointerID,\n\t\t\t'#FF0000',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tthis.jPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X + ARRAY_ELEM_WIDTH,\n\t\t\tARRAY_START_Y,\n\t\t);\n\t\tthis.cmd(act.setHighlight, this.jPointerID, 1);\n\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(1, 0);\n\t\tthis.highlight(2, 0);\n\t\tlet greatest = 0;\n\t\tfor (let i = 1; i < this.arrayData.length; i++) {\n\t\t\tthis.movePointers(greatest, i);\n\t\t\tif (this.arrayData[i] > this.arrayData[greatest]) {\n\t\t\t\tgreatest = i;\n\t\t\t\tthis.movePointers(greatest, i);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, this.iPointerID);\n\t\tthis.cmd(act.delete, this.jPointerID);\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[greatest], '#FFFF00');\n\n\t\tlet digits = Math.floor(Math.log10(this.arrayData[greatest])) + 1;\n\t\tdigits = digits || 1; // If greatest is 0, above returns NaN, so set to 1 if that happens\n\n\t\tconst longData = this.arrayData[greatest];\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\tlongData + ' has greatest magnitude, number of digits is ' + digits,\n\t\t);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(2, 0);\n\t\tthis.cmd(act.setBackgroundColor, this.arrayID[greatest], '#FFFFFF');\n\t\tthis.highlight(4, 0);\n\n\t\t// Run algorithm\n\t\tfor (let i = 0; i < digits; i++) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Getting digits at position ' + (i + 1));\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\tthis.iPointerID,\n\t\t\t\t'#0000FF',\n\t\t\t\tARRAY_START_X,\n\t\t\t\tARRAY_START_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.setHighlight, this.iPointerID, 1);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tthis.highlight(5, 0);\n\t\t\tfor (let j = 0; j < this.arrayData.length; j++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.iPointerID,\n\t\t\t\t\tARRAY_START_X + j * ARRAY_ELEM_WIDTH,\n\t\t\t\t\tARRAY_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(5, 0);\n\t\t\t\tthis.highlight(6, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(6, 0);\n\t\t\t\tthis.highlight(7, 0);\n\t\t\t\tconst id = this.nextIndex++;\n\t\t\t\tconst data = this.arrayData[j];\n\t\t\t\tconst display = this.arrayDisplay[j];\n\t\t\t\tconst digit = this.nthDigit(data, i);\n\t\t\t\tthis.bucketsID[digit].push(id);\n\t\t\t\tthis.bucketsData[digit].push(data);\n\t\t\t\tthis.bucketsDisplay[digit].push(display);\n\t\t\t\tconst len = this.bucketsData[digit].length;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tid,\n\t\t\t\t\tdisplay,\n\t\t\t\t\tBUCKET_ELEM_WIDTH,\n\t\t\t\t\tBUCKET_ELEM_HEIGHT,\n\t\t\t\t\tBUCKETS_START_X + digit * BUCKET_ELEM_WIDTH,\n\t\t\t\t\tBUCKETS_START_Y + len * BUCKET_ELEM_HEIGHT + len * BUCKET_ELEM_SPACING,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.connect,\n\t\t\t\t\tthis.bucketsID[digit][this.bucketsID[digit].length - 2],\n\t\t\t\t\tid,\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\t1,\n\t\t\t\t\t'',\n\t\t\t\t\t2,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t}\n\t\t\tthis.cmd(act.delete, this.iPointerID);\n\t\t\tthis.highlight(9, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(9, 0);\n\t\t\tthis.highlight(10, 0);\n\t\t\tlet index = 0;\n\t\t\tthis.cmd(act.step);\n\t\t\tfor (let j = 0; j < 10; j++) {\n\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t\tconst idBucket = this.bucketsID[j];\n\t\t\t\tconst dataBucket = this.bucketsData[j];\n\t\t\t\tconst displayBucket = this.bucketsDisplay[j];\n\t\t\t\tthis.highlight(11, 0);\n\t\t\t\twhile (dataBucket.length) {\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(11, 0);\n\t\t\t\t\tthis.highlight(12, 0);\n\t\t\t\t\tconst labelID = this.nextIndex++;\n\t\t\t\t\tconst nodeID = idBucket.splice(1, 1)[0];\n\t\t\t\t\tconst data = dataBucket.shift();\n\t\t\t\t\tconst display = displayBucket.shift();\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tlabelID,\n\t\t\t\t\t\tdisplay,\n\t\t\t\t\t\tBUCKETS_START_X + j * BUCKET_ELEM_WIDTH,\n\t\t\t\t\t\tBUCKETS_START_Y + BUCKET_ELEM_HEIGHT + BUCKET_ELEM_SPACING,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tlabelID,\n\t\t\t\t\t\tARRAY_START_X + index * ARRAY_ELEM_WIDTH,\n\t\t\t\t\t\tARRAY_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setText, this.arrayID[index], display);\n\t\t\t\t\tthis.cmd(act.delete, labelID);\n\t\t\t\t\tthis.cmd(act.delete, nodeID);\n\t\t\t\t\tthis.unhighlight(12, 0);\n\t\t\t\t\tthis.highlight(13, 0);\n\t\t\t\t\tif (dataBucket.length) {\n\t\t\t\t\t\tthis.cmd(act.connect, idBucket[0], idBucket[1]);\n\t\t\t\t\t\tfor (let k = 1; k < idBucket.length; k++) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\tidBucket[k],\n\t\t\t\t\t\t\t\tBUCKETS_START_X + j * BUCKET_ELEM_WIDTH,\n\t\t\t\t\t\t\t\tBUCKETS_START_Y + k * BUCKET_ELEM_HEIGHT + k * BUCKET_ELEM_SPACING,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.arrayData[index] = data;\n\t\t\t\t\tthis.arrayDisplay[index] = display;\n\t\t\t\t\tindex++;\n\t\t\t\t\tthis.unhighlight(13, 0);\n\t\t\t\t}\n\t\t\t\tthis.unhighlight(11, 0);\n\t\t\t}\n\t\t}\n\n\t\tthis.cmd(act.delete, this.infoLabelID);\n\n\t\treturn this.commands;\n\t}\n\n\tmovePointers(i, j) {\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.iPointerID, iXPos, iYPos);\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.move, this.jPointerID, jXPos, jYPos);\n\t\tthis.cmd(act.step);\n\t}\n\n\tswap(i, j) {\n\t\tconst iLabelID = this.nextIndex++;\n\t\tconst iXPos = i * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst iYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, iLabelID, this.displayData[i], iXPos, iYPos);\n\t\tconst jLabelID = this.nextIndex++;\n\t\tconst jXPos = j * ARRAY_ELEM_WIDTH + ARRAY_START_X;\n\t\tconst jYPos = ARRAY_START_Y;\n\t\tthis.cmd(act.createLabel, jLabelID, this.displayData[j], jXPos, jYPos);\n\t\tthis.cmd(act.setText, this.arrayID[i], '');\n\t\tthis.cmd(act.setText, this.arrayID[j], '');\n\t\tthis.cmd(act.move, iLabelID, jXPos, jYPos);\n\t\tthis.cmd(act.move, jLabelID, iXPos, iYPos);\n\t\tthis.cmd(act.step);\n\t\tthis.cmd(act.setText, this.arrayID[i], this.displayData[j]);\n\t\tthis.cmd(act.setText, this.arrayID[j], this.displayData[i]);\n\t\tthis.cmd(act.delete, iLabelID);\n\t\tthis.cmd(act.delete, jLabelID);\n\t\t// Swap data in backend array\n\t\tlet temp = this.arrayData[i];\n\t\tthis.arrayData[i] = this.arrayData[j];\n\t\tthis.arrayData[j] = temp;\n\t\t// Swap data in display array\n\t\ttemp = this.displayData[i];\n\t\tthis.displayData[i] = this.displayData[j];\n\t\tthis.displayData[j] = temp;\n\t}\n\n\tnthDigit(data, digit) {\n\t\tdata = Math.floor(data / Math.pow(10, digit));\n\t\tdata %= 10;\n\t\treturn data;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\nconst COMP_COUNT_X = 575;\nconst COMP_COUNT_Y = 30;\n\nconst CODE_Y = 120;\n\nexport default class BruteForce extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.codeID = [];\n\n\t\tthis.code = [\n\t\t\t['procedure BruteForce(text, pattern)'],\n\t\t\t['     n <- text.length, m <- pattern.length'],\n\t\t\t['     for i <- 0, n - m'],\n\t\t\t['          j <- 0'],\n\t\t\t['          while j < m and pattern[j] = text[i + j]'],\n\t\t\t['               j <- j + 1'],\n\t\t\t['          if j = m'],\n\t\t\t['               match found at i'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.comparisonCountID = this.nextIndex++;\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.createLabel, this.comparisonCountID, '', COMP_COUNT_X, COMP_COUNT_Y, 0);\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t\tthis.codeID = [];\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\tconst maxRows = text.length - pattern.length + 1;\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tconst labelsX = ARRAY_START_X + text.length * this.cellSize + 10;\n\t\tthis.cmd(act.move, this.comparisonCountID, labelsX, COMP_COUNT_Y);\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tlet xpos, ypos;\n\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\typos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, labelsX, CODE_Y);\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\n\t\tlet i = 0;\n\t\tlet j = 0;\n\t\tlet row = 0;\n\t\tthis.highlight(2, 0);\n\t\tthis.cmd(act.step);\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.highlight(3, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(3, 0);\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#2ECC71');\n\t\t\t\tj++;\n\t\t\t\tthis.highlight(5, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(5, 0);\n\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tif (j < pattern.length) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.highlight(6, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(6, 0);\n\t\t\tif (j !== pattern.length) {\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#E74C3C');\n\t\t\t} else {\n\t\t\t\tthis.highlight(7, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t}\n\t\t\ti++;\n\t\t\tj = 0;\n\t\t\trow++;\n\t\t\tif (i <= text.length - pattern.length) {\n\t\t\t\tconst xpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\tconst ypos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t}\n\t\tthis.unhighlight(2, 0);\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.removeCode(this.codeID);\n\t\tthis.codeID = [];\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.setText, this.comparisonCountID, '');\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\nconst FAILURE_TABLE_START_Y = 100;\n\nconst COMP_COUNT_X = 575;\nconst COMP_COUNT_Y = 30;\n\nconst CODE_Y = 195;\n\nexport default class KMP extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\taddLabelToAlgorithmBar('or');\n\n\t\t// Build Failure Table button\n\t\tthis.bftButton = addControlToAlgorithmBar('Button', 'Build Failure Table');\n\t\tthis.bftButton.onclick = this.buildFailureTableCallback.bind(this);\n\t\tthis.controls.push(this.bftButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.failureTableLabelID = this.nextIndex++;\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\t\tthis.codeID = [];\n\n\t\tthis.comparisonCountID = this.nextIndex++;\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.createLabel, this.comparisonCountID, '', COMP_COUNT_X, COMP_COUNT_Y, 0);\n\n\t\tthis.failureTableCode = [\n\t\t\t['procedure KMPFailureTable(pattern):'],\n\t\t\t['     m <- length of pattern'],\n\t\t\t['     failureTable <- array of length m'],\n\t\t\t['     i <- 0, j <- 1'],\n\t\t\t['     failureTable[0] <- 0'],\n\t\t\t['     while j < m'],\n\t\t\t['          if pattern[i] = pattern[j]'],\n\t\t\t['               failureTable[j] <- i + 1'],\n\t\t\t['               i < i + 1, j <- j + 1'],\n\t\t\t['          else'],\n\t\t\t['               if i = 0'],\n\t\t\t['                    failureTable[j] <- 0'],\n\t\t\t['                    j <- j + 1'],\n\t\t\t['               else'],\n\t\t\t['                    i <- failureTable[i - 1]'],\n\t\t\t['     return failureTable'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.KMPCode = [\n\t\t\t['procedure KMP(text, pattern):'],\n\t\t\t['     initialize failureTable'],\n\t\t\t['     m <- length of pattern, n <- length of text'],\n\t\t\t['     i <- 0, j <- 0'],\n\t\t\t['     while i <= n - m'],\n\t\t\t['          while j < m and text[i + j] = pattern[j]'],\n\t\t\t['               j -> j + 1'],\n\t\t\t['          if j = 0'],\n\t\t\t['               i <- i + 1'],\n\t\t\t['          else'],\n\t\t\t['               if j = m'],\n\t\t\t['                    match found at i'],\n\t\t\t['               shift <- failureTable[j - 1]'],\n\t\t\t['               i <- i + j - shift'],\n\t\t\t['               j <- shift'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.failureTableLabelID = this.nextIndex++;\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\t\tthis.codeID = [];\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tbuildFailureTableCallback() {\n\t\tif (this.patternField.value !== '') {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.onlyBuildFailureTable.bind(this), 0, pattern);\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\tconst maxRows = this.getMaxRows(text, pattern);\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tlet xpos, ypos;\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\typos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst failureTable = this.buildFailureTable(text.length, pattern);\n\t\tthis.removeCode(this.codeID);\n\t\tconst tableStartX = ARRAY_START_X + text.length * this.cellSize + 110;\n\n\t\tthis.codeID = this.addCodeToCanvasBase(\n\t\t\tthis.KMPCode,\n\t\t\tARRAY_START_X + text.length * this.cellSize + 10,\n\t\t\tCODE_Y,\n\t\t);\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tconst fjPointerID = this.nextIndex++;\n\t\tconst f0PointerID = this.nextIndex++;\n\t\tconst f1PointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#0000FF',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tfjPointerID,\n\t\t\t'#FF0000',\n\t\t\tARRAY_START_X,\n\t\t\tARRAY_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tf0PointerID,\n\t\t\t'#FF0000',\n\t\t\ttableStartX,\n\t\t\tFAILURE_TABLE_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tf1PointerID,\n\t\t\t'#FF0000',\n\t\t\ttableStartX,\n\t\t\tFAILURE_TABLE_START_Y + this.cellSize,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(act.setAlpha, fjPointerID, 0);\n\t\tthis.cmd(act.setAlpha, f0PointerID, 0);\n\t\tthis.cmd(act.setAlpha, f1PointerID, 0);\n\n\t\tlet i = 0;\n\t\tlet j = 0;\n\t\tlet row = 0;\n\t\tthis.highlight(4, 0);\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t\tif (k - i < j) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][k], '#FFFF4D');\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.highlight(5, 0);\n\t\t\tthis.cmd(act.setAlpha, fjPointerID, 0);\n\t\t\tthis.cmd(act.setAlpha, f0PointerID, 0);\n\t\t\tthis.cmd(act.setAlpha, f1PointerID, 0);\n\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i + j], '#2ECC71');\n\t\t\t\tj++;\n\t\t\t\tthis.highlight(6, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(6, 0);\n\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\txpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.unhighlight(5, 0);\n\t\t\tif (j < pattern.length) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.highlight(7, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tif (j === 0) {\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.highlight(8, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(8, 0);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][i], '#E74C3C');\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.highlight(9, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(9, 0);\n\t\t\t\tthis.highlight(10, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\tthis.comparisonMatrixID[row][i + j],\n\t\t\t\t\t\t'#E74C3C',\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlight(11, 0);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(11, 0);\n\t\t\t\t}\n\t\t\t\tthis.highlight(12, 0);\n\t\t\t\tconst nextAlignment = failureTable[j - 1];\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setPosition,\n\t\t\t\t\tfjPointerID,\n\t\t\t\t\t(i + j - 1) * this.cellSize + ARRAY_START_X,\n\t\t\t\t\t(row + 1) * this.cellSize + ARRAY_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setPosition,\n\t\t\t\t\tf0PointerID,\n\t\t\t\t\ttableStartX + (j - 1) * this.cellSize,\n\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setPosition,\n\t\t\t\t\tf1PointerID,\n\t\t\t\t\ttableStartX + (j - 1) * this.cellSize,\n\t\t\t\t\tFAILURE_TABLE_START_Y + this.cellSize,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setAlpha, fjPointerID, 1);\n\t\t\t\tthis.cmd(act.setAlpha, f0PointerID, 1);\n\t\t\t\tthis.cmd(act.setAlpha, f1PointerID, 1);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(12, 0);\n\t\t\t\tthis.highlight(13, 0);\n\t\t\t\tthis.highlight(14, 0);\n\t\t\t\ti += j - nextAlignment;\n\t\t\t\tj = nextAlignment;\n\t\t\t}\n\t\t\trow++;\n\t\t\tif (i <= text.length - pattern.length) {\n\t\t\t\txpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(13, 0);\n\t\t\tthis.unhighlight(14, 0);\n\t\t}\n\t\tthis.unhighlight(4, 0);\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\t\tthis.cmd(act.delete, fjPointerID);\n\t\tthis.cmd(act.delete, f0PointerID);\n\t\tthis.cmd(act.delete, f1PointerID);\n\t\treturn this.commands;\n\t}\n\n\tgetMaxRows(text, pattern) {\n\t\tconst failureTable = [];\n\t\tfailureTable[0] = 0;\n\t\tlet i = 0;\n\t\tlet j = 1;\n\t\twhile (j < pattern.length) {\n\t\t\tif (pattern.charAt(i) === pattern.charAt(j)) {\n\t\t\t\ti++;\n\t\t\t\tfailureTable[j] = i;\n\t\t\t\tj++;\n\t\t\t} else {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tfailureTable[j] = i;\n\t\t\t\t\tj++;\n\t\t\t\t} else {\n\t\t\t\t\ti = failureTable[i - 1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ti = 0;\n\t\tj = 0;\n\t\tlet maxRows = 0;\n\t\twhile (i <= text.length - pattern.length) {\n\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\tj++;\n\t\t\t}\n\t\t\tif (j === 0) {\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tconst nextAlignment = failureTable[j - 1];\n\t\t\t\ti += j - nextAlignment;\n\t\t\t\tj = nextAlignment;\n\t\t\t}\n\t\t\tmaxRows++;\n\t\t}\n\t\treturn maxRows;\n\t}\n\n\tonlyBuildFailureTable(textLength, pattern) {\n\t\tthis.commands = [];\n\t\tthis.cellSize = 30;\n\t\tthis.buildFailureTable(textLength, pattern);\n\t\treturn this.commands;\n\t}\n\n\tbuildFailureTable(textLength, pattern) {\n\t\t// Display label\n\t\tconst labelX = ARRAY_START_X + textLength * this.cellSize + 10;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.failureTableLabelID,\n\t\t\t'Failure table:',\n\t\t\tlabelX,\n\t\t\tFAILURE_TABLE_START_Y + 10,\n\t\t\t0,\n\t\t);\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.failureTableCode, labelX, CODE_Y);\n\n\t\tthis.cmd(act.move, this.comparisonCountID, labelX, COMP_COUNT_Y);\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + this.compCount);\n\n\t\t// Display empty failure table\n\t\tconst tableStartX = ARRAY_START_X + textLength * this.cellSize + 110;\n\t\tthis.failureTableCharacterID = new Array(pattern.length);\n\t\tthis.failureTableValueID = new Array(pattern.length);\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\tconst xpos = tableStartX + i * this.cellSize;\n\t\t\tthis.failureTableCharacterID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.failureTableCharacterID[i],\n\t\t\t\tpattern.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.failureTableCharacterID[i], '#D3D3D3');\n\t\t\tthis.failureTableValueID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.failureTableValueID[i],\n\t\t\t\t'',\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\tFAILURE_TABLE_START_Y + this.cellSize,\n\t\t\t);\n\t\t}\n\t\tthis.cmd(act.step);\n\n\t\t// Display pointers and set first value to 0\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tiPointerID,\n\t\t\t'#0000FF',\n\t\t\ttableStartX,\n\t\t\tFAILURE_TABLE_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createHighlightCircle,\n\t\t\tjPointerID,\n\t\t\t'#FF0000',\n\t\t\ttableStartX + this.cellSize,\n\t\t\tFAILURE_TABLE_START_Y,\n\t\t\tthis.cellSize / 2,\n\t\t);\n\t\tthis.cmd(act.setText, this.failureTableValueID[0], 0);\n\t\tthis.highlight(3, 0);\n\t\tthis.highlight(4, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(3, 0);\n\t\tthis.unhighlight(4, 0);\n\n\t\tconst failureTable = [];\n\t\tfailureTable[0] = 0;\n\t\tlet i = 0;\n\t\tlet j = 1;\n\t\tthis.highlight(5, 0);\n\t\twhile (j < pattern.length) {\n\t\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + ++this.compCount);\n\t\t\tthis.highlight(6, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(6, 0);\n\t\t\tif (pattern.charAt(i) === pattern.charAt(j)) {\n\t\t\t\tthis.highlight(7, 0);\n\t\t\t\tthis.highlight(8, 0);\n\t\t\t\ti++;\n\t\t\t\tfailureTable[j] = i;\n\t\t\t\tthis.cmd(act.setText, this.failureTableValueID[j], i);\n\t\t\t\tj++;\n\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tiPointerID,\n\t\t\t\t\t\ttableStartX + i * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tjPointerID,\n\t\t\t\t\t\ttableStartX + j * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.unhighlight(8, 0);\n\t\t\t} else {\n\t\t\t\tthis.highlight(9, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(9, 0);\n\t\t\t\tthis.highlight(10, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tthis.highlight(11, 0);\n\t\t\t\t\tthis.highlight(12, 0);\n\t\t\t\t\tfailureTable[j] = i;\n\t\t\t\t\tthis.cmd(act.setText, this.failureTableValueID[j], i);\n\t\t\t\t\tj++;\n\t\t\t\t\tif (j < pattern.length) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tjPointerID,\n\t\t\t\t\t\t\ttableStartX + j * this.cellSize,\n\t\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(11, 0);\n\t\t\t\t\tthis.unhighlight(12, 0);\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlight(13, 0);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(13, 0);\n\t\t\t\t\tthis.highlight(14, 0);\n\t\t\t\t\ti = failureTable[i - 1];\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tiPointerID,\n\t\t\t\t\t\ttableStartX + i * this.cellSize,\n\t\t\t\t\t\tFAILURE_TABLE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(14, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.unhighlight(5, 0);\n\t\tthis.highlight(15, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(15, 0);\n\n\t\tthis.cmd(act.delete, iPointerID);\n\t\tthis.cmd(act.delete, jPointerID);\n\n\t\t//this.removeCode(this.codeID);\n\t\t//this.codeID = [];\n\n\t\treturn failureTable;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\t\tif (this.failureTableValueID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.failureTableLabelID);\n\t\t}\n\t\tfor (let i = 0; i < this.failureTableCharacterID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.failureTableCharacterID[i]);\n\t\t\tthis.cmd(act.delete, this.failureTableValueID[i]);\n\t\t}\n\n\t\tthis.removeCode(this.codeID);\n\t\tthis.codeID = [];\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.setText, this.comparisonCountID, '');\n\t\tthis.failureTableCharacterID = [];\n\t\tthis.failureTableValueID = [];\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst ARRAY_START_X = 100;\nconst ARRAY_START_Y = 30;\n\nconst MAX_LENGTH = 22;\n\n// const LOWER_A_CHAR_CODE = 97;\n\nconst BASE_LABEL_Y = 45;\nconst CHARACTER_VALUES_LABEL_Y = 60;\nconst TEXT_HASH_LABEL_START_Y = 100;\nconst PATTERN_HASH_LABEL_START_Y = 115;\n\nconst COMP_COUNT_X = 575;\nconst COMP_COUNT_Y = 30;\n\nconst CODE_Y = 180;\n\nexport default class RabinKarp extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\n\t\taddLabelToAlgorithmBar('Text');\n\n\t\t// Text text field\n\t\tthis.textField = addControlToAlgorithmBar('Text', '');\n\t\tthis.textField.onkeydown = this.returnSubmit(\n\t\t\tthis.textField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.textField);\n\n\t\taddLabelToAlgorithmBar('Pattern');\n\n\t\t// Pattern text field\n\t\tthis.patternField = addControlToAlgorithmBar('Text', '');\n\t\tthis.patternField.onkeydown = this.returnSubmit(\n\t\t\tthis.patternField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\tMAX_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.patternField);\n\n\t\t// Find button\n\t\tthis.findButton = addControlToAlgorithmBar('Button', 'Find');\n\t\tthis.findButton.onclick = this.findCallback.bind(this);\n\t\tthis.controls.push(this.findButton);\n\n\t\t//Base value text field\n\t\tthis.baseField = addControlToAlgorithmBar('Base', '');\n\t\tthis.baseField.onkeydown = this.returnSubmit(\n\t\t\tthis.baseField,\n\t\t\tthis.findCallback.bind(this),\n\t\t\t4,\n\t\t\ttrue,\n\t\t);\n\t\tthis.controls.push(this.baseField);\n\n\t\t// Base button\n\t\tthis.baseButton = addControlToAlgorithmBar('Button', 'Change Base');\n\t\tthis.baseButton.onclick = this.baseCallback.bind(this);\n\t\tthis.controls.push(this.baseButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\t// Clear button\n\t\tthis.clearButton = addControlToAlgorithmBar('Button', 'Clear');\n\t\tthis.clearButton.onclick = this.clearCallback.bind(this);\n\t\tthis.controls.push(this.clearButton);\n\t}\n\n\tsetup() {\n\t\tthis.commands = [];\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.baseLabelID = this.nextIndex++;\n\t\tthis.characterValuesLabelID = this.nextIndex++;\n\t\tthis.textHashLabelID = this.nextIndex++;\n\t\tthis.textHashCalculationID = this.nextIndex++;\n\t\tthis.patternHashLabelID = this.nextIndex++;\n\t\tthis.patternHashCalculationID = this.nextIndex++;\n\n\t\tthis.baseValue = 1;\n\n\t\tthis.comparisonCountID = this.nextIndex++;\n\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.createLabel, this.comparisonCountID, '', COMP_COUNT_X, COMP_COUNT_Y, 0);\n\n\t\tthis.code = [\n\t\t\t['procedure RabinKarp(text, pattern)'],\n\t\t\t['     m <- length of pattern, n <- length of text'],\n\t\t\t['     patternHash  rolling hash of pattern'],\n\t\t\t['     textHash  rolling hash of first m characters of text'],\n\t\t\t['     i <- 0'],\n\t\t\t['     while i <= n - m'],\n\t\t\t['          if patternHash = textHash'],\n\t\t\t['               j <- 0'],\n\t\t\t['               while j < m and text[i + j] = pattern[j]'],\n\t\t\t['                    j <- j + 1'],\n\t\t\t['               if j = m'],\n\t\t\t['                    match found at i'],\n\t\t\t['          i <- i + 1'],\n\t\t\t['          if i <= n - m'],\n\t\t\t['               textHash <- new hash of text, from i to i + m'],\n\t\t\t['end procedure'],\n\t\t];\n\t\tthis.codeID = [];\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t}\n\n\treset() {\n\t\tthis.nextIndex = 0;\n\t\tthis.textRowID = [];\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.baseLabelID = this.nextIndex++;\n\t\tthis.characterValuesLabelID = this.nextIndex++;\n\t\tthis.textHashLabelID = this.nextIndex++;\n\t\tthis.textHashCalculationID = this.nextIndex++;\n\t\tthis.patternHashLabelID = this.nextIndex++;\n\t\tthis.patternHashCalculationID = this.nextIndex++;\n\t\tthis.comparisonCountID = this.nextIndex++;\n\t\tthis.compCount = 0;\n\t\tthis.codeID = [];\n\t}\n\n\tfindCallback() {\n\t\tif (\n\t\t\tthis.textField.value !== '' &&\n\t\t\tthis.patternField.value !== '' &&\n\t\t\tthis.textField.value.length >= this.patternField.value.length\n\t\t) {\n\t\t\tthis.implementAction(this.clear.bind(this));\n\t\t\tconst text = this.textField.value;\n\t\t\tconst pattern = this.patternField.value;\n\t\t\tthis.textField.value = '';\n\t\t\tthis.patternField.value = '';\n\t\t\tthis.implementAction(this.find.bind(this), text, pattern);\n\t\t}\n\t}\n\n\tbaseCallback() {\n\t\tconst val = parseInt(this.baseField.value);\n\t\tif (this.baseField.value !== '' && val !== 0) {\n\t\t\tthis.baseField.value = '';\n\t\t\tthis.baseValue = val;\n\t\t}\n\t}\n\n\tclearCallback() {\n\t\tthis.implementAction(this.clear.bind(this));\n\t}\n\n\tfind(text, pattern) {\n\t\tthis.commands = [];\n\n\t\t// Filter non-letters from string and make lower case\n\t\ttext = text.replace(/[^a-zA-Z]/g, '').toLowerCase();\n\t\tpattern = pattern.replace(/[^a-zA-Z]/g, '').toLowerCase();\n\n\t\tconst maxRows = text.length - pattern.length + 1;\n\t\tif (maxRows <= 14) {\n\t\t\tthis.cellSize = 30;\n\t\t} else if (maxRows <= 17) {\n\t\t\tthis.cellSize = 25;\n\t\t} else {\n\t\t\tthis.cellSize = 20;\n\t\t}\n\n\t\tthis.textRowID = new Array(text.length);\n\t\tthis.comparisonMatrixID = new Array(maxRows);\n\t\tfor (let i = 0; i < maxRows; i++) {\n\t\t\tthis.comparisonMatrixID[i] = new Array(text.length);\n\t\t}\n\n\t\tlet xpos, ypos;\n\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\typos = ARRAY_START_Y;\n\t\t\tthis.textRowID[i] = this.nextIndex;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.nextIndex,\n\t\t\t\ttext.charAt(i),\n\t\t\t\tthis.cellSize,\n\t\t\t\tthis.cellSize,\n\t\t\t\txpos,\n\t\t\t\typos,\n\t\t\t);\n\t\t\tthis.cmd(act.setBackgroundColor, this.nextIndex++, '#D3D3D3');\n\t\t}\n\n\t\tfor (let row = 0; row < maxRows; row++) {\n\t\t\tfor (let col = 0; col < text.length; col++) {\n\t\t\t\txpos = col * this.cellSize + ARRAY_START_X;\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.comparisonMatrixID[row][col] = this.nextIndex;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t'',\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\tthis.cellSize,\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst labelsX = ARRAY_START_X + text.length * this.cellSize + 10;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.baseLabelID,\n\t\t\t`Base constant = ${this.baseValue}`,\n\t\t\tlabelsX,\n\t\t\tBASE_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.characterValuesLabelID,\n\t\t\t'Character values: a = 0, b = 1, ..., z = 25',\n\t\t\tlabelsX,\n\t\t\tCHARACTER_VALUES_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.textHashLabelID,\n\t\t\t'Text hash:',\n\t\t\tlabelsX,\n\t\t\tTEXT_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.patternHashLabelID,\n\t\t\t'Pattern hash:',\n\t\t\tlabelsX,\n\t\t\tPATTERN_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.move, this.comparisonCountID, labelsX, COMP_COUNT_Y);\n\t\tthis.cmd(act.setText, this.comparisonCountID, 'Comparison Count: ' + this.compCount);\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, labelsX, CODE_Y);\n\n\t\tlet textCalculation = '';\n\t\tlet textHash = 0;\n\t\tlet patternCalculation = '';\n\t\tlet patternHash = 0;\n\t\tconst base = Math.pow(this.baseValue, pattern.length - 1);\n\t\tlet runningBase = base;\n\t\tfor (let i = 0; i < pattern.length; i++) {\n\t\t\ttextHash += (text.charCodeAt(i) - 97) * runningBase;\n\t\t\ttextCalculation += `(${text.charAt(i)} * ${runningBase}) + `;\n\t\t\tpatternHash += (pattern.charCodeAt(i) - 97) * runningBase;\n\t\t\tpatternCalculation += `(${pattern.charAt(i)} * ${runningBase}) + `;\n\t\t\trunningBase /= this.baseValue;\n\t\t}\n\t\ttextCalculation =\n\t\t\ttextCalculation.substring(0, textCalculation.length - 2) + ' = ' + textHash;\n\t\tpatternCalculation =\n\t\t\tpatternCalculation.substring(0, patternCalculation.length - 2) + ' = ' + patternHash;\n\t\tconst calculationsX = ARRAY_START_X + text.length * this.cellSize + 100;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.textHashCalculationID,\n\t\t\ttextCalculation,\n\t\t\tcalculationsX,\n\t\t\tTEXT_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.patternHashCalculationID,\n\t\t\tpatternCalculation,\n\t\t\tcalculationsX,\n\t\t\tPATTERN_HASH_LABEL_START_Y,\n\t\t\t0,\n\t\t);\n\n\t\tconst iPointerID = this.nextIndex++;\n\t\tconst jPointerID = this.nextIndex++;\n\n\t\tthis.highlight(2, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(2, 0);\n\t\tthis.highlight(3, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(3, 0);\n\n\t\tthis.highlight(5, 0);\n\t\tlet row = 0;\n\t\tfor (let i = 0; i <= text.length - pattern.length; i++) {\n\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.comparisonMatrixID[row][k],\n\t\t\t\t\tpattern.charAt(k - i),\n\t\t\t\t\txpos,\n\t\t\t\t\typos,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.highlight(6, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tif (patternHash === textHash) {\n\t\t\t\tthis.unhighlight(6, 0);\n\t\t\t\tthis.highlight(7, 0);\n\t\t\t\txpos = i * this.cellSize + ARRAY_START_X;\n\t\t\t\tthis.cmd(act.createHighlightCircle, iPointerID, '#0000FF', xpos, ARRAY_START_Y);\n\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\tthis.cmd(act.createHighlightCircle, jPointerID, '#0000FF', xpos, ypos);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.highlight(8, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tlet j = 0;\n\t\t\t\twhile (j < pattern.length && pattern.charAt(j) === text.charAt(i + j)) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\tthis.comparisonMatrixID[row][i + j],\n\t\t\t\t\t\t'#2ECC71',\n\t\t\t\t\t);\n\t\t\t\t\tj++;\n\t\t\t\t\tthis.highlight(9, 0);\n\t\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\t\txpos = (i + j) * this.cellSize + ARRAY_START_X;\n\t\t\t\t\t\tthis.cmd(act.move, iPointerID, xpos, ARRAY_START_Y);\n\t\t\t\t\t\typos = (row + 1) * this.cellSize + ARRAY_START_Y;\n\t\t\t\t\t\tthis.cmd(act.move, jPointerID, xpos, ypos);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(9, 0);\n\t\t\t\t}\n\t\t\t\tthis.unhighlight(8, 0);\n\t\t\t\tthis.highlight(10, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t\tif (j !== pattern.length) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.comparisonCountID,\n\t\t\t\t\t\t'Comparison Count: ' + ++this.compCount,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\tthis.comparisonMatrixID[row][i + j],\n\t\t\t\t\t\t'#E74C3C',\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlight(11, 0);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(11, 0);\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.delete, iPointerID);\n\t\t\t\tthis.cmd(act.delete, jPointerID);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t} else {\n\t\t\t\tfor (let k = i; k < i + pattern.length; k++) {\n\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.comparisonMatrixID[row][k], '#FFFF4D');\n\t\t\t\t}\n\t\t\t\tthis.unhighlight(6, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.highlight(12, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(12, 0);\n\t\t\tthis.highlight(13, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(13, 0);\n\t\t\tif (i < text.length - pattern.length) {\n\t\t\t\tthis.highlight(14, 0);\n\t\t\t\ttextHash =\n\t\t\t\t\tthis.baseValue * (textHash - base * (text.charCodeAt(i) - 97)) +\n\t\t\t\t\t(text.charCodeAt(i + pattern.length) - 97);\n\t\t\t\ttextCalculation = '';\n\t\t\t\trunningBase = base;\n\t\t\t\tfor (let k = 0; k < pattern.length; k++) {\n\t\t\t\t\ttextCalculation += `(${text.charAt(k + i + 1)} * ${runningBase}) + `; //text.charAt(k + i + 1) + ' + ';\n\t\t\t\t\trunningBase /= this.baseValue;\n\t\t\t\t}\n\t\t\t\ttextCalculation =\n\t\t\t\t\ttextCalculation.substring(0, textCalculation.length - 2) + ' = ' + textHash;\n\t\t\t\tthis.cmd(act.setText, this.textHashCalculationID, textCalculation);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(14, 0);\n\t\t\t}\n\t\t\trow++;\n\t\t}\n\t\tthis.unhighlight(5, 0);\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tthis.commands = [];\n\t\tif (this.textRowID.length !== 0) {\n\t\t\tthis.cmd(act.delete, this.baseLabelID);\n\t\t\tthis.cmd(act.delete, this.characterValuesLabelID);\n\t\t\tthis.cmd(act.delete, this.textHashLabelID);\n\t\t\tthis.cmd(act.delete, this.textHashCalculationID);\n\t\t\tthis.cmd(act.delete, this.patternHashLabelID);\n\t\t\tthis.cmd(act.delete, this.patternHashCalculationID);\n\t\t}\n\t\tfor (let i = 0; i < this.textRowID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.textRowID[i]);\n\t\t}\n\t\tthis.textRowID = [];\n\t\tfor (let i = 0; i < this.comparisonMatrixID.length; i++) {\n\t\t\tfor (let j = 0; j < this.comparisonMatrixID[i].length; j++) {\n\t\t\t\tthis.cmd(act.delete, this.comparisonMatrixID[i][j]);\n\t\t\t}\n\t\t}\n\t\tthis.comparisonMatrixID = [];\n\t\tthis.compCount = 0;\n\t\tthis.cmd(act.setText, this.comparisonCountID, '');\n\t\tthis.removeCode(this.codeID);\n\t\tthis.codeID = [];\n\n\t\treturn this.commands;\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { BFS_DFS_ADJ_LIST } from './util/GraphValues';\nimport Graph from './Graph.js';\nimport { act } from '../anim/AnimationMain';\n\nconst BFS_QUEUE_HEAD_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst LIST_START_X = 30;\nconst LIST_START_Y = 65;\nconst LIST_SPACING = 20;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 115;\n\nconst CURRENT_VERTEX_LABEL_X = 25;\nconst CURRENT_VERTEX_LABEL_Y = 140;\nconst CURRENT_VERTEX_X = 115;\nconst CURRENT_VERTEX_Y = 146;\n\nconst QUEUE_START_X = 30;\nconst QUEUE_START_Y = 190;\nconst QUEUE_SPACING = 20;\n\nconst CODE_START_X = 25;\nconst CODE_START_Y = 250;\n\nexport default class BFS extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, BFS_DFS_ADJ_LIST);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.startField.size = 2;\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.commands = [];\n\t\tthis.messageID = [];\n\n\t\tthis.visited = [];\n\n\t\tthis.queueID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.code = [\n\t\t\t['procedure BFS(Vertex S)'],\n\t\t\t['initialize VisitedSet, VS'],\n\t\t\t['initialize Queue, Q'],\n\t\t\t['add S to Q'],\n\t\t\t['while Q is not empty'],\n\t\t\t['     v <- remove from Q'],\n\t\t\t['          for all w adjacent to v'],\n\t\t\t['               if w not in VS'],\n\t\t\t['                    add w to Q'],\n\t\t\t['                    mark w as visited in VS'],\n\t\t];\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'List:',\n\t\t\tLIST_START_X - 5,\n\t\t\tLIST_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current vertex:',\n\t\t\tCURRENT_VERTEX_LABEL_X,\n\t\t\tCURRENT_VERTEX_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Queue:',\n\t\t\tQUEUE_START_X - 5,\n\t\t\tQUEUE_START_Y - 25,\n\t\t\t0,\n\t\t);\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.listID = [];\n\t\tthis.messageID = [];\n\t\tthis.visitedID = [];\n\t}\n\n\tstartCallback() {\n\t\tif (this.startField.value !== '') {\n\t\t\tlet startvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size) {\n\t\t\t\tthis.implementAction(this.doBFS.bind(this), startvalue);\n\t\t\t}\n\t\t}\n\t}\n\n\tdoBFS(startVetex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.queue = [];\n\t\tthis.queueID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.rebuildEdges();\n\n\t\tlet vertex = startVetex;\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Enqueueing ' + this.toStr(vertex) + ' and adding to visited set',\n\t\t);\n\t\tthis.visited[vertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(vertex),\n\t\t\tVISITED_START_X,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[vertex], VISITED_COLOR);\n\t\tthis.queue.push(vertex);\n\t\tthis.queueID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(vertex),\n\t\t\tQUEUE_START_X,\n\t\t\tQUEUE_START_Y,\n\t\t);\n\t\tthis.highlight(1, 0);\n\t\tthis.highlight(2, 0);\n\t\tthis.highlight(3, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(1, 0);\n\t\tthis.unhighlight(2, 0);\n\t\tthis.unhighlight(3, 0);\n\t\tthis.highlight(4, 0);\n\t\twhile (this.queue.length > 0 && this.listID.length < this.size) {\n\t\t\tvertex = this.queue.shift();\n\t\t\tthis.highlight(5, 0);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'Dequeueing ' + this.toStr(vertex) + ' and adding to list',\n\t\t\t);\n\n\t\t\tthis.cmd(act.setTextColor, this.queueID[0], BFS_QUEUE_HEAD_COLOR);\n\t\t\tthis.cmd(act.move, this.queueID[0], CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\t\tfor (let i = 1; i < this.queueID.length; i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.queueID[i],\n\t\t\t\t\tQUEUE_START_X + (i - 1) * QUEUE_SPACING,\n\t\t\t\t\tQUEUE_START_Y,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.listID.push(this.nextIndex);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tthis.toStr(vertex),\n\t\t\t\tLIST_START_X + (this.listID.length - 1) * LIST_SPACING,\n\t\t\t\tLIST_START_Y,\n\t\t\t);\n\n\t\t\tthis.visitVertex(vertex);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(5, 0);\n\t\t\tthis.highlight(6, 0);\n\n\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\tif (this.adj_matrix[vertex][neighbor] > 0) {\n\t\t\t\t\tthis.highlightEdge(vertex, neighbor, 1);\n\t\t\t\t\tthis.highlight(7, 0);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tif (!this.visited[neighbor]) {\n\t\t\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\t\t\tthis.highlight(8, 0);\n\t\t\t\t\t\tthis.highlight(9, 0);\n\t\t\t\t\t\tthis.visited[neighbor] = true;\n\t\t\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t' has not yet been visited, enqueueing and adding to visited set',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * LIST_SPACING,\n\t\t\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[neighbor], VISITED_COLOR);\n\t\t\t\t\t\tthis.queue.push(neighbor);\n\t\t\t\t\t\tthis.queueID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tQUEUE_START_X + (this.queue.length - 1) * QUEUE_SPACING,\n\t\t\t\t\t\t\tQUEUE_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) + ' has already been visited, skipping',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(8, 0);\n\t\t\t\t\tthis.unhighlight(9, 0);\n\t\t\t\t\tthis.highlightEdge(vertex, neighbor, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.unhighlight(6, 0);\n\n\t\t\tthis.cmd(act.delete, this.queueID.shift());\n\n\t\t\tthis.leaveVertex();\n\t\t}\n\t\tthis.unhighlight(4, 0);\n\n\t\tif (this.queue.length > 0) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'All vertices have been visited, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.visited[i] = false;\n\t\t}\n\t\tfor (let i = 0; i < this.listID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.listID[i]);\n\t\t}\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n\taddRadioButtonGroupToAlgorithmBar,\n} from './Algorithm.js';\nimport { BFS_DFS_ADJ_LIST } from './util/GraphValues';\nimport Graph from './Graph.js';\nimport { act } from '../anim/AnimationMain';\n\nconst DFS_STACK_TOP_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst LIST_START_X = 30;\nconst LIST_START_Y = 70;\nconst LIST_SPACING = 20;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 120;\n\nconst CURRENT_VERTEX_LABEL_X = 25;\nconst CURRENT_VERTEX_LABEL_Y = 145;\nconst CURRENT_VERTEX_X = 115;\nconst CURRENT_VERTEX_Y = 151;\n\nconst STACK_LABEL_X = 25;\nconst STACK_LABEL_Y = 170;\n\nconst STACK_START_X = 40;\nconst SMALL_STACK_START_Y = 335;\nconst LARGE_STACK_START_Y = 465;\nconst SMALL_STACK_SPACING = 20;\nconst LARGE_STACK_SPACING = 16;\n\nconst RECURSION_START_X = 125;\nconst RECURSION_START_Y = 185;\nconst SMALL_RECURSION_SPACING_X = 20;\nconst LARGE_RECURSION_SPACING_X = 10;\nconst SMALL_RECURSION_SPACING_Y = 20;\nconst LARGE_RECURSION_SPACING_Y = 15;\n\nconst CODE_START_X = 250;\nconst CODE_START_Y = 170;\n\nexport default class DFS extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, BFS_DFS_ADJ_LIST);\n\t\tthis.addControls();\n\t\tthis.physicalStack = false;\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tconst radioButtonList = addRadioButtonGroupToAlgorithmBar(\n\t\t\t['Recursion', 'Stack'],\n\t\t\t'StackType',\n\t\t);\n\n\t\tthis.recursiveStackButton = radioButtonList[0];\n\t\tthis.recursiveStackButton.onclick = this.stackCallback.bind(this, false);\n\t\tthis.recursiveStackButton.checked = true;\n\t\tthis.controls.push(this.recursiveStackButton);\n\n\t\tthis.physicalStackButton = radioButtonList[1];\n\t\tthis.physicalStackButton.onclick = this.stackCallback.bind(this, true);\n\t\tthis.controls.push(this.physicalStackButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.commands = [];\n\t\tthis.messageID = [];\n\n\t\tthis.visited = [];\n\n\t\tthis.stackID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'List:',\n\t\t\tLIST_START_X - 5,\n\t\t\tLIST_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current vertex:',\n\t\t\tCURRENT_VERTEX_LABEL_X,\n\t\t\tCURRENT_VERTEX_LABEL_Y,\n\t\t\t0,\n\t\t);\n\n\t\tthis.stackLabelID = this.nextIndex++;\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.stackLabelID,\n\t\t\tthis.physicalStack ? 'Stack:' : 'Recursive stack:   Recursive calls:',\n\t\t\tSTACK_LABEL_X,\n\t\t\tSTACK_LABEL_Y,\n\t\t\t0,\n\t\t);\n\n\t\tthis.recCode = [\n\t\t\t['Procedure DFS(Vertex s, Set VS, List L):'],\n\t\t\t['     add s to VS, L'],\n\t\t\t['     for all v adjacent to s'],\n\t\t\t['          if v not in VS'],\n\t\t\t['               do DFS(v, VS, L)'],\n\t\t];\n\n\t\tthis.itCode = [\n\t\t\t['Procedure DFS(Vertex s, Set VS, List L):'],\n\t\t\t['     Initialize Stack K'],\n\t\t\t['     add s to K, VS'],\n\t\t\t['     while K not empty'],\n\t\t\t['          v <- remove from K'],\n\t\t\t['          add v to L'],\n\t\t\t['          for all w adjacent to v'],\n\t\t\t['               if w not in VS'],\n\t\t\t['                    add w to K, VS'],\n\t\t];\n\n\t\tif (this.physicalStack) {\n\t\t\tthis.codeID = this.addCodeToCanvasBase(this.itCode, CODE_START_X, CODE_START_Y);\n\t\t} else {\n\t\t\tthis.codeID = this.addCodeToCanvasBase(this.recCode, CODE_START_X, CODE_START_Y);\n\t\t}\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\t\tthis.messageID = [];\n\t}\n\n\tstackCallback(physical) {\n\t\tif (this.physicalStack !== physical) {\n\t\t\tthis.physicalStack = physical;\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.setup(this.adj_matrix);\n\t\t}\n\t}\n\n\tstartCallback() {\n\t\tif (this.startField.value !== '') {\n\t\t\tlet startvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size) {\n\t\t\t\tif (this.physicalStack) {\n\t\t\t\t\tthis.implementAction(this.doDFSStack.bind(this), startvalue);\n\t\t\t\t} else {\n\t\t\t\t\tthis.implementAction(this.doDFSRecursive.bind(this), startvalue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdoDFSStack(startVertex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.visited = new Array(this.size);\n\t\tthis.stack = [];\n\t\tthis.stackID = [];\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\t\tthis.stackStartY = this.isLarge ? LARGE_STACK_START_Y : SMALL_STACK_START_Y;\n\t\tthis.stackSpacing = this.isLarge ? LARGE_STACK_SPACING : SMALL_STACK_SPACING;\n\n\t\tthis.rebuildEdges();\n\n\t\tlet vertex = startVertex;\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Pushing ' + this.toStr(vertex) + ' and adding to visited set',\n\t\t);\n\t\tthis.highlight(2, 0);\n\t\tlet vertexID = this.nextIndex++;\n\t\tthis.visited[vertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(vertex),\n\t\t\tVISITED_START_X,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[vertex], VISITED_COLOR);\n\t\tthis.stack.push(vertex);\n\t\tthis.stackID.push(vertexID);\n\t\tthis.cmd(act.createLabel, vertexID, this.toStr(vertex), STACK_START_X, this.stackStartY);\n\t\tthis.cmd(act.step);\n\n\t\tthis.unhighlight(2, 0);\n\t\tthis.highlight(3, 0);\n\t\twhile (this.stack.length > 0 && this.listID.length < this.size) {\n\t\t\tvertex = this.stack.pop();\n\t\t\tvertexID = this.stackID.pop();\n\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.highlight(5, 0);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'Popping ' + this.toStr(vertex) + ' and adding to list',\n\t\t\t);\n\n\t\t\tthis.cmd(act.setTextColor, vertexID, DFS_STACK_TOP_COLOR);\n\t\t\tthis.cmd(act.move, vertexID, CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\n\t\t\tthis.listID.push(this.nextIndex);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.nextIndex++,\n\t\t\t\tthis.toStr(vertex),\n\t\t\t\tLIST_START_X + (this.listID.length - 1) * LIST_SPACING,\n\t\t\t\tLIST_START_Y,\n\t\t\t);\n\n\t\t\tthis.visitVertex(vertex);\n\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.unhighlight(4, 0);\n\t\t\tthis.unhighlight(5, 0);\n\n\t\t\tthis.highlight(6, 0);\n\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\tif (this.adj_matrix[vertex][neighbor] > 0) {\n\t\t\t\t\tthis.highlightEdge(vertex, neighbor, 1);\n\t\t\t\t\tthis.highlight(7, 0);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tif (!this.visited[neighbor]) {\n\t\t\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\t\t\tthis.highlight(8, 0);\n\t\t\t\t\t\tthis.visited[neighbor] = true;\n\t\t\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t' has not yet been visited, pushing and adding to visited set',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * LIST_SPACING,\n\t\t\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[neighbor], VISITED_COLOR);\n\t\t\t\t\t\tthis.stack.push(neighbor);\n\t\t\t\t\t\tthis.stackID.push(this.nextIndex);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\tthis.toStr(neighbor),\n\t\t\t\t\t\t\tSTACK_START_X,\n\t\t\t\t\t\t\tthis.stackStartY - (this.stack.length - 1) * this.stackSpacing,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\tthis.toStr(neighbor) + ' has already been visited, skipping',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(8, 0);\n\t\t\t\t\t// this.highlightEdge(vertex, neighbor, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.unhighlight(6, 0);\n\n\t\t\tthis.cmd(act.delete, vertexID);\n\n\t\t\tthis.leaveVertex();\n\t\t}\n\t\tthis.unhighlight(3, 0);\n\n\t\tif (this.stack.length > 0) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'All vertices have been visited, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Stack is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tdoDFSRecursive(startVertex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.visited = new Array(this.size);\n\t\tthis.listID = [];\n\t\tthis.visitedID = [];\n\t\tthis.stackStartY = this.isLarge ? LARGE_STACK_START_Y : SMALL_STACK_START_Y;\n\t\tthis.stackSpacing = this.isLarge ? LARGE_STACK_SPACING : SMALL_STACK_SPACING;\n\t\tthis.recursionSpacingX = this.isLarge\n\t\t\t? LARGE_RECURSION_SPACING_X\n\t\t\t: SMALL_RECURSION_SPACING_X;\n\t\tthis.recursionSpacingY = this.isLarge\n\t\t\t? LARGE_RECURSION_SPACING_Y\n\t\t\t: SMALL_RECURSION_SPACING_Y;\n\t\tthis.currentID = this.nextIndex++;\n\n\t\tthis.rebuildEdges();\n\n\t\tthis.cmd(act.setText, this.infoLabelID, '');\n\n\t\tconst vertex = startVertex;\n\n\t\tthis.cmd(act.createLabel, this.currentID, '', CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\tthis.cmd(act.setTextColor, this.currentID, DFS_STACK_TOP_COLOR);\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'About to recurse to ' + this.toStr(startVertex));\n\t\tthis.cmd(act.step);\n\n\t\tthis.visitVertex(vertex);\n\n\t\tthis.dfsVisit(vertex, RECURSION_START_X);\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Returned from ' + this.toStr(vertex) + ', done');\n\t\tthis.cmd(act.delete, this.currentID);\n\t\tthis.leaveVertex();\n\n\t\treturn this.commands;\n\t}\n\n\tdfsVisit(currVertex, messageX) {\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Visiting ' + this.toStr(currVertex) + ' and adding to list',\n\t\t);\n\t\tthis.cmd(act.setText, this.currentID, this.toStr(currVertex));\n\n\t\tthis.stackID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(currVertex),\n\t\t\tSTACK_START_X,\n\t\t\tthis.stackStartY - (this.stackID.length - 1) * this.stackSpacing,\n\t\t);\n\n\t\tconst nextMessage = this.nextIndex++;\n\t\tthis.messageID.push(nextMessage);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tnextMessage,\n\t\t\t'DFS(' + this.toStr(currVertex) + ')',\n\t\t\tmessageX,\n\t\t\tRECURSION_START_Y + (this.messageID.length - 1) * this.recursionSpacingY,\n\t\t\t0,\n\t\t);\n\n\t\tthis.listID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(currVertex),\n\t\t\tLIST_START_X + (this.listID.length - 1) * LIST_SPACING,\n\t\t\tLIST_START_Y,\n\t\t);\n\n\t\tthis.visited[currVertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(currVertex),\n\t\t\tVISITED_START_X + (this.visitedID.length - 1) * LIST_SPACING,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[currVertex], VISITED_COLOR);\n\t\tthis.highlight(1, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(1, 0);\n\n\t\tthis.highlight(2, 0);\n\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\tif (this.adj_matrix[currVertex][neighbor] > 0) {\n\t\t\t\tthis.highlight(3, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tif (this.visited[neighbor]) {\n\t\t\t\t\tthis.unhighlight(3, 0);\n\t\t\t\t\t// this.highlightEdge(currVertex, neighbor, 1, 'blue');\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'Vertex ' + this.toStr(neighbor) + ' already visited, skipping',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t// this.highlightEdge(currVertex, neighbor, 0);\n\t\t\t\t} else {\n\t\t\t\t\tthis.unhighlight(3, 0);\n\t\t\t\t\tthis.highlight(4, 0);\n\t\t\t\t\tthis.highlightEdge(currVertex, neighbor, 1, 'red');\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'About to recurse to ' + this.toStr(neighbor),\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.unhighlight(4, 0);\n\t\t\t\t\tthis.unhighlight(2, 0);\n\n\t\t\t\t\tthis.leaveVertex();\n\t\t\t\t\tthis.visitVertex(neighbor);\n\t\t\t\t\t// this.highlightEdge(currVertex, neighbor, 0);\n\n\t\t\t\t\tthis.dfsVisit(neighbor, messageX + this.recursionSpacingX);\n\t\t\t\t\tthis.highlight(2, 0);\n\n\t\t\t\t\tthis.leaveVertex();\n\t\t\t\t\tthis.visitVertex(currVertex);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'Returned from ' + this.toStr(neighbor) + ' to ' + this.toStr(currVertex),\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.unhighlight(2, 0);\n\n\t\tthis.cmd(act.delete, this.stackID.pop());\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.visited[i] = false;\n\t\t}\n\t\tfor (let i = 0; i < this.listID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.listID[i]);\n\t\t}\n\t\tthis.listID = [];\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tthis.visitedID = [];\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t\tthis.cmd(act.setText, this.infoLabelID, '');\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Graph, { VERTEX_INDEX_COLOR } from './Graph.js';\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport { DIJKSTRAS_ADJ_LIST } from './util/GraphValues';\nimport PriorityQueue from './util/PriorityQueue';\nimport { act } from '../anim/AnimationMain';\n\nconst PQ_DEQUEUED_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 65;\nconst VISITED_SPACING = 20;\n\nconst CURRENT_VERTEX_LABEL_X = 25;\nconst CURRENT_VERTEX_LABEL_Y = 85;\nconst CURRENT_VERTEX_X = 110;\nconst CURRENT_VERTEX_Y = 85;\n\nconst PQ_LABEL_X = 25;\nconst PQ_LABEL_Y = 110;\n\nconst PQ_X = 110;\nconst PQ_Y = 110;\nconst PQ_SPACING = 42;\nconst PQ_LINE_SPACING = 25;\nconst PQ_MAX_PER_LINE = 9;\n\nconst TABLE_ENTRY_WIDTH = 50;\nconst SMALL_TABLE_ENTRY_HEIGHT = 20;\nconst LARGE_TABLE_ENTRY_HEIGHT = 17;\nconst TABLE_START_X = 50;\nconst TABLE_START_Y = 180;\n\nconst CODE_START_X = 1100;\nconst CODE_START_Y = 50;\n\nexport default class Dijkstras extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, DIJKSTRAS_ADJ_LIST, false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.startField.size = 2;\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\n\t\tthis.commands = [];\n\n\t\tthis.vertexID = new Array(this.size);\n\n\t\tthis.distance = new Array(this.size);\n\t\tthis.distanceID = new Array(this.size);\n\n\t\tthis.visited = [];\n\t\tthis.visitedID = [];\n\n\t\tthis.pq = new PriorityQueue();\n\n\t\tthis.code = [\n\t\t\t['initialize VisitedSet, VS'],\n\t\t\t['initialize distanceMap, DM'],\n\t\t\t['initialize PriorityQueue, PQ'],\n\t\t\t['for all v in G, initialize distance of v to INF'],\n\t\t\t['PQ.enqueue((s, 0))'],\n\t\t\t['while PQ is not empty and VS is not full'],\n\t\t\t['    (u, d) <- PQ.dequeue()'],\n\t\t\t['    if u is not visited in VS'],\n\t\t\t['        mark u as visited in VS'],\n\t\t\t['    for all (w, d2) adjacent to u and not visited in VS'],\n\t\t\t['        update DM for d2'],\n\t\t\t['        PQ.enqueue((w, d + d2))'],\n\t\t];\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.tableEntryHeight = this.isLarge ? LARGE_TABLE_ENTRY_HEIGHT : SMALL_TABLE_ENTRY_HEIGHT;\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.vertexID[i] = this.nextIndex++;\n\t\t\tthis.distanceID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.vertexID[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tTABLE_ENTRY_WIDTH,\n\t\t\t\tthis.tableEntryHeight,\n\t\t\t\tTABLE_START_X,\n\t\t\t\tTABLE_START_Y + i * this.tableEntryHeight,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.distanceID[i],\n\t\t\t\t'',\n\t\t\t\tTABLE_ENTRY_WIDTH,\n\t\t\t\tthis.tableEntryHeight,\n\t\t\t\tTABLE_START_X + TABLE_ENTRY_WIDTH,\n\t\t\t\tTABLE_START_Y + i * this.tableEntryHeight,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.vertexID[i], VERTEX_INDEX_COLOR);\n\t\t}\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current vertex:',\n\t\t\tCURRENT_VERTEX_LABEL_X,\n\t\t\tCURRENT_VERTEX_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.createLabel, this.nextIndex++, 'Priority Queue:', PQ_LABEL_X, PQ_LABEL_Y, 0);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Distance Map:',\n\t\t\tTABLE_START_X + 0.5 * TABLE_ENTRY_WIDTH,\n\t\t\tTABLE_START_Y - SMALL_TABLE_ENTRY_HEIGHT,\n\t\t);\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.comparisonMessageID = this.nextIndex++;\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.messageID = [];\n\t\tthis.visitedID = [];\n\t\tthis.pq = new PriorityQueue();\n\t}\n\n\tstartCallback() {\n\t\tlet startvalue;\n\n\t\tif (this.startField.value !== '') {\n\t\t\tstartvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size)\n\t\t\t\tthis.implementAction(this.doDijkstra.bind(this), startvalue);\n\t\t}\n\t}\n\n\tdoDijkstra(startVertex) {\n\t\tthis.commands = [];\n\n\t\tlet current = startVertex;\n\t\tlet currentID = this.nextIndex++;\n\n\t\tthis.clear();\n\n\t\tthis.visitedID = [];\n\n\t\tthis.distance[current] = 0;\n\t\tthis.cmd(act.setText, this.distanceID[current], 0);\n\n\t\tthis.pq = new PriorityQueue();\n\t\tthis.pq.enqueue(current, currentID, 0);\n\t\tthis.cmd(act.createLabel, currentID, '(' + this.toStr(current) + ', 0)', PQ_X, PQ_Y, 0);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Enqueueing ' + this.toStr(current) + ' with distance 0 and updating distance map',\n\t\t);\n\t\tthis.highlight(0, 0);\n\t\tthis.highlight(1, 0);\n\t\tthis.highlight(2, 0);\n\t\tthis.highlight(3, 0);\n\t\tthis.highlight(4, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(0, 0);\n\t\tthis.unhighlight(1, 0);\n\t\tthis.unhighlight(2, 0);\n\t\tthis.unhighlight(3, 0);\n\t\tthis.unhighlight(4, 0);\n\n\t\twhile (this.visited.includes(false) && this.pq.size() !== 0) {\n\t\t\t//TODO: ADD HIGHLIGHTS HERE\n\t\t\tthis.highlight(5, 0);\n\t\t\tthis.highlight(6, 0);\n\t\t\t[current, currentID] = this.pq.dequeue();\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Dequeueing ' + this.toStr(current));\n\t\t\tthis.cmd(act.move, currentID, CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\t\tthis.cmd(act.setText, currentID, this.toStr(current));\n\t\t\tthis.cmd(act.setTextColor, currentID, PQ_DEQUEUED_COLOR);\n\t\t\tlet pqIDs = this.pq.getIDs();\n\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tpqIDs[i],\n\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.visitVertex(current);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(6, 0);\n\t\t\tthis.highlight(7, 0);\n\n\t\t\tif (!this.visited[current]) {\n\t\t\t\tthis.highlight(8, 0);\n\t\t\t\tthis.visited[current] = true;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Adding ' + this.toStr(current) + ' to visited set',\n\t\t\t\t);\n\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\tthis.toStr(current),\n\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * VISITED_SPACING,\n\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[current], VISITED_COLOR);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(8, 0);\n\t\t\t\tthis.unhighlight(7, 0);\n\n\t\t\t\tthis.highlight(9, 0);\n\t\t\t\tthis.highlight(10, 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Updating neighbors of vertex ' + this.toStr(current),\n\t\t\t\t);\n\n\t\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\t\tif (this.adj_matrix[current][neighbor] >= 0) {\n\t\t\t\t\t\tthis.highlightEdge(current, neighbor, 1);\n\t\t\t\t\t\tif (this.visited[neighbor]) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\tthis.toStr(neighbor) + ' has already been visited, skipping',\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Comparing distances');\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[current], 1);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[neighbor], 1);\n\t\t\t\t\t\t\tconst curDist = this.distance[current];\n\t\t\t\t\t\t\tconst edgDist = this.adj_matrix[current][neighbor];\n\t\t\t\t\t\t\tconst newDist = curDist + edgDist;\n\t\t\t\t\t\t\tconst oldDist = this.distance[neighbor];\n\t\t\t\t\t\t\tconst oldDistStr =\n\t\t\t\t\t\t\t\toldDist >= 0 ? String(this.distance[neighbor]) : 'INF';\n\n\t\t\t\t\t\t\tif (oldDist < 0 || newDist < oldDist) {\n\t\t\t\t\t\t\t\tthis.distance[neighbor] = newDist;\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tthis.comparisonMessageID,\n\t\t\t\t\t\t\t\t\t'New distance (' +\n\t\t\t\t\t\t\t\t\t\tcurDist +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tedgDist +\n\t\t\t\t\t\t\t\t\t\t' = ' +\n\t\t\t\t\t\t\t\t\t\tnewDist +\n\t\t\t\t\t\t\t\t\t\t') is less than old distance (' +\n\t\t\t\t\t\t\t\t\t\toldDistStr +\n\t\t\t\t\t\t\t\t\t\t'), updating',\n\t\t\t\t\t\t\t\t\tTABLE_START_X + 2 * TABLE_ENTRY_WIDTH - 15,\n\t\t\t\t\t\t\t\t\tTABLE_START_Y + neighbor * this.tableEntryHeight - 5,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tthis.highlight(10, 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Updating distance');\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tthis.distanceID[neighbor],\n\t\t\t\t\t\t\t\t\tthis.distance[neighbor],\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[current], 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[neighbor], 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, this.comparisonMessageID);\n\t\t\t\t\t\t\t\tthis.pq.enqueue(neighbor, this.nextIndex, newDist);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t\t'Enqueueing ' +\n\t\t\t\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t\t\t' with distance ' +\n\t\t\t\t\t\t\t\t\t\tnewDist,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\t\t\t'(' + this.toStr(neighbor) + ', ' + newDist + ')',\n\t\t\t\t\t\t\t\t\tPQ_X + ((this.pq.size() - 1) % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\t\tPQ_Y +\n\t\t\t\t\t\t\t\t\t\tMath.floor((this.pq.size() - 1) / PQ_MAX_PER_LINE) *\n\t\t\t\t\t\t\t\t\t\t\tPQ_LINE_SPACING,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.highlight(11, 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\t\tconst newPqIDs = this.pq.getIDs();\n\t\t\t\t\t\t\t\tif (String(pqIDs) !== String(newPqIDs.slice(0, -1))) {\n\t\t\t\t\t\t\t\t\t// Check if newly enqueued element shifted things\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\t\t\tnewPqIDs[i],\n\t\t\t\t\t\t\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\t\t\t\tPQ_Y +\n\t\t\t\t\t\t\t\t\t\t\t\tMath.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tpqIDs = newPqIDs;\n\t\t\t\t\t\t\t\tthis.unhighlight(11, 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tthis.comparisonMessageID,\n\t\t\t\t\t\t\t\t\t'New distance (' +\n\t\t\t\t\t\t\t\t\t\tcurDist +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tedgDist +\n\t\t\t\t\t\t\t\t\t\t' = ' +\n\t\t\t\t\t\t\t\t\t\tnewDist +\n\t\t\t\t\t\t\t\t\t\t') is greater than or equal to old distance (' +\n\t\t\t\t\t\t\t\t\t\toldDistStr +\n\t\t\t\t\t\t\t\t\t\t'), skipping',\n\t\t\t\t\t\t\t\t\tTABLE_START_X + 2 * TABLE_ENTRY_WIDTH - 15,\n\t\t\t\t\t\t\t\t\tTABLE_START_Y + neighbor * this.tableEntryHeight - 5,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.highlight(5, 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.unhighlight(5, 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, this.comparisonMessageID);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[current], 0);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.distanceID[neighbor], 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.highlightEdge(current, neighbor, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t\tthis.unhighlight(9, 0);\n\t\t\t} else {\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\tthis.toStr(current) + ' has already been visited, skipping',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.leaveVertex();\n\t\t\tthis.cmd(act.delete, currentID);\n\t\t\tthis.unhighlight(5, 0);\n\t\t}\n\n\t\tif (this.pq.size() > 0) {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'All vertices have been visited, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Priority queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.cmd(act.setText, this.distanceID[i], 'INF');\n\t\t\tthis.visited[i] = false;\n\t\t\tthis.distance[i] = -1;\n\t\t}\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tconst pqIDs = this.pq.getIDs();\n\t\tfor (const id of pqIDs) {\n\t\t\tthis.cmd(act.delete, id);\n\t\t}\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport {\n\taddControlToAlgorithmBar,\n\taddDivisorToAlgorithmBar,\n\taddLabelToAlgorithmBar,\n} from './Algorithm.js';\nimport Graph from './Graph.js';\nimport { PRIMS_KRUSKALS_ADJ_LIST } from './util/GraphValues';\nimport PriorityQueue from './util/PriorityQueue';\nimport { act } from '../anim/AnimationMain';\n\nconst PQ_DEQUEUED_COLOR = '#0000FF';\nconst VISITED_COLOR = '#99CCFF';\nconst MST_EDGE_COLOR = '#3399FF';\nconst MST_EDGE_THICKNESS = 4;\n\nconst INFO_MSG_X = 25;\nconst INFO_MSG_Y = 15;\n\nconst VISITED_START_X = 30;\nconst VISITED_START_Y = 65;\nconst VISITED_SPACING = 20;\n\nconst CURRENT_EDGE_LABEL_X = 25;\nconst CURRENT_EDGE_LABEL_Y = 90;\nconst CURRENT_VERTEX_X = 110;\nconst CURRENT_VERTEX_Y = 96;\n\nconst PQ_LABEL_X = 25;\nconst PQ_LABEL_Y = 115;\n\nconst PQ_X = 45;\nconst PQ_Y = 143;\nconst PQ_SPACING = 50;\nconst PQ_LINE_SPACING = 25;\nconst PQ_MAX_PER_LINE = 8;\n\nconst CODE_START_X = 50;\nconst CODE_START_Y = 200;\n\nexport default class Prims extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, PRIMS_KRUSKALS_ADJ_LIST, false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\taddLabelToAlgorithmBar('Start vertex: ');\n\n\t\tthis.startField = addControlToAlgorithmBar('Text', '');\n\t\tthis.startField.onkeydown = this.returnSubmit(\n\t\t\tthis.startField,\n\t\t\tthis.startCallback.bind(this),\n\t\t\t1,\n\t\t\tfalse,\n\t\t);\n\t\tthis.startField.size = 2;\n\t\tthis.controls.push(this.startField);\n\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls(false);\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.commands = [];\n\t\tthis.messageID = null;\n\n\t\tthis.visited = [];\n\t\tthis.visitedID = [];\n\t\tthis.pq = new PriorityQueue();\n\n\t\tthis.code = [\n\t\t\t['initialize VisitedSet, VS'],\n\t\t\t['initialize MST EdgeSet, MST'],\n\t\t\t['initialize PriorityQueue, PQ'],\n\t\t\t['mark s as visited in VS'],\n\t\t\t['for each edge(s, v) in G, PQ.enqueue(edge(s, v))'],\n\t\t\t['while PQ is not empty and VS is not full'],\n\t\t\t['    edge(u, w) <- PQ.dequeue()'],\n\t\t\t['    if w is not visited in VS'],\n\t\t\t['        add edge(u, w) to MST'],\n\t\t\t['        mark w as visited in VS'],\n\t\t\t['        for each edge(w, x) such that x is not visited'],\n\t\t\t['            PQ.enqueue(edge(w, x))'],\n\t\t];\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Visited Set:',\n\t\t\tVISITED_START_X - 5,\n\t\t\tVISITED_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current edge:',\n\t\t\tCURRENT_EDGE_LABEL_X,\n\t\t\tCURRENT_EDGE_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.createLabel, this.nextIndex++, 'Priority Queue:', PQ_LABEL_X, PQ_LABEL_Y, 0);\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.highlightCircleL = this.nextIndex++;\n\t\tthis.highlightCircleAL = this.nextIndex++;\n\t\tthis.highlightCircleAM = this.nextIndex++;\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.messageID = [];\n\t\tthis.visitedID = [];\n\t\tthis.pq = new PriorityQueue();\n\t}\n\n\tstartCallback() {\n\t\tif (this.startField.value !== '') {\n\t\t\tlet startvalue = this.startField.value;\n\t\t\tthis.startField.value = '';\n\t\t\tstartvalue = startvalue.toUpperCase().charCodeAt(0) - 65;\n\t\t\tif (startvalue >= 0 && startvalue < this.size)\n\t\t\t\tthis.implementAction(this.doPrim.bind(this), startvalue);\n\t\t}\n\t}\n\n\tdoPrim(startVertex) {\n\t\tthis.commands = [];\n\n\t\tthis.clear();\n\n\t\tthis.visitedID = [];\n\n\t\tthis.visitVertex(startVertex);\n\n\t\tthis.visited[startVertex] = true;\n\t\tthis.visitedID.push(this.nextIndex);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\tthis.toStr(startVertex),\n\t\t\tVISITED_START_X,\n\t\t\tVISITED_START_Y,\n\t\t);\n\t\tthis.cmd(act.setBackgroundColor, this.circleID[startVertex], VISITED_COLOR);\n\t\tthis.cmd(\n\t\t\tact.setText,\n\t\t\tthis.infoLabelID,\n\t\t\t'Adding ' + this.toStr(startVertex) + ' to visited set',\n\t\t);\n\n\t\tthis.highlight(0, 0);\n\t\tthis.highlight(1, 0);\n\t\tthis.highlight(2, 0);\n\t\tthis.highlight(3, 0);\n\t\t// this.highlight(4, 0);\n\t\tthis.cmd(act.step);\n\t\t// this.unhighlight(4, 0);\n\t\tthis.unhighlight(3, 0);\n\t\tthis.unhighlight(2, 0);\n\t\tthis.unhighlight(1, 0);\n\t\tthis.unhighlight(0, 0);\n\n\t\tthis.highlight(4, 0);\n\t\tthis.pq = new PriorityQueue();\n\t\tlet pqIDs = [];\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Enqueuing edges of ' + this.toStr(startVertex));\n\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\tconst weight = this.adj_matrix[startVertex][neighbor];\n\t\t\tif (weight >= 0) {\n\t\t\t\tthis.highlightEdge(startVertex, neighbor, 1);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\t'(' + this.toStr(startVertex) + this.toStr(neighbor) + ', ' + weight + ')',\n\t\t\t\t\tPQ_X + (this.pq.size() % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\tPQ_Y + Math.floor(this.pq.size() / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t);\n\t\t\t\tthis.pq.enqueue([startVertex, neighbor], this.nextIndex++, weight);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tconst newPqIDs = this.pq.getIDs();\n\t\t\t\tif (String(pqIDs) !== String(newPqIDs.slice(0, -1))) {\n\t\t\t\t\t// Check if newly enqueued element shifted things\n\t\t\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\tnewPqIDs[i],\n\t\t\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t}\n\t\t\t\tpqIDs = newPqIDs;\n\t\t\t\tthis.highlightEdge(startVertex, neighbor, 0);\n\t\t\t}\n\t\t}\n\t\tthis.unhighlight(4, 0);\n\n\t\tthis.leaveVertex();\n\n\t\tthis.highlight(5, 0);\n\t\twhile (this.visited.includes(false) && this.pq.size() !== 0) {\n\t\t\tthis.highlight(6, 0);\n\t\t\tconst [edge, edgeID] = this.pq.dequeue();\n\t\t\tlet edgeStr = this.toStr(edge[0]) + this.toStr(edge[1]);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'Dequeued ' + edgeStr + ', with destination ' + this.toStr(edge[1]),\n\t\t\t);\n\t\t\tthis.cmd(act.move, edgeID, CURRENT_VERTEX_X, CURRENT_VERTEX_Y);\n\t\t\tthis.cmd(act.setText, edgeID, this.toStr(edge[0]) + this.toStr(edge[1]));\n\t\t\tthis.cmd(act.setTextColor, edgeID, PQ_DEQUEUED_COLOR);\n\t\t\tpqIDs = this.pq.getIDs();\n\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tpqIDs[i],\n\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.highlightEdge(edge[0], edge[1], 1);\n\t\t\tthis.visitVertex(edge[1]);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(6, 0);\n\t\t\tthis.highlight(7, 0);\n\t\t\tif (!this.visited[edge[1]]) {\n\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Adding ' + edgeStr + ' to MST');\n\t\t\t\tthis.highlightEdge(edge[0], edge[1], 0);\n\t\t\t\tthis.setEdgeColor(edge[0], edge[1], MST_EDGE_COLOR);\n\t\t\t\tthis.setEdgeThickness(edge[0], edge[1], MST_EDGE_THICKNESS);\n\n\t\t\t\tthis.highlight(8, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(8, 0);\n\n\t\t\t\tthis.visited[edge[1]] = true;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Adding ' + this.toStr(edge[1]) + ' to visited set',\n\t\t\t\t);\n\t\t\t\tthis.visitedID.push(this.nextIndex);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\tthis.toStr(edge[1]),\n\t\t\t\t\tVISITED_START_X + (this.visitedID.length - 1) * VISITED_SPACING,\n\t\t\t\t\tVISITED_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[edge[1]], VISITED_COLOR);\n\t\t\t\tthis.highlight(9, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(9, 0);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Enqueuing edges of ' + this.toStr(edge[1]),\n\t\t\t\t);\n\t\t\t\tthis.highlight(11, 0);\n\t\t\t\tthis.highlight(10, 0);\n\t\t\t\tfor (let neighbor = 0; neighbor < this.size; neighbor++) {\n\t\t\t\t\tif (this.adj_matrix[edge[1]][neighbor] >= 0) {\n\t\t\t\t\t\tthis.highlightEdge(edge[1], neighbor, 1);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.circleID[neighbor], 1);\n\t\t\t\t\t\tif (this.visited[neighbor]) {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t'Vertex ' +\n\t\t\t\t\t\t\t\t\tthis.toStr(neighbor) +\n\t\t\t\t\t\t\t\t\t' has already been visited, skipping',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.circleID[neighbor], 0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t'Vertex ' + this.toStr(neighbor) + ' has not yet been visited',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, this.circleID[neighbor], 0);\n\t\t\t\t\t\t\tedgeStr = this.toStr(edge[1]) + this.toStr(neighbor);\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t\t\t'Enqueueing edge ' +\n\t\t\t\t\t\t\t\t\tedgeStr +\n\t\t\t\t\t\t\t\t\t' with weight ' +\n\t\t\t\t\t\t\t\t\tthis.adj_matrix[edge[1]][neighbor],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\tthis.nextIndex,\n\t\t\t\t\t\t\t\t'(' + edgeStr + ', ' + this.adj_matrix[edge[1]][neighbor] + ')',\n\t\t\t\t\t\t\t\tPQ_X + (this.pq.size() % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\tPQ_Y +\n\t\t\t\t\t\t\t\t\tMath.floor(this.pq.size() / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.pq.enqueue(\n\t\t\t\t\t\t\t\t[edge[1], neighbor],\n\t\t\t\t\t\t\t\tthis.nextIndex++,\n\t\t\t\t\t\t\t\tthis.adj_matrix[edge[1]][neighbor],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\t\t\tconst newPqIDs = this.pq.getIDs();\n\t\t\t\t\t\t\tif (String(pqIDs) !== String(newPqIDs.slice(0, -1))) {\n\t\t\t\t\t\t\t\t// Check if newly enqueued element shifted things\n\t\t\t\t\t\t\t\tfor (let i = 0; i < this.pq.size(); i++) {\n\t\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\t\tnewPqIDs[i],\n\t\t\t\t\t\t\t\t\t\tPQ_X + (i % PQ_MAX_PER_LINE) * PQ_SPACING,\n\t\t\t\t\t\t\t\t\t\tPQ_Y + Math.floor(i / PQ_MAX_PER_LINE) * PQ_LINE_SPACING,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpqIDs = newPqIDs;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.highlightEdge(edge[1], neighbor, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.unhighlight(10, 0);\n\t\t\t\tthis.unhighlight(11, 0);\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t} else {\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.highlightEdge(edge[0], edge[1], 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\tthis.toStr(edge[1]) + ' has already been visited, skipping',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\t\t\tthis.leaveVertex();\n\t\t\tthis.cmd(act.delete, edgeID);\n\t\t}\n\t\tthis.unhighlight(5, 0);\n\t\tthis.unhighlight(7, 0);\n\n\t\tif (this.pq.size() > 0) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.infoLabelID,\n\t\t\t\t'MST has correct amount of edges / all vertices have been visited, done',\n\t\t\t);\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Priority queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n\n\tclear() {\n\t\tthis.recolorGraph();\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.circleID[i], '#FFFFFF');\n\t\t\tthis.visited[i] = false;\n\t\t}\n\t\tfor (let i = 0; i < this.visitedID.length; i++) {\n\t\t\tthis.cmd(act.delete, this.visitedID[i]);\n\t\t}\n\t\tconst pqIDs = this.pq.getIDs();\n\t\tfor (const id of pqIDs) {\n\t\t\tthis.cmd(act.delete, id);\n\t\t}\n\t\tif (this.messageID != null) {\n\t\t\tfor (let i = 0; i < this.messageID.length; i++) {\n\t\t\t\tthis.cmd(act.delete, this.messageID[i]);\n\t\t\t}\n\t\t}\n\t\tthis.messageID = [];\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Graph, { EDGE_COLOR, VERTEX_INDEX_COLOR } from './Graph.js';\nimport { KRUSKALS_DS_COLORS, PRIMS_KRUSKALS_ADJ_LIST } from './util/GraphValues';\nimport { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst MESSAGE_LABEL_X = 30;\nconst MESSAGE_LABEL_Y = 15;\n\nconst FIND_LABEL_1_X = 30;\nconst FIND_LABEL_2_X = 100;\nconst FIND_LABEL_1_Y = 40;\nconst FIND_LABEL_2_Y = FIND_LABEL_1_Y;\n\nconst CURRENT_LABEL_X = 145;\nconst CURRENT_LABEL_Y = 67;\n\nconst PQ_LABEL_X = 145;\nconst PQ_LABEL_Y = 92;\n\nconst SET_ARRAY_ELEM_WIDTH = 50;\nconst SET_ARRAY_ELEM_HEIGHT = 20;\nconst SET_ARRAY_START_X = 52;\nconst SET_ARRAY_START_Y = 110;\n\nconst EDGE_LIST_ELEM_WIDTH = 40;\nconst EDGE_LIST_ELEM_HEIGHT = 40;\nconst EDGE_LIST_COLUMN_WIDTH = 100;\nconst EDGE_LIST_MAX_PER_COLUMN = 9;\n\nconst EDGE_LIST_START_X = 150;\nconst EDGE_LIST_START_Y = 135;\n\nconst HIGHLIGHT_CIRCLE_COLOR_1 = '#FF9999';\nconst HIGHLIGHT_CIRCLE_COLOR_2 = '#FF0000';\nconst HIGHLIGHT_CIRCLE_COLOR_3 = '#0000FF';\nconst HIGHLIGHT_CIRCLE_RADIUS = 12;\n\nconst MST_EDGE_COLOR = '#3399FF';\nconst MST_EDGE_THICKNESS = 4;\n\nconst CODE_START_X = 1100;\nconst CODE_START_Y = 30;\n\nexport default class Kruskals extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, PRIMS_KRUSKALS_ADJ_LIST, false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\t\tthis.controls.push(this.startButton);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls(false);\n\t}\n\n\tsetup(adjMatrix) {\n\t\tsuper.setup(adjMatrix);\n\t\tthis.messageID = [];\n\t\tthis.commands = [];\n\t\tthis.setID = new Array(this.size);\n\t\tthis.setIndexID = new Array(this.size);\n\t\tthis.setData = new Array(this.size);\n\t\tthis.edgesListLeftID = [];\n\t\tthis.edgesListRightID = [];\n\n\t\tlet i;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.setID[i] = this.nextIndex++;\n\t\t\tthis.setIndexID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.setIndexID[i],\n\t\t\t\tthis.toStr(i),\n\t\t\t\tSET_ARRAY_ELEM_WIDTH,\n\t\t\t\tSET_ARRAY_ELEM_HEIGHT,\n\t\t\t\tSET_ARRAY_START_X,\n\t\t\t\tSET_ARRAY_START_Y + i * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.createRectangle,\n\t\t\t\tthis.setID[i],\n\t\t\t\t'',\n\t\t\t\tSET_ARRAY_ELEM_WIDTH,\n\t\t\t\tSET_ARRAY_ELEM_HEIGHT,\n\t\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\t\tSET_ARRAY_START_Y + i * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.setIndexID[i], VERTEX_INDEX_COLOR);\n\t\t}\n\n\t\tthis.messageLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.messageLabelID, '', MESSAGE_LABEL_X, MESSAGE_LABEL_Y, 0);\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Disjoint Set:',\n\t\t\tSET_ARRAY_START_X + 0.5 * SET_ARRAY_ELEM_WIDTH,\n\t\t\tSET_ARRAY_START_Y - 37,\n\t\t\t1,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Vertex',\n\t\t\tSET_ARRAY_START_X,\n\t\t\tSET_ARRAY_START_Y - 22,\n\t\t\t1,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Set ID',\n\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\tSET_ARRAY_START_Y - 22,\n\t\t\t1,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tthis.nextIndex++,\n\t\t\t'Current edge:',\n\t\t\tCURRENT_LABEL_X,\n\t\t\tCURRENT_LABEL_Y,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.createLabel, this.nextIndex++, 'Priority Queue:', PQ_LABEL_X, PQ_LABEL_Y, 0);\n\n\t\tthis.code = [\n\t\t\t['initialize DisjointSet, DS, with all vertices in G'],\n\t\t\t['initialize MST EdgeSet, MST'],\n\t\t\t['initialize PriorityQueue, PQ with all edges in G'],\n\t\t\t['while PQ is not empty and MST has fewer than n-1 edges'],\n\t\t\t['    edge(u, v) <- PQ.dequeue()'],\n\t\t\t['    if u and v are not in the same cluster'],\n\t\t\t['        add edge(u, v) to MST'],\n\t\t\t[`        merge u's cluster with v's cluster`],\n\t\t];\n\n\t\tthis.codeID = this.addCodeToCanvasBase(this.code, CODE_START_X, CODE_START_Y);\n\n\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.lastIndex = this.nextIndex;\n\t}\n\n\treset() {\n\t\tthis.nextIndex = this.lastIndex;\n\t\tthis.messageID = [];\n\t\tthis.edgesListLeft = [];\n\t\tthis.edgesListRight = [];\n\t\tthis.edgesListLeftID = [];\n\t\tthis.edgesListRightID = [];\n\t}\n\n\tstartCallback() {\n\t\tthis.implementAction(this.doKruskal.bind(this));\n\t}\n\n\tdoKruskal() {\n\t\tthis.commands = [];\n\n\t\tfor (let k = 0; k < this.edgesListLeftID.length; k++) {\n\t\t\tthis.cmd(act.delete, this.edgesListLeftID[k]);\n\t\t\tthis.cmd(act.delete, this.edgesListRightID[k]);\n\t\t}\n\n\t\tthis.edgesListLeftID = [];\n\t\tthis.edgesListRightID = [];\n\t\tthis.edgesListLeft = [];\n\t\tthis.edgesListRight = [];\n\n\t\tlet i;\n\t\tlet j;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.setData[i] = i + 1;\n\t\t\tthis.cmd(act.setText, this.setID[i], i + 1);\n\t\t\t!this.isLarge && this.cmd(act.setBackgroundColor, this.setID[i], KRUSKALS_DS_COLORS[i]);\n\t\t}\n\n\t\tthis.recolorGraph();\n\n\t\tthis.highlight(0, 0);\n\t\tthis.highlight(1, 0);\n\n\t\t// Create edge list\n\t\tthis.cmd(act.setText, this.messageLabelID, 'Enqueueing all edges into Priority Queue');\n\t\tlet top;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tfor (j = i + 1; j < this.size; j++) {\n\t\t\t\tif (this.adj_matrix[i][j] >= 0) {\n\t\t\t\t\tthis.edgesListLeftID.push(this.nextIndex++);\n\t\t\t\t\tthis.edgesListRightID.push(this.nextIndex++);\n\t\t\t\t\ttop = this.edgesListLeftID.length - 1;\n\t\t\t\t\tthis.edgesListLeft.push(i);\n\t\t\t\t\tthis.edgesListRight.push(j);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tthis.edgesListLeftID[top],\n\t\t\t\t\t\tthis.toStr(i) + ' ',\n\t\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\t\tMath.floor(top / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\t\tEDGE_LIST_START_Y +\n\t\t\t\t\t\t\t(top % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tthis.edgesListRightID[top],\n\t\t\t\t\t\t' ' + this.toStr(j),\n\t\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\t\tEDGE_LIST_ELEM_WIDTH +\n\t\t\t\t\t\t\tMath.floor(top / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\t\tEDGE_LIST_START_Y +\n\t\t\t\t\t\t\t(top % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\tthis.edgesListLeftID[top],\n\t\t\t\t\t\tthis.edgesListRightID[top],\n\t\t\t\t\t\tEDGE_COLOR,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tthis.adj_matrix[i][j],\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(0, 0);\n\t\tthis.unhighlight(1, 0);\n\n\t\t// Sort edge list based on edge cost\n\t\tconst edgeCount = this.edgesListLeftID.length;\n\t\tlet tmpLeftID;\n\t\tlet tmpRightID;\n\t\tlet tmpLeft;\n\t\tlet tmpRight;\n\t\tfor (i = 1; i < edgeCount; i++) {\n\t\t\ttmpLeftID = this.edgesListLeftID[i];\n\t\t\ttmpRightID = this.edgesListRightID[i];\n\t\t\ttmpLeft = this.edgesListLeft[i];\n\t\t\ttmpRight = this.edgesListRight[i];\n\t\t\tj = i;\n\t\t\twhile (\n\t\t\t\tj > 0 &&\n\t\t\t\tthis.adj_matrix[this.edgesListLeft[j - 1]][this.edgesListRight[j - 1]] >\n\t\t\t\t\tthis.adj_matrix[tmpLeft][tmpRight]\n\t\t\t) {\n\t\t\t\tthis.edgesListLeft[j] = this.edgesListLeft[j - 1];\n\t\t\t\tthis.edgesListRight[j] = this.edgesListRight[j - 1];\n\t\t\t\tthis.edgesListLeftID[j] = this.edgesListLeftID[j - 1];\n\t\t\t\tthis.edgesListRightID[j] = this.edgesListRightID[j - 1];\n\t\t\t\tj = j - 1;\n\t\t\t}\n\t\t\tthis.edgesListLeft[j] = tmpLeft;\n\t\t\tthis.edgesListRight[j] = tmpRight;\n\t\t\tthis.edgesListLeftID[j] = tmpLeftID;\n\t\t\tthis.edgesListRightID[j] = tmpRightID;\n\t\t}\n\t\tfor (i = 0; i < edgeCount; i++) {\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListLeftID[i],\n\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\tMath.floor(i / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\tEDGE_LIST_START_Y + (i % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListRightID[i],\n\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\tEDGE_LIST_ELEM_WIDTH +\n\t\t\t\t\tMath.floor(i / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\tEDGE_LIST_START_Y + (i % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t);\n\t\t}\n\t\tthis.highlight(2, 0);\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(2, 0);\n\n\t\tconst findLabelLeft = this.nextIndex++;\n\t\tconst findLabelRight = this.nextIndex++;\n\t\tconst highlightCircle1 = this.nextIndex++;\n\t\tconst highlightCircle2 = this.nextIndex++;\n\t\tconst highlightCircle3 = this.nextIndex++;\n\n\t\tlet edgesAdded = 0;\n\t\tlet nextListIndex = 0;\n\t\tthis.cmd(act.createLabel, findLabelLeft, '', FIND_LABEL_1_X, FIND_LABEL_1_Y, 0);\n\t\tthis.cmd(act.createLabel, findLabelRight, '', FIND_LABEL_2_X, FIND_LABEL_2_Y, 0);\n\n\t\t// Run algorithm\n\t\tthis.highlight(3, 0);\n\t\twhile (edgesAdded < this.size - 1 && nextListIndex < edgeCount) {\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tthis.messageLabelID,\n\t\t\t\t'Dequeueing ' +\n\t\t\t\t\tthis.toStr(this.edgesListLeft[nextListIndex]) +\n\t\t\t\t\tthis.toStr(this.edgesListRight[nextListIndex]),\n\t\t\t);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListLeftID[nextListIndex],\n\t\t\t\tCURRENT_LABEL_X + 90,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\tthis.edgesListRightID[nextListIndex],\n\t\t\t\tCURRENT_LABEL_X + EDGE_LIST_ELEM_WIDTH + 90,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t);\n\n\t\t\tfor (i = nextListIndex + 1; i < edgeCount; i++) {\n\t\t\t\tconst newPos = i - nextListIndex - 1;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.edgesListLeftID[i],\n\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\tMath.floor(newPos / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\tEDGE_LIST_START_Y + (newPos % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.move,\n\t\t\t\t\tthis.edgesListRightID[i],\n\t\t\t\t\tEDGE_LIST_START_X +\n\t\t\t\t\t\tEDGE_LIST_ELEM_WIDTH +\n\t\t\t\t\t\tMath.floor(newPos / EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_COLUMN_WIDTH,\n\t\t\t\t\tEDGE_LIST_START_Y + (newPos % EDGE_LIST_MAX_PER_COLUMN) * EDGE_LIST_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.highlightEdge(\n\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t1,\n\t\t\t);\n\t\t\tthis.highlight(4, 0);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(4, 0);\n\n\t\t\tthis.highlight(5, 0);\n\n\t\t\tthis.cmd(act.setText, this.messageLabelID, 'Looking at disjoint set');\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelLeft,\n\t\t\t\t'find(' + this.toStr(this.edgesListLeft[nextListIndex]) + ') = ',\n\t\t\t);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightCircle1,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR_1,\n\t\t\t\tCURRENT_LABEL_X + 88,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t\tHIGHLIGHT_CIRCLE_RADIUS,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tconst left = this.edgesListLeft[nextListIndex];\n\t\t\tconst leftRoot = this.setData[left];\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\thighlightCircle1,\n\t\t\t\tSET_ARRAY_START_X,\n\t\t\t\tSET_ARRAY_START_Y + this.edgesListLeft[nextListIndex] * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelLeft,\n\t\t\t\t'find(' + this.toStr(this.edgesListLeft[nextListIndex]) + ') = ' + leftRoot,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelRight,\n\t\t\t\t'find(' + this.toStr(this.edgesListRight[nextListIndex]) + ') = ',\n\t\t\t);\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createHighlightCircle,\n\t\t\t\thighlightCircle2,\n\t\t\t\tHIGHLIGHT_CIRCLE_COLOR_2,\n\t\t\t\tCURRENT_LABEL_X + EDGE_LIST_ELEM_WIDTH + 91,\n\t\t\t\tCURRENT_LABEL_Y + 6,\n\t\t\t\tHIGHLIGHT_CIRCLE_RADIUS,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tconst right = this.edgesListRight[nextListIndex];\n\t\t\tconst rightRoot = this.setData[right];\n\t\t\tthis.cmd(\n\t\t\t\tact.move,\n\t\t\t\thighlightCircle2,\n\t\t\t\tSET_ARRAY_START_X,\n\t\t\t\tSET_ARRAY_START_Y + this.edgesListRight[nextListIndex] * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(\n\t\t\t\tact.setText,\n\t\t\t\tfindLabelRight,\n\t\t\t\t'find(' + this.toStr(this.edgesListRight[nextListIndex]) + ') = ' + rightRoot,\n\t\t\t);\n\t\t\tthis.cmd(act.step);\n\t\t\tthis.unhighlight(5, 0);\n\n\t\t\tif (leftRoot !== rightRoot) {\n\t\t\t\tthis.highlight(5, 0);\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.messageLabelID,\n\t\t\t\t\t'Vertices in different sets.  Add edge to MST.',\n\t\t\t\t);\n\t\t\t\tthis.highlightEdge(\n\t\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tedgesAdded++;\n\t\t\t\tthis.setEdgeColor(\n\t\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t\tMST_EDGE_COLOR,\n\t\t\t\t);\n\t\t\t\tthis.setEdgeThickness(\n\t\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t\tMST_EDGE_THICKNESS,\n\t\t\t\t);\n\t\t\t\tthis.highlight(6, 0);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.unhighlight(6, 0);\n\n\t\t\t\tthis.highlight(7, 0);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.messageLabelID,\n\t\t\t\t\t'Union sets ' + leftRoot + ' and ' + rightRoot,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tfindLabelLeft, // reusing find label\n\t\t\t\t\t'union(' + this.toStr(left) + ', ' + this.toStr(right) + ')',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setText, findLabelRight, '');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tconst minRoot = Math.min(leftRoot, rightRoot);\n\t\t\t\tconst maxRoot = Math.max(leftRoot, rightRoot);\n\t\t\t\tlet firstMatch = true;\n\t\t\t\tfor (let k = 0; k < this.size; k++) {\n\t\t\t\t\tif (this.setData[k] === maxRoot) {\n\t\t\t\t\t\tif (firstMatch) {\n\t\t\t\t\t\t\tfirstMatch = false;\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.createHighlightCircle,\n\t\t\t\t\t\t\t\thighlightCircle3,\n\t\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_COLOR_3,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_Y + k * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t\t\t\t\t\tHIGHLIGHT_CIRCLE_RADIUS,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.setHighlight, highlightCircle3, 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\thighlightCircle3,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_X + SET_ARRAY_ELEM_WIDTH,\n\t\t\t\t\t\t\t\tSET_ARRAY_START_Y + k * SET_ARRAY_ELEM_HEIGHT,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\tthis.setData[k] = minRoot;\n\t\t\t\t\t\tthis.cmd(act.setText, this.setID[k], minRoot);\n\t\t\t\t\t\t!this.isLarge &&\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setBackgroundColor,\n\t\t\t\t\t\t\t\tthis.setID[k],\n\t\t\t\t\t\t\t\tKRUSKALS_DS_COLORS[minRoot - 1],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\tthis.cmd(act.delete, highlightCircle3);\n\t\t\t\tthis.unhighlight(5, 0);\n\t\t\t} else {\n\t\t\t\tthis.cmd(act.setText, this.messageLabelID, 'Vertices in the same set, skip edge');\n\t\t\t\tthis.cmd(act.step);\n\t\t\t}\n\n\t\t\tthis.highlightEdge(\n\t\t\t\tthis.edgesListLeft[nextListIndex],\n\t\t\t\tthis.edgesListRight[nextListIndex],\n\t\t\t\t0,\n\t\t\t);\n\n\t\t\tthis.cmd(act.delete, highlightCircle1);\n\t\t\tthis.cmd(act.delete, highlightCircle2);\n\n\t\t\tthis.cmd(act.delete, this.edgesListLeftID[nextListIndex]);\n\t\t\tthis.cmd(act.delete, this.edgesListRightID[nextListIndex]);\n\t\t\tthis.cmd(act.setText, findLabelLeft, '');\n\t\t\tthis.cmd(act.setText, findLabelRight, '');\n\t\t\tnextListIndex++;\n\t\t}\n\t\tthis.unhighlight(3, 0);\n\t\tthis.cmd(act.delete, findLabelLeft);\n\t\tthis.cmd(act.delete, findLabelRight);\n\n\t\tthis.edgesListLeftID = this.edgesListLeftID.slice(nextListIndex);\n\t\tthis.edgesListRightID = this.edgesListRightID.slice(nextListIndex);\n\n\t\tif (edgesAdded === this.size - 1) {\n\t\t\tthis.cmd(act.setText, this.messageLabelID, 'MST has correct amount of edges, done');\n\t\t} else {\n\t\t\tthis.cmd(act.setText, this.messageLabelID, 'Priority queue is empty, done');\n\t\t}\n\n\t\treturn this.commands;\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Algorithm, { addControlToAlgorithmBar, addLabelToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst INFO_MSG_X = 20;\nconst INFO_MSG_Y = 400;\n\nconst TABLE_ELEM_WIDTH = 40;\nconst TABLE_ELEM_HEIGHT = 30;\n\nconst TABLE_START_X = 500;\nconst TABLE_START_Y = 80;\n\nconst CODE_START_X = 20;\nconst CODE_START_Y = 20;\nconst CODE_LINE_HEIGHT = 14;\n\nconst CODE_HIGHLIGHT_COLOR = '#FF0000';\nconst CODE_STANDARD_COLOR = '#000000';\nconst LCS_CELL_COLOR = '#99CCFF';\nconst MAX_SEQUENCE_LENGTH = 13;\n\nconst SEQUENCE_START_X = 20;\nconst SEQUENCE_START_Y = 450;\nconst SEQUENCE_DELTA_X = 10;\n\nexport default class LCS extends Algorithm {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h);\n\n\t\tthis.addControls();\n\t\tthis.nextIndex = 0;\n\t\tthis.setup();\n\t}\n\n\taddControls() {\n\t\tthis.controls = [];\n\t\taddLabelToAlgorithmBar('S1:');\n\t\tthis.S1Field = addControlToAlgorithmBar('Text', '');\n\t\tthis.S1Field.onkeydown = this.returnSubmit(\n\t\t\tthis.S1Field,\n\t\t\tthis.runCallback.bind(this),\n\t\t\tMAX_SEQUENCE_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.S1Field);\n\n\t\taddLabelToAlgorithmBar('S2:');\n\t\tthis.S2Field = addControlToAlgorithmBar('Text', '');\n\t\tthis.S2Field.onkeydown = this.returnSubmit(\n\t\t\tthis.S2Field,\n\t\t\tthis.runCallback.bind(this),\n\t\t\tMAX_SEQUENCE_LENGTH,\n\t\t\tfalse,\n\t\t);\n\t\tthis.controls.push(this.S2Field);\n\n\t\tthis.tableButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.tableButton.onclick = this.runCallback.bind(this);\n\t\tthis.controls.push(this.tableButton);\n\t}\n\n\tsetup() {\n\t\tthis.infoLabelID = this.nextIndex++;\n\t\tthis.cmd(act.createLabel, this.infoLabelID, '', INFO_MSG_X, INFO_MSG_Y, 0);\n\n\t\tthis.code = [\n\t\t\t['procedure ', 'LCS(S1, S2, matrix)'],\n\t\t\t['     matrix <- create new 2D array of length S1.length by S2.length'],\n\t\t\t['     for y <- 1, to S1.length, loop'],\n\t\t\t['          for x <- 1 to S2.length, loop'],\n\t\t\t['               if ', '(S1[y] == S2[x])'],\n\t\t\t['                    matrix[y][x] = 1 + ', 'matrix[y - 1][x - 1]'],\n\t\t\t['               else'],\n\t\t\t[\n\t\t\t\t'                    matrix[y][x] = max(',\n\t\t\t\t'matrix[y - 1][x]',\n\t\t\t\t',',\n\t\t\t\t' matrix[y][x - 1]',\n\t\t\t\t')',\n\t\t\t],\n\t\t\t['          end for'],\n\t\t\t['     end for'],\n\t\t\t['     currY <- S1.length'],\n\t\t\t['     currX <- S2.length'],\n\t\t\t['     list <- create new List()'],\n\t\t\t['     while currY > 0 and currX > 0, loop:'],\n\t\t\t[['          if '], ['matrix[currY - 1][currX] == matrix[currY][currX - 1] ']],\n\t\t\t[['           and '], ['matrix[currY][currX] != matrix [currY - 1][currX - 1]']],\n\t\t\t['               list.addFront(S1[currY])'],\n\t\t\t['               currX--'],\n\t\t\t['               currY--'],\n\t\t\t['          else'],\n\t\t\t[['               if '], ['matrix[currY - 1][currX] > matrix[currY][currX - 1]']],\n\t\t\t['                    currX--'],\n\t\t\t['               else'],\n\t\t\t['                    currY--'],\n\t\t\t['     end while'],\n\t\t\t['end procedure'],\n\t\t];\n\n\t\tthis.codeID = Array(this.code.length);\n\t\tlet i, j;\n\t\tfor (i = 0; i < this.code.length; i++) {\n\t\t\tthis.codeID[i] = new Array(this.code[i].length);\n\t\t\tfor (j = 0; j < this.code[i].length; j++) {\n\t\t\t\tthis.codeID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.codeID[i][j],\n\t\t\t\t\tthis.code[i][j],\n\t\t\t\t\tCODE_START_X,\n\t\t\t\t\tCODE_START_Y + i * CODE_LINE_HEIGHT,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, this.codeID[i][j], CODE_STANDARD_COLOR);\n\t\t\t\tif (j > 0) {\n\t\t\t\t\tthis.cmd(act.alignRight, this.codeID[i][j], this.codeID[i][j - 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tthis.initialIndex = this.nextIndex;\n\t\tthis.oldIDs = [];\n\t\tthis.commands = [];\n\t}\n\n\treset() {\n\t\tthis.oldIDs = [];\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\trunCallback() {\n\t\tconst string1 = this.S1Field.value;\n\t\tconst string2 = this.S2Field.value;\n\t\tif (string1 !== '' && string2 !== '') {\n\t\t\tthis.S1Field.value = '';\n\t\t\tthis.S2Field.value = '';\n\t\t\tthis.implementAction(this.run.bind(this), string1, string2);\n\t\t}\n\t}\n\n\trun(str1, str2) {\n\t\tthis.commands = [];\n\t\tthis.clearOldIDs();\n\n\t\tthis.buildTable(str1, str2);\n\n\t\tconst moveID = this.nextIndex++;\n\t\tconst x = str1.length;\n\t\tconst y = str2.length;\n\t\tlet i, j;\n\n\t\tfor (i = 0; i <= x; i++) {\n\t\t\tthis.cmd(act.setText, this.tableID[i][0], '0');\n\t\t\tthis.tableVals[i][0] = 0;\n\t\t}\n\t\tfor (i = 0; i <= y; i++) {\n\t\t\tthis.cmd(act.setText, this.tableID[0][i], '0');\n\t\t\tthis.tableVals[0][i] = 0;\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tfor (j = 0; j < y; j++) {\n\t\t\tfor (i = 0; i < x; i++) {\n\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j + 1], 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[i], 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[j], 1);\n\t\t\t\tthis.highlight(4, 1);\n\t\t\t\t// this.cmd(act.setForegroundColor, this.codeID[4][1], CODE_HIGHLIGHT_COLOR);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Comparing ' + str1.charAt(i) + ' and ' + str2.charAt(j),\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[i], 0);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[j], 0);\n\t\t\t\tthis.unhighlight(4, 1);\n\t\t\t\t// this.cmd(act.setForegroundColor, this.codeID[4][1], CODE_STANDARD_COLOR);\n\t\t\t\tif (str1.charAt(i) === str2.charAt(j)) {\n\t\t\t\t\t// this.cmd(act.setForegroundColor, this.codeID[5][0], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\t// this.cmd(act.setForegroundColor, this.codeID[5][1], CODE_HIGHLIGHT_COLOR);\n\t\t\t\t\tthis.highlight(5, 0);\n\t\t\t\t\tthis.highlight(5, 1);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1 - 1][j + 1 - 1], 1);\n\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Match, increment from the diagonal');\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\tthis.tableVals[i][j] + 1,\n\t\t\t\t\t\tthis.tableXPos[i][j],\n\t\t\t\t\t\tthis.tableYPos[i][j],\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.bringToTop, moveID, 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\tthis.tableXPos[i + 1][j + 1],\n\t\t\t\t\t\tthis.tableYPos[i + 1][j + 1],\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.delete, moveID);\n\t\t\t\t\tthis.unhighlight(5, 0);\n\t\t\t\t\tthis.unhighlight(5, 1);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1 - 1][j + 1 - 1], 0);\n\t\t\t\t\tthis.tableVals[i + 1][j + 1] = this.tableVals[i][j] + 1;\n\t\t\t\t\tthis.cmd(act.setText, this.tableID[i + 1][j + 1], this.tableVals[i + 1][j + 1]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlight(7, 0);\n\t\t\t\t\tthis.highlight(7, 1);\n\t\t\t\t\tthis.highlight(7, 2);\n\t\t\t\t\tthis.highlight(7, 3);\n\t\t\t\t\tthis.highlight(7, 4);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i][j + 1], 1);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j], 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t\t'Mismatch, copy greatest value from left or above',\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tthis.unhighlight(7, 0);\n\t\t\t\t\tthis.unhighlight(7, 2);\n\t\t\t\t\tthis.unhighlight(7, 4);\n\n\t\t\t\t\tif (this.tableVals[i][j + 1] > this.tableVals[i + 1][j]) {\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j], 0);\n\t\t\t\t\t\tthis.unhighlight(7, 1);\n\n\t\t\t\t\t\tthis.tableVals[i + 1][j + 1] = this.tableVals[i][j + 1];\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\t\tthis.tableVals[i][j + 1],\n\t\t\t\t\t\t\tthis.tableXPos[i][j + 1],\n\t\t\t\t\t\t\tthis.tableYPos[i][j + 1],\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.unhighlight(7, 3);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i][j + 1], 0);\n\t\t\t\t\t\tthis.tableVals[i + 1][j + 1] = this.tableVals[i + 1][j];\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\t\tthis.tableVals[i + 1][j],\n\t\t\t\t\t\t\tthis.tableXPos[i + 1][j],\n\t\t\t\t\t\t\tthis.tableYPos[i + 1][j],\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.cmd(act.bringToTop, moveID, 1);\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tmoveID,\n\t\t\t\t\t\tthis.tableXPos[i + 1][j + 1],\n\t\t\t\t\t\tthis.tableYPos[i + 1][j + 1],\n\t\t\t\t\t);\n\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\tthis.cmd(act.setText, this.tableID[i + 1][j + 1], this.tableVals[i + 1][j + 1]);\n\t\t\t\t\tthis.cmd(act.delete, moveID);\n\t\t\t\t\tif (this.tableVals[i][j + 1] > this.tableVals[i + 1][j]) {\n\t\t\t\t\t\tthis.unhighlight(7, 3);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i][j + 1], 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.unhighlight(7, 1);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j], 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.cmd(act.setHighlight, this.tableID[i + 1][j + 1], 0);\n\t\t\t}\n\t\t}\n\n\t\tthis.highlight(9, 0);\n\t\tthis.highlight(10, 0);\n\t\tthis.highlight(11, 0);\n\t\tthis.highlight(12, 0);\n\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Finished building table, can now find LCS');\n\t\tthis.cmd(act.step);\n\n\t\tthis.buildLCSFromTable(str1, str2);\n\n\t\tthis.unhighlight(24, 0);\n\t\tthis.highlight(25, 0);\n\t\tthis.cmd(act.setText, this.infoLabelID, 'Done');\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(25, 0);\n\n\t\treturn this.commands;\n\t}\n\n\tbuildTable(str1, str2) {\n\t\tconst x = str1.length;\n\t\tconst y = str2.length;\n\t\tthis.tableID = new Array(x + 1);\n\t\tthis.tableVals = new Array(x + 1);\n\t\tthis.tableXPos = new Array(x + 1);\n\t\tthis.tableYPos = new Array(x + 1);\n\n\t\tlet i, j;\n\n\t\tthis.S1TableID = new Array(x);\n\t\tfor (i = 0; i <= x; i++) {\n\t\t\tif (i > 0) {\n\t\t\t\tthis.S1TableID[i - 1] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.S1TableID[i - 1],\n\t\t\t\t\tstr1.charAt(i - 1),\n\t\t\t\t\tTABLE_START_X + i * TABLE_ELEM_WIDTH,\n\t\t\t\t\tTABLE_START_Y - 2 * TABLE_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t\tthis.oldIDs.push(this.S1TableID[i - 1]);\n\t\t\t}\n\t\t\tconst index = this.nextIndex++;\n\t\t\tthis.oldIDs.push(index);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tindex,\n\t\t\t\ti - 1 === -1 ? '\\u2205' : i - 1,\n\t\t\t\tTABLE_START_X + i * TABLE_ELEM_WIDTH,\n\t\t\t\tTABLE_START_Y - 1 * TABLE_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, index, '#0000FF');\n\t\t}\n\n\t\tthis.S2TableID = new Array(y);\n\t\tfor (i = 0; i <= y; i++) {\n\t\t\tif (i > 0) {\n\t\t\t\tthis.S2TableID[i - 1] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tthis.S2TableID[i - 1],\n\t\t\t\t\tstr2.charAt(i - 1),\n\t\t\t\t\tTABLE_START_X - 2 * TABLE_ELEM_WIDTH,\n\t\t\t\t\tTABLE_START_Y + i * TABLE_ELEM_HEIGHT,\n\t\t\t\t);\n\t\t\t\tthis.oldIDs.push(this.S2TableID[i - 1]);\n\t\t\t}\n\t\t\tconst index = this.nextIndex++;\n\t\t\tthis.oldIDs.push(index);\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tindex,\n\t\t\t\ti - 1 === -1 ? '\\u2205' : i - 1,\n\t\t\t\tTABLE_START_X - 1 * TABLE_ELEM_WIDTH,\n\t\t\t\tTABLE_START_Y + i * TABLE_ELEM_HEIGHT,\n\t\t\t);\n\t\t\tthis.cmd(act.setForegroundColor, index, '#0000FF');\n\t\t}\n\n\t\tfor (i = 0; i <= x; i++) {\n\t\t\tthis.tableID[i] = new Array(y + 1);\n\t\t\tthis.tableVals[i] = new Array(y + 1);\n\t\t\tthis.tableXPos[i] = new Array(y + 1);\n\t\t\tthis.tableYPos[i] = new Array(y + 1);\n\n\t\t\tfor (j = 0; j <= y; j++) {\n\t\t\t\tthis.tableID[i][j] = this.nextIndex++;\n\t\t\t\tthis.tableVals[i][j] = -1;\n\t\t\t\tthis.oldIDs.push(this.tableID[i][j]);\n\n\t\t\t\tthis.tableXPos[i][j] = TABLE_START_X + i * TABLE_ELEM_WIDTH;\n\t\t\t\tthis.tableYPos[i][j] = TABLE_START_Y + j * TABLE_ELEM_HEIGHT;\n\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.tableID[i][j],\n\t\t\t\t\t'',\n\t\t\t\t\tTABLE_ELEM_WIDTH,\n\t\t\t\t\tTABLE_ELEM_HEIGHT,\n\t\t\t\t\tthis.tableXPos[i][j],\n\t\t\t\t\tthis.tableYPos[i][j],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearOldIDs() {\n\t\tfor (let i = 0; i < this.oldIDs.length; i++) {\n\t\t\tthis.cmd(act.delete, this.oldIDs[i]);\n\t\t}\n\t\tthis.oldIDs = [];\n\t\tthis.nextIndex = this.initialIndex;\n\t}\n\n\tbuildLCSFromTable(str1, str2) {\n\t\tlet currX = this.tableVals.length - 1;\n\t\tlet currY = this.tableVals[0].length - 1;\n\n\t\tconst sequence = [];\n\n\t\tconst header = this.nextIndex++;\n\t\tthis.oldIDs.push(header);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\theader,\n\t\t\t'Longest Common Subsequence:',\n\t\t\tSEQUENCE_START_X,\n\t\t\tSEQUENCE_START_Y - 25,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(act.setForegroundColor, header, '#003300');\n\n\t\tfor (let i = 1; i <= str1.length; i++) {\n\t\t\tfor (let j = 1; j <= str2.length; j++) {\n\t\t\t\tconst topThick = this.tableVals[i][j] !== this.tableVals[i][j - 1];\n\t\t\t\tconst leftThick = this.tableVals[i][j] !== this.tableVals[i - 1][j];\n\t\t\t\tif (topThick || leftThick) {\n\t\t\t\t\tthis.cmd(act.setRectangleEdgeThickness, this.tableID[i][j], [\n\t\t\t\t\t\ttopThick,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tleftThick,\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.step);\n\t\tthis.unhighlight(9, 0);\n\t\tthis.unhighlight(10, 0);\n\t\tthis.unhighlight(11, 0);\n\t\tthis.unhighlight(12, 0);\n\n\t\twhile (currX > 0 && currY > 0) {\n\t\t\tthis.cmd(act.setBackgroundColor, this.tableID[currX][currY], LCS_CELL_COLOR);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.unhighlight(14, 1);\n\t\t\tthis.unhighlight(15, 1);\n\t\t\tfor (let i = 16; i < 24; i++) {\n\t\t\t\tthis.unhighlight(i, 0);\n\t\t\t}\n\n\t\t\tthis.highlight(14, 1);\n\t\t\tthis.cmd(act.setHighlight, this.tableID[currX - 1][currY], 1);\n\t\t\tthis.cmd(act.setHighlight, this.tableID[currX][currY - 1], 1);\n\t\t\tthis.cmd(act.step);\n\n\t\t\tthis.unhighlight(14, 1);\n\t\t\tthis.cmd(act.setHighlight, this.tableID[currX - 1][currY], 0);\n\t\t\tthis.cmd(act.setHighlight, this.tableID[currX][currY - 1], 0);\n\n\t\t\tif (this.tableVals[currX - 1][currY] === this.tableVals[currX][currY - 1]) {\n\t\t\t\tthis.highlight(15, 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.tableID[currX][currY], 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.tableID[currX - 1][currY - 1], 1);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.unhighlight(15, 1);\n\n\t\t\t\tthis.cmd(act.setHighlight, this.tableID[currX][currY], 0);\n\t\t\t\tthis.cmd(act.setHighlight, this.tableID[currX - 1][currY - 1], 0);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.tableVals[currX - 1][currY] === this.tableVals[currX][currY - 1] &&\n\t\t\t\tthis.tableVals[currX - 1][currY] !== this.tableVals[currX][currY]\n\t\t\t) {\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[currX - 1], 1);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[currY - 1], 1);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.setText,\n\t\t\t\t\tthis.infoLabelID,\n\t\t\t\t\t'Hit a corner, move diagonally and add current character to LCS',\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\tthis.cmd(act.setHighlight, this.S1TableID[currX - 1], 0);\n\t\t\t\tthis.cmd(act.setHighlight, this.S2TableID[currY - 1], 0);\n\t\t\t} else {\n\t\t\t\tif (this.tableVals[currX - 1][currY] > this.tableVals[currX][currY - 1]) {\n\t\t\t\t\tthis.highlight(20, 1);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[currX - 1][currY], 1);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[currX][currY - 1], 1);\n\t\t\t\t\tthis.cmd(act.step);\n\n\t\t\t\t\tthis.unhighlight(20, 1);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[currX - 1][currY], 0);\n\t\t\t\t\tthis.cmd(act.setHighlight, this.tableID[currX][currY - 1], 0);\n\t\t\t\t\tthis.highlight(21, 0);\n\n\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Move left');\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlight(23, 0);\n\n\t\t\t\t\tthis.cmd(act.setText, this.infoLabelID, 'Move up');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.tableVals[currX - 1][currY] === this.tableVals[currX][currY - 1] &&\n\t\t\t\tthis.tableVals[currX - 1][currY] !== this.tableVals[currX][currY]\n\t\t\t) {\n\t\t\t\tconst nextSequenceID = this.nextIndex++;\n\t\t\t\tthis.oldIDs.push(nextSequenceID);\n\t\t\t\tsequence.push(nextSequenceID);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createLabel,\n\t\t\t\t\tnextSequenceID,\n\t\t\t\t\tstr1.charAt(currX - 1),\n\t\t\t\t\tSEQUENCE_START_X + (sequence.length - 1) * SEQUENCE_DELTA_X + 4,\n\t\t\t\t\tSEQUENCE_START_Y,\n\t\t\t\t);\n\t\t\t\tthis.cmd(act.setForegroundColor, nextSequenceID, '#0000FF');\n\n\t\t\t\tfor (let i = sequence.length - 1; i >= 0; i--) {\n\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\tact.move,\n\t\t\t\t\t\tsequence[i],\n\t\t\t\t\t\tSEQUENCE_START_X + (sequence.length - 1 - i) * SEQUENCE_DELTA_X + 4,\n\t\t\t\t\t\tSEQUENCE_START_Y,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.highlight(16, 0);\n\t\t\t\tthis.highlight(17, 0);\n\t\t\t\tthis.highlight(18, 0);\n\n\t\t\t\tcurrX = currX - 1;\n\t\t\t\tcurrY = currY - 1;\n\t\t\t} else {\n\t\t\t\tif (this.tableVals[currX - 1][currY] > this.tableVals[currX][currY - 1]) {\n\t\t\t\t\tcurrX = currX - 1;\n\t\t\t\t\tthis.highlight(21, 0);\n\t\t\t\t} else {\n\t\t\t\t\tcurrY = currY - 1;\n\t\t\t\t\tthis.highlight(23, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (let i = 16; i < 24; i++) {\n\t\t\tthis.unhighlight(i, 0);\n\t\t}\n\t\tthis.highlight(24, 0);\n\t\tthis.cmd(act.step);\n\t}\n\n\thighlight(ind1, ind2) {\n\t\tthis.cmd(act.setForegroundColor, this.codeID[ind1][ind2], CODE_HIGHLIGHT_COLOR);\n\t}\n\n\tunhighlight(ind1, ind2) {\n\t\tthis.cmd(act.setForegroundColor, this.codeID[ind1][ind2], CODE_STANDARD_COLOR);\n\t}\n\n\tenableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = false;\n\t\t}\n\t}\n\n\tdisableUI() {\n\t\tfor (let i = 0; i < this.controls.length; i++) {\n\t\t\tthis.controls[i].disabled = true;\n\t\t}\n\t}\n}\n","// Copyright 2011 David Galles, University of San Francisco. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without modification, are\n// permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of\n// conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list\n// of conditions and the following disclaimer in the documentation and/or other materials\n// provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY David Galles ``AS IS'' AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// The views and conclusions contained in the software and documentation are those of the\n// authors and should not be interpreted as representing official policies, either expressed\n// or implied, of the University of San Francisco\n\nimport Graph, { LARGE_SIZE, SMALL_SIZE } from './Graph.js';\nimport { addControlToAlgorithmBar, addDivisorToAlgorithmBar } from './Algorithm.js';\nimport { act } from '../anim/AnimationMain';\n\nconst SMALL_COST_TABLE_WIDTH = 30;\nconst SMALL_COST_TABLE_HEIGHT = 30;\nconst SMALL_COST_TABLE_START_X = 40;\nconst SMALL_COST_TABLE_START_Y = 70;\n\nconst SMALL_PATH_TABLE_WIDTH = 30;\nconst SMALL_PATH_TABLE_HEIGHT = 30;\nconst SMALL_PATH_TABLE_START_X = 330;\nconst SMALL_PATH_TABLE_START_Y = 70;\n\nconst SMALL_NODE_1_X_POS = 50;\nconst SMALL_NODE_1_Y_POS = 400;\nconst SMALL_NODE_2_X_POS = 150;\nconst SMALL_NODE_2_Y_POS = 350;\nconst SMALL_NODE_3_X_POS = 250;\nconst SMALL_NODE_3_Y_POS = 400;\n\nconst SMALL_MESSAGE_X = 400;\nconst SMALL_MESSAGE_Y = 350;\n\nconst LARGE_COST_TABLE_WIDTH = 20;\nconst LARGE_COST_TABLE_HEIGHT = 20;\nconst LARGE_COST_TABLE_START_X = 40;\nconst LARGE_COST_TABLE_START_Y = 50;\n\nconst LARGE_PATH_TABLE_WIDTH = 20;\nconst LARGE_PATH_TABLE_HEIGHT = 20;\nconst LARGE_PATH_TABLE_START_X = 500;\nconst LARGE_PATH_TABLE_START_Y = 50;\n\nconst LARGE_NODE_1_X_POS = 50;\nconst LARGE_NODE_1_Y_POS = 500;\nconst LARGE_NODE_2_X_POS = 150;\nconst LARGE_NODE_2_Y_POS = 450;\nconst LARGE_NODE_3_X_POS = 250;\nconst LARGE_NODE_3_Y_POS = 500;\n\nconst LARGE_MESSAGE_X = 300;\nconst LARGE_MESSAGE_Y = 450;\n\nexport default class Floyd extends Graph {\n\tconstructor(am, w, h) {\n\t\tsuper(am, w, h, [], false, false, true);\n\t\tthis.addControls();\n\t}\n\n\taddControls() {\n\t\tthis.startButton = addControlToAlgorithmBar('Button', 'Run');\n\t\tthis.startButton.onclick = this.startCallback.bind(this);\n\n\t\taddDivisorToAlgorithmBar();\n\n\t\tsuper.addControls();\n\t\tthis.smallGraphButton.onclick = this.smallGraphCallback.bind(this);\n\t\tthis.largeGraphButton.onclick = this.largeGraphCallback.bind(this);\n\t}\n\n\treset() {\n\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tthis.costTable[i][j] = this.adj_matrix[i][j];\n\t\t\t\tif (this.costTable[i][j] >= 0) {\n\t\t\t\t\tthis.pathTable[i][j] = i;\n\t\t\t\t} else {\n\t\t\t\t\tthis.pathTable[i][j] = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsmallGraphCallback() {\n\t\tif (this.size !== SMALL_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\tthis.animationManager.setAllLayers([0, this.currentLayer]);\n\t\t\tthis.logicalButton.disabled = false;\n\t\t\tthis.adjacencyListButton.disabled = false;\n\t\t\tthis.adjacencyMatrixButton.disabled = false;\n\t\t\tthis.setup_small();\n\t\t}\n\t}\n\n\tlargeGraphCallback() {\n\t\tif (this.size !== LARGE_SIZE) {\n\t\t\tthis.animationManager.resetAll();\n\t\t\t//this.animationManager.setAllLayers([0]);\n\t\t\tthis.logicalButton.disabled = true;\n\t\t\tthis.adjacencyListButton.disabled = true;\n\t\t\tthis.adjacencyMatrixButton.disabled = true;\n\t\t\tthis.setup_large();\n\t\t}\n\t}\n\n\tgetCostLabel(value, alwaysUseINF) {\n\t\talwaysUseINF = alwaysUseINF === undefined ? false : alwaysUseINF;\n\t\tif (value >= 0) {\n\t\t\treturn String(value);\n\t\t} else if (this.size === SMALL_SIZE || alwaysUseINF) {\n\t\t\treturn 'INF';\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tsetup_small() {\n\t\tthis.cost_table_width = SMALL_COST_TABLE_WIDTH;\n\t\tthis.cost_table_height = SMALL_COST_TABLE_HEIGHT;\n\t\tthis.cost_table_start_x = SMALL_COST_TABLE_START_X;\n\t\tthis.cost_table_start_y = SMALL_COST_TABLE_START_Y;\n\n\t\tthis.path_table_width = SMALL_PATH_TABLE_WIDTH;\n\t\tthis.path_table_height = SMALL_PATH_TABLE_HEIGHT;\n\t\tthis.path_table_start_x = SMALL_PATH_TABLE_START_X;\n\t\tthis.path_table_start_y = SMALL_PATH_TABLE_START_Y;\n\n\t\tthis.node_1_x_pos = SMALL_NODE_1_X_POS;\n\t\tthis.node_1_y_pos = SMALL_NODE_1_Y_POS;\n\t\tthis.node_2_x_pos = SMALL_NODE_2_X_POS;\n\t\tthis.node_2_y_pos = SMALL_NODE_2_Y_POS;\n\t\tthis.node_3_x_pos = SMALL_NODE_3_X_POS;\n\t\tthis.node_3_y_pos = SMALL_NODE_3_Y_POS;\n\n\t\tthis.message_x = SMALL_MESSAGE_X;\n\t\tthis.message_y = SMALL_MESSAGE_Y;\n\t\tsuper.setup_small();\n\t}\n\n\tsetup_large() {\n\t\tthis.cost_table_width = LARGE_COST_TABLE_WIDTH;\n\t\tthis.cost_table_height = LARGE_COST_TABLE_HEIGHT;\n\t\tthis.cost_table_start_x = LARGE_COST_TABLE_START_X;\n\t\tthis.cost_table_start_y = LARGE_COST_TABLE_START_Y;\n\n\t\tthis.path_table_width = LARGE_PATH_TABLE_WIDTH;\n\t\tthis.path_table_height = LARGE_PATH_TABLE_HEIGHT;\n\t\tthis.path_table_start_x = LARGE_PATH_TABLE_START_X;\n\t\tthis.path_table_start_y = LARGE_PATH_TABLE_START_Y;\n\n\t\tthis.node_1_x_pos = LARGE_NODE_1_X_POS;\n\t\tthis.node_1_y_pos = LARGE_NODE_1_Y_POS;\n\t\tthis.node_2_x_pos = LARGE_NODE_2_X_POS;\n\t\tthis.node_2_y_pos = LARGE_NODE_2_Y_POS;\n\t\tthis.node_3_x_pos = LARGE_NODE_3_X_POS;\n\t\tthis.node_3_y_pos = LARGE_NODE_3_Y_POS;\n\n\t\tthis.message_x = LARGE_MESSAGE_X;\n\t\tthis.message_y = LARGE_MESSAGE_Y;\n\n\t\tsuper.setup_large();\n\t}\n\n\tsetup() {\n\t\tsuper.setup();\n\t\tthis.commands = [];\n\n\t\tthis.costTable = new Array(this.size);\n\t\tthis.pathTable = new Array(this.size);\n\t\tthis.costTableID = new Array(this.size);\n\t\tthis.pathTableID = new Array(this.size);\n\t\tthis.pathIndexXID = new Array(this.size);\n\t\tthis.pathIndexYID = new Array(this.size);\n\t\tthis.costIndexXID = new Array(this.size);\n\t\tthis.costIndexYID = new Array(this.size);\n\n\t\tthis.node1ID = this.nextIndex++;\n\t\tthis.node2ID = this.nextIndex++;\n\t\tthis.node3ID = this.nextIndex++;\n\n\t\tlet i;\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.costTable[i] = new Array(this.size);\n\t\t\tthis.pathTable[i] = new Array(this.size);\n\t\t\tthis.costTableID[i] = new Array(this.size);\n\t\t\tthis.pathTableID[i] = new Array(this.size);\n\t\t}\n\n\t\tconst costTableHeader = this.nextIndex++;\n\t\tconst pathTableHeader = this.nextIndex++;\n\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tcostTableHeader,\n\t\t\t'Cost Table',\n\t\t\tthis.cost_table_start_x,\n\t\t\tthis.cost_table_start_y - 2 * this.cost_table_height,\n\t\t\t0,\n\t\t);\n\t\tthis.cmd(\n\t\t\tact.createLabel,\n\t\t\tpathTableHeader,\n\t\t\t'Path Table',\n\t\t\tthis.path_table_start_x,\n\t\t\tthis.path_table_start_y - 2 * this.path_table_height,\n\t\t\t0,\n\t\t);\n\n\t\tfor (i = 0; i < this.size; i++) {\n\t\t\tthis.pathIndexXID[i] = this.nextIndex++;\n\t\t\tthis.pathIndexYID[i] = this.nextIndex++;\n\t\t\tthis.costIndexXID[i] = this.nextIndex++;\n\t\t\tthis.costIndexYID[i] = this.nextIndex++;\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.pathIndexXID[i],\n\t\t\t\ti,\n\t\t\t\tthis.path_table_start_x + i * this.path_table_width,\n\t\t\t\tthis.path_table_start_y - this.path_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.pathIndexXID[i], '#0000FF');\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.pathIndexYID[i],\n\t\t\t\ti,\n\t\t\t\tthis.path_table_start_x - this.path_table_width,\n\t\t\t\tthis.path_table_start_y + i * this.path_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.pathIndexYID[i], '#0000FF');\n\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.costIndexXID[i],\n\t\t\t\ti,\n\t\t\t\tthis.cost_table_start_x + i * this.cost_table_width,\n\t\t\t\tthis.cost_table_start_y - this.cost_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.costIndexXID[i], '#0000FF');\n\t\t\tthis.cmd(\n\t\t\t\tact.createLabel,\n\t\t\t\tthis.costIndexYID[i],\n\t\t\t\ti,\n\t\t\t\tthis.cost_table_start_x - this.cost_table_width,\n\t\t\t\tthis.cost_table_start_y + i * this.cost_table_height,\n\t\t\t);\n\t\t\tthis.cmd(act.setTextColor, this.costIndexYID[i], '#0000FF');\n\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\tthis.costTable[i][j] = this.adj_matrix[i][j];\n\t\t\t\tif (this.costTable[i][j] >= 0) {\n\t\t\t\t\tthis.pathTable[i][j] = i;\n\t\t\t\t} else {\n\t\t\t\t\tthis.pathTable[i][j] = -1;\n\t\t\t\t}\n\t\t\t\tthis.costTableID[i][j] = this.nextIndex++;\n\t\t\t\tthis.pathTableID[i][j] = this.nextIndex++;\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.costTableID[i][j],\n\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true),\n\t\t\t\t\tthis.cost_table_width,\n\t\t\t\t\tthis.cost_table_height,\n\t\t\t\t\tthis.cost_table_start_x + j * this.cost_table_width,\n\t\t\t\t\tthis.cost_table_start_y + i * this.cost_table_height,\n\t\t\t\t);\n\t\t\t\tthis.cmd(\n\t\t\t\t\tact.createRectangle,\n\t\t\t\t\tthis.pathTableID[i][j],\n\t\t\t\t\tthis.pathTable[i][j],\n\t\t\t\t\tthis.path_table_width,\n\t\t\t\t\tthis.path_table_height,\n\t\t\t\t\tthis.path_table_start_x + j * this.path_table_width,\n\t\t\t\t\tthis.path_table_start_y + i * this.path_table_height,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.animationManager.startNewAnimation(this.commands);\n\t\tthis.animationManager.skipForward();\n\t\tthis.animationManager.clearHistory();\n\t\tif (this.size === LARGE_SIZE) {\n\t\t\tthis.animationManager.setAllLayers([0]);\n\t\t}\n\t}\n\n\tstartCallback() {\n\t\tthis.implementAction(this.doFloydWarshall.bind(this));\n\t}\n\n\tdoFloydWarshall() {\n\t\tthis.commands = [];\n\n\t\tconst oldIndex = this.nextIndex;\n\t\tconst messageID = this.nextIndex++;\n\t\tconst moveLabel1ID = this.nextIndex++;\n\t\tconst moveLabel2ID = this.nextIndex++;\n\n\t\tthis.cmd(act.createCircle, this.node1ID, '', this.node_1_x_pos, this.node_1_y_pos);\n\t\tthis.cmd(act.createCircle, this.node2ID, '', this.node_2_x_pos, this.node_2_y_pos);\n\t\tthis.cmd(act.createCircle, this.node3ID, '', this.node_3_x_pos, this.node_3_y_pos);\n\t\tthis.cmd(act.createLabel, messageID, '', this.message_x, this.message_y, 0);\n\n\t\tfor (let k = 0; k < this.size; k++) {\n\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\t\tif (i !== j && j !== k && i !== k) {\n\t\t\t\t\t\tthis.cmd(act.setText, this.node1ID, i);\n\t\t\t\t\t\tthis.cmd(act.setText, this.node2ID, k);\n\t\t\t\t\t\tthis.cmd(act.setText, this.node3ID, j);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.node1ID,\n\t\t\t\t\t\t\tthis.node2ID,\n\t\t\t\t\t\t\t'#009999',\n\t\t\t\t\t\t\t-0.1,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.node2ID,\n\t\t\t\t\t\t\tthis.node3ID,\n\t\t\t\t\t\t\t'#9900CC',\n\t\t\t\t\t\t\t-0.1,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\tact.connect,\n\t\t\t\t\t\t\tthis.node1ID,\n\t\t\t\t\t\t\tthis.node3ID,\n\t\t\t\t\t\t\t'#CC0000',\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][k], 1);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[k][j], 1);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][j], 1);\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][k], '#009999');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[k][j], '#9900CC');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][j], '#CC0000');\n\t\t\t\t\t\tif (this.costTable[i][k] >= 0 && this.costTable[k][j] >= 0) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tthis.costTable[i][j] < 0 ||\n\t\t\t\t\t\t\t\tthis.costTable[i][k] + this.costTable[k][j] < this.costTable[i][j]\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tmessageID,\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true) +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true) +\n\t\t\t\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.costTable[i][j] = this.costTable[i][k] + this.costTable[k][j];\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.pathTableID[i][j], '');\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.costTableID[i][j], '');\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tmoveLabel1ID,\n\t\t\t\t\t\t\t\t\tthis.pathTable[k][j],\n\t\t\t\t\t\t\t\t\tthis.path_table_start_x + j * this.path_table_width,\n\t\t\t\t\t\t\t\t\tthis.path_table_start_y + k * this.path_table_height,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\tmoveLabel1ID,\n\t\t\t\t\t\t\t\t\tthis.path_table_start_x + j * this.path_table_width,\n\t\t\t\t\t\t\t\t\tthis.path_table_start_y + i * this.path_table_height,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.createLabel,\n\t\t\t\t\t\t\t\t\tmoveLabel2ID,\n\t\t\t\t\t\t\t\t\tthis.costTable[i][j],\n\t\t\t\t\t\t\t\t\tthis.message_x,\n\t\t\t\t\t\t\t\t\tthis.message_y,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.setHighlight, moveLabel2ID, 1);\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.move,\n\t\t\t\t\t\t\t\t\tmoveLabel2ID,\n\t\t\t\t\t\t\t\t\tthis.cost_table_start_x + j * this.cost_table_width,\n\t\t\t\t\t\t\t\t\tthis.cost_table_start_y + i * this.cost_table_height,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.pathTable[i][j] = this.pathTable[k][j];\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.costTableID[i][j], this.costTable[i][j]);\n\t\t\t\t\t\t\t\tthis.cmd(act.setText, this.pathTableID[i][j], this.pathTable[i][j]);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, moveLabel1ID);\n\t\t\t\t\t\t\t\tthis.cmd(act.delete, moveLabel2ID);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\t\tmessageID,\n\t\t\t\t\t\t\t\t\t'!(' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true) +\n\t\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true) +\n\t\t\t\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true) +\n\t\t\t\t\t\t\t\t\t\t')',\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cmd(\n\t\t\t\t\t\t\t\tact.setText,\n\t\t\t\t\t\t\t\tmessageID,\n\t\t\t\t\t\t\t\t'!(' +\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][k], true) +\n\t\t\t\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[k][j], true) +\n\t\t\t\t\t\t\t\t\t' < ' +\n\t\t\t\t\t\t\t\t\tthis.getCostLabel(this.costTable[i][j], true) +\n\t\t\t\t\t\t\t\t\t')',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.cmd(act.step);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][k], '#000000');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[k][j], '#000000');\n\t\t\t\t\t\tthis.cmd(act.setTextColor, this.costTableID[i][j], '#000000');\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.node1ID, this.node2ID);\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.node2ID, this.node3ID);\n\t\t\t\t\t\tthis.cmd(act.disconnect, this.node1ID, this.node3ID);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][k], 0);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[k][j], 0);\n\t\t\t\t\t\tthis.cmd(act.setHighlight, this.costTableID[i][j], 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.cmd(act.delete, this.node1ID);\n\t\tthis.cmd(act.delete, this.node2ID);\n\t\tthis.cmd(act.delete, this.node3ID);\n\t\tthis.cmd(act.delete, messageID);\n\t\tthis.nextIndex = oldIndex;\n\n\t\treturn this.commands;\n\t}\n}\n","import React from 'react';\n\n// Include the ClassName of algorithms that should have an example modal\nexport default {\n\tAVL: (\n\t\t<ul>\n\t\t\t<li>To cause a left rotation, add 1, 2 and 3, in that order</li>\n\t\t\t<li>To cause a right rotation, add 3, 2 and 1, in that order</li>\n\t\t\t<li>To cause a left-right rotation, add 3, 1 and 2, in that order</li>\n\t\t\t<li>To cause a right-left rotation, add 1, 3 and 2, in that order</li>\n\t\t</ul>\n\t),\n\tBoyerMoore: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a text with only one letter and a pattern with that\n\t\t\t\tsame letter, but a different first letter (for example, &quot;aaaaaaaaa&quot; for\n\t\t\t\ttext and &quot;baaaa&quot; for pattern), since we will only mismatch on the last\n\t\t\t\tcomparison\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tWhen incorporating the Galil Rule, we can use logic similar to that of KMP to\n\t\t\t\toptimize our shifts. After finding a full match, instead of shifting by 1 we shift\n\t\t\t\tby the period <i>k</i>. After that shift, we don't need to compare the first{' '}\n\t\t\t\t<i>k</i> characters in the pattern because we've already compared them and know that\n\t\t\t\tthey match!\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tBruteForce: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a text with only one letter and a pattern with that\n\t\t\t\tsame letter, but a different last letter (for example, &quot;aaaaaaaaa&quot; for\n\t\t\t\ttext and &quot;aaaab&quot; for pattern), since we will only mismatch on the last\n\t\t\t\tcomparison\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tBST: (\n\t\t<ul>\n\t\t\t<li>To get a degenerate BST, you can add ascending data, such as 1, 2, 3, ...</li>\n\t\t\t<li>To get a full BST, you can add 2, 1, 4, 3, 5, in that order</li>\n\t\t\t<li>To get a complete BST, you can add 3, 2, 4, 1, in that order</li>\n\t\t\t<li>To get a full and complete BST, you can add 4, 2, 5, 1, 3, in that order</li>\n\t\t</ul>\n\t),\n\tBTree: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tTo cause overflow and trigger a promotion, add more than 3 data (for example 1, 2, 3\n\t\t\t\tand 4)\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTo remove from a leaf node, add 1, 2, 3 and 4, in that order, then remove 3 or 4\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTo remove from an inner node and use the predecessor, add 1, 3, 4, 5 and 2, in that\n\t\t\t\torder, then remove 3\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTo cause underflow and trigger a rotation/transfer, add 1, 2, 3 and 4, in that\n\t\t\t\torder, then remove 1\n\t\t\t</li>\n\t\t\t<li>To cause underflow and trigger a fusion, follow the steps above then remove 2</li>\n\t\t</ul>\n\t),\n\tBubbleSort: (\n\t\t<ul>\n\t\t\t<li>The best case is when we have a sorted array (terminates if no swaps are made)</li>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a reverse sorted array (we perform\n\t\t\t\t<p className=\"equation\">\n\t\t\t\t\tn + (n - 1) + (n - 2) + ... = n<sup>2</sup>\n\t\t\t\t</p>\n\t\t\t\tcomparisons)\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tCocktailSort: (\n\t\t<ul>\n\t\t\t<li>The best case is when we have a sorted array (terminates if no swaps are made)</li>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a reverse sorted array (we perform\n\t\t\t\t<p className=\"equation\">\n\t\t\t\t\tn + (n - 1) + (n - 2) + ... = n<sup>2</sup>\n\t\t\t\t</p>\n\t\t\t\tcomparisons)\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tEven though Cocktail Shaker Sort has the same big-O as Bubble Sort, it is still\n\t\t\t\tfaster; one case where it significantly outperforms Bubble Sort is when we have a\n\t\t\t\tsorted array, except for the last element which is the smallest, for example [2, 3,\n\t\t\t\t4, 5, 6, 7, 8, 9, 1]\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tInsertionSort: (\n\t\t<ul>\n\t\t\t<li>The best case is when we have a sorted array (terminates if no swaps are made)</li>\n\t\t\t<li>\n\t\t\t\tThe worst case is when we have a reverse sorted array (we perform\n\t\t\t\t<p className=\"equation\">\n\t\t\t\t\tn + (n - 1) + (n - 2) + ... = n<sup>2</sup>\n\t\t\t\t</p>\n\t\t\t\tcomparisons)\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tQuickSelect: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case occurs when we pick a bad pivot everytime (for example, the smallest\n\t\t\t\tor largest element), since we can no longer subvide the array\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tQuickSort: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe worst case occurs when we pick a bad pivot everytime (for example, the smallest\n\t\t\t\tor largest element), since we can no longer subvide the array and the algorithms\n\t\t\t\tbecomes similar to Selection Sort\n\t\t\t</li>\n\t\t</ul>\n\t),\n\tSkipList: (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tYou can get a degenerate SkipList by always adding with a constant amount of heads,\n\t\t\t\tfor example 0 or 4.\n\t\t\t</li>\n\t\t</ul>\n\t),\n};\n","import '../css/AlgoScreen.css';\nimport '../css/App.css';\nimport AnimationManager from '../anim/AnimationMain';\nimport Footer from '../components/Footer';\nimport Header from '../components/Header';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactGA from 'react-ga';\nimport { algoMap } from '../AlgoList';\nimport modals from '../examples/ExampleModals';\nimport { Toggle } from 'react-hook-theme';\nimport 'react-hook-theme/dist/styles/style.css';\n\nclass AlgoScreen extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tconst algoName = props.location.pathname.slice(1);\n\t\tthis.canvasRef = React.createRef();\n\t\tthis.animBarRef = React.createRef();\n\n\t\tthis.state = {\n\t\t\talgoName: algoName,\n\t\t\texamplesEnabled: false,\n\t\t\twidth: 0,\n\t\t};\n\t\tReactGA.pageview(algoName);\n\t}\n\n\tcomponentDidMount() {\n\t\tif (algoMap[this.state.algoName]) {\n\t\t\tthis.animManag = new AnimationManager(this.canvasRef, this.animBarRef);\n\n\t\t\tthis.currentAlg = new algoMap[this.state.algoName][1](\n\t\t\t\tthis.animManag,\n\t\t\t\tthis.canvasRef.current.width,\n\t\t\t\tthis.canvasRef.current.height,\n\t\t\t);\n\t\t\twindow.addEventListener('resize', this.updateDimensions);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tupdateDimensions = () => {\n\t\tthis.animManag.changeSize(document.body.clientWidth);\n\t};\n\n\trender() {\n\t\tconst algoName = this.state.algoName;\n\t\tif (!algoMap[algoName]) {\n\t\t\treturn (\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<Header />\n\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t<div className=\"four-o-four\">\n\t\t\t\t\t\t\t<h1>404!</h1>\n\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\tAlgorithm not found! Click <Link to=\"/\">here</Link> to return to the\n\t\t\t\t\t\t\t\thome screen and choose another algorithm.\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Footer />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst header = algoMap[algoName][2] ? algoMap[algoName][2] : algoMap[algoName][0];\n\t\treturn (\n\t\t\t<div className=\"VisualizationMainPage\">\n\t\t\t\t<div id=\"container\">\n\t\t\t\t\t<div id=\"header\">\n\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t<Link to=\"/\">&#x3008;</Link>&nbsp;&nbsp;{header}\n\t\t\t\t\t\t\t<div id='toggle'>\n\t\t\t\t\t\t\t\t<Toggle />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div id=\"mainContent\">\n\t\t\t\t\t\t<div id=\"algoControlSection\">\n\t\t\t\t\t\t\t<table id=\"AlgorithmSpecificControls\"></table>\n\t\t\t\t\t\t\t{modals[algoName] && (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={this.state.examplesEnabled ? 'selected' : ''}\n\t\t\t\t\t\t\t\t\tid=\"examplesButton\"\n\t\t\t\t\t\t\t\t\tonClick={this.toggleExamples}\n\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"viewport\">\n\t\t\t\t\t\t\t<canvas\n\t\t\t\t\t\t\t\tid=\"canvas\"\n\t\t\t\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\t\t\t\theight=\"505\"\n\t\t\t\t\t\t\t\tref={this.canvasRef}\n\t\t\t\t\t\t\t></canvas>\n\t\t\t\t\t\t\t{this.state.examplesEnabled && (\n\t\t\t\t\t\t\t\t<div className=\"modal\">\n\t\t\t\t\t\t\t\t\t<div className=\"modal-content\">{modals[algoName]}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div id=\"generalAnimationControlSection\">\n\t\t\t\t\t\t\t<table id=\"GeneralAnimationControls\" ref={this.animBarRef}></table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div id=\"footer\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<Link to=\"/\">Return to Home Page</Link>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\ttoggleExamples = () => this.setState(state => ({ examplesEnabled: !state.examplesEnabled }));\n}\n\nAlgoScreen.propTypes = {\n\tlocation: PropTypes.object,\n};\n\nexport default AlgoScreen;\n","import React from 'react';\n\nconst AboutScreen = () => (\n\t<div className=\"about\">\n\t\t<p>\n\t\t\tThis is a tool to help you visualize and understand the data structures and algorithms\n\t\t\tcovered in Georgia Tech's CS1332 course. It is based on the{' '}\n\t\t\t<a href=\"https://www.cs.usfca.edu/~galles/visualization/about.html\">\n\t\t\t\tData Structures Visualizations website\n\t\t\t</a>{' '}\n\t\t\tby David Gales.\n\t\t</p>\n\t\t<p>\n\t\t\tThe CS1332 Visualization Tool was adapted and expanded by{' '}\n\t\t\t<a href=\"https://rodrigodlpontes.github.io/website/\">Rodrigo Pontes</a>, under the\n\t\t\tsupervision of Dr. Mary Hudachek-Buswell, to include data structures and algorithms\n\t\t\tcovered in the course. It has since received many additions and revisions from{' '}\n\t\t\t<a href=\"https://github.com/RodrigoDLPontes/visualization-tool#contributors-\">\n\t\t\t\tmany other wonderful contributors\n\t\t\t</a>\n\t\t\t.\n\t\t</p>\n\t\t<p>\n\t\t\tIt also includes icons from{' '}\n\t\t\t<a href=\"https://material.io/resources/icons/?style=baseline\">\n\t\t\t\tGoogle&#39;s Material Icons\n\t\t\t</a>\n\t\t\t, and components from <a href=\"https://material-ui.com/\">Material UI </a>\n\t\t\tand <a href='https://www.npmjs.com/package/react-hook-theme/v/1.2.5'>react-hook-theme</a>.\n\t\t</p>\n\t</div>\n);\n\nexport default AboutScreen;\n","import '../css/App.css';\nimport { Link, Route, Switch } from 'react-router-dom';\nimport { algoList, algoMap } from '../AlgoList';\nimport AboutScreen from './AboutScreen';\nimport Footer from '../components/Footer';\nimport Header from '../components/Header';\nimport React from 'react';\n\nconst HomeScreen = () => (\n\t<div className=\"container\">\n\t\t<Header />\n\t\t<div className=\"content\">\n\t\t\t<Switch>\n\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t<div className=\"outer-flex\">\n\t\t\t\t\t\t<div className=\"inner-flex\">\n\t\t\t\t\t\t\t{algoList.map((name, idx) =>\n\t\t\t\t\t\t\t\talgoMap[name] ? (\n\t\t\t\t\t\t\t\t\t<Link to={`/${name}`} key={idx}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"button\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={algoMap[name][0]}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div key={idx} className=\"divider\">\n\t\t\t\t\t\t\t\t\t\t<span>{name}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/about\">\n\t\t\t\t\t<AboutScreen />\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</div>\n\t\t<Footer />\n\t</div>\n);\n\nexport default HomeScreen;\n","import './css/App.css';\nimport { Route, BrowserRouter as Router, Switch } from 'react-router-dom';\nimport AlgoScreen from './screens/AlgoScreen';\nimport HomeScreen from './screens/HomeScreen';\nimport React from 'react';\nimport ReactGA from 'react-ga';\n\nconst App = () => {\n\tReactGA.initialize('UA-164374852-1');\n\tReactGA.pageview('home');\n\n\treturn (\n\t\t<Router basename={process.env.PUBLIC_URL + '/'}>\n\t\t\t<Switch>\n\t\t\t\t<Route exact path={['/', '/about']} component={HomeScreen} />\n\t\t\t\t<Route component={AlgoScreen} />\n\t\t\t</Switch>\n\t\t</Router>\n\t);\n};\n\nexport default App;\n","import App from './App';\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { ThemeProvider } from 'react-hook-theme';\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\")); \nroot.render(\n    <ThemeProvider\n    \toptions={{\n        \ttheme: 'light',\n        \tsave: true,\n    \t}}\n\t>\n        <App />\n    </ThemeProvider>\n);\n"],"sourceRoot":""}